# Comparing `tmp/tdstone2-0.1.2.8-py3-none-any.whl.zip` & `tmp/tdstone2-0.1.2.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,26 +1,26 @@
-Zip file size: 65646 bytes, number of entries: 24
--rw-rw-rw-  2.0 fat       23 b- defN 24-Mar-28 13:03 tdstone2/__init__.py
+Zip file size: 65711 bytes, number of entries: 24
+-rw-rw-rw-  2.0 fat       23 b- defN 24-Apr-02 13:02 tdstone2/__init__.py
 -rw-rw-rw-  2.0 fat     7276 b- defN 24-Mar-27 16:59 tdstone2/data_distribution.py
--rw-rw-rw-  2.0 fat    34526 b- defN 24-Mar-27 16:49 tdstone2/dataset_generation.py
+-rw-rw-rw-  2.0 fat    34370 b- defN 24-Apr-02 13:02 tdstone2/dataset_generation.py
 -rw-rw-rw-  2.0 fat     5605 b- defN 24-Feb-22 09:36 tdstone2/tdscode.py
--rw-rw-rw-  2.0 fat    16436 b- defN 24-Mar-28 16:29 tdstone2/tdsfeature_engineering.py
--rw-rw-rw-  2.0 fat    16609 b- defN 24-Mar-28 16:48 tdstone2/tdshypermodel.py
--rw-rw-rw-  2.0 fat    55850 b- defN 23-Oct-05 10:59 tdstone2/tdsmapper.py
--rw-rw-rw-  2.0 fat     4820 b- defN 23-Aug-31 11:29 tdstone2/tdsmodel.py
+-rw-rw-rw-  2.0 fat    16526 b- defN 24-Apr-02 12:56 tdstone2/tdsfeature_engineering.py
+-rw-rw-rw-  2.0 fat    16688 b- defN 24-Apr-02 12:57 tdstone2/tdshypermodel.py
+-rw-rw-rw-  2.0 fat    55929 b- defN 24-Apr-02 12:58 tdstone2/tdsmapper.py
+-rw-rw-rw-  2.0 fat     4899 b- defN 24-Apr-02 12:58 tdstone2/tdsmodel.py
 -rw-rw-rw-  2.0 fat    18985 b- defN 23-Oct-05 11:34 tdstone2/tdstone.py
 -rw-rw-rw-  2.0 fat    22610 b- defN 24-Mar-27 16:51 tdstone2/utils.py
 -rw-rw-rw-  2.0 fat    12467 b- defN 24-Mar-28 16:06 tdstone2/data/tds_feature_engineering.py
 -rw-rw-rw-  2.0 fat     8737 b- defN 23-Aug-01 06:31 tdstone2/data/tds_feature_engineering_jsonoutput.py
 -rw-rw-rw-  2.0 fat    11030 b- defN 23-Oct-04 21:32 tdstone2/data/tds_feature_engineering_reducer.py
 -rw-rw-rw-  2.0 fat    13367 b- defN 23-Sep-25 16:08 tdstone2/data/tds_scoring.py
 -rw-rw-rw-  2.0 fat    15226 b- defN 23-Sep-25 16:19 tdstone2/data/tds_training.py
 -rw-rw-rw-  2.0 fat        0 b- defN 24-Feb-22 14:09 tdstone2/feature_engineering_maker/__init__.py
 -rw-rw-rw-  2.0 fat     9227 b- defN 24-Feb-22 14:28 tdstone2/feature_engineering_maker/python_script.py
 -rw-rw-rw-  2.0 fat        0 b- defN 24-Feb-20 15:54 tdstone2/model_maker/__init__.py
--rw-rw-rw-  2.0 fat     5279 b- defN 24-Mar-28 15:41 tdstone2/model_maker/feature_engineering.py
+-rw-rw-rw-  2.0 fat     5280 b- defN 24-Mar-29 08:09 tdstone2/model_maker/feature_engineering.py
 -rw-rw-rw-  2.0 fat    33860 b- defN 24-Feb-22 15:45 tdstone2/model_maker/scikit_learn.py
--rw-rw-rw-  2.0 fat     4314 b- defN 24-Mar-28 16:56 tdstone2-0.1.2.8.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 24-Mar-28 16:56 tdstone2-0.1.2.8.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        9 b- defN 24-Mar-28 16:56 tdstone2-0.1.2.8.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     2090 b- defN 24-Mar-28 16:56 tdstone2-0.1.2.8.dist-info/RECORD
-24 files, 298438 bytes uncompressed, 62244 bytes compressed:  79.1%
+-rw-rw-rw-  2.0 fat     4314 b- defN 24-Apr-02 13:02 tdstone2-0.1.2.9.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-Apr-02 13:02 tdstone2-0.1.2.9.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        9 b- defN 24-Apr-02 13:02 tdstone2-0.1.2.9.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     2090 b- defN 24-Apr-02 13:02 tdstone2-0.1.2.9.dist-info/RECORD
+24 files, 298610 bytes uncompressed, 62309 bytes compressed:  79.1%
```

## zipnote {}

```diff
@@ -54,20 +54,20 @@
 
 Filename: tdstone2/model_maker/feature_engineering.py
 Comment: 
 
 Filename: tdstone2/model_maker/scikit_learn.py
 Comment: 
 
-Filename: tdstone2-0.1.2.8.dist-info/METADATA
+Filename: tdstone2-0.1.2.9.dist-info/METADATA
 Comment: 
 
-Filename: tdstone2-0.1.2.8.dist-info/WHEEL
+Filename: tdstone2-0.1.2.9.dist-info/WHEEL
 Comment: 
 
-Filename: tdstone2-0.1.2.8.dist-info/top_level.txt
+Filename: tdstone2-0.1.2.9.dist-info/top_level.txt
 Comment: 
 
-Filename: tdstone2-0.1.2.8.dist-info/RECORD
+Filename: tdstone2-0.1.2.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## tdstone2/__init__.py

```diff
@@ -1 +1 @@
-__version__ = '0.1.2.8'
+__version__ = '0.1.2.9'
```

## tdstone2/dataset_generation.py

```diff
@@ -5,15 +5,15 @@
 import numpy as np
 
 
 from tdstone2.utils import generate_sequence
 def GenerateDataSet(n_x=9, n_f=1, n_partitions=2, n_rows=5,
                     noise_classif=0.01,
                     train_test_split_ratio = 0.2,
-                    database=re.findall(string=str(tdml.get_context().url),pattern=r'DATABASE=(\w+)')[0]):
+                    database=tdml.context.context._get_current_databasename()):
     """
     Generates a multi-partitioned dataset within a Teradata database.
 
     :param n_x: Number of float features. These features are standardized with a zero mean.
     :param n_f: Number of 2-level categorical variables. Levels are 0 and 1.
     :param n_partitions: Number of partitions.
     :param n_rows: Number of rows per partition.
@@ -191,16 +191,15 @@
     elif distribution == 'binomial':
         return f'CASE WHEN RANDOM(1,{total}) < {one_ratio} THEN 1 ELSE 0 END'
 
     return
 
 
 def generaterandomsamples(df, random_params, nb_gen, id_columns='id',
-                          database=re.findall(string=str(tdml.get_context().url),
-                                              pattern=r'DATABASE=(\w+)')[0]):
+                          database=tdml.context.context._get_current_databasename()):
     """
     Generate a SQL query to produce random samples based on input dataframe.
 
     :param df: Input dataframe.
     :param random_params: Random parameters for columns.
     :param nb_gen: Number of times each row should be replicated.
     :param id_columns: Columns serving as ID.
@@ -270,15 +269,15 @@
     # Copy the dataframe to the specified SQL table
     tdml.copy_to_sql(df, table_name=table_name, schema_name=schema_name, if_exists=if_exists)
 
     # Return the data in the table as a dataframe
     return tdml.DataFrame(tdml.in_schema(schema_name, table_name))
 
 
-def generationmultiplesignals(df_params, id_columns='id', id_partition=None, partition_id_number=1,database=re.findall(string=str(tdml.get_context().url),pattern=r'DATABASE=(\w+)')[0]):
+def generationmultiplesignals(df_params, id_columns='id', id_partition=None, partition_id_number=1,database=tdml.context.context._get_current_databasename()):
     """
     Generates synthetic signals based on provided parameters and mathematical functions.
 
     :param df_params: DataFrame or table reference with signal parameters.
     :param id_columns: ID column name.
     :param id_partition: Optional partition column name.
     :param partition_id_number: Default partition ID if `id_partition` is not provided.
@@ -472,15 +471,15 @@
 
     return df_signals.show_query(), ['X', 'Y']
 
 GenerateEquallyDistributedDataSetIoT = EquallyDistributed(GenerateDataSetIoT)
 
 
 
-def GenerateDatasetSeries(table_name, nb_partitions=20000,nb_coeffs=6, noise = 0.01, series_length=120,database=re.findall(string=str(tdml.get_context().url),pattern=r'DATABASE=(\w+)')[0]):
+def GenerateDatasetSeries(table_name, nb_partitions=20000,nb_coeffs=6, noise = 0.01, series_length=120,database=tdml.context.context._get_current_databasename()):
     """
      Generates a series dataset with given parameters and stores the dataset in a table.
 
      :param table_name: Name of the target table where the generated dataset will be stored.
      :param nb_partitions: Number of partitions desired in the dataset. Default is 20000.
      :param nb_coeffs: Number of coefficients for the series. Default is 6.
      :param noise: Noise factor to introduce into the generated series. Default is 0.01.
```

## tdstone2/tdsfeature_engineering.py

```diff
@@ -51,15 +51,18 @@
             imports (str, optional): Additional imports required by the feature_engineering_func.
         """
 
         self.id              = str(uuid.uuid4()) if id is None else id
         self.tdstone         = tdstone
         self.mapper          = None
         self.id_model        = None
-        self.metadata        = {'user': os.getlogin()}
+        try:
+            self.metadata        = {'user': os.getlogin()}
+        except Exception as e:
+            self.metadata        = {}
         self.metadata.update(metadata)
         self.dataset         = dataset
         self.feature_engineering_type = feature_engineering_type
 
         if script_path is not None and all([model_parameters, dataset, id_row, id_partition, feature_engineering_type]):
             self._setup_from_script(script_path, model_parameters, metadata,id_row, id_partition, dataset)
         elif feature_engineering_func is not None and all([model_parameters, dataset, id_row, id_partition, feature_engineering_type]):
@@ -115,15 +118,15 @@
         Parameters:
             feature_engineering_func (function): Custom feature engineering function provided by the user.
             model_parameters (dict): Parameters for the model used in feature engineering.
             metadata (dict): Metadata related to the feature engineering process.
             imports (str): Additional imports required by the feature_engineering_func.
         """
 
-        from tdstone2.model_maker.feature_engineering import generate_feature_engineeing_code
+        from tdstone2.model_maker.feature_engineering import generate_feature_engineering_code
         script = generate_feature_engineeing_code(func=feature_engineering_func, imports=imports, feature_engineering_type = self.feature_engineering_type)
 
         # register and upload the code
         mycode = Code(tdstone=self.tdstone)
         mycode.update_metadata(metadata)
         mycode.update_script_code(script)
         mycode.upload()
```

## tdstone2/tdshypermodel.py

```diff
@@ -36,15 +36,18 @@
         
         self.id               = str(uuid.uuid4()) if id is None else id
         self.tdstone          = tdstone
         self.mapper_training  = None
         self.mapper_scoring   = None
         self.id_model         = None
         self.fold_training    = fold_training
-        self.metadata = {'user': os.getlogin()}
+        try:
+            self.metadata = {'user': os.getlogin()}
+        except Exception as e:
+            self.metadata = {}
         self.metadata.update(metadata)
         self.dataset          = dataset
 
         if model_parameters is not None and 'target' not in model_parameters.keys():
             model_parameters['target'] = ''
 
         if script_path is not None and model_parameters is not None and dataset is not None and id_row is not None and id_partition is not None and fold_training is not None:
```

## tdstone2/tdsmapper.py

```diff
@@ -54,15 +54,18 @@
         self.id_fold = kwargs.get('id_fold', None)
         self.mapper_type = kwargs.get('mapper_type', None)
 
         
         # Determine if this is a new mapper or an existing one based on the provided id
         self.isnewmapper = True if kwargs.get('id') is None else False
         self.id = str(uuid.uuid4()) if kwargs.get('id') is None else kwargs['id']
-        self.metadata = {'user': os.getlogin()}  # Initialize with the current user
+        try:
+            self.metadata = {'user': os.getlogin()}  # Initialize with the current user
+        except Exception as e:
+            self.metadata = {}
         self.mapper_table_name = 'TDS_MAPPER_'+self.id.replace('-','_')         
         # If metadata is provided, update the existing metadata with the new values
         if kwargs.get('metadata') is not None:
             self.metadata.update(kwargs['metadata'])
             
         self.on_clause_view_name      = 'TDS_ON_CLAUSE_'+self.id.replace('-','_') 
         self.sto_view_name            = 'TDS_STO_'+self.id.replace('-','_')
```

## tdstone2/tdsmodel.py

```diff
@@ -20,15 +20,18 @@
         self.schema_name      = schema_name
         self.code_repository  = code_repository
         self.model_repository = model_repository
         self.id_code          = id_code
         
         self.isnewcode        = True if id is None else False
         self.id               = str(uuid.uuid4()) if id is None else id
-        self.metadata         = {'user': os.getlogin()}
+        try:
+            self.metadata         = {'user': os.getlogin()}
+        except Exception as e:
+            self.metadata = {}
         if metadata is not None:
             self.metadata.update(metadata)  # I'm guessing this is what you meant to do
             
         self.arguments        = {}
         if arguments is not None:
             self.arguments.update(arguments)
```

## tdstone2/model_maker/feature_engineering.py

```diff
@@ -32,15 +32,15 @@
 
     # Function name
     func_name = func.__name__
 
     return args_without_defaults, args_with_defaults, source_code, func_name
 
 
-def generate_feature_engineeing_code(func, feature_engineering_type, imports='' ):
+def generate_feature_engineering_code(func, feature_engineering_type, imports='' ):
     # Use the analyze_function
     args_without_defaults, args_with_defaults, source_code, func_name = analyze_function(func)
 
     if feature_engineering_type == 'feature engineering reducer':
         output = "{y+'_'+x: val[y] for x, val in df.iterrows() for y in val.keys()}"
     else:
         output = "df"
```

## Comparing `tdstone2-0.1.2.8.dist-info/METADATA` & `tdstone2-0.1.2.9.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: tdstone2
-Version: 0.1.2.8
+Version: 0.1.2.9
 Summary: A package for Script Table Operator that applies set theory to machine learning in Python.
 Author: Denis Molin
 Requires-Python: >=3.6
 Description-Content-Type: text/markdown
 Requires-Dist: teradataml (>=17.20)
 Requires-Dist: pandas
 Requires-Dist: numpy
```

