# Comparing `tmp/cpop-28.4.1.tar.gz` & `tmp/cpop-28.5.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "cpop-28.4.1.tar", last modified: Wed Apr  3 15:28:43 2024, max compression
+gzip compressed data, was "cpop-28.5.0.tar", last modified: Thu Apr  4 16:12:41 2024, max compression
```

## Comparing `cpop-28.4.1.tar` & `cpop-28.5.0.tar`

### file list

```diff
@@ -1,40 +1,40 @@
-drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-03 15:28:43.414366 cpop-28.4.1/
--rw-rw-r--   0 akmod     (1000) akmod     (1000)    11348 2024-03-24 19:08:30.000000 cpop-28.4.1/LICENSE
--rw-rw-r--   0 akmod     (1000) akmod     (1000)      111 2024-04-03 15:09:20.000000 cpop-28.4.1/MANIFEST.in
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     4996 2024-04-03 15:28:43.414366 cpop-28.4.1/PKG-INFO
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     4411 2024-04-01 23:16:48.000000 cpop-28.4.1/README.rst
-drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-03 15:28:43.410366 cpop-28.4.1/cpop.egg-info/
--rw-r--r--   0 akmod     (1000) akmod     (1000)     4996 2024-04-03 15:28:43.000000 cpop-28.4.1/cpop.egg-info/PKG-INFO
--rw-rw-r--   0 akmod     (1000) akmod     (1000)      546 2024-04-03 15:28:43.000000 cpop-28.4.1/cpop.egg-info/SOURCES.txt
--rw-rw-r--   0 akmod     (1000) akmod     (1000)        1 2024-04-03 15:28:43.000000 cpop-28.4.1/cpop.egg-info/dependency_links.txt
--rw-rw-r--   0 akmod     (1000) akmod     (1000)       42 2024-04-03 15:28:43.000000 cpop-28.4.1/cpop.egg-info/entry_points.txt
--rw-rw-r--   0 akmod     (1000) akmod     (1000)      128 2024-04-03 15:28:43.000000 cpop-28.4.1/cpop.egg-info/requires.txt
--rw-rw-r--   0 akmod     (1000) akmod     (1000)        8 2024-04-03 15:28:43.000000 cpop-28.4.1/cpop.egg-info/top_level.txt
-drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-03 15:28:43.410366 cpop-28.4.1/hub/
--rw-rw-r--   0 akmod     (1000) akmod     (1000)        0 2024-04-01 20:07:30.000000 cpop-28.4.1/hub/__init__.py
--rwxrwxr-x   0 akmod     (1000) akmod     (1000)     4277 2024-04-03 15:09:20.000000 cpop-28.4.1/hub/__main__.py
-drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-03 15:28:43.414366 cpop-28.4.1/pop/
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     2465 2024-04-03 15:09:20.000000 cpop-28.4.1/pop/config.yaml
--rw-rw-r--   0 akmod     (1000) akmod     (1000)    10479 2024-04-02 15:16:07.000000 cpop-28.4.1/pop/contract.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)   870672 2024-04-01 21:05:40.000000 cpop-28.4.1/pop/data.c
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     4417 2024-04-02 15:16:07.000000 cpop-28.4.1/pop/dirs.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     1573 2024-03-24 19:08:30.000000 cpop-28.4.1/pop/exc.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)    23470 2024-04-02 21:09:20.000000 cpop-28.4.1/pop/hub.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)    11349 2024-04-02 21:09:20.000000 cpop-28.4.1/pop/loader.py
-drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-03 15:28:43.414366 cpop-28.4.1/pop/log/
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     5219 2024-04-02 15:16:07.000000 cpop-28.4.1/pop/log/async.py
-drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-03 15:28:43.410366 cpop-28.4.1/pop/mods/
-drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-03 15:28:43.414366 cpop-28.4.1/pop/mods/pop/
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     7501 2024-04-03 15:16:56.000000 cpop-28.4.1/pop/mods/pop/config.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)      570 2024-04-01 16:10:17.000000 cpop-28.4.1/pop/mods/pop/contract.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)      234 2024-04-01 16:10:17.000000 cpop-28.4.1/pop/mods/pop/dyne.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     6993 2024-04-01 22:18:05.000000 cpop-28.4.1/pop/mods/pop/sub.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)      861 2024-04-01 19:09:27.000000 cpop-28.4.1/pop/mods/pop/test.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)   878107 2024-04-03 15:28:25.000000 cpop-28.4.1/pop/pop.data.c
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     6101 2024-04-02 20:52:24.000000 cpop-28.4.1/pop/pop.data.pyx
--rw-rw-r--   0 akmod     (1000) akmod     (1000)      555 2024-04-01 17:31:50.000000 cpop-28.4.1/pop/ref.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     1176 2024-04-02 15:16:07.000000 cpop-28.4.1/pop/scanner.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     7642 2024-03-24 19:08:30.000000 cpop-28.4.1/pop/verify.py
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     1315 2024-04-03 15:27:53.000000 cpop-28.4.1/pyproject.toml
--rw-rw-r--   0 akmod     (1000) akmod     (1000)       38 2024-04-03 15:28:43.414366 cpop-28.4.1/setup.cfg
--rw-rw-r--   0 akmod     (1000) akmod     (1000)     1263 2024-04-01 21:16:30.000000 cpop-28.4.1/setup.py
+drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-04 16:12:41.315384 cpop-28.5.0/
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)    11348 2024-03-24 19:08:30.000000 cpop-28.5.0/LICENSE
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)      116 2024-04-04 16:09:52.000000 cpop-28.5.0/MANIFEST.in
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     4996 2024-04-04 16:12:41.315384 cpop-28.5.0/PKG-INFO
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     4411 2024-04-01 23:16:48.000000 cpop-28.5.0/README.rst
+drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-04 16:12:41.311384 cpop-28.5.0/cpop.egg-info/
+-rw-r--r--   0 akmod     (1000) akmod     (1000)     4996 2024-04-04 16:12:41.000000 cpop-28.5.0/cpop.egg-info/PKG-INFO
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)      559 2024-04-04 16:12:41.000000 cpop-28.5.0/cpop.egg-info/SOURCES.txt
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)        1 2024-04-04 16:12:41.000000 cpop-28.5.0/cpop.egg-info/dependency_links.txt
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)       42 2024-04-04 16:12:41.000000 cpop-28.5.0/cpop.egg-info/entry_points.txt
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)      128 2024-04-04 16:12:41.000000 cpop-28.5.0/cpop.egg-info/requires.txt
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)        8 2024-04-04 16:12:41.000000 cpop-28.5.0/cpop.egg-info/top_level.txt
+drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-04 16:12:41.311384 cpop-28.5.0/hub/
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)        0 2024-04-01 20:07:30.000000 cpop-28.5.0/hub/__init__.py
+-rwxrwxr-x   0 akmod     (1000) akmod     (1000)     4277 2024-04-03 15:09:20.000000 cpop-28.5.0/hub/__main__.py
+drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-04 16:12:41.315384 cpop-28.5.0/pop/
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     2465 2024-04-03 15:48:23.000000 cpop-28.5.0/pop/config.yaml
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     4417 2024-04-02 15:16:07.000000 cpop-28.5.0/pop/dirs.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     1573 2024-03-24 19:08:30.000000 cpop-28.5.0/pop/exc.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)    23470 2024-04-02 21:09:20.000000 cpop-28.5.0/pop/hub.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)    11471 2024-04-03 16:53:30.000000 cpop-28.5.0/pop/loader.py
+drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-04 16:12:41.315384 cpop-28.5.0/pop/log/
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     5219 2024-04-02 15:16:07.000000 cpop-28.5.0/pop/log/async.py
+drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-04 16:12:41.311384 cpop-28.5.0/pop/mods/
+drwxrwxr-x   0 akmod     (1000) akmod     (1000)        0 2024-04-04 16:12:41.315384 cpop-28.5.0/pop/mods/pop/
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     7501 2024-04-03 15:16:56.000000 cpop-28.5.0/pop/mods/pop/config.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)      570 2024-04-01 16:10:17.000000 cpop-28.5.0/pop/mods/pop/contract.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)      234 2024-04-01 16:10:17.000000 cpop-28.5.0/pop/mods/pop/dyne.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     6993 2024-04-01 22:18:05.000000 cpop-28.5.0/pop/mods/pop/sub.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)      861 2024-04-01 19:09:27.000000 cpop-28.5.0/pop/mods/pop/test.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)   955794 2024-04-04 16:12:20.000000 cpop-28.5.0/pop/pop.contract.c
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     8478 2024-04-04 16:10:05.000000 cpop-28.5.0/pop/pop.contract.pyx
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)   878107 2024-04-04 16:12:20.000000 cpop-28.5.0/pop/pop.data.c
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     6101 2024-04-04 16:10:05.000000 cpop-28.5.0/pop/pop.data.pyx
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)      555 2024-04-01 17:31:50.000000 cpop-28.5.0/pop/ref.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     1176 2024-04-04 16:09:52.000000 cpop-28.5.0/pop/scanner.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     7642 2024-03-24 19:08:30.000000 cpop-28.5.0/pop/verify.py
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)     1361 2024-04-04 16:11:59.000000 cpop-28.5.0/pyproject.toml
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)       38 2024-04-04 16:12:41.315384 cpop-28.5.0/setup.cfg
+-rw-rw-r--   0 akmod     (1000) akmod     (1000)      315 2024-04-04 16:09:52.000000 cpop-28.5.0/setup.py
```

### Comparing `cpop-28.4.1/LICENSE` & `cpop-28.5.0/LICENSE`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/PKG-INFO` & `cpop-28.5.0/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cpop
-Version: 28.4.1
+Version: 28.5.0
 Summary: The Cython-Optimized Plugin Oriented Programming System
 Author-email: Tyler Levy Conde <yonstib@gmail.com>, Thomas Hatch <thatch@saltstack.com>
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Programming Language :: Python :: 3.12
 Classifier: Development Status :: 5 - Production/Stable
```

### Comparing `cpop-28.4.1/README.rst` & `cpop-28.5.0/README.rst`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/cpop.egg-info/PKG-INFO` & `cpop-28.5.0/cpop.egg-info/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cpop
-Version: 28.4.1
+Version: 28.5.0
 Summary: The Cython-Optimized Plugin Oriented Programming System
 Author-email: Tyler Levy Conde <yonstib@gmail.com>, Thomas Hatch <thatch@saltstack.com>
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Programming Language :: Python :: 3.12
 Classifier: Development Status :: 5 - Production/Stable
```

### Comparing `cpop-28.4.1/cpop.egg-info/SOURCES.txt` & `cpop-28.5.0/cpop.egg-info/SOURCES.txt`

 * *Files 17% similar despite different names*

```diff
@@ -8,20 +8,20 @@
 cpop.egg-info/dependency_links.txt
 cpop.egg-info/entry_points.txt
 cpop.egg-info/requires.txt
 cpop.egg-info/top_level.txt
 hub/__init__.py
 hub/__main__.py
 pop/config.yaml
-pop/contract.py
-pop/data.c
 pop/dirs.py
 pop/exc.py
 pop/hub.py
 pop/loader.py
+pop/pop.contract.c
+pop/pop.contract.pyx
 pop/pop.data.c
 pop/pop.data.pyx
 pop/ref.py
 pop/scanner.py
 pop/verify.py
 pop/log/async.py
 pop/mods/pop/config.py
```

### Comparing `cpop-28.4.1/hub/__main__.py` & `cpop-28.5.0/hub/__main__.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/config.yaml` & `cpop-28.5.0/pop/config.yaml`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/data.c` & `cpop-28.5.0/pop/pop.data.c`

 * *Files 3% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 /* Generated by Cython 3.0.10 */
 
 /* BEGIN: Cython Metadata
 {
     "distutils": {
         "depends": [],
-        "name": "data",
+        "name": "pop.data",
         "sources": [
-            "pop/data.pyx"
+            "pop/pop.data.pyx"
         ]
     },
-    "module_name": "data"
+    "module_name": "pop.data"
 }
 END: Cython Metadata */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
@@ -1242,16 +1242,16 @@
   #ifdef __cplusplus
     #define __PYX_EXTERN_C extern "C"
   #else
     #define __PYX_EXTERN_C extern
   #endif
 #endif
 
-#define __PYX_HAVE__data
-#define __PYX_HAVE_API__data
+#define __PYX_HAVE__pop__data
+#define __PYX_HAVE_API__pop__data
 /* Early includes */
 #include <string.h>
 #include <stdio.h>
 #include <stddef.h>
 #include "pythread.h"
 #ifdef _OPENMP
 #include <omp.h>
@@ -1497,15 +1497,15 @@
 static int __pyx_clineno = 0;
 static const char * __pyx_cfilenm = __FILE__;
 static const char *__pyx_filename;
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
-  "pop/data.pyx",
+  "pop/pop.data.pyx",
   "contextvars.pxd",
   "<stringsource>",
   "type.pxd",
   "bool.pxd",
   "complex.pxd",
 };
 /* #### Code section: utility_code_proto_before_types ### */
@@ -1515,21 +1515,21 @@
 #endif
 
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
-struct __pyx_obj_4data_NamespaceDict;
-struct __pyx_obj_4data_MultidictCache;
-struct __pyx_obj_4data_ImmutableNamespaceDict;
-struct __pyx_obj_4data___pyx_scope_struct____contains__;
-struct __pyx_obj_4data___pyx_scope_struct_1_genexpr;
-struct __pyx_obj_4data___pyx_scope_struct_2_genexpr;
-struct __pyx_obj_4data___pyx_scope_struct_3_genexpr;
+struct __pyx_obj_3pop_4data_NamespaceDict;
+struct __pyx_obj_3pop_4data_MultidictCache;
+struct __pyx_obj_3pop_4data_ImmutableNamespaceDict;
+struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__;
+struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr;
+struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr;
+struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr;
 struct __pyx_opt_args_7cpython_11contextvars_get_value;
 struct __pyx_opt_args_7cpython_11contextvars_get_value_no_default;
 
 /* "cpython/contextvars.pxd":112
  * 
  * 
  * cdef inline object get_value(var, default_value=None):             # <<<<<<<<<<<<<<
@@ -1548,145 +1548,145 @@
  *     """Return a new reference to the value of the context variable,
  *     or the provided default value if no such value was found.
  */
 struct __pyx_opt_args_7cpython_11contextvars_get_value_no_default {
   int __pyx_n;
   PyObject *default_value;
 };
-struct __pyx_opt_args_4data_update;
+struct __pyx_opt_args_3pop_4data_update;
 
-/* "data.pyx":166
+/* "pop/pop.data.pyx":166
  * 
  * 
  * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
  *     """
  *     Recursive version of the default dict.update
  */
-struct __pyx_opt_args_4data_update {
+struct __pyx_opt_args_3pop_4data_update {
   int __pyx_n;
   int recursive_update;
   int merge_lists;
 };
 
-/* "data.pyx":11
+/* "pop/pop.data.pyx":11
  * cdef frozenset DICT_ATTRS = frozenset(dir(dict))
  * 
  * cdef class NamespaceDict(dict[str, object]):             # <<<<<<<<<<<<<<
  *     def __getattr__(self, key: str):
  *         if key.startswith("__") and key.endswith("__"):
  */
-struct __pyx_obj_4data_NamespaceDict {
+struct __pyx_obj_3pop_4data_NamespaceDict {
   PyDictObject __pyx_base;
 };
 
 
-/* "data.pyx":26
+/* "pop/pop.data.pyx":26
  * 
  * 
  * cdef class MultidictCache:             # <<<<<<<<<<<<<<
  *     cdef dict[str, object] _cache
  *     cdef list[dict[str, object]] _base_dicts
  */
-struct __pyx_obj_4data_MultidictCache {
+struct __pyx_obj_3pop_4data_MultidictCache {
   PyObject_HEAD
-  struct __pyx_vtabstruct_4data_MultidictCache *__pyx_vtab;
+  struct __pyx_vtabstruct_3pop_4data_MultidictCache *__pyx_vtab;
   PyObject *_cache;
   PyObject *_base_dicts;
   PyObject *_split_cache;
 };
 
 
-/* "data.pyx":68
+/* "pop/pop.data.pyx":68
  *         return any(item in base_dict for base_dict in self._base_dicts)
  * 
  * cdef class ImmutableNamespaceDict:             # <<<<<<<<<<<<<<
  *     cdef readonly dict __data
  * 
  */
-struct __pyx_obj_4data_ImmutableNamespaceDict {
+struct __pyx_obj_3pop_4data_ImmutableNamespaceDict {
   PyObject_HEAD
   PyObject *_ImmutableNamespaceDict__data;
 };
 
 
-/* "data.pyx":65
+/* "pop/pop.data.pyx":65
  *         return iter({k for base_dict in self._base_dicts for k in base_dict})
  * 
  *     def __contains__(self, item):             # <<<<<<<<<<<<<<
  *         return any(item in base_dict for base_dict in self._base_dicts)
  * 
  */
-struct __pyx_obj_4data___pyx_scope_struct____contains__ {
+struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ {
   PyObject_HEAD
   PyObject *__pyx_v_item;
 };
 
 
-/* "data.pyx":66
+/* "pop/pop.data.pyx":66
  * 
  *     def __contains__(self, item):
  *         return any(item in base_dict for base_dict in self._base_dicts)             # <<<<<<<<<<<<<<
  * 
  * cdef class ImmutableNamespaceDict:
  */
-struct __pyx_obj_4data___pyx_scope_struct_1_genexpr {
+struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr {
   PyObject_HEAD
-  struct __pyx_obj_4data___pyx_scope_struct____contains__ *__pyx_outer_scope;
+  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *__pyx_outer_scope;
   PyObject *__pyx_genexpr_arg_0;
   PyObject *__pyx_v_base_dict;
 };
 
 
-/* "data.pyx":149
+/* "pop/pop.data.pyx":149
  *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
  *     elif isinstance(data, list):
  *         return tuple(freeze(value) for value in data)             # <<<<<<<<<<<<<<
  *     elif isinstance(data, set):
  *         return frozenset(freeze(value) for value in data)
  */
-struct __pyx_obj_4data___pyx_scope_struct_2_genexpr {
+struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr {
   PyObject_HEAD
   PyObject *__pyx_genexpr_arg_0;
   PyObject *__pyx_v_value;
   PyObject *__pyx_t_0;
   Py_ssize_t __pyx_t_1;
   PyObject *(*__pyx_t_2)(PyObject *);
 };
 
 
-/* "data.pyx":151
+/* "pop/pop.data.pyx":151
  *         return tuple(freeze(value) for value in data)
  *     elif isinstance(data, set):
  *         return frozenset(freeze(value) for value in data)             # <<<<<<<<<<<<<<
  *     else:
  *         return data
  */
-struct __pyx_obj_4data___pyx_scope_struct_3_genexpr {
+struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr {
   PyObject_HEAD
   PyObject *__pyx_genexpr_arg_0;
   PyObject *__pyx_v_value;
   PyObject *__pyx_t_0;
   Py_ssize_t __pyx_t_1;
   PyObject *(*__pyx_t_2)(PyObject *);
 };
 
 
 
-/* "data.pyx":26
+/* "pop/pop.data.pyx":26
  * 
  * 
  * cdef class MultidictCache:             # <<<<<<<<<<<<<<
  *     cdef dict[str, object] _cache
  *     cdef list[dict[str, object]] _base_dicts
  */
 
-struct __pyx_vtabstruct_4data_MultidictCache {
-  PyObject *(*_clear)(struct __pyx_obj_4data_MultidictCache *, int __pyx_skip_dispatch);
+struct __pyx_vtabstruct_3pop_4data_MultidictCache {
+  PyObject *(*_clear)(struct __pyx_obj_3pop_4data_MultidictCache *, int __pyx_skip_dispatch);
 };
-static struct __pyx_vtabstruct_4data_MultidictCache *__pyx_vtabptr_4data_MultidictCache;
+static struct __pyx_vtabstruct_3pop_4data_MultidictCache *__pyx_vtabptr_3pop_4data_MultidictCache;
 /* #### Code section: utility_code_proto ### */
 
 /* --- Runtime support code (head) --- */
 /* Refnanny.proto */
 #ifndef CYTHON_REFNANNY
   #define CYTHON_REFNANNY 0
 #endif
@@ -2667,15 +2667,15 @@
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 static CYTHON_INLINE double __pyx_f_7cpython_7complex_7complex_4real_real(PyComplexObject *__pyx_v_self); /* proto*/
 static CYTHON_INLINE double __pyx_f_7cpython_7complex_7complex_4imag_imag(PyComplexObject *__pyx_v_self); /* proto*/
-static PyObject *__pyx_f_4data_14MultidictCache__clear(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
+static PyObject *__pyx_f_3pop_4data_14MultidictCache__clear(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
 
 /* Module declarations from "cpython.version" */
 
 /* Module declarations from "__builtin__" */
 
 /* Module declarations from "cpython.type" */
 
@@ -2755,27 +2755,27 @@
 
 /* Module declarations from "cpython.pycapsule" */
 
 /* Module declarations from "cpython.contextvars" */
 
 /* Module declarations from "cpython" */
 
-/* Module declarations from "data" */
-static PyObject *__pyx_v_4data_DICT_ATTRS = 0;
-static PyObject *__pyx_f_4data_update(PyObject *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_4data_update *__pyx_optional_args); /*proto*/
-static PyObject *__pyx_f_4data___pyx_unpickle_NamespaceDict__set_state(struct __pyx_obj_4data_NamespaceDict *, PyObject *); /*proto*/
-static PyObject *__pyx_f_4data___pyx_unpickle_MultidictCache__set_state(struct __pyx_obj_4data_MultidictCache *, PyObject *); /*proto*/
-static PyObject *__pyx_f_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(struct __pyx_obj_4data_ImmutableNamespaceDict *, PyObject *); /*proto*/
+/* Module declarations from "pop.data" */
+static PyObject *__pyx_v_3pop_4data_DICT_ATTRS = 0;
+static PyObject *__pyx_f_3pop_4data_update(PyObject *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_3pop_4data_update *__pyx_optional_args); /*proto*/
+static PyObject *__pyx_f_3pop_4data___pyx_unpickle_NamespaceDict__set_state(struct __pyx_obj_3pop_4data_NamespaceDict *, PyObject *); /*proto*/
+static PyObject *__pyx_f_3pop_4data___pyx_unpickle_MultidictCache__set_state(struct __pyx_obj_3pop_4data_MultidictCache *, PyObject *); /*proto*/
+static PyObject *__pyx_f_3pop_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *, PyObject *); /*proto*/
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
-#define __Pyx_MODULE_NAME "data"
-extern int __pyx_module_is_main_data;
-int __pyx_module_is_main_data = 0;
+#define __Pyx_MODULE_NAME "pop.data"
+extern int __pyx_module_is_main_pop__data;
+int __pyx_module_is_main_pop__data = 0;
 
-/* Implementation of "data" */
+/* Implementation of "pop.data" */
 /* #### Code section: global_var ### */
 static PyObject *__pyx_builtin_KeyError;
 static PyObject *__pyx_builtin_AttributeError;
 static PyObject *__pyx_builtin_object;
 static PyObject *__pyx_builtin_TypeError;
 /* #### Code section: string_decls ### */
 static const char __pyx_k_[] = "__";
@@ -2819,40 +2819,41 @@
 static const char __pyx_k_Mapping[] = "Mapping";
 static const char __pyx_k_default[] = "default";
 static const char __pyx_k_disable[] = "disable";
 static const char __pyx_k_genexpr[] = "genexpr";
 static const char __pyx_k_setattr[] = "__setattr__";
 static const char __pyx_k_KeyError[] = "KeyError";
 static const char __pyx_k_getstate[] = "__getstate__";
+static const char __pyx_k_pop_data[] = "pop.data";
 static const char __pyx_k_pyx_type[] = "__pyx_type";
 static const char __pyx_k_setstate[] = "__setstate__";
 static const char __pyx_k_unfreeze[] = "unfreeze";
 static const char __pyx_k_TypeError[] = "TypeError";
 static const char __pyx_k_isenabled[] = "isenabled";
 static const char __pyx_k_pyx_state[] = "__pyx_state";
 static const char __pyx_k_reduce_ex[] = "__reduce_ex__";
 static const char __pyx_k_base_dicts[] = "base_dicts";
 static const char __pyx_k_pyx_result[] = "__pyx_result";
 static const char __pyx_k_pyx_vtable[] = "__pyx_vtable__";
 static const char __pyx_k_PickleError[] = "PickleError";
 static const char __pyx_k_merge_lists[] = "merge_lists";
 static const char __pyx_k_getattribute[] = "__getattribute__";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
-static const char __pyx_k_pop_data_pyx[] = "pop/data.pyx";
 static const char __pyx_k_pyx_checksum[] = "__pyx_checksum";
 static const char __pyx_k_stringsource[] = "<stringsource>";
 static const char __pyx_k_use_setstate[] = "use_setstate";
 static const char __pyx_k_NamespaceDict[] = "NamespaceDict";
 static const char __pyx_k_class_getitem[] = "__class_getitem__";
 static const char __pyx_k_reduce_cython[] = "__reduce_cython__";
 static const char __pyx_k_AttributeError[] = "AttributeError";
 static const char __pyx_k_MultidictCache[] = "MultidictCache";
 static const char __pyx_k_collections_abc[] = "collections.abc";
 static const char __pyx_k_pyx_PickleError[] = "__pyx_PickleError";
 static const char __pyx_k_setstate_cython[] = "__setstate_cython__";
+static const char __pyx_k_pop_pop_data_pyx[] = "pop/pop.data.pyx";
 static const char __pyx_k_recursive_update[] = "recursive_update";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
 static const char __pyx_k_MultidictCache__clear[] = "MultidictCache._clear";
 static const char __pyx_k_freeze_locals_genexpr[] = "freeze.<locals>.genexpr";
 static const char __pyx_k_ImmutableNamespaceDict[] = "ImmutableNamespaceDict";
 static const char __pyx_k_object_has_no_attribute[] = "' object has no attribute '";
@@ -2875,61 +2876,61 @@
 static const char __pyx_k_ImmutableNamespaceDict___setstat[] = "ImmutableNamespaceDict.__setstate_cython__";
 static const char __pyx_k_Incompatible_checksums_0x_x_vs_0[] = "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())";
 static const char __pyx_k_MultidictCache___setstate_cython[] = "MultidictCache.__setstate_cython__";
 static const char __pyx_k_ImmutableNamespaceDict_does_not_2[] = "ImmutableNamespaceDict does not support item assignment";
 static const char __pyx_k_Incompatible_checksums_0x_x_vs_0_2[] = "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))";
 static const char __pyx_k_Incompatible_checksums_0x_x_vs_0_3[] = "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))";
 /* #### Code section: decls ### */
-static PyObject *__pyx_pf_4data_13NamespaceDict___getattr__(struct __pyx_obj_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static int __pyx_pf_4data_13NamespaceDict_2__setattr__(struct __pyx_obj_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /* proto */
-static PyObject *__pyx_pf_4data_13NamespaceDict_4__reduce_cython__(struct __pyx_obj_4data_NamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_13NamespaceDict_6__setstate_cython__(struct __pyx_obj_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
-static int __pyx_pf_4data_14MultidictCache___init__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_base_dicts); /* proto */
-static PyObject *__pyx_pf_4data_14MultidictCache_2_clear(struct __pyx_obj_4data_MultidictCache *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_14MultidictCache_4__getitem__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static PyObject *__pyx_pf_4data_14MultidictCache_6__iter__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_14MultidictCache_12__contains___genexpr(PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
-static int __pyx_pf_4data_14MultidictCache_8__contains__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_item); /* proto */
-static PyObject *__pyx_pf_4data_14MultidictCache_10__reduce_cython__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_14MultidictCache_12__setstate_cython__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
-static int __pyx_pf_4data_22ImmutableNamespaceDict___init__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_data); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_2__getitem__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_4__getattr__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static int __pyx_pf_4data_22ImmutableNamespaceDict_6__setattr__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /* proto */
-static int __pyx_pf_4data_22ImmutableNamespaceDict_8__setitem__(CYTHON_UNUSED struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_key, CYTHON_UNUSED PyObject *__pyx_v_value); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_10__call__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static Py_ssize_t __pyx_pf_4data_22ImmutableNamespaceDict_12__len__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_14__iter__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static int __pyx_pf_4data_22ImmutableNamespaceDict_16__bool__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static int __pyx_pf_4data_22ImmutableNamespaceDict_18__contains__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_20__repr__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_22__eq__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_24__ne__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_26keys(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_28values(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_30items(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_32get(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_default); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_34copy(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data___get__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_36__reduce_cython__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_38__setstate_cython__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
-static PyObject *__pyx_pf_4data_6freeze_genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
-static PyObject *__pyx_pf_4data_6freeze_3genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
-static PyObject *__pyx_pf_4data_freeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data); /* proto */
-static PyObject *__pyx_pf_4data_2unfreeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data); /* proto */
-static PyObject *__pyx_pf_4data_4update(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_dest, PyObject *__pyx_v_upd, int __pyx_v_recursive_update, int __pyx_v_merge_lists); /* proto */
-static PyObject *__pyx_pf_4data_6__pyx_unpickle_NamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
-static PyObject *__pyx_pf_4data_8__pyx_unpickle_MultidictCache(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
-static PyObject *__pyx_pf_4data_10__pyx_unpickle_ImmutableNamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
-static PyObject *__pyx_tp_new_4data_MultidictCache(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_4data_ImmutableNamespaceDict(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_4data___pyx_scope_struct____contains__(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_4data___pyx_scope_struct_1_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_4data___pyx_scope_struct_2_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_4data___pyx_scope_struct_3_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_pf_3pop_4data_13NamespaceDict___getattr__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
+static int __pyx_pf_3pop_4data_13NamespaceDict_2__setattr__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /* proto */
+static PyObject *__pyx_pf_3pop_4data_13NamespaceDict_4__reduce_cython__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_13NamespaceDict_6__setstate_cython__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
+static int __pyx_pf_3pop_4data_14MultidictCache___init__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_base_dicts); /* proto */
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_2_clear(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_4__getitem__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_6__iter__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_12__contains___genexpr(PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
+static int __pyx_pf_3pop_4data_14MultidictCache_8__contains__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_item); /* proto */
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_10__reduce_cython__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_12__setstate_cython__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict___init__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_data); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_2__getitem__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_4__getattr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_6__setattr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_8__setitem__(CYTHON_UNUSED struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_key, CYTHON_UNUSED PyObject *__pyx_v_value); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_10__call__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static Py_ssize_t __pyx_pf_3pop_4data_22ImmutableNamespaceDict_12__len__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_14__iter__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_16__bool__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_18__contains__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_20__repr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_22__eq__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_24__ne__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_26keys(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_28values(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_30items(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_32get(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_default); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_34copy(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data___get__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_36__reduce_cython__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_38__setstate_cython__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
+static PyObject *__pyx_pf_3pop_4data_6freeze_genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
+static PyObject *__pyx_pf_3pop_4data_6freeze_3genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
+static PyObject *__pyx_pf_3pop_4data_freeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data); /* proto */
+static PyObject *__pyx_pf_3pop_4data_2unfreeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data); /* proto */
+static PyObject *__pyx_pf_3pop_4data_4update(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_dest, PyObject *__pyx_v_upd, int __pyx_v_recursive_update, int __pyx_v_merge_lists); /* proto */
+static PyObject *__pyx_pf_3pop_4data_6__pyx_unpickle_NamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
+static PyObject *__pyx_pf_3pop_4data_8__pyx_unpickle_MultidictCache(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
+static PyObject *__pyx_pf_3pop_4data_10__pyx_unpickle_ImmutableNamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
+static PyObject *__pyx_tp_new_3pop_4data_MultidictCache(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_tp_new_3pop_4data_ImmutableNamespaceDict(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct____contains__(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
 static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_get = {0, 0, 0, 0, 0};
 static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_items = {0, 0, 0, 0, 0};
 static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_keys = {0, 0, 0, 0, 0};
 static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_values = {0, 0, 0, 0, 0};
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
@@ -3043,29 +3044,29 @@
   #if CYTHON_USE_MODULE_STATE
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   #if CYTHON_USE_MODULE_STATE
-  PyObject *__pyx_type_4data_NamespaceDict;
-  PyObject *__pyx_type_4data_MultidictCache;
-  PyObject *__pyx_type_4data_ImmutableNamespaceDict;
-  PyObject *__pyx_type_4data___pyx_scope_struct____contains__;
-  PyObject *__pyx_type_4data___pyx_scope_struct_1_genexpr;
-  PyObject *__pyx_type_4data___pyx_scope_struct_2_genexpr;
-  PyObject *__pyx_type_4data___pyx_scope_struct_3_genexpr;
-  #endif
-  PyTypeObject *__pyx_ptype_4data_NamespaceDict;
-  PyTypeObject *__pyx_ptype_4data_MultidictCache;
-  PyTypeObject *__pyx_ptype_4data_ImmutableNamespaceDict;
-  PyTypeObject *__pyx_ptype_4data___pyx_scope_struct____contains__;
-  PyTypeObject *__pyx_ptype_4data___pyx_scope_struct_1_genexpr;
-  PyTypeObject *__pyx_ptype_4data___pyx_scope_struct_2_genexpr;
-  PyTypeObject *__pyx_ptype_4data___pyx_scope_struct_3_genexpr;
+  PyObject *__pyx_type_3pop_4data_NamespaceDict;
+  PyObject *__pyx_type_3pop_4data_MultidictCache;
+  PyObject *__pyx_type_3pop_4data_ImmutableNamespaceDict;
+  PyObject *__pyx_type_3pop_4data___pyx_scope_struct____contains__;
+  PyObject *__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr;
+  PyObject *__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr;
+  PyObject *__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr;
+  #endif
+  PyTypeObject *__pyx_ptype_3pop_4data_NamespaceDict;
+  PyTypeObject *__pyx_ptype_3pop_4data_MultidictCache;
+  PyTypeObject *__pyx_ptype_3pop_4data_ImmutableNamespaceDict;
+  PyTypeObject *__pyx_ptype_3pop_4data___pyx_scope_struct____contains__;
+  PyTypeObject *__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr;
+  PyTypeObject *__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr;
+  PyTypeObject *__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr;
   PyObject *__pyx_n_u_;
   PyObject *__pyx_n_s_AttributeError;
   PyObject *__pyx_n_s_ImmutableNamespaceDict;
   PyObject *__pyx_n_s_ImmutableNamespaceDict___reduce;
   PyObject *__pyx_n_s_ImmutableNamespaceDict___setstat;
   PyObject *__pyx_n_s_ImmutableNamespaceDict__data;
   PyObject *__pyx_n_u_ImmutableNamespaceDict__data;
@@ -3130,15 +3131,16 @@
   PyObject *__pyx_n_s_merge_lists;
   PyObject *__pyx_n_s_name;
   PyObject *__pyx_n_s_new;
   PyObject *__pyx_kp_u_not_found_in_any_base_dictionar;
   PyObject *__pyx_n_s_object;
   PyObject *__pyx_kp_u_object_has_no_attribute;
   PyObject *__pyx_n_s_pickle;
-  PyObject *__pyx_kp_s_pop_data_pyx;
+  PyObject *__pyx_n_s_pop_data;
+  PyObject *__pyx_kp_s_pop_pop_data_pyx;
   PyObject *__pyx_n_s_pyx_PickleError;
   PyObject *__pyx_n_s_pyx_checksum;
   PyObject *__pyx_n_s_pyx_result;
   PyObject *__pyx_n_s_pyx_state;
   PyObject *__pyx_n_s_pyx_type;
   PyObject *__pyx_n_s_pyx_unpickle_ImmutableNamespac;
   PyObject *__pyx_n_s_pyx_unpickle_MultidictCache;
@@ -3247,28 +3249,28 @@
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_ptype_7cpython_4type_type);
   Py_CLEAR(clear_module_state->__pyx_ptype_7cpython_4bool_bool);
   Py_CLEAR(clear_module_state->__pyx_ptype_7cpython_7complex_complex);
-  Py_CLEAR(clear_module_state->__pyx_ptype_4data_NamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_type_4data_NamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_ptype_4data_MultidictCache);
-  Py_CLEAR(clear_module_state->__pyx_type_4data_MultidictCache);
-  Py_CLEAR(clear_module_state->__pyx_ptype_4data_ImmutableNamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_type_4data_ImmutableNamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_ptype_4data___pyx_scope_struct____contains__);
-  Py_CLEAR(clear_module_state->__pyx_type_4data___pyx_scope_struct____contains__);
-  Py_CLEAR(clear_module_state->__pyx_ptype_4data___pyx_scope_struct_1_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_type_4data___pyx_scope_struct_1_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_ptype_4data___pyx_scope_struct_2_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_type_4data___pyx_scope_struct_2_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_ptype_4data___pyx_scope_struct_3_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_type_4data___pyx_scope_struct_3_genexpr);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data_NamespaceDict);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data_NamespaceDict);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data_MultidictCache);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data_MultidictCache);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data_ImmutableNamespaceDict);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct____contains__);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data___pyx_scope_struct____contains__);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr);
   Py_CLEAR(clear_module_state->__pyx_n_u_);
   Py_CLEAR(clear_module_state->__pyx_n_s_AttributeError);
   Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict);
   Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict___reduce);
   Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict___setstat);
   Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict__data);
   Py_CLEAR(clear_module_state->__pyx_n_u_ImmutableNamespaceDict__data);
@@ -3333,15 +3335,16 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_merge_lists);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
   Py_CLEAR(clear_module_state->__pyx_n_s_new);
   Py_CLEAR(clear_module_state->__pyx_kp_u_not_found_in_any_base_dictionar);
   Py_CLEAR(clear_module_state->__pyx_n_s_object);
   Py_CLEAR(clear_module_state->__pyx_kp_u_object_has_no_attribute);
   Py_CLEAR(clear_module_state->__pyx_n_s_pickle);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_pop_data_pyx);
+  Py_CLEAR(clear_module_state->__pyx_n_s_pop_data);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_pop_pop_data_pyx);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_PickleError);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_checksum);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_result);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_state);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_type);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_unpickle_ImmutableNamespac);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_unpickle_MultidictCache);
@@ -3428,28 +3431,28 @@
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_ptype_7cpython_4type_type);
   Py_VISIT(traverse_module_state->__pyx_ptype_7cpython_4bool_bool);
   Py_VISIT(traverse_module_state->__pyx_ptype_7cpython_7complex_complex);
-  Py_VISIT(traverse_module_state->__pyx_ptype_4data_NamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_type_4data_NamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_ptype_4data_MultidictCache);
-  Py_VISIT(traverse_module_state->__pyx_type_4data_MultidictCache);
-  Py_VISIT(traverse_module_state->__pyx_ptype_4data_ImmutableNamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_type_4data_ImmutableNamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_ptype_4data___pyx_scope_struct____contains__);
-  Py_VISIT(traverse_module_state->__pyx_type_4data___pyx_scope_struct____contains__);
-  Py_VISIT(traverse_module_state->__pyx_ptype_4data___pyx_scope_struct_1_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_type_4data___pyx_scope_struct_1_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_ptype_4data___pyx_scope_struct_2_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_type_4data___pyx_scope_struct_2_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_ptype_4data___pyx_scope_struct_3_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_type_4data___pyx_scope_struct_3_genexpr);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data_NamespaceDict);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data_NamespaceDict);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data_MultidictCache);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data_MultidictCache);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data_ImmutableNamespaceDict);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct____contains__);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data___pyx_scope_struct____contains__);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr);
   Py_VISIT(traverse_module_state->__pyx_n_u_);
   Py_VISIT(traverse_module_state->__pyx_n_s_AttributeError);
   Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict);
   Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict___reduce);
   Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict___setstat);
   Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict__data);
   Py_VISIT(traverse_module_state->__pyx_n_u_ImmutableNamespaceDict__data);
@@ -3514,15 +3517,16 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_merge_lists);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
   Py_VISIT(traverse_module_state->__pyx_n_s_new);
   Py_VISIT(traverse_module_state->__pyx_kp_u_not_found_in_any_base_dictionar);
   Py_VISIT(traverse_module_state->__pyx_n_s_object);
   Py_VISIT(traverse_module_state->__pyx_kp_u_object_has_no_attribute);
   Py_VISIT(traverse_module_state->__pyx_n_s_pickle);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_pop_data_pyx);
+  Py_VISIT(traverse_module_state->__pyx_n_s_pop_data);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_pop_pop_data_pyx);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_PickleError);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_checksum);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_result);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_state);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_type);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_unpickle_ImmutableNamespac);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_unpickle_MultidictCache);
@@ -3704,29 +3708,29 @@
 #if CYTHON_USE_MODULE_STATE
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #if CYTHON_USE_MODULE_STATE
-#define __pyx_type_4data_NamespaceDict __pyx_mstate_global->__pyx_type_4data_NamespaceDict
-#define __pyx_type_4data_MultidictCache __pyx_mstate_global->__pyx_type_4data_MultidictCache
-#define __pyx_type_4data_ImmutableNamespaceDict __pyx_mstate_global->__pyx_type_4data_ImmutableNamespaceDict
-#define __pyx_type_4data___pyx_scope_struct____contains__ __pyx_mstate_global->__pyx_type_4data___pyx_scope_struct____contains__
-#define __pyx_type_4data___pyx_scope_struct_1_genexpr __pyx_mstate_global->__pyx_type_4data___pyx_scope_struct_1_genexpr
-#define __pyx_type_4data___pyx_scope_struct_2_genexpr __pyx_mstate_global->__pyx_type_4data___pyx_scope_struct_2_genexpr
-#define __pyx_type_4data___pyx_scope_struct_3_genexpr __pyx_mstate_global->__pyx_type_4data___pyx_scope_struct_3_genexpr
-#endif
-#define __pyx_ptype_4data_NamespaceDict __pyx_mstate_global->__pyx_ptype_4data_NamespaceDict
-#define __pyx_ptype_4data_MultidictCache __pyx_mstate_global->__pyx_ptype_4data_MultidictCache
-#define __pyx_ptype_4data_ImmutableNamespaceDict __pyx_mstate_global->__pyx_ptype_4data_ImmutableNamespaceDict
-#define __pyx_ptype_4data___pyx_scope_struct____contains__ __pyx_mstate_global->__pyx_ptype_4data___pyx_scope_struct____contains__
-#define __pyx_ptype_4data___pyx_scope_struct_1_genexpr __pyx_mstate_global->__pyx_ptype_4data___pyx_scope_struct_1_genexpr
-#define __pyx_ptype_4data___pyx_scope_struct_2_genexpr __pyx_mstate_global->__pyx_ptype_4data___pyx_scope_struct_2_genexpr
-#define __pyx_ptype_4data___pyx_scope_struct_3_genexpr __pyx_mstate_global->__pyx_ptype_4data___pyx_scope_struct_3_genexpr
+#define __pyx_type_3pop_4data_NamespaceDict __pyx_mstate_global->__pyx_type_3pop_4data_NamespaceDict
+#define __pyx_type_3pop_4data_MultidictCache __pyx_mstate_global->__pyx_type_3pop_4data_MultidictCache
+#define __pyx_type_3pop_4data_ImmutableNamespaceDict __pyx_mstate_global->__pyx_type_3pop_4data_ImmutableNamespaceDict
+#define __pyx_type_3pop_4data___pyx_scope_struct____contains__ __pyx_mstate_global->__pyx_type_3pop_4data___pyx_scope_struct____contains__
+#define __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr __pyx_mstate_global->__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr
+#define __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr __pyx_mstate_global->__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr
+#define __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr __pyx_mstate_global->__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr
+#endif
+#define __pyx_ptype_3pop_4data_NamespaceDict __pyx_mstate_global->__pyx_ptype_3pop_4data_NamespaceDict
+#define __pyx_ptype_3pop_4data_MultidictCache __pyx_mstate_global->__pyx_ptype_3pop_4data_MultidictCache
+#define __pyx_ptype_3pop_4data_ImmutableNamespaceDict __pyx_mstate_global->__pyx_ptype_3pop_4data_ImmutableNamespaceDict
+#define __pyx_ptype_3pop_4data___pyx_scope_struct____contains__ __pyx_mstate_global->__pyx_ptype_3pop_4data___pyx_scope_struct____contains__
+#define __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr __pyx_mstate_global->__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr
+#define __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr __pyx_mstate_global->__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr
+#define __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr __pyx_mstate_global->__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr
 #define __pyx_n_u_ __pyx_mstate_global->__pyx_n_u_
 #define __pyx_n_s_AttributeError __pyx_mstate_global->__pyx_n_s_AttributeError
 #define __pyx_n_s_ImmutableNamespaceDict __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict
 #define __pyx_n_s_ImmutableNamespaceDict___reduce __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict___reduce
 #define __pyx_n_s_ImmutableNamespaceDict___setstat __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict___setstat
 #define __pyx_n_s_ImmutableNamespaceDict__data __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict__data
 #define __pyx_n_u_ImmutableNamespaceDict__data __pyx_mstate_global->__pyx_n_u_ImmutableNamespaceDict__data
@@ -3791,15 +3795,16 @@
 #define __pyx_n_s_merge_lists __pyx_mstate_global->__pyx_n_s_merge_lists
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
 #define __pyx_n_s_new __pyx_mstate_global->__pyx_n_s_new
 #define __pyx_kp_u_not_found_in_any_base_dictionar __pyx_mstate_global->__pyx_kp_u_not_found_in_any_base_dictionar
 #define __pyx_n_s_object __pyx_mstate_global->__pyx_n_s_object
 #define __pyx_kp_u_object_has_no_attribute __pyx_mstate_global->__pyx_kp_u_object_has_no_attribute
 #define __pyx_n_s_pickle __pyx_mstate_global->__pyx_n_s_pickle
-#define __pyx_kp_s_pop_data_pyx __pyx_mstate_global->__pyx_kp_s_pop_data_pyx
+#define __pyx_n_s_pop_data __pyx_mstate_global->__pyx_n_s_pop_data
+#define __pyx_kp_s_pop_pop_data_pyx __pyx_mstate_global->__pyx_kp_s_pop_pop_data_pyx
 #define __pyx_n_s_pyx_PickleError __pyx_mstate_global->__pyx_n_s_pyx_PickleError
 #define __pyx_n_s_pyx_checksum __pyx_mstate_global->__pyx_n_s_pyx_checksum
 #define __pyx_n_s_pyx_result __pyx_mstate_global->__pyx_n_s_pyx_result
 #define __pyx_n_s_pyx_state __pyx_mstate_global->__pyx_n_s_pyx_state
 #define __pyx_n_s_pyx_type __pyx_mstate_global->__pyx_n_s_pyx_type
 #define __pyx_n_s_pyx_unpickle_ImmutableNamespac __pyx_mstate_global->__pyx_n_s_pyx_unpickle_ImmutableNamespac
 #define __pyx_n_s_pyx_unpickle_MultidictCache __pyx_mstate_global->__pyx_n_s_pyx_unpickle_MultidictCache
@@ -4158,46 +4163,46 @@
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_pyvalue);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":12
+/* "pop/pop.data.pyx":12
  * 
  * cdef class NamespaceDict(dict[str, object]):
  *     def __getattr__(self, key: str):             # <<<<<<<<<<<<<<
  *         if key.startswith("__") and key.endswith("__"):
  *             self.__getattribute__(key)
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_13NamespaceDict_1__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static PyObject *__pyx_pw_4data_13NamespaceDict_1__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_1__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_1__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__getattr__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
   if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_key), (&PyUnicode_Type), 0, "key", 1))) __PYX_ERR(0, 12, __pyx_L1_error)
-  __pyx_r = __pyx_pf_4data_13NamespaceDict___getattr__(((struct __pyx_obj_4data_NamespaceDict *)__pyx_v_self), ((PyObject*)__pyx_v_key));
+  __pyx_r = __pyx_pf_3pop_4data_13NamespaceDict___getattr__(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v_self), ((PyObject*)__pyx_v_key));
 
   /* function exit code */
   goto __pyx_L0;
   __pyx_L1_error:;
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_13NamespaceDict___getattr__(struct __pyx_obj_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pf_3pop_4data_13NamespaceDict___getattr__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
   PyObject *__pyx_v_e = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
@@ -4216,15 +4221,15 @@
   PyObject *__pyx_t_17 = NULL;
   PyObject *__pyx_t_18 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__getattr__", 1);
 
-  /* "data.pyx":13
+  /* "pop/pop.data.pyx":13
  * cdef class NamespaceDict(dict[str, object]):
  *     def __getattr__(self, key: str):
  *         if key.startswith("__") and key.endswith("__"):             # <<<<<<<<<<<<<<
  *             self.__getattribute__(key)
  *         try:
  */
   __pyx_t_2 = __Pyx_PyUnicode_Tailmatch(__pyx_v_key, __pyx_n_u_, 0, PY_SSIZE_T_MAX, -1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 13, __pyx_L1_error)
@@ -4234,15 +4239,15 @@
     goto __pyx_L4_bool_binop_done;
   }
   __pyx_t_2 = __Pyx_PyUnicode_Tailmatch(__pyx_v_key, __pyx_n_u_, 0, PY_SSIZE_T_MAX, 1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 13, __pyx_L1_error)
   __pyx_t_1 = __pyx_t_2;
   __pyx_L4_bool_binop_done:;
   if (__pyx_t_1) {
 
-    /* "data.pyx":14
+    /* "pop/pop.data.pyx":14
  *     def __getattr__(self, key: str):
  *         if key.startswith("__") and key.endswith("__"):
  *             self.__getattribute__(key)             # <<<<<<<<<<<<<<
  *         try:
  *             return self[key]
  */
     __pyx_t_4 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_getattribute); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 14, __pyx_L1_error)
@@ -4267,24 +4272,24 @@
       __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
       if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     }
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-    /* "data.pyx":13
+    /* "pop/pop.data.pyx":13
  * cdef class NamespaceDict(dict[str, object]):
  *     def __getattr__(self, key: str):
  *         if key.startswith("__") and key.endswith("__"):             # <<<<<<<<<<<<<<
  *             self.__getattribute__(key)
  *         try:
  */
   }
 
-  /* "data.pyx":15
+  /* "pop/pop.data.pyx":15
  *         if key.startswith("__") and key.endswith("__"):
  *             self.__getattribute__(key)
  *         try:             # <<<<<<<<<<<<<<
  *             return self[key]
  *         except KeyError as e:
  */
   {
@@ -4292,74 +4297,74 @@
     __Pyx_PyThreadState_assign
     __Pyx_ExceptionSave(&__pyx_t_7, &__pyx_t_8, &__pyx_t_9);
     __Pyx_XGOTREF(__pyx_t_7);
     __Pyx_XGOTREF(__pyx_t_8);
     __Pyx_XGOTREF(__pyx_t_9);
     /*try:*/ {
 
-      /* "data.pyx":16
+      /* "pop/pop.data.pyx":16
  *             self.__getattribute__(key)
  *         try:
  *             return self[key]             # <<<<<<<<<<<<<<
  *         except KeyError as e:
  *             raise AttributeError(e)
  */
       __Pyx_XDECREF(__pyx_r);
       __pyx_t_3 = __Pyx_PyObject_GetItem(((PyObject *)__pyx_v_self), __pyx_v_key); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L6_error)
       __Pyx_GOTREF(__pyx_t_3);
       __pyx_r = __pyx_t_3;
       __pyx_t_3 = 0;
       goto __pyx_L10_try_return;
 
-      /* "data.pyx":15
+      /* "pop/pop.data.pyx":15
  *         if key.startswith("__") and key.endswith("__"):
  *             self.__getattribute__(key)
  *         try:             # <<<<<<<<<<<<<<
  *             return self[key]
  *         except KeyError as e:
  */
     }
     __pyx_L6_error:;
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
     __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
     __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-    /* "data.pyx":17
+    /* "pop/pop.data.pyx":17
  *         try:
  *             return self[key]
  *         except KeyError as e:             # <<<<<<<<<<<<<<
  *             raise AttributeError(e)
  * 
  */
     __pyx_t_6 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_KeyError);
     if (__pyx_t_6) {
-      __Pyx_AddTraceback("data.NamespaceDict.__getattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("pop.data.NamespaceDict.__getattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
       if (__Pyx_GetException(&__pyx_t_3, &__pyx_t_4, &__pyx_t_5) < 0) __PYX_ERR(0, 17, __pyx_L8_except_error)
       __Pyx_XGOTREF(__pyx_t_3);
       __Pyx_XGOTREF(__pyx_t_4);
       __Pyx_XGOTREF(__pyx_t_5);
       __Pyx_INCREF(__pyx_t_4);
       __pyx_v_e = __pyx_t_4;
       /*try:*/ {
 
-        /* "data.pyx":18
+        /* "pop/pop.data.pyx":18
  *             return self[key]
  *         except KeyError as e:
  *             raise AttributeError(e)             # <<<<<<<<<<<<<<
  * 
  *     def __setattr__(self, key: str, value: object):
  */
         __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_AttributeError, __pyx_v_e); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 18, __pyx_L17_error)
         __Pyx_GOTREF(__pyx_t_10);
         __Pyx_Raise(__pyx_t_10, 0, 0, 0);
         __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
         __PYX_ERR(0, 18, __pyx_L17_error)
       }
 
-      /* "data.pyx":17
+      /* "pop/pop.data.pyx":17
  *         try:
  *             return self[key]
  *         except KeyError as e:             # <<<<<<<<<<<<<<
  *             raise AttributeError(e)
  * 
  */
       /*finally:*/ {
@@ -4395,15 +4400,15 @@
           __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_11; __pyx_filename = __pyx_t_12;
           goto __pyx_L8_except_error;
         }
       }
     }
     goto __pyx_L8_except_error;
 
-    /* "data.pyx":15
+    /* "pop/pop.data.pyx":15
  *         if key.startswith("__") and key.endswith("__"):
  *             self.__getattribute__(key)
  *         try:             # <<<<<<<<<<<<<<
  *             return self[key]
  *         except KeyError as e:
  */
     __pyx_L8_except_error:;
@@ -4416,156 +4421,156 @@
     __Pyx_XGIVEREF(__pyx_t_7);
     __Pyx_XGIVEREF(__pyx_t_8);
     __Pyx_XGIVEREF(__pyx_t_9);
     __Pyx_ExceptionReset(__pyx_t_7, __pyx_t_8, __pyx_t_9);
     goto __pyx_L0;
   }
 
-  /* "data.pyx":12
+  /* "pop/pop.data.pyx":12
  * 
  * cdef class NamespaceDict(dict[str, object]):
  *     def __getattr__(self, key: str):             # <<<<<<<<<<<<<<
  *         if key.startswith("__") and key.endswith("__"):
  *             self.__getattribute__(key)
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("data.NamespaceDict.__getattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.NamespaceDict.__getattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_e);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":20
+/* "pop/pop.data.pyx":20
  *             raise AttributeError(e)
  * 
  *     def __setattr__(self, key: str, value: object):             # <<<<<<<<<<<<<<
  *         if isinstance(value, dict):
  *             value = NamespaceDict(value)
  */
 
 /* Python wrapper */
-static int __pyx_pw_4data_13NamespaceDict_3__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /*proto*/
-static int __pyx_pw_4data_13NamespaceDict_3__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
+static int __pyx_pw_3pop_4data_13NamespaceDict_3__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_4data_13NamespaceDict_3__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__setattr__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
   if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_key), (&PyUnicode_Type), 0, "key", 1))) __PYX_ERR(0, 20, __pyx_L1_error)
-  __pyx_r = __pyx_pf_4data_13NamespaceDict_2__setattr__(((struct __pyx_obj_4data_NamespaceDict *)__pyx_v_self), ((PyObject*)__pyx_v_key), ((PyObject *)__pyx_v_value));
+  __pyx_r = __pyx_pf_3pop_4data_13NamespaceDict_2__setattr__(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v_self), ((PyObject*)__pyx_v_key), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   goto __pyx_L0;
   __pyx_L1_error:;
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_4data_13NamespaceDict_2__setattr__(struct __pyx_obj_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
+static int __pyx_pf_3pop_4data_13NamespaceDict_2__setattr__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__setattr__", 0);
   __Pyx_INCREF(__pyx_v_value);
 
-  /* "data.pyx":21
+  /* "pop/pop.data.pyx":21
  * 
  *     def __setattr__(self, key: str, value: object):
  *         if isinstance(value, dict):             # <<<<<<<<<<<<<<
  *             value = NamespaceDict(value)
  *         self[key] = value
  */
   __pyx_t_1 = PyDict_Check(__pyx_v_value); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":22
+    /* "pop/pop.data.pyx":22
  *     def __setattr__(self, key: str, value: object):
  *         if isinstance(value, dict):
  *             value = NamespaceDict(value)             # <<<<<<<<<<<<<<
  *         self[key] = value
  * 
  */
-    __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_4data_NamespaceDict), __pyx_v_value); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_3pop_4data_NamespaceDict), __pyx_v_value); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 22, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __Pyx_DECREF_SET(__pyx_v_value, __pyx_t_2);
     __pyx_t_2 = 0;
 
-    /* "data.pyx":21
+    /* "pop/pop.data.pyx":21
  * 
  *     def __setattr__(self, key: str, value: object):
  *         if isinstance(value, dict):             # <<<<<<<<<<<<<<
  *             value = NamespaceDict(value)
  *         self[key] = value
  */
   }
 
-  /* "data.pyx":23
+  /* "pop/pop.data.pyx":23
  *         if isinstance(value, dict):
  *             value = NamespaceDict(value)
  *         self[key] = value             # <<<<<<<<<<<<<<
  * 
  * 
  */
   if (unlikely((PyObject_SetItem(((PyObject *)__pyx_v_self), __pyx_v_key, __pyx_v_value) < 0))) __PYX_ERR(0, 23, __pyx_L1_error)
 
-  /* "data.pyx":20
+  /* "pop/pop.data.pyx":20
  *             raise AttributeError(e)
  * 
  *     def __setattr__(self, key: str, value: object):             # <<<<<<<<<<<<<<
  *         if isinstance(value, dict):
  *             value = NamespaceDict(value)
  */
 
   /* function exit code */
   __pyx_r = 0;
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_AddTraceback("data.NamespaceDict.__setattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.NamespaceDict.__setattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_value);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_13NamespaceDict_5__reduce_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_5__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_13NamespaceDict_5__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_13NamespaceDict_5__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_13NamespaceDict_5__reduce_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_13NamespaceDict_5__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_13NamespaceDict_5__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_5__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -4582,22 +4587,22 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("__reduce_cython__", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__reduce_cython__", 0))) return NULL;
-  __pyx_r = __pyx_pf_4data_13NamespaceDict_4__reduce_cython__(((struct __pyx_obj_4data_NamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_13NamespaceDict_4__reduce_cython__(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_13NamespaceDict_4__reduce_cython__(struct __pyx_obj_4data_NamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_13NamespaceDict_4__reduce_cython__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self) {
   PyObject *__pyx_v_state = 0;
   PyObject *__pyx_v__dict = 0;
   int __pyx_v_use_setstate;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
@@ -4785,15 +4790,15 @@
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("data.NamespaceDict.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.NamespaceDict.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_state);
   __Pyx_XDECREF(__pyx_v__dict);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
@@ -4803,23 +4808,23 @@
  *     else:
  *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_13NamespaceDict_7__setstate_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_7__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_13NamespaceDict_7__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_13NamespaceDict_7__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_13NamespaceDict_7__setstate_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_13NamespaceDict_7__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_13NamespaceDict_7__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_7__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_state = 0;
@@ -4881,47 +4886,47 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.NamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.NamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_13NamespaceDict_6__setstate_cython__(((struct __pyx_obj_4data_NamespaceDict *)__pyx_v_self), __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_4data_13NamespaceDict_6__setstate_cython__(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v_self), __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_13NamespaceDict_6__setstate_cython__(struct __pyx_obj_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_4data_13NamespaceDict_6__setstate_cython__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__setstate_cython__", 1);
 
   /* "(tree fragment)":17
  *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
  * def __setstate_cython__(self, __pyx_state):
  *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
  */
   if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 17, __pyx_L1_error)
-  __pyx_t_1 = __pyx_f_4data___pyx_unpickle_NamespaceDict__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_NamespaceDict__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
   /* "(tree fragment)":16
  *     else:
  *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
@@ -4929,33 +4934,33 @@
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.NamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.NamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":31
+/* "pop/pop.data.pyx":31
  *     cdef dict[str, list[str]] _split_cache
  * 
  *     def __init__(self, base_dicts=None):             # <<<<<<<<<<<<<<
  *         if base_dicts is None:
  *             base_dicts = []
  */
 
 /* Python wrapper */
-static int __pyx_pw_4data_14MultidictCache_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
-static int __pyx_pw_4data_14MultidictCache_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
+static int __pyx_pw_3pop_4data_14MultidictCache_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
+static int __pyx_pw_3pop_4data_14MultidictCache_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
   PyObject *__pyx_v_base_dicts = 0;
   CYTHON_UNUSED Py_ssize_t __pyx_nargs;
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject* values[1] = {0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
@@ -5010,77 +5015,77 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.MultidictCache.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return -1;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_14MultidictCache___init__(((struct __pyx_obj_4data_MultidictCache *)__pyx_v_self), __pyx_v_base_dicts);
+  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache___init__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self), __pyx_v_base_dicts);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_4data_14MultidictCache___init__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_base_dicts) {
+static int __pyx_pf_3pop_4data_14MultidictCache___init__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_base_dicts) {
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__init__", 0);
   __Pyx_INCREF(__pyx_v_base_dicts);
 
-  /* "data.pyx":32
+  /* "pop/pop.data.pyx":32
  * 
  *     def __init__(self, base_dicts=None):
  *         if base_dicts is None:             # <<<<<<<<<<<<<<
  *             base_dicts = []
  *         self._base_dicts = base_dicts
  */
   __pyx_t_1 = (__pyx_v_base_dicts == Py_None);
   if (__pyx_t_1) {
 
-    /* "data.pyx":33
+    /* "pop/pop.data.pyx":33
  *     def __init__(self, base_dicts=None):
  *         if base_dicts is None:
  *             base_dicts = []             # <<<<<<<<<<<<<<
  *         self._base_dicts = base_dicts
  *         self._cache = dict[str, object]()
  */
     __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 33, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __Pyx_DECREF_SET(__pyx_v_base_dicts, __pyx_t_2);
     __pyx_t_2 = 0;
 
-    /* "data.pyx":32
+    /* "pop/pop.data.pyx":32
  * 
  *     def __init__(self, base_dicts=None):
  *         if base_dicts is None:             # <<<<<<<<<<<<<<
  *             base_dicts = []
  *         self._base_dicts = base_dicts
  */
   }
 
-  /* "data.pyx":34
+  /* "pop/pop.data.pyx":34
  *         if base_dicts is None:
  *             base_dicts = []
  *         self._base_dicts = base_dicts             # <<<<<<<<<<<<<<
  *         self._cache = dict[str, object]()
  *         self._split_cache = dict[str, list[str]]()
  */
   if (!(likely(PyList_CheckExact(__pyx_v_base_dicts))||((__pyx_v_base_dicts) == Py_None) || __Pyx_RaiseUnexpectedTypeError("list", __pyx_v_base_dicts))) __PYX_ERR(0, 34, __pyx_L1_error)
@@ -5088,15 +5093,15 @@
   __Pyx_INCREF(__pyx_t_2);
   __Pyx_GIVEREF(__pyx_t_2);
   __Pyx_GOTREF(__pyx_v_self->_base_dicts);
   __Pyx_DECREF(__pyx_v_self->_base_dicts);
   __pyx_v_self->_base_dicts = ((PyObject*)__pyx_t_2);
   __pyx_t_2 = 0;
 
-  /* "data.pyx":35
+  /* "pop/pop.data.pyx":35
  *             base_dicts = []
  *         self._base_dicts = base_dicts
  *         self._cache = dict[str, object]()             # <<<<<<<<<<<<<<
  *         self._split_cache = dict[str, list[str]]()
  * 
  */
   __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 35, __pyx_L1_error)
@@ -5135,15 +5140,15 @@
   if (!(likely(PyDict_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_2))) __PYX_ERR(0, 35, __pyx_L1_error)
   __Pyx_GIVEREF(__pyx_t_2);
   __Pyx_GOTREF(__pyx_v_self->_cache);
   __Pyx_DECREF(__pyx_v_self->_cache);
   __pyx_v_self->_cache = ((PyObject*)__pyx_t_2);
   __pyx_t_2 = 0;
 
-  /* "data.pyx":36
+  /* "pop/pop.data.pyx":36
  *         self._base_dicts = base_dicts
  *         self._cache = dict[str, object]()
  *         self._split_cache = dict[str, list[str]]()             # <<<<<<<<<<<<<<
  * 
  *     cpdef _clear(self):
  */
   __pyx_t_4 = __Pyx_PyObject_GetItem(((PyObject *)(&PyList_Type)), ((PyObject *)(&PyUnicode_Type))); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 36, __pyx_L1_error)
@@ -5184,53 +5189,53 @@
   if (!(likely(PyDict_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_2))) __PYX_ERR(0, 36, __pyx_L1_error)
   __Pyx_GIVEREF(__pyx_t_2);
   __Pyx_GOTREF(__pyx_v_self->_split_cache);
   __Pyx_DECREF(__pyx_v_self->_split_cache);
   __pyx_v_self->_split_cache = ((PyObject*)__pyx_t_2);
   __pyx_t_2 = 0;
 
-  /* "data.pyx":31
+  /* "pop/pop.data.pyx":31
  *     cdef dict[str, list[str]] _split_cache
  * 
  *     def __init__(self, base_dicts=None):             # <<<<<<<<<<<<<<
  *         if base_dicts is None:
  *             base_dicts = []
  */
 
   /* function exit code */
   __pyx_r = 0;
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("data.MultidictCache.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_base_dicts);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":38
+/* "pop/pop.data.pyx":38
  *         self._split_cache = dict[str, list[str]]()
  * 
  *     cpdef _clear(self):             # <<<<<<<<<<<<<<
  *         self._cache.clear()
  *         self._split_cache.clear()
  */
 
-static PyObject *__pyx_pw_4data_14MultidictCache_3_clear(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_3_clear(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyObject *__pyx_f_4data_14MultidictCache__clear(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, int __pyx_skip_dispatch) {
+static PyObject *__pyx_f_3pop_4data_14MultidictCache__clear(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, int __pyx_skip_dispatch) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   int __pyx_t_5;
@@ -5246,15 +5251,15 @@
     #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
     static PY_UINT64_T __pyx_tp_dict_version = __PYX_DICT_VERSION_INIT, __pyx_obj_dict_version = __PYX_DICT_VERSION_INIT;
     if (unlikely(!__Pyx_object_dict_version_matches(((PyObject *)__pyx_v_self), __pyx_tp_dict_version, __pyx_obj_dict_version))) {
       PY_UINT64_T __pyx_typedict_guard = __Pyx_get_tp_dict_version(((PyObject *)__pyx_v_self));
       #endif
       __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_clear); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 38, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
-      if (!__Pyx_IsSameCFunction(__pyx_t_1, (void*) __pyx_pw_4data_14MultidictCache_3_clear)) {
+      if (!__Pyx_IsSameCFunction(__pyx_t_1, (void*) __pyx_pw_3pop_4data_14MultidictCache_3_clear)) {
         __Pyx_XDECREF(__pyx_r);
         __Pyx_INCREF(__pyx_t_1);
         __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
         __pyx_t_5 = 0;
         #if CYTHON_UNPACK_METHODS
         if (unlikely(PyMethod_Check(__pyx_t_3))) {
           __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
@@ -5289,41 +5294,41 @@
       #endif
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
     }
     #endif
   }
 
-  /* "data.pyx":39
+  /* "pop/pop.data.pyx":39
  * 
  *     cpdef _clear(self):
  *         self._cache.clear()             # <<<<<<<<<<<<<<
  *         self._split_cache.clear()
  * 
  */
   if (unlikely(__pyx_v_self->_cache == Py_None)) {
     PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "clear");
     __PYX_ERR(0, 39, __pyx_L1_error)
   }
   __pyx_t_6 = __Pyx_PyDict_Clear(__pyx_v_self->_cache); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 39, __pyx_L1_error)
 
-  /* "data.pyx":40
+  /* "pop/pop.data.pyx":40
  *     cpdef _clear(self):
  *         self._cache.clear()
  *         self._split_cache.clear()             # <<<<<<<<<<<<<<
  * 
  *     def __getitem__(self, key:str):
  */
   if (unlikely(__pyx_v_self->_split_cache == Py_None)) {
     PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "clear");
     __PYX_ERR(0, 40, __pyx_L1_error)
   }
   __pyx_t_6 = __Pyx_PyDict_Clear(__pyx_v_self->_split_cache); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 40, __pyx_L1_error)
 
-  /* "data.pyx":38
+  /* "pop/pop.data.pyx":38
  *         self._split_cache = dict[str, list[str]]()
  * 
  *     cpdef _clear(self):             # <<<<<<<<<<<<<<
  *         self._cache.clear()
  *         self._split_cache.clear()
  */
 
@@ -5331,32 +5336,32 @@
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("data.MultidictCache._clear", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache._clear", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_14MultidictCache_3_clear(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_3_clear(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_14MultidictCache_3_clear = {"_clear", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_14MultidictCache_3_clear, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_14MultidictCache_3_clear(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_14MultidictCache_3_clear = {"_clear", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_3_clear, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_3_clear(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -5373,79 +5378,79 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("_clear", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "_clear", 0))) return NULL;
-  __pyx_r = __pyx_pf_4data_14MultidictCache_2_clear(((struct __pyx_obj_4data_MultidictCache *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_2_clear(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_14MultidictCache_2_clear(struct __pyx_obj_4data_MultidictCache *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_2_clear(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_clear", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_4data_14MultidictCache__clear(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_3pop_4data_14MultidictCache__clear(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.MultidictCache._clear", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache._clear", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":42
+/* "pop/pop.data.pyx":42
  *         self._split_cache.clear()
  * 
  *     def __getitem__(self, key:str):             # <<<<<<<<<<<<<<
  *         if key in self._cache:
  *             return self._cache[key]
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_14MultidictCache_5__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static PyObject *__pyx_pw_4data_14MultidictCache_5__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_5__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_5__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__getitem__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
   if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_key), (&PyUnicode_Type), 0, "key", 1))) __PYX_ERR(0, 42, __pyx_L1_error)
-  __pyx_r = __pyx_pf_4data_14MultidictCache_4__getitem__(((struct __pyx_obj_4data_MultidictCache *)__pyx_v_self), ((PyObject*)__pyx_v_key));
+  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_4__getitem__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self), ((PyObject*)__pyx_v_key));
 
   /* function exit code */
   goto __pyx_L0;
   __pyx_L1_error:;
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_14MultidictCache_4__getitem__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_4__getitem__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_key) {
   PyObject *__pyx_v_parts = NULL;
   PyObject *__pyx_v_base_dict = NULL;
   PyObject *__pyx_v_finder = NULL;
   PyObject *__pyx_v_part = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
@@ -5462,29 +5467,29 @@
   PyObject *__pyx_t_12 = NULL;
   Py_UCS4 __pyx_t_13;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__getitem__", 1);
 
-  /* "data.pyx":43
+  /* "pop/pop.data.pyx":43
  * 
  *     def __getitem__(self, key:str):
  *         if key in self._cache:             # <<<<<<<<<<<<<<
  *             return self._cache[key]
  * 
  */
   if (unlikely(__pyx_v_self->_cache == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
     __PYX_ERR(0, 43, __pyx_L1_error)
   }
   __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_key, __pyx_v_self->_cache, Py_EQ)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 43, __pyx_L1_error)
   if (__pyx_t_1) {
 
-    /* "data.pyx":44
+    /* "pop/pop.data.pyx":44
  *     def __getitem__(self, key:str):
  *         if key in self._cache:
  *             return self._cache[key]             # <<<<<<<<<<<<<<
  * 
  *         if key not in self._split_cache:
  */
     __Pyx_XDECREF(__pyx_r);
@@ -5494,38 +5499,38 @@
     }
     __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_v_self->_cache, __pyx_v_key); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 44, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __pyx_r = __pyx_t_2;
     __pyx_t_2 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":43
+    /* "pop/pop.data.pyx":43
  * 
  *     def __getitem__(self, key:str):
  *         if key in self._cache:             # <<<<<<<<<<<<<<
  *             return self._cache[key]
  * 
  */
   }
 
-  /* "data.pyx":46
+  /* "pop/pop.data.pyx":46
  *             return self._cache[key]
  * 
  *         if key not in self._split_cache:             # <<<<<<<<<<<<<<
  *             self._split_cache[key] = key.split('.')
  * 
  */
   if (unlikely(__pyx_v_self->_split_cache == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
     __PYX_ERR(0, 46, __pyx_L1_error)
   }
   __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_key, __pyx_v_self->_split_cache, Py_NE)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 46, __pyx_L1_error)
   if (__pyx_t_1) {
 
-    /* "data.pyx":47
+    /* "pop/pop.data.pyx":47
  * 
  *         if key not in self._split_cache:
  *             self._split_cache[key] = key.split('.')             # <<<<<<<<<<<<<<
  * 
  *         parts = self._split_cache[key]
  */
     __pyx_t_2 = PyUnicode_Split(__pyx_v_key, __Pyx_NoneAsNull(__pyx_kp_u__2), -1L); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 47, __pyx_L1_error)
@@ -5533,24 +5538,24 @@
     if (unlikely(__pyx_v_self->_split_cache == Py_None)) {
       PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
       __PYX_ERR(0, 47, __pyx_L1_error)
     }
     if (unlikely((PyDict_SetItem(__pyx_v_self->_split_cache, __pyx_v_key, __pyx_t_2) < 0))) __PYX_ERR(0, 47, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-    /* "data.pyx":46
+    /* "pop/pop.data.pyx":46
  *             return self._cache[key]
  * 
  *         if key not in self._split_cache:             # <<<<<<<<<<<<<<
  *             self._split_cache[key] = key.split('.')
  * 
  */
   }
 
-  /* "data.pyx":49
+  /* "pop/pop.data.pyx":49
  *             self._split_cache[key] = key.split('.')
  * 
  *         parts = self._split_cache[key]             # <<<<<<<<<<<<<<
  *         for base_dict in self._base_dicts:
  *             finder = base_dict
  */
   if (unlikely(__pyx_v_self->_split_cache == Py_None)) {
@@ -5558,15 +5563,15 @@
     __PYX_ERR(0, 49, __pyx_L1_error)
   }
   __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_v_self->_split_cache, __pyx_v_key); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 49, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_v_parts = __pyx_t_2;
   __pyx_t_2 = 0;
 
-  /* "data.pyx":50
+  /* "pop/pop.data.pyx":50
  * 
  *         parts = self._split_cache[key]
  *         for base_dict in self._base_dicts:             # <<<<<<<<<<<<<<
  *             finder = base_dict
  *             try:
  */
   if (unlikely(__pyx_v_self->_base_dicts == Py_None)) {
@@ -5588,25 +5593,25 @@
     #else
     __pyx_t_4 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 50, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     #endif
     __Pyx_XDECREF_SET(__pyx_v_base_dict, __pyx_t_4);
     __pyx_t_4 = 0;
 
-    /* "data.pyx":51
+    /* "pop/pop.data.pyx":51
  *         parts = self._split_cache[key]
  *         for base_dict in self._base_dicts:
  *             finder = base_dict             # <<<<<<<<<<<<<<
  *             try:
  *                 for part in parts:
  */
     __Pyx_INCREF(__pyx_v_base_dict);
     __Pyx_XDECREF_SET(__pyx_v_finder, __pyx_v_base_dict);
 
-    /* "data.pyx":52
+    /* "pop/pop.data.pyx":52
  *         for base_dict in self._base_dicts:
  *             finder = base_dict
  *             try:             # <<<<<<<<<<<<<<
  *                 for part in parts:
  *                     finder = finder[part]
  */
     {
@@ -5614,15 +5619,15 @@
       __Pyx_PyThreadState_assign
       __Pyx_ExceptionSave(&__pyx_t_5, &__pyx_t_6, &__pyx_t_7);
       __Pyx_XGOTREF(__pyx_t_5);
       __Pyx_XGOTREF(__pyx_t_6);
       __Pyx_XGOTREF(__pyx_t_7);
       /*try:*/ {
 
-        /* "data.pyx":53
+        /* "pop/pop.data.pyx":53
  *             finder = base_dict
  *             try:
  *                 for part in parts:             # <<<<<<<<<<<<<<
  *                     finder = finder[part]
  *                 self._cache[key] = finder
  */
         if (likely(PyList_CheckExact(__pyx_v_parts)) || PyTuple_CheckExact(__pyx_v_parts)) {
@@ -5676,90 +5681,90 @@
               break;
             }
             __Pyx_GOTREF(__pyx_t_10);
           }
           __Pyx_XDECREF_SET(__pyx_v_part, __pyx_t_10);
           __pyx_t_10 = 0;
 
-          /* "data.pyx":54
+          /* "pop/pop.data.pyx":54
  *             try:
  *                 for part in parts:
  *                     finder = finder[part]             # <<<<<<<<<<<<<<
  *                 self._cache[key] = finder
  *                 return finder
  */
           __pyx_t_10 = __Pyx_PyObject_GetItem(__pyx_v_finder, __pyx_v_part); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 54, __pyx_L7_error)
           __Pyx_GOTREF(__pyx_t_10);
           __Pyx_DECREF_SET(__pyx_v_finder, __pyx_t_10);
           __pyx_t_10 = 0;
 
-          /* "data.pyx":53
+          /* "pop/pop.data.pyx":53
  *             finder = base_dict
  *             try:
  *                 for part in parts:             # <<<<<<<<<<<<<<
  *                     finder = finder[part]
  *                 self._cache[key] = finder
  */
         }
         __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-        /* "data.pyx":55
+        /* "pop/pop.data.pyx":55
  *                 for part in parts:
  *                     finder = finder[part]
  *                 self._cache[key] = finder             # <<<<<<<<<<<<<<
  *                 return finder
  *             except KeyError:
  */
         if (unlikely(__pyx_v_self->_cache == Py_None)) {
           PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
           __PYX_ERR(0, 55, __pyx_L7_error)
         }
         if (unlikely((PyDict_SetItem(__pyx_v_self->_cache, __pyx_v_key, __pyx_v_finder) < 0))) __PYX_ERR(0, 55, __pyx_L7_error)
 
-        /* "data.pyx":56
+        /* "pop/pop.data.pyx":56
  *                     finder = finder[part]
  *                 self._cache[key] = finder
  *                 return finder             # <<<<<<<<<<<<<<
  *             except KeyError:
  *                 continue
  */
         __Pyx_XDECREF(__pyx_r);
         __Pyx_INCREF(__pyx_v_finder);
         __pyx_r = __pyx_v_finder;
         __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
         goto __pyx_L11_try_return;
 
-        /* "data.pyx":52
+        /* "pop/pop.data.pyx":52
  *         for base_dict in self._base_dicts:
  *             finder = base_dict
  *             try:             # <<<<<<<<<<<<<<
  *                 for part in parts:
  *                     finder = finder[part]
  */
       }
       __pyx_L7_error:;
       __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
       __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-      /* "data.pyx":57
+      /* "pop/pop.data.pyx":57
  *                 self._cache[key] = finder
  *                 return finder
  *             except KeyError:             # <<<<<<<<<<<<<<
  *                 continue
  * 
  */
       __pyx_t_11 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_KeyError);
       if (__pyx_t_11) {
-        __Pyx_AddTraceback("data.MultidictCache.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+        __Pyx_AddTraceback("pop.data.MultidictCache.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
         if (__Pyx_GetException(&__pyx_t_4, &__pyx_t_10, &__pyx_t_12) < 0) __PYX_ERR(0, 57, __pyx_L9_except_error)
         __Pyx_XGOTREF(__pyx_t_4);
         __Pyx_XGOTREF(__pyx_t_10);
         __Pyx_XGOTREF(__pyx_t_12);
 
-        /* "data.pyx":58
+        /* "pop/pop.data.pyx":58
  *                 return finder
  *             except KeyError:
  *                 continue             # <<<<<<<<<<<<<<
  * 
  *         raise KeyError(f"Item '{key}' not found in any base dictionary")
  */
         goto __pyx_L18_except_continue;
@@ -5767,15 +5772,15 @@
         __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
         __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
         __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
         goto __pyx_L13_try_continue;
       }
       goto __pyx_L9_except_error;
 
-      /* "data.pyx":52
+      /* "pop/pop.data.pyx":52
  *         for base_dict in self._base_dicts:
  *             finder = base_dict
  *             try:             # <<<<<<<<<<<<<<
  *                 for part in parts:
  *                     finder = finder[part]
  */
       __pyx_L9_except_error:;
@@ -5794,26 +5799,26 @@
       __Pyx_XGIVEREF(__pyx_t_5);
       __Pyx_XGIVEREF(__pyx_t_6);
       __Pyx_XGIVEREF(__pyx_t_7);
       __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
       goto __pyx_L0;
     }
 
-    /* "data.pyx":50
+    /* "pop/pop.data.pyx":50
  * 
  *         parts = self._split_cache[key]
  *         for base_dict in self._base_dicts:             # <<<<<<<<<<<<<<
  *             finder = base_dict
  *             try:
  */
     __pyx_L5_continue:;
   }
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "data.pyx":60
+  /* "pop/pop.data.pyx":60
  *                 continue
  * 
  *         raise KeyError(f"Item '{key}' not found in any base dictionary")             # <<<<<<<<<<<<<<
  * 
  *     def __iter__(self):
  */
   __pyx_t_2 = PyTuple_New(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L1_error)
@@ -5839,64 +5844,64 @@
   __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_KeyError, __pyx_t_12); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
   __Pyx_Raise(__pyx_t_2, 0, 0, 0);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __PYX_ERR(0, 60, __pyx_L1_error)
 
-  /* "data.pyx":42
+  /* "pop/pop.data.pyx":42
  *         self._split_cache.clear()
  * 
  *     def __getitem__(self, key:str):             # <<<<<<<<<<<<<<
  *         if key in self._cache:
  *             return self._cache[key]
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_10);
   __Pyx_XDECREF(__pyx_t_12);
-  __Pyx_AddTraceback("data.MultidictCache.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_parts);
   __Pyx_XDECREF(__pyx_v_base_dict);
   __Pyx_XDECREF(__pyx_v_finder);
   __Pyx_XDECREF(__pyx_v_part);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":62
+/* "pop/pop.data.pyx":62
  *         raise KeyError(f"Item '{key}' not found in any base dictionary")
  * 
  *     def __iter__(self):             # <<<<<<<<<<<<<<
  *         return iter({k for base_dict in self._base_dicts for k in base_dict})
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_14MultidictCache_7__iter__(PyObject *__pyx_v_self); /*proto*/
-static PyObject *__pyx_pw_4data_14MultidictCache_7__iter__(PyObject *__pyx_v_self) {
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_7__iter__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_7__iter__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__iter__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_14MultidictCache_6__iter__(((struct __pyx_obj_4data_MultidictCache *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_6__iter__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_14MultidictCache_6__iter__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_6__iter__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self) {
   PyObject *__pyx_7genexpr__pyx_v_base_dict = NULL;
   PyObject *__pyx_7genexpr__pyx_v_k = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   Py_ssize_t __pyx_t_3;
@@ -5905,15 +5910,15 @@
   PyObject *(*__pyx_t_6)(PyObject *);
   PyObject *__pyx_t_7 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__iter__", 1);
 
-  /* "data.pyx":63
+  /* "pop/pop.data.pyx":63
  * 
  *     def __iter__(self):
  *         return iter({k for base_dict in self._base_dicts for k in base_dict})             # <<<<<<<<<<<<<<
  * 
  *     def __contains__(self, item):
  */
   __Pyx_XDECREF(__pyx_r);
@@ -6013,112 +6018,112 @@
   __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 63, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __pyx_r = __pyx_t_2;
   __pyx_t_2 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":62
+  /* "pop/pop.data.pyx":62
  *         raise KeyError(f"Item '{key}' not found in any base dictionary")
  * 
  *     def __iter__(self):             # <<<<<<<<<<<<<<
  *         return iter({k for base_dict in self._base_dicts for k in base_dict})
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_AddTraceback("data.MultidictCache.__iter__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache.__iter__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_7genexpr__pyx_v_base_dict);
   __Pyx_XDECREF(__pyx_7genexpr__pyx_v_k);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":65
+/* "pop/pop.data.pyx":65
  *         return iter({k for base_dict in self._base_dicts for k in base_dict})
  * 
  *     def __contains__(self, item):             # <<<<<<<<<<<<<<
  *         return any(item in base_dict for base_dict in self._base_dicts)
  * 
  */
 
 /* Python wrapper */
-static int __pyx_pw_4data_14MultidictCache_9__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_item); /*proto*/
-static int __pyx_pw_4data_14MultidictCache_9__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_item) {
+static int __pyx_pw_3pop_4data_14MultidictCache_9__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_item); /*proto*/
+static int __pyx_pw_3pop_4data_14MultidictCache_9__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_item) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__contains__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_14MultidictCache_8__contains__(((struct __pyx_obj_4data_MultidictCache *)__pyx_v_self), ((PyObject *)__pyx_v_item));
+  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_8__contains__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self), ((PyObject *)__pyx_v_item));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
-static PyObject *__pyx_gb_4data_14MultidictCache_12__contains___2generator(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
+static PyObject *__pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
 
-/* "data.pyx":66
+/* "pop/pop.data.pyx":66
  * 
  *     def __contains__(self, item):
  *         return any(item in base_dict for base_dict in self._base_dicts)             # <<<<<<<<<<<<<<
  * 
  * cdef class ImmutableNamespaceDict:
  */
 
-static PyObject *__pyx_pf_4data_14MultidictCache_12__contains___genexpr(PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
-  struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *__pyx_cur_scope;
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_12__contains___genexpr(PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *__pyx_cur_scope;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("genexpr", 0);
-  __pyx_cur_scope = (struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *)__pyx_tp_new_4data___pyx_scope_struct_1_genexpr(__pyx_ptype_4data___pyx_scope_struct_1_genexpr, __pyx_empty_tuple, NULL);
+  __pyx_cur_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)__pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr(__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr, __pyx_empty_tuple, NULL);
   if (unlikely(!__pyx_cur_scope)) {
-    __pyx_cur_scope = ((struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *)Py_None);
+    __pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)Py_None);
     __Pyx_INCREF(Py_None);
     __PYX_ERR(0, 66, __pyx_L1_error)
   } else {
     __Pyx_GOTREF((PyObject *)__pyx_cur_scope);
   }
-  __pyx_cur_scope->__pyx_outer_scope = (struct __pyx_obj_4data___pyx_scope_struct____contains__ *) __pyx_self;
+  __pyx_cur_scope->__pyx_outer_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *) __pyx_self;
   __Pyx_INCREF((PyObject *)__pyx_cur_scope->__pyx_outer_scope);
   __Pyx_GIVEREF((PyObject *)__pyx_cur_scope->__pyx_outer_scope);
   __pyx_cur_scope->__pyx_genexpr_arg_0 = __pyx_genexpr_arg_0;
   __Pyx_INCREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
   __Pyx_GIVEREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
   {
-    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_4data_14MultidictCache_12__contains___2generator, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_contains___locals_genexpr, __pyx_n_s_data); if (unlikely(!gen)) __PYX_ERR(0, 66, __pyx_L1_error)
+    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_contains___locals_genexpr, __pyx_n_s_pop_data); if (unlikely(!gen)) __PYX_ERR(0, 66, __pyx_L1_error)
     __Pyx_DECREF(__pyx_cur_scope);
     __Pyx_RefNannyFinishContext();
     return (PyObject *) gen;
   }
 
   /* function exit code */
   __pyx_L1_error:;
-  __Pyx_AddTraceback("data.MultidictCache.__contains__.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache.__contains__.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __Pyx_DECREF((PyObject *)__pyx_cur_scope);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_gb_4data_14MultidictCache_12__contains___2generator(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
+static PyObject *__pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
 {
-  struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *__pyx_cur_scope = ((struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *)__pyx_generator->closure);
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *__pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)__pyx_generator->closure);
   PyObject *__pyx_r = NULL;
   PyObject *__pyx_t_1 = NULL;
   Py_ssize_t __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
@@ -6191,100 +6196,100 @@
   #endif
   __pyx_generator->resume_label = -1;
   __Pyx_Coroutine_clear((PyObject*)__pyx_generator);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":65
+/* "pop/pop.data.pyx":65
  *         return iter({k for base_dict in self._base_dicts for k in base_dict})
  * 
  *     def __contains__(self, item):             # <<<<<<<<<<<<<<
  *         return any(item in base_dict for base_dict in self._base_dicts)
  * 
  */
 
-static int __pyx_pf_4data_14MultidictCache_8__contains__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_item) {
-  struct __pyx_obj_4data___pyx_scope_struct____contains__ *__pyx_cur_scope;
-  PyObject *__pyx_gb_4data_14MultidictCache_12__contains___2generator = 0;
+static int __pyx_pf_3pop_4data_14MultidictCache_8__contains__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_item) {
+  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *__pyx_cur_scope;
+  PyObject *__pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator = 0;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   int __pyx_t_3;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__contains__", 0);
-  __pyx_cur_scope = (struct __pyx_obj_4data___pyx_scope_struct____contains__ *)__pyx_tp_new_4data___pyx_scope_struct____contains__(__pyx_ptype_4data___pyx_scope_struct____contains__, __pyx_empty_tuple, NULL);
+  __pyx_cur_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)__pyx_tp_new_3pop_4data___pyx_scope_struct____contains__(__pyx_ptype_3pop_4data___pyx_scope_struct____contains__, __pyx_empty_tuple, NULL);
   if (unlikely(!__pyx_cur_scope)) {
-    __pyx_cur_scope = ((struct __pyx_obj_4data___pyx_scope_struct____contains__ *)Py_None);
+    __pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)Py_None);
     __Pyx_INCREF(Py_None);
     __PYX_ERR(0, 65, __pyx_L1_error)
   } else {
     __Pyx_GOTREF((PyObject *)__pyx_cur_scope);
   }
   __pyx_cur_scope->__pyx_v_item = __pyx_v_item;
   __Pyx_INCREF(__pyx_cur_scope->__pyx_v_item);
   __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_item);
 
-  /* "data.pyx":66
+  /* "pop/pop.data.pyx":66
  * 
  *     def __contains__(self, item):
  *         return any(item in base_dict for base_dict in self._base_dicts)             # <<<<<<<<<<<<<<
  * 
  * cdef class ImmutableNamespaceDict:
  */
-  __pyx_t_1 = __pyx_pf_4data_14MultidictCache_12__contains___genexpr(((PyObject*)__pyx_cur_scope), __pyx_v_self->_base_dicts); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 66, __pyx_L1_error)
+  __pyx_t_1 = __pyx_pf_3pop_4data_14MultidictCache_12__contains___genexpr(((PyObject*)__pyx_cur_scope), __pyx_v_self->_base_dicts); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_t_2 = __Pyx_Generator_Next(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __pyx_t_3 = __Pyx_PyInt_As_int(__pyx_t_2); if (unlikely((__pyx_t_3 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_r = __pyx_t_3;
   goto __pyx_L0;
 
-  /* "data.pyx":65
+  /* "pop/pop.data.pyx":65
  *         return iter({k for base_dict in self._base_dicts for k in base_dict})
  * 
  *     def __contains__(self, item):             # <<<<<<<<<<<<<<
  *         return any(item in base_dict for base_dict in self._base_dicts)
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_AddTraceback("data.MultidictCache.__contains__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache.__contains__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_gb_4data_14MultidictCache_12__contains___2generator);
+  __Pyx_XDECREF(__pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator);
   __Pyx_DECREF((PyObject *)__pyx_cur_scope);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_14MultidictCache_11__reduce_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_11__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_14MultidictCache_11__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_14MultidictCache_11__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_14MultidictCache_11__reduce_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_14MultidictCache_11__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_11__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_11__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -6301,22 +6306,22 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("__reduce_cython__", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__reduce_cython__", 0))) return NULL;
-  __pyx_r = __pyx_pf_4data_14MultidictCache_10__reduce_cython__(((struct __pyx_obj_4data_MultidictCache *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_10__reduce_cython__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_14MultidictCache_10__reduce_cython__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_10__reduce_cython__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self) {
   PyObject *__pyx_v_state = 0;
   PyObject *__pyx_v__dict = 0;
   int __pyx_v_use_setstate;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
@@ -6531,15 +6536,15 @@
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_AddTraceback("data.MultidictCache.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_state);
   __Pyx_XDECREF(__pyx_v__dict);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
@@ -6549,23 +6554,23 @@
  *     else:
  *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_14MultidictCache_13__setstate_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_13__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_14MultidictCache_13__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_14MultidictCache_13__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_14MultidictCache_13__setstate_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_14MultidictCache_13__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_13__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_14MultidictCache_13__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_state = 0;
@@ -6627,47 +6632,47 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.MultidictCache.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_14MultidictCache_12__setstate_cython__(((struct __pyx_obj_4data_MultidictCache *)__pyx_v_self), __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_12__setstate_cython__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self), __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_14MultidictCache_12__setstate_cython__(struct __pyx_obj_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_4data_14MultidictCache_12__setstate_cython__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__setstate_cython__", 1);
 
   /* "(tree fragment)":17
  *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
  * def __setstate_cython__(self, __pyx_state):
  *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
  */
   if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 17, __pyx_L1_error)
-  __pyx_t_1 = __pyx_f_4data___pyx_unpickle_MultidictCache__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_MultidictCache__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
   /* "(tree fragment)":16
  *     else:
  *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
@@ -6675,33 +6680,33 @@
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.MultidictCache.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.MultidictCache.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":71
+/* "pop/pop.data.pyx":71
  *     cdef readonly dict __data
  * 
  *     def __init__(self, data=None):             # <<<<<<<<<<<<<<
  *         if isinstance(data, ImmutableNamespaceDict):
  *             self.__data = data.__data
  */
 
 /* Python wrapper */
-static int __pyx_pw_4data_22ImmutableNamespaceDict_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
-static int __pyx_pw_4data_22ImmutableNamespaceDict_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
   PyObject *__pyx_v_data = 0;
   CYTHON_UNUSED Py_ssize_t __pyx_nargs;
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject* values[1] = {0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
@@ -6756,32 +6761,32 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return -1;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict___init__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), __pyx_v_data);
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict___init__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), __pyx_v_data);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_4data_22ImmutableNamespaceDict___init__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_data) {
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict___init__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_data) {
   PyObject *__pyx_8genexpr2__pyx_v_key = NULL;
   PyObject *__pyx_8genexpr2__pyx_v_value = NULL;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
@@ -6793,25 +6798,25 @@
   int __pyx_t_9;
   PyObject *__pyx_t_10 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__init__", 1);
 
-  /* "data.pyx":72
+  /* "pop/pop.data.pyx":72
  * 
  *     def __init__(self, data=None):
  *         if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
  *             self.__data = data.__data
  *         elif isinstance(data, dict):
  */
-  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_data, __pyx_ptype_4data_ImmutableNamespaceDict); 
+  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_data, __pyx_ptype_3pop_4data_ImmutableNamespaceDict); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":73
+    /* "pop/pop.data.pyx":73
  *     def __init__(self, data=None):
  *         if isinstance(data, ImmutableNamespaceDict):
  *             self.__data = data.__data             # <<<<<<<<<<<<<<
  *         elif isinstance(data, dict):
  *             self.__data = {key: freeze(value) for key, value in data.items()}
  */
     __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_data, __pyx_n_s_ImmutableNamespaceDict__data); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 73, __pyx_L1_error)
@@ -6819,35 +6824,35 @@
     if (!(likely(PyDict_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_2))) __PYX_ERR(0, 73, __pyx_L1_error)
     __Pyx_GIVEREF(__pyx_t_2);
     __Pyx_GOTREF(__pyx_v_self->_ImmutableNamespaceDict__data);
     __Pyx_DECREF(__pyx_v_self->_ImmutableNamespaceDict__data);
     __pyx_v_self->_ImmutableNamespaceDict__data = ((PyObject*)__pyx_t_2);
     __pyx_t_2 = 0;
 
-    /* "data.pyx":72
+    /* "pop/pop.data.pyx":72
  * 
  *     def __init__(self, data=None):
  *         if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
  *             self.__data = data.__data
  *         elif isinstance(data, dict):
  */
     goto __pyx_L3;
   }
 
-  /* "data.pyx":74
+  /* "pop/pop.data.pyx":74
  *         if isinstance(data, ImmutableNamespaceDict):
  *             self.__data = data.__data
  *         elif isinstance(data, dict):             # <<<<<<<<<<<<<<
  *             self.__data = {key: freeze(value) for key, value in data.items()}
  *         else:
  */
   __pyx_t_1 = PyDict_Check(__pyx_v_data); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":75
+    /* "pop/pop.data.pyx":75
  *             self.__data = data.__data
  *         elif isinstance(data, dict):
  *             self.__data = {key: freeze(value) for key, value in data.items()}             # <<<<<<<<<<<<<<
  *         else:
  *             self.__data = {}
  */
     { /* enter inner scope */
@@ -6912,25 +6917,25 @@
     } /* exit inner scope */
     __Pyx_GIVEREF(__pyx_t_2);
     __Pyx_GOTREF(__pyx_v_self->_ImmutableNamespaceDict__data);
     __Pyx_DECREF(__pyx_v_self->_ImmutableNamespaceDict__data);
     __pyx_v_self->_ImmutableNamespaceDict__data = ((PyObject*)__pyx_t_2);
     __pyx_t_2 = 0;
 
-    /* "data.pyx":74
+    /* "pop/pop.data.pyx":74
  *         if isinstance(data, ImmutableNamespaceDict):
  *             self.__data = data.__data
  *         elif isinstance(data, dict):             # <<<<<<<<<<<<<<
  *             self.__data = {key: freeze(value) for key, value in data.items()}
  *         else:
  */
     goto __pyx_L3;
   }
 
-  /* "data.pyx":77
+  /* "pop/pop.data.pyx":77
  *             self.__data = {key: freeze(value) for key, value in data.items()}
  *         else:
  *             self.__data = {}             # <<<<<<<<<<<<<<
  * 
  *     def __getitem__(self, key):
  */
   /*else*/ {
@@ -6940,15 +6945,15 @@
     __Pyx_GOTREF(__pyx_v_self->_ImmutableNamespaceDict__data);
     __Pyx_DECREF(__pyx_v_self->_ImmutableNamespaceDict__data);
     __pyx_v_self->_ImmutableNamespaceDict__data = ((PyObject*)__pyx_t_2);
     __pyx_t_2 = 0;
   }
   __pyx_L3:;
 
-  /* "data.pyx":71
+  /* "pop/pop.data.pyx":71
  *     cdef readonly dict __data
  * 
  *     def __init__(self, data=None):             # <<<<<<<<<<<<<<
  *         if isinstance(data, ImmutableNamespaceDict):
  *             self.__data = data.__data
  */
 
@@ -6957,47 +6962,47 @@
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_7);
   __Pyx_XDECREF(__pyx_t_8);
   __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_key);
   __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_value);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":79
+/* "pop/pop.data.pyx":79
  *             self.__data = {}
  * 
  *     def __getitem__(self, key):             # <<<<<<<<<<<<<<
  *         try:
  *             return self.__data[key]
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_3__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_3__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_3__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_3__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__getitem__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_2__getitem__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_2__getitem__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_2__getitem__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_2__getitem__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   int __pyx_t_5;
@@ -7005,15 +7010,15 @@
   PyObject *__pyx_t_7 = NULL;
   PyObject *__pyx_t_8 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__getitem__", 1);
 
-  /* "data.pyx":80
+  /* "pop/pop.data.pyx":80
  * 
  *     def __getitem__(self, key):
  *         try:             # <<<<<<<<<<<<<<
  *             return self.__data[key]
  *         except KeyError:
  */
   {
@@ -7021,15 +7026,15 @@
     __Pyx_PyThreadState_assign
     __Pyx_ExceptionSave(&__pyx_t_1, &__pyx_t_2, &__pyx_t_3);
     __Pyx_XGOTREF(__pyx_t_1);
     __Pyx_XGOTREF(__pyx_t_2);
     __Pyx_XGOTREF(__pyx_t_3);
     /*try:*/ {
 
-      /* "data.pyx":81
+      /* "pop/pop.data.pyx":81
  *     def __getitem__(self, key):
  *         try:
  *             return self.__data[key]             # <<<<<<<<<<<<<<
  *         except KeyError:
  *             return ImmutableNamespaceDict()
  */
       __Pyx_XDECREF(__pyx_r);
@@ -7039,60 +7044,60 @@
       }
       __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_v_key); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 81, __pyx_L3_error)
       __Pyx_GOTREF(__pyx_t_4);
       __pyx_r = __pyx_t_4;
       __pyx_t_4 = 0;
       goto __pyx_L7_try_return;
 
-      /* "data.pyx":80
+      /* "pop/pop.data.pyx":80
  * 
  *     def __getitem__(self, key):
  *         try:             # <<<<<<<<<<<<<<
  *             return self.__data[key]
  *         except KeyError:
  */
     }
     __pyx_L3_error:;
     __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-    /* "data.pyx":82
+    /* "pop/pop.data.pyx":82
  *         try:
  *             return self.__data[key]
  *         except KeyError:             # <<<<<<<<<<<<<<
  *             return ImmutableNamespaceDict()
  * 
  */
     __pyx_t_5 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_KeyError);
     if (__pyx_t_5) {
-      __Pyx_AddTraceback("data.ImmutableNamespaceDict.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
       if (__Pyx_GetException(&__pyx_t_4, &__pyx_t_6, &__pyx_t_7) < 0) __PYX_ERR(0, 82, __pyx_L5_except_error)
       __Pyx_XGOTREF(__pyx_t_4);
       __Pyx_XGOTREF(__pyx_t_6);
       __Pyx_XGOTREF(__pyx_t_7);
 
-      /* "data.pyx":83
+      /* "pop/pop.data.pyx":83
  *             return self.__data[key]
  *         except KeyError:
  *             return ImmutableNamespaceDict()             # <<<<<<<<<<<<<<
  * 
  *     def __getattr__(self, key):
  */
       __Pyx_XDECREF(__pyx_r);
-      __pyx_t_8 = __Pyx_PyObject_CallNoArg(((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict)); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 83, __pyx_L5_except_error)
+      __pyx_t_8 = __Pyx_PyObject_CallNoArg(((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict)); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 83, __pyx_L5_except_error)
       __Pyx_GOTREF(__pyx_t_8);
       __pyx_r = __pyx_t_8;
       __pyx_t_8 = 0;
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
       __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
       goto __pyx_L6_except_return;
     }
     goto __pyx_L5_except_error;
 
-    /* "data.pyx":80
+    /* "pop/pop.data.pyx":80
  * 
  *     def __getitem__(self, key):
  *         try:             # <<<<<<<<<<<<<<
  *             return self.__data[key]
  *         except KeyError:
  */
     __pyx_L5_except_error:;
@@ -7111,88 +7116,88 @@
     __Pyx_XGIVEREF(__pyx_t_1);
     __Pyx_XGIVEREF(__pyx_t_2);
     __Pyx_XGIVEREF(__pyx_t_3);
     __Pyx_ExceptionReset(__pyx_t_1, __pyx_t_2, __pyx_t_3);
     goto __pyx_L0;
   }
 
-  /* "data.pyx":79
+  /* "pop/pop.data.pyx":79
  *             self.__data = {}
  * 
  *     def __getitem__(self, key):             # <<<<<<<<<<<<<<
  *         try:
  *             return self.__data[key]
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_6);
   __Pyx_XDECREF(__pyx_t_7);
   __Pyx_XDECREF(__pyx_t_8);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":85
+/* "pop/pop.data.pyx":85
  *             return ImmutableNamespaceDict()
  * 
  *     def __getattr__(self, key):             # <<<<<<<<<<<<<<
  *         if key in self.__data:
  *             return self.__data[key]
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_5__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_5__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_5__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_5__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__getattr__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_4__getattr__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_4__getattr__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_4__getattr__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_4__getattr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   Py_ssize_t __pyx_t_3;
   Py_UCS4 __pyx_t_4;
   PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__getattr__", 1);
 
-  /* "data.pyx":86
+  /* "pop/pop.data.pyx":86
  * 
  *     def __getattr__(self, key):
  *         if key in self.__data:             # <<<<<<<<<<<<<<
  *             return self.__data[key]
  *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
  */
   if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
     __PYX_ERR(0, 86, __pyx_L1_error)
   }
   __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_key, __pyx_v_self->_ImmutableNamespaceDict__data, Py_EQ)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 86, __pyx_L1_error)
   if (__pyx_t_1) {
 
-    /* "data.pyx":87
+    /* "pop/pop.data.pyx":87
  *     def __getattr__(self, key):
  *         if key in self.__data:
  *             return self.__data[key]             # <<<<<<<<<<<<<<
  *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
  * 
  */
     __Pyx_XDECREF(__pyx_r);
@@ -7202,24 +7207,24 @@
     }
     __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_v_key); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 87, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __pyx_r = __pyx_t_2;
     __pyx_t_2 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":86
+    /* "pop/pop.data.pyx":86
  * 
  *     def __getattr__(self, key):
  *         if key in self.__data:             # <<<<<<<<<<<<<<
  *             return self.__data[key]
  *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
  */
   }
 
-  /* "data.pyx":88
+  /* "pop/pop.data.pyx":88
  *         if key in self.__data:
  *             return self.__data[key]
  *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")             # <<<<<<<<<<<<<<
  * 
  *     def __setattr__(self, key, value):
  */
   __pyx_t_2 = PyTuple_New(5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L1_error)
@@ -7261,82 +7266,82 @@
   __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_AttributeError, __pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
   __Pyx_Raise(__pyx_t_2, 0, 0, 0);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __PYX_ERR(0, 88, __pyx_L1_error)
 
-  /* "data.pyx":85
+  /* "pop/pop.data.pyx":85
  *             return ImmutableNamespaceDict()
  * 
  *     def __getattr__(self, key):             # <<<<<<<<<<<<<<
  *         if key in self.__data:
  *             return self.__data[key]
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__getattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__getattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":90
+/* "pop/pop.data.pyx":90
  *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
  * 
  *     def __setattr__(self, key, value):             # <<<<<<<<<<<<<<
  *         if key == '_ImmutableNamespaceDict__data':
  *             object.__setattr__(self, key, value)
  */
 
 /* Python wrapper */
-static int __pyx_pw_4data_22ImmutableNamespaceDict_7__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /*proto*/
-static int __pyx_pw_4data_22ImmutableNamespaceDict_7__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_7__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_7__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__setattr__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_6__setattr__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key), ((PyObject *)__pyx_v_value));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_6__setattr__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_4data_22ImmutableNamespaceDict_6__setattr__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_6__setattr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__setattr__", 1);
 
-  /* "data.pyx":91
+  /* "pop/pop.data.pyx":91
  * 
  *     def __setattr__(self, key, value):
  *         if key == '_ImmutableNamespaceDict__data':             # <<<<<<<<<<<<<<
  *             object.__setattr__(self, key, value)
  *         else:
  */
   __pyx_t_1 = (__Pyx_PyUnicode_Equals(__pyx_v_key, __pyx_n_u_ImmutableNamespaceDict__data, Py_EQ)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 91, __pyx_L1_error)
   if (likely(__pyx_t_1)) {
 
-    /* "data.pyx":92
+    /* "pop/pop.data.pyx":92
  *     def __setattr__(self, key, value):
  *         if key == '_ImmutableNamespaceDict__data':
  *             object.__setattr__(self, key, value)             # <<<<<<<<<<<<<<
  *         else:
  *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")
  */
     __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_builtin_object, __pyx_n_s_setattr); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 92, __pyx_L1_error)
@@ -7361,25 +7366,25 @@
       __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
       if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 92, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-    /* "data.pyx":91
+    /* "pop/pop.data.pyx":91
  * 
  *     def __setattr__(self, key, value):
  *         if key == '_ImmutableNamespaceDict__data':             # <<<<<<<<<<<<<<
  *             object.__setattr__(self, key, value)
  *         else:
  */
     goto __pyx_L3;
   }
 
-  /* "data.pyx":94
+  /* "pop/pop.data.pyx":94
  *             object.__setattr__(self, key, value)
  *         else:
  *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")             # <<<<<<<<<<<<<<
  * 
  *     def __setitem__(self, key, value):
  */
   /*else*/ {
@@ -7387,143 +7392,143 @@
     __Pyx_GOTREF(__pyx_t_2);
     __Pyx_Raise(__pyx_t_2, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     __PYX_ERR(0, 94, __pyx_L1_error)
   }
   __pyx_L3:;
 
-  /* "data.pyx":90
+  /* "pop/pop.data.pyx":90
  *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
  * 
  *     def __setattr__(self, key, value):             # <<<<<<<<<<<<<<
  *         if key == '_ImmutableNamespaceDict__data':
  *             object.__setattr__(self, key, value)
  */
 
   /* function exit code */
   __pyx_r = 0;
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__setattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__setattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":96
+/* "pop/pop.data.pyx":96
  *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")
  * 
  *     def __setitem__(self, key, value):             # <<<<<<<<<<<<<<
  *         raise TypeError("ImmutableNamespaceDict does not support item assignment")
  * 
  */
 
 /* Python wrapper */
-static int __pyx_pw_4data_22ImmutableNamespaceDict_9__setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /*proto*/
-static int __pyx_pw_4data_22ImmutableNamespaceDict_9__setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_9__setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_9__setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__setitem__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_8__setitem__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key), ((PyObject *)__pyx_v_value));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_8__setitem__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_4data_22ImmutableNamespaceDict_8__setitem__(CYTHON_UNUSED struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_key, CYTHON_UNUSED PyObject *__pyx_v_value) {
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_8__setitem__(CYTHON_UNUSED struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_key, CYTHON_UNUSED PyObject *__pyx_v_value) {
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__setitem__", 1);
 
-  /* "data.pyx":97
+  /* "pop/pop.data.pyx":97
  * 
  *     def __setitem__(self, key, value):
  *         raise TypeError("ImmutableNamespaceDict does not support item assignment")             # <<<<<<<<<<<<<<
  * 
  *     def __call__(self):
  */
   __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_TypeError, __pyx_tuple__5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 97, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_Raise(__pyx_t_1, 0, 0, 0);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __PYX_ERR(0, 97, __pyx_L1_error)
 
-  /* "data.pyx":96
+  /* "pop/pop.data.pyx":96
  *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")
  * 
  *     def __setitem__(self, key, value):             # <<<<<<<<<<<<<<
  *         raise TypeError("ImmutableNamespaceDict does not support item assignment")
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__setitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__setitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":99
+/* "pop/pop.data.pyx":99
  *         raise TypeError("ImmutableNamespaceDict does not support item assignment")
  * 
  *     def __call__(self):             # <<<<<<<<<<<<<<
  *         return unfreeze(self.__data)
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_11__call__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_11__call__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_11__call__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_11__call__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
   CYTHON_UNUSED Py_ssize_t __pyx_nargs;
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__call__ (wrapper)", 0);
   #if CYTHON_ASSUME_SAFE_MACROS
   __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #else
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("__call__", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_VARARGS(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__call__", 0))) return NULL;
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_10__call__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_10__call__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_10__call__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_10__call__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__call__", 1);
 
-  /* "data.pyx":100
+  /* "pop/pop.data.pyx":100
  * 
  *     def __call__(self):
  *         return unfreeze(self.__data)             # <<<<<<<<<<<<<<
  * 
  *     def __len__(self):
  */
   __Pyx_XDECREF(__pyx_r);
@@ -7551,69 +7556,69 @@
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":99
+  /* "pop/pop.data.pyx":99
  *         raise TypeError("ImmutableNamespaceDict does not support item assignment")
  * 
  *     def __call__(self):             # <<<<<<<<<<<<<<
  *         return unfreeze(self.__data)
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__call__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__call__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":102
+/* "pop/pop.data.pyx":102
  *         return unfreeze(self.__data)
  * 
  *     def __len__(self):             # <<<<<<<<<<<<<<
  *         return len(self.__data)
  * 
  */
 
 /* Python wrapper */
-static Py_ssize_t __pyx_pw_4data_22ImmutableNamespaceDict_13__len__(PyObject *__pyx_v_self); /*proto*/
-static Py_ssize_t __pyx_pw_4data_22ImmutableNamespaceDict_13__len__(PyObject *__pyx_v_self) {
+static Py_ssize_t __pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__(PyObject *__pyx_v_self); /*proto*/
+static Py_ssize_t __pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   Py_ssize_t __pyx_r;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__len__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_12__len__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_12__len__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static Py_ssize_t __pyx_pf_4data_22ImmutableNamespaceDict_12__len__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static Py_ssize_t __pyx_pf_3pop_4data_22ImmutableNamespaceDict_12__len__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   Py_ssize_t __pyx_r;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   Py_ssize_t __pyx_t_2;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__len__", 1);
 
-  /* "data.pyx":103
+  /* "pop/pop.data.pyx":103
  * 
  *     def __len__(self):
  *         return len(self.__data)             # <<<<<<<<<<<<<<
  * 
  *     def __iter__(self):
  */
   __pyx_t_1 = __pyx_v_self->_ImmutableNamespaceDict__data;
@@ -7623,66 +7628,66 @@
     __PYX_ERR(0, 103, __pyx_L1_error)
   }
   __pyx_t_2 = PyDict_Size(__pyx_t_1); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 103, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __pyx_r = __pyx_t_2;
   goto __pyx_L0;
 
-  /* "data.pyx":102
+  /* "pop/pop.data.pyx":102
  *         return unfreeze(self.__data)
  * 
  *     def __len__(self):             # <<<<<<<<<<<<<<
  *         return len(self.__data)
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__len__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__len__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":105
+/* "pop/pop.data.pyx":105
  *         return len(self.__data)
  * 
  *     def __iter__(self):             # <<<<<<<<<<<<<<
  *         return iter(self.__data)
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_15__iter__(PyObject *__pyx_v_self); /*proto*/
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_15__iter__(PyObject *__pyx_v_self) {
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_15__iter__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_15__iter__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__iter__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_14__iter__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_14__iter__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_14__iter__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_14__iter__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__iter__", 1);
 
-  /* "data.pyx":106
+  /* "pop/pop.data.pyx":106
  * 
  *     def __iter__(self):
  *         return iter(self.__data)             # <<<<<<<<<<<<<<
  * 
  *     def __bool__(self):
  */
   __Pyx_XDECREF(__pyx_r);
@@ -7691,262 +7696,262 @@
   __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 106, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __pyx_r = __pyx_t_2;
   __pyx_t_2 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":105
+  /* "pop/pop.data.pyx":105
  *         return len(self.__data)
  * 
  *     def __iter__(self):             # <<<<<<<<<<<<<<
  *         return iter(self.__data)
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__iter__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__iter__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":108
+/* "pop/pop.data.pyx":108
  *         return iter(self.__data)
  * 
  *     def __bool__(self):             # <<<<<<<<<<<<<<
  *         return bool(self.__data)
  * 
  */
 
 /* Python wrapper */
-static int __pyx_pw_4data_22ImmutableNamespaceDict_17__bool__(PyObject *__pyx_v_self); /*proto*/
-static int __pyx_pw_4data_22ImmutableNamespaceDict_17__bool__(PyObject *__pyx_v_self) {
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_17__bool__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_17__bool__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__bool__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_16__bool__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_16__bool__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_4data_22ImmutableNamespaceDict_16__bool__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_16__bool__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   int __pyx_r;
   int __pyx_t_1;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
 
-  /* "data.pyx":109
+  /* "pop/pop.data.pyx":109
  * 
  *     def __bool__(self):
  *         return bool(self.__data)             # <<<<<<<<<<<<<<
  * 
  *     def __contains__(self, key):
  */
   __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_self->_ImmutableNamespaceDict__data); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 109, __pyx_L1_error)
   __pyx_r = (!(!__pyx_t_1));
   goto __pyx_L0;
 
-  /* "data.pyx":108
+  /* "pop/pop.data.pyx":108
  *         return iter(self.__data)
  * 
  *     def __bool__(self):             # <<<<<<<<<<<<<<
  *         return bool(self.__data)
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__bool__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__bool__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
   return __pyx_r;
 }
 
-/* "data.pyx":111
+/* "pop/pop.data.pyx":111
  *         return bool(self.__data)
  * 
  *     def __contains__(self, key):             # <<<<<<<<<<<<<<
  *         return key in self.__data
  * 
  */
 
 /* Python wrapper */
-static int __pyx_pw_4data_22ImmutableNamespaceDict_19__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static int __pyx_pw_4data_22ImmutableNamespaceDict_19__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_19__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
+static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_19__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__contains__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_18__contains__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_18__contains__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_4data_22ImmutableNamespaceDict_18__contains__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
+static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_18__contains__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
   int __pyx_r;
   int __pyx_t_1;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
 
-  /* "data.pyx":112
+  /* "pop/pop.data.pyx":112
  * 
  *     def __contains__(self, key):
  *         return key in self.__data             # <<<<<<<<<<<<<<
  * 
  *     def __repr__(self):
  */
   if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
     __PYX_ERR(0, 112, __pyx_L1_error)
   }
   __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_key, __pyx_v_self->_ImmutableNamespaceDict__data, Py_EQ)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 112, __pyx_L1_error)
   __pyx_r = __pyx_t_1;
   goto __pyx_L0;
 
-  /* "data.pyx":111
+  /* "pop/pop.data.pyx":111
  *         return bool(self.__data)
  * 
  *     def __contains__(self, key):             # <<<<<<<<<<<<<<
  *         return key in self.__data
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__contains__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__contains__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
   return __pyx_r;
 }
 
-/* "data.pyx":114
+/* "pop/pop.data.pyx":114
  *         return key in self.__data
  * 
  *     def __repr__(self):             # <<<<<<<<<<<<<<
  *         return f"{self.__data}"
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_21__repr__(PyObject *__pyx_v_self); /*proto*/
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_21__repr__(PyObject *__pyx_v_self) {
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__repr__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_20__repr__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_20__repr__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_20__repr__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_20__repr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__repr__", 1);
 
-  /* "data.pyx":115
+  /* "pop/pop.data.pyx":115
  * 
  *     def __repr__(self):
  *         return f"{self.__data}"             # <<<<<<<<<<<<<<
  * 
  *     def __eq__(self, other):
  */
   __Pyx_XDECREF(__pyx_r);
   __pyx_t_1 = __Pyx_PyObject_FormatSimple(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_empty_unicode); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 115, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":114
+  /* "pop/pop.data.pyx":114
  *         return key in self.__data
  * 
  *     def __repr__(self):             # <<<<<<<<<<<<<<
  *         return f"{self.__data}"
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__repr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__repr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":117
+/* "pop/pop.data.pyx":117
  *         return f"{self.__data}"
  * 
  *     def __eq__(self, other):             # <<<<<<<<<<<<<<
  *         if isinstance(other, ImmutableNamespaceDict):
  *             return self.__data == other.__data
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_23__eq__(PyObject *__pyx_v_self, PyObject *__pyx_v_other); /*proto*/
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_23__eq__(PyObject *__pyx_v_self, PyObject *__pyx_v_other) {
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_23__eq__(PyObject *__pyx_v_self, PyObject *__pyx_v_other); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_23__eq__(PyObject *__pyx_v_self, PyObject *__pyx_v_other) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__eq__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_22__eq__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_other));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_22__eq__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_other));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_22__eq__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_22__eq__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__eq__", 1);
 
-  /* "data.pyx":118
+  /* "pop/pop.data.pyx":118
  * 
  *     def __eq__(self, other):
  *         if isinstance(other, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
  *             return self.__data == other.__data
  *         elif isinstance(other, dict):
  */
-  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_other, __pyx_ptype_4data_ImmutableNamespaceDict); 
+  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_other, __pyx_ptype_3pop_4data_ImmutableNamespaceDict); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":119
+    /* "pop/pop.data.pyx":119
  *     def __eq__(self, other):
  *         if isinstance(other, ImmutableNamespaceDict):
  *             return self.__data == other.__data             # <<<<<<<<<<<<<<
  *         elif isinstance(other, dict):
  *             return self.__data == other
  */
     __Pyx_XDECREF(__pyx_r);
@@ -7954,124 +7959,124 @@
     __Pyx_GOTREF(__pyx_t_2);
     __pyx_t_3 = PyObject_RichCompare(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_t_2, Py_EQ); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 119, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     __pyx_r = __pyx_t_3;
     __pyx_t_3 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":118
+    /* "pop/pop.data.pyx":118
  * 
  *     def __eq__(self, other):
  *         if isinstance(other, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
  *             return self.__data == other.__data
  *         elif isinstance(other, dict):
  */
   }
 
-  /* "data.pyx":120
+  /* "pop/pop.data.pyx":120
  *         if isinstance(other, ImmutableNamespaceDict):
  *             return self.__data == other.__data
  *         elif isinstance(other, dict):             # <<<<<<<<<<<<<<
  *             return self.__data == other
  *         return False
  */
   __pyx_t_1 = PyDict_Check(__pyx_v_other); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":121
+    /* "pop/pop.data.pyx":121
  *             return self.__data == other.__data
  *         elif isinstance(other, dict):
  *             return self.__data == other             # <<<<<<<<<<<<<<
  *         return False
  * 
  */
     __Pyx_XDECREF(__pyx_r);
     __pyx_t_3 = PyObject_RichCompare(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_v_other, Py_EQ); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 121, __pyx_L1_error)
     __pyx_r = __pyx_t_3;
     __pyx_t_3 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":120
+    /* "pop/pop.data.pyx":120
  *         if isinstance(other, ImmutableNamespaceDict):
  *             return self.__data == other.__data
  *         elif isinstance(other, dict):             # <<<<<<<<<<<<<<
  *             return self.__data == other
  *         return False
  */
   }
 
-  /* "data.pyx":122
+  /* "pop/pop.data.pyx":122
  *         elif isinstance(other, dict):
  *             return self.__data == other
  *         return False             # <<<<<<<<<<<<<<
  * 
  *     def __ne__(self, other):
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(Py_False);
   __pyx_r = Py_False;
   goto __pyx_L0;
 
-  /* "data.pyx":117
+  /* "pop/pop.data.pyx":117
  *         return f"{self.__data}"
  * 
  *     def __eq__(self, other):             # <<<<<<<<<<<<<<
  *         if isinstance(other, ImmutableNamespaceDict):
  *             return self.__data == other.__data
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__eq__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__eq__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":124
+/* "pop/pop.data.pyx":124
  *         return False
  * 
  *     def __ne__(self, other):             # <<<<<<<<<<<<<<
  *         return not self.__eq__(other)
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_25__ne__(PyObject *__pyx_v_self, PyObject *__pyx_v_other); /*proto*/
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_25__ne__(PyObject *__pyx_v_self, PyObject *__pyx_v_other) {
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_25__ne__(PyObject *__pyx_v_self, PyObject *__pyx_v_other); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_25__ne__(PyObject *__pyx_v_self, PyObject *__pyx_v_other) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__ne__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_24__ne__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_other));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_24__ne__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_other));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_24__ne__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_24__ne__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
   int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__ne__", 1);
 
-  /* "data.pyx":125
+  /* "pop/pop.data.pyx":125
  * 
  *     def __ne__(self, other):
  *         return not self.__eq__(other)             # <<<<<<<<<<<<<<
  * 
  *     def keys(self):
  */
   __Pyx_XDECREF(__pyx_r);
@@ -8103,53 +8108,53 @@
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __pyx_t_1 = __Pyx_PyBool_FromLong((!__pyx_t_5)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 125, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":124
+  /* "pop/pop.data.pyx":124
  *         return False
  * 
  *     def __ne__(self, other):             # <<<<<<<<<<<<<<
  *         return not self.__eq__(other)
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__ne__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__ne__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":127
+/* "pop/pop.data.pyx":127
  *         return not self.__eq__(other)
  * 
  *     def keys(self):             # <<<<<<<<<<<<<<
  *         return self.__data.keys()
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_27keys(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_27keys(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_22ImmutableNamespaceDict_27keys = {"keys", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_27keys, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_27keys(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_27keys = {"keys", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_27keys, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_27keys(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -8166,31 +8171,31 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("keys", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "keys", 0))) return NULL;
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_26keys(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_26keys(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_26keys(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_26keys(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("keys", 1);
 
-  /* "data.pyx":128
+  /* "pop/pop.data.pyx":128
  * 
  *     def keys(self):
  *         return self.__data.keys()             # <<<<<<<<<<<<<<
  * 
  *     def values(self):
  */
   __Pyx_XDECREF(__pyx_r);
@@ -8200,51 +8205,51 @@
   }
   __pyx_t_1 = __Pyx_PyDict_Keys(__pyx_v_self->_ImmutableNamespaceDict__data); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 128, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":127
+  /* "pop/pop.data.pyx":127
  *         return not self.__eq__(other)
  * 
  *     def keys(self):             # <<<<<<<<<<<<<<
  *         return self.__data.keys()
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.keys", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.keys", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":130
+/* "pop/pop.data.pyx":130
  *         return self.__data.keys()
  * 
  *     def values(self):             # <<<<<<<<<<<<<<
  *         return self.__data.values()
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_29values(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29values(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_22ImmutableNamespaceDict_29values = {"values", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_29values, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_29values(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_29values = {"values", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29values, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29values(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -8261,31 +8266,31 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("values", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "values", 0))) return NULL;
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_28values(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_28values(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_28values(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_28values(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("values", 1);
 
-  /* "data.pyx":131
+  /* "pop/pop.data.pyx":131
  * 
  *     def values(self):
  *         return self.__data.values()             # <<<<<<<<<<<<<<
  * 
  *     def items(self):
  */
   __Pyx_XDECREF(__pyx_r);
@@ -8295,51 +8300,51 @@
   }
   __pyx_t_1 = __Pyx_PyDict_Values(__pyx_v_self->_ImmutableNamespaceDict__data); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 131, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":130
+  /* "pop/pop.data.pyx":130
  *         return self.__data.keys()
  * 
  *     def values(self):             # <<<<<<<<<<<<<<
  *         return self.__data.values()
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.values", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.values", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":133
+/* "pop/pop.data.pyx":133
  *         return self.__data.values()
  * 
  *     def items(self):             # <<<<<<<<<<<<<<
  *         return self.__data.items()
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_31items(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_31items(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_22ImmutableNamespaceDict_31items = {"items", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_31items, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_31items(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_31items = {"items", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_31items, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_31items(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -8356,31 +8361,31 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("items", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "items", 0))) return NULL;
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_30items(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_30items(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_30items(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_30items(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("items", 1);
 
-  /* "data.pyx":134
+  /* "pop/pop.data.pyx":134
  * 
  *     def items(self):
  *         return self.__data.items()             # <<<<<<<<<<<<<<
  * 
  *     def get(self, key, default=None):
  */
   __Pyx_XDECREF(__pyx_r);
@@ -8390,51 +8395,51 @@
   }
   __pyx_t_1 = __Pyx_PyDict_Items(__pyx_v_self->_ImmutableNamespaceDict__data); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 134, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":133
+  /* "pop/pop.data.pyx":133
  *         return self.__data.values()
  * 
  *     def items(self):             # <<<<<<<<<<<<<<
  *         return self.__data.items()
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.items", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.items", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":136
+/* "pop/pop.data.pyx":136
  *         return self.__data.items()
  * 
  *     def get(self, key, default=None):             # <<<<<<<<<<<<<<
  *         return self.__data.get(key, default)
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_33get(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_33get(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_22ImmutableNamespaceDict_33get = {"get", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_33get, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_33get(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_33get = {"get", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_33get, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_33get(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_key = 0;
@@ -8512,41 +8517,41 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.get", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.get", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_32get(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), __pyx_v_key, __pyx_v_default);
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_32get(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), __pyx_v_key, __pyx_v_default);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_32get(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_default) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_32get(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_default) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("get", 1);
 
-  /* "data.pyx":137
+  /* "pop/pop.data.pyx":137
  * 
  *     def get(self, key, default=None):
  *         return self.__data.get(key, default)             # <<<<<<<<<<<<<<
  * 
  *     def copy(self):
  */
   __Pyx_XDECREF(__pyx_r);
@@ -8556,51 +8561,51 @@
   }
   __pyx_t_1 = __Pyx_PyDict_GetItemDefault(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_v_key, __pyx_v_default); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 137, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":136
+  /* "pop/pop.data.pyx":136
  *         return self.__data.items()
  * 
  *     def get(self, key, default=None):             # <<<<<<<<<<<<<<
  *         return self.__data.get(key, default)
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.get", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.get", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":139
+/* "pop/pop.data.pyx":139
  *         return self.__data.get(key, default)
  * 
  *     def copy(self):             # <<<<<<<<<<<<<<
  *         return unfreeze(self.__data)
  * 
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_35copy(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_35copy(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_22ImmutableNamespaceDict_35copy = {"copy", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_35copy, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_35copy(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_35copy = {"copy", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_35copy, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_35copy(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -8617,34 +8622,34 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("copy", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "copy", 0))) return NULL;
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_34copy(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_34copy(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_34copy(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_34copy(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("copy", 1);
 
-  /* "data.pyx":140
+  /* "pop/pop.data.pyx":140
  * 
  *     def copy(self):
  *         return unfreeze(self.__data)             # <<<<<<<<<<<<<<
  * 
  * 
  */
   __Pyx_XDECREF(__pyx_r);
@@ -8672,59 +8677,59 @@
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "data.pyx":139
+  /* "pop/pop.data.pyx":139
  *         return self.__data.get(key, default)
  * 
  *     def copy(self):             # <<<<<<<<<<<<<<
  *         return unfreeze(self.__data)
  * 
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.copy", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.copy", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":69
+/* "pop/pop.data.pyx":69
  * 
  * cdef class ImmutableNamespaceDict:
  *     cdef readonly dict __data             # <<<<<<<<<<<<<<
  * 
  *     def __init__(self, data=None):
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data_1__get__(PyObject *__pyx_v_self); /*proto*/
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data_1__get__(PyObject *__pyx_v_self) {
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data_1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data___get__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data___get__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data___get__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data___get__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__get__", 1);
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_self->_ImmutableNamespaceDict__data);
   __pyx_r = __pyx_v_self->_ImmutableNamespaceDict__data;
   goto __pyx_L0;
@@ -8739,23 +8744,23 @@
 /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_37__reduce_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_22ImmutableNamespaceDict_37__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_37__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_37__reduce_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -8772,22 +8777,22 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("__reduce_cython__", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__reduce_cython__", 0))) return NULL;
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_36__reduce_cython__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_36__reduce_cython__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_36__reduce_cython__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_36__reduce_cython__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
   PyObject *__pyx_v_state = 0;
   PyObject *__pyx_v__dict = 0;
   int __pyx_v_use_setstate;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
@@ -8981,15 +8986,15 @@
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_state);
   __Pyx_XDECREF(__pyx_v__dict);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
@@ -8999,23 +9004,23 @@
  *     else:
  *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_39__setstate_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_22ImmutableNamespaceDict_39__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_39__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_22ImmutableNamespaceDict_39__setstate_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_state = 0;
@@ -9077,47 +9082,47 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_22ImmutableNamespaceDict_38__setstate_cython__(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v_self), __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_38__setstate_cython__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_22ImmutableNamespaceDict_38__setstate_cython__(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_38__setstate_cython__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__setstate_cython__", 1);
 
   /* "(tree fragment)":17
  *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
  * def __setstate_cython__(self, __pyx_state):
  *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
  */
   if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 17, __pyx_L1_error)
-  __pyx_t_1 = __pyx_f_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
   /* "(tree fragment)":16
  *     else:
  *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
@@ -9125,40 +9130,40 @@
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.ImmutableNamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":143
+/* "pop/pop.data.pyx":143
  * 
  * 
  * def freeze(data):             # <<<<<<<<<<<<<<
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return data
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_1freeze(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_4data_1freeze(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_1freeze = {"freeze", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_1freeze, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_1freeze(PyObject *__pyx_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_1freeze = {"freeze", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_1freeze, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_1freeze(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_data = 0;
@@ -9220,79 +9225,79 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.freeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.freeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_freeze(__pyx_self, __pyx_v_data);
+  __pyx_r = __pyx_pf_3pop_4data_freeze(__pyx_self, __pyx_v_data);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
-static PyObject *__pyx_gb_4data_6freeze_2generator1(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
+static PyObject *__pyx_gb_3pop_4data_6freeze_2generator1(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
 
-/* "data.pyx":149
+/* "pop/pop.data.pyx":149
  *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
  *     elif isinstance(data, list):
  *         return tuple(freeze(value) for value in data)             # <<<<<<<<<<<<<<
  *     elif isinstance(data, set):
  *         return frozenset(freeze(value) for value in data)
  */
 
-static PyObject *__pyx_pf_4data_6freeze_genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
-  struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *__pyx_cur_scope;
+static PyObject *__pyx_pf_3pop_4data_6freeze_genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *__pyx_cur_scope;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("genexpr", 0);
-  __pyx_cur_scope = (struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *)__pyx_tp_new_4data___pyx_scope_struct_2_genexpr(__pyx_ptype_4data___pyx_scope_struct_2_genexpr, __pyx_empty_tuple, NULL);
+  __pyx_cur_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)__pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr(__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr, __pyx_empty_tuple, NULL);
   if (unlikely(!__pyx_cur_scope)) {
-    __pyx_cur_scope = ((struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *)Py_None);
+    __pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)Py_None);
     __Pyx_INCREF(Py_None);
     __PYX_ERR(0, 149, __pyx_L1_error)
   } else {
     __Pyx_GOTREF((PyObject *)__pyx_cur_scope);
   }
   __pyx_cur_scope->__pyx_genexpr_arg_0 = __pyx_genexpr_arg_0;
   __Pyx_INCREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
   __Pyx_GIVEREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
   {
-    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_4data_6freeze_2generator1, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_freeze_locals_genexpr, __pyx_n_s_data); if (unlikely(!gen)) __PYX_ERR(0, 149, __pyx_L1_error)
+    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_3pop_4data_6freeze_2generator1, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_freeze_locals_genexpr, __pyx_n_s_pop_data); if (unlikely(!gen)) __PYX_ERR(0, 149, __pyx_L1_error)
     __Pyx_DECREF(__pyx_cur_scope);
     __Pyx_RefNannyFinishContext();
     return (PyObject *) gen;
   }
 
   /* function exit code */
   __pyx_L1_error:;
-  __Pyx_AddTraceback("data.freeze.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.freeze.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __Pyx_DECREF((PyObject *)__pyx_cur_scope);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_gb_4data_6freeze_2generator1(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
+static PyObject *__pyx_gb_3pop_4data_6freeze_2generator1(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
 {
-  struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *__pyx_cur_scope = ((struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *)__pyx_generator->closure);
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *__pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)__pyx_generator->closure);
   PyObject *__pyx_r = NULL;
   PyObject *__pyx_t_1 = NULL;
   Py_ssize_t __pyx_t_2;
   PyObject *(*__pyx_t_3)(PyObject *);
   PyObject *__pyx_t_4 = NULL;
   PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
@@ -9431,63 +9436,63 @@
   __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
   #endif
   __pyx_generator->resume_label = -1;
   __Pyx_Coroutine_clear((PyObject*)__pyx_generator);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
-static PyObject *__pyx_gb_4data_6freeze_5generator2(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
+static PyObject *__pyx_gb_3pop_4data_6freeze_5generator2(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
 
-/* "data.pyx":151
+/* "pop/pop.data.pyx":151
  *         return tuple(freeze(value) for value in data)
  *     elif isinstance(data, set):
  *         return frozenset(freeze(value) for value in data)             # <<<<<<<<<<<<<<
  *     else:
  *         return data
  */
 
-static PyObject *__pyx_pf_4data_6freeze_3genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
-  struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *__pyx_cur_scope;
+static PyObject *__pyx_pf_3pop_4data_6freeze_3genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *__pyx_cur_scope;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("genexpr", 0);
-  __pyx_cur_scope = (struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *)__pyx_tp_new_4data___pyx_scope_struct_3_genexpr(__pyx_ptype_4data___pyx_scope_struct_3_genexpr, __pyx_empty_tuple, NULL);
+  __pyx_cur_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)__pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr(__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr, __pyx_empty_tuple, NULL);
   if (unlikely(!__pyx_cur_scope)) {
-    __pyx_cur_scope = ((struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *)Py_None);
+    __pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)Py_None);
     __Pyx_INCREF(Py_None);
     __PYX_ERR(0, 151, __pyx_L1_error)
   } else {
     __Pyx_GOTREF((PyObject *)__pyx_cur_scope);
   }
   __pyx_cur_scope->__pyx_genexpr_arg_0 = __pyx_genexpr_arg_0;
   __Pyx_INCREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
   __Pyx_GIVEREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
   {
-    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_4data_6freeze_5generator2, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_freeze_locals_genexpr, __pyx_n_s_data); if (unlikely(!gen)) __PYX_ERR(0, 151, __pyx_L1_error)
+    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_3pop_4data_6freeze_5generator2, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_freeze_locals_genexpr, __pyx_n_s_pop_data); if (unlikely(!gen)) __PYX_ERR(0, 151, __pyx_L1_error)
     __Pyx_DECREF(__pyx_cur_scope);
     __Pyx_RefNannyFinishContext();
     return (PyObject *) gen;
   }
 
   /* function exit code */
   __pyx_L1_error:;
-  __Pyx_AddTraceback("data.freeze.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.freeze.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __Pyx_DECREF((PyObject *)__pyx_cur_scope);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_gb_4data_6freeze_5generator2(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
+static PyObject *__pyx_gb_3pop_4data_6freeze_5generator2(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
 {
-  struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *__pyx_cur_scope = ((struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *)__pyx_generator->closure);
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *__pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)__pyx_generator->closure);
   PyObject *__pyx_r = NULL;
   PyObject *__pyx_t_1 = NULL;
   Py_ssize_t __pyx_t_2;
   PyObject *(*__pyx_t_3)(PyObject *);
   PyObject *__pyx_t_4 = NULL;
   PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
@@ -9627,27 +9632,27 @@
   #endif
   __pyx_generator->resume_label = -1;
   __Pyx_Coroutine_clear((PyObject*)__pyx_generator);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":143
+/* "pop/pop.data.pyx":143
  * 
  * 
  * def freeze(data):             # <<<<<<<<<<<<<<
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return data
  */
 
-static PyObject *__pyx_pf_4data_freeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data) {
+static PyObject *__pyx_pf_3pop_4data_freeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data) {
   PyObject *__pyx_8genexpr3__pyx_v_key = NULL;
   PyObject *__pyx_8genexpr3__pyx_v_value = NULL;
-  PyObject *__pyx_gb_4data_6freeze_2generator1 = 0;
-  PyObject *__pyx_gb_4data_6freeze_5generator2 = 0;
+  PyObject *__pyx_gb_3pop_4data_6freeze_2generator1 = 0;
+  PyObject *__pyx_gb_3pop_4data_6freeze_5generator2 = 0;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   Py_ssize_t __pyx_t_4;
   Py_ssize_t __pyx_t_5;
@@ -9657,56 +9662,56 @@
   int __pyx_t_9;
   PyObject *__pyx_t_10 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("freeze", 1);
 
-  /* "data.pyx":144
+  /* "pop/pop.data.pyx":144
  * 
  * def freeze(data):
  *     if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
  *         return data
  *     elif isinstance(data, dict):
  */
-  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_data, __pyx_ptype_4data_ImmutableNamespaceDict); 
+  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_data, __pyx_ptype_3pop_4data_ImmutableNamespaceDict); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":145
+    /* "pop/pop.data.pyx":145
  * def freeze(data):
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return data             # <<<<<<<<<<<<<<
  *     elif isinstance(data, dict):
  *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
  */
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_v_data);
     __pyx_r = __pyx_v_data;
     goto __pyx_L0;
 
-    /* "data.pyx":144
+    /* "pop/pop.data.pyx":144
  * 
  * def freeze(data):
  *     if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
  *         return data
  *     elif isinstance(data, dict):
  */
   }
 
-  /* "data.pyx":146
+  /* "pop/pop.data.pyx":146
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return data
  *     elif isinstance(data, dict):             # <<<<<<<<<<<<<<
  *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
  *     elif isinstance(data, list):
  */
   __pyx_t_1 = PyDict_Check(__pyx_v_data); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":147
+    /* "pop/pop.data.pyx":147
  *         return data
  *     elif isinstance(data, dict):
  *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})             # <<<<<<<<<<<<<<
  *     elif isinstance(data, list):
  *         return tuple(freeze(value) for value in data)
  */
     __Pyx_XDECREF(__pyx_r);
@@ -9766,161 +9771,161 @@
       goto __pyx_L9_exit_scope;
       __pyx_L6_error:;
       __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_key); __pyx_8genexpr3__pyx_v_key = 0;
       __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_value); __pyx_8genexpr3__pyx_v_value = 0;
       goto __pyx_L1_error;
       __pyx_L9_exit_scope:;
     } /* exit inner scope */
-    __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict), __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 147, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict), __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 147, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     __pyx_r = __pyx_t_3;
     __pyx_t_3 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":146
+    /* "pop/pop.data.pyx":146
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return data
  *     elif isinstance(data, dict):             # <<<<<<<<<<<<<<
  *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
  *     elif isinstance(data, list):
  */
   }
 
-  /* "data.pyx":148
+  /* "pop/pop.data.pyx":148
  *     elif isinstance(data, dict):
  *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
  *     elif isinstance(data, list):             # <<<<<<<<<<<<<<
  *         return tuple(freeze(value) for value in data)
  *     elif isinstance(data, set):
  */
   __pyx_t_1 = PyList_Check(__pyx_v_data); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":149
+    /* "pop/pop.data.pyx":149
  *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
  *     elif isinstance(data, list):
  *         return tuple(freeze(value) for value in data)             # <<<<<<<<<<<<<<
  *     elif isinstance(data, set):
  *         return frozenset(freeze(value) for value in data)
  */
     __Pyx_XDECREF(__pyx_r);
-    __pyx_t_3 = __pyx_pf_4data_6freeze_genexpr(NULL, __pyx_v_data); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 149, __pyx_L1_error)
+    __pyx_t_3 = __pyx_pf_3pop_4data_6freeze_genexpr(NULL, __pyx_v_data); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 149, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __pyx_t_2 = __Pyx_PySequence_Tuple(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 149, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     __pyx_r = __pyx_t_2;
     __pyx_t_2 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":148
+    /* "pop/pop.data.pyx":148
  *     elif isinstance(data, dict):
  *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
  *     elif isinstance(data, list):             # <<<<<<<<<<<<<<
  *         return tuple(freeze(value) for value in data)
  *     elif isinstance(data, set):
  */
   }
 
-  /* "data.pyx":150
+  /* "pop/pop.data.pyx":150
  *     elif isinstance(data, list):
  *         return tuple(freeze(value) for value in data)
  *     elif isinstance(data, set):             # <<<<<<<<<<<<<<
  *         return frozenset(freeze(value) for value in data)
  *     else:
  */
   __pyx_t_1 = PySet_Check(__pyx_v_data); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":151
+    /* "pop/pop.data.pyx":151
  *         return tuple(freeze(value) for value in data)
  *     elif isinstance(data, set):
  *         return frozenset(freeze(value) for value in data)             # <<<<<<<<<<<<<<
  *     else:
  *         return data
  */
     __Pyx_XDECREF(__pyx_r);
-    __pyx_t_2 = __pyx_pf_4data_6freeze_3genexpr(NULL, __pyx_v_data); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 151, __pyx_L1_error)
+    __pyx_t_2 = __pyx_pf_3pop_4data_6freeze_3genexpr(NULL, __pyx_v_data); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 151, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __pyx_t_3 = __Pyx_PyFrozenSet_New(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 151, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     __pyx_r = __pyx_t_3;
     __pyx_t_3 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":150
+    /* "pop/pop.data.pyx":150
  *     elif isinstance(data, list):
  *         return tuple(freeze(value) for value in data)
  *     elif isinstance(data, set):             # <<<<<<<<<<<<<<
  *         return frozenset(freeze(value) for value in data)
  *     else:
  */
   }
 
-  /* "data.pyx":153
+  /* "pop/pop.data.pyx":153
  *         return frozenset(freeze(value) for value in data)
  *     else:
  *         return data             # <<<<<<<<<<<<<<
  * 
  * def unfreeze(data):
  */
   /*else*/ {
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_v_data);
     __pyx_r = __pyx_v_data;
     goto __pyx_L0;
   }
 
-  /* "data.pyx":143
+  /* "pop/pop.data.pyx":143
  * 
  * 
  * def freeze(data):             # <<<<<<<<<<<<<<
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return data
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_7);
   __Pyx_XDECREF(__pyx_t_8);
   __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("data.freeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.freeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_key);
   __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_value);
-  __Pyx_XDECREF(__pyx_gb_4data_6freeze_2generator1);
-  __Pyx_XDECREF(__pyx_gb_4data_6freeze_5generator2);
+  __Pyx_XDECREF(__pyx_gb_3pop_4data_6freeze_2generator1);
+  __Pyx_XDECREF(__pyx_gb_3pop_4data_6freeze_5generator2);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":155
+/* "pop/pop.data.pyx":155
  *         return data
  * 
  * def unfreeze(data):             # <<<<<<<<<<<<<<
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return {key: unfreeze(value) for key, value in data.items()}
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_3unfreeze(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_4data_3unfreeze(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_3unfreeze = {"unfreeze", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_3unfreeze, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_3unfreeze(PyObject *__pyx_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_3unfreeze = {"unfreeze", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_3unfreeze, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_3unfreeze(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_data = 0;
@@ -9982,32 +9987,32 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.unfreeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.unfreeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_2unfreeze(__pyx_self, __pyx_v_data);
+  __pyx_r = __pyx_pf_3pop_4data_2unfreeze(__pyx_self, __pyx_v_data);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_2unfreeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data) {
+static PyObject *__pyx_pf_3pop_4data_2unfreeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data) {
   PyObject *__pyx_8genexpr6__pyx_v_key = NULL;
   PyObject *__pyx_8genexpr6__pyx_v_value = NULL;
   PyObject *__pyx_8genexpr7__pyx_v_value = NULL;
   PyObject *__pyx_8genexpr8__pyx_v_value = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
@@ -10022,25 +10027,25 @@
   PyObject *__pyx_t_10 = NULL;
   PyObject *(*__pyx_t_11)(PyObject *);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("unfreeze", 1);
 
-  /* "data.pyx":156
+  /* "pop/pop.data.pyx":156
  * 
  * def unfreeze(data):
  *     if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
  *         return {key: unfreeze(value) for key, value in data.items()}
  *     elif isinstance(data, frozenset):
  */
-  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_data, __pyx_ptype_4data_ImmutableNamespaceDict); 
+  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_data, __pyx_ptype_3pop_4data_ImmutableNamespaceDict); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":157
+    /* "pop/pop.data.pyx":157
  * def unfreeze(data):
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return {key: unfreeze(value) for key, value in data.items()}             # <<<<<<<<<<<<<<
  *     elif isinstance(data, frozenset):
  *         return {unfreeze(value) for value in data}
  */
     __Pyx_XDECREF(__pyx_r);
@@ -10104,34 +10109,34 @@
       goto __pyx_L1_error;
       __pyx_L9_exit_scope:;
     } /* exit inner scope */
     __pyx_r = __pyx_t_2;
     __pyx_t_2 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":156
+    /* "pop/pop.data.pyx":156
  * 
  * def unfreeze(data):
  *     if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
  *         return {key: unfreeze(value) for key, value in data.items()}
  *     elif isinstance(data, frozenset):
  */
   }
 
-  /* "data.pyx":158
+  /* "pop/pop.data.pyx":158
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return {key: unfreeze(value) for key, value in data.items()}
  *     elif isinstance(data, frozenset):             # <<<<<<<<<<<<<<
  *         return {unfreeze(value) for value in data}
  *     elif isinstance(data, tuple):
  */
   __pyx_t_1 = PyFrozenSet_Check(__pyx_v_data); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":159
+    /* "pop/pop.data.pyx":159
  *         return {key: unfreeze(value) for key, value in data.items()}
  *     elif isinstance(data, frozenset):
  *         return {unfreeze(value) for value in data}             # <<<<<<<<<<<<<<
  *     elif isinstance(data, tuple):
  *         return [unfreeze(value) for value in data]
  */
     __Pyx_XDECREF(__pyx_r);
@@ -10227,34 +10232,34 @@
       goto __pyx_L1_error;
       __pyx_L16_exit_scope:;
     } /* exit inner scope */
     __pyx_r = __pyx_t_2;
     __pyx_t_2 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":158
+    /* "pop/pop.data.pyx":158
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return {key: unfreeze(value) for key, value in data.items()}
  *     elif isinstance(data, frozenset):             # <<<<<<<<<<<<<<
  *         return {unfreeze(value) for value in data}
  *     elif isinstance(data, tuple):
  */
   }
 
-  /* "data.pyx":160
+  /* "pop/pop.data.pyx":160
  *     elif isinstance(data, frozenset):
  *         return {unfreeze(value) for value in data}
  *     elif isinstance(data, tuple):             # <<<<<<<<<<<<<<
  *         return [unfreeze(value) for value in data]
  *     else:
  */
   __pyx_t_1 = PyTuple_Check(__pyx_v_data); 
   if (__pyx_t_1) {
 
-    /* "data.pyx":161
+    /* "pop/pop.data.pyx":161
  *         return {unfreeze(value) for value in data}
  *     elif isinstance(data, tuple):
  *         return [unfreeze(value) for value in data]             # <<<<<<<<<<<<<<
  *     else:
  *         return data
  */
     __Pyx_XDECREF(__pyx_r);
@@ -10350,80 +10355,80 @@
       goto __pyx_L1_error;
       __pyx_L23_exit_scope:;
     } /* exit inner scope */
     __pyx_r = __pyx_t_2;
     __pyx_t_2 = 0;
     goto __pyx_L0;
 
-    /* "data.pyx":160
+    /* "pop/pop.data.pyx":160
  *     elif isinstance(data, frozenset):
  *         return {unfreeze(value) for value in data}
  *     elif isinstance(data, tuple):             # <<<<<<<<<<<<<<
  *         return [unfreeze(value) for value in data]
  *     else:
  */
   }
 
-  /* "data.pyx":163
+  /* "pop/pop.data.pyx":163
  *         return [unfreeze(value) for value in data]
  *     else:
  *         return data             # <<<<<<<<<<<<<<
  * 
  * 
  */
   /*else*/ {
     __Pyx_XDECREF(__pyx_r);
     __Pyx_INCREF(__pyx_v_data);
     __pyx_r = __pyx_v_data;
     goto __pyx_L0;
   }
 
-  /* "data.pyx":155
+  /* "pop/pop.data.pyx":155
  *         return data
  * 
  * def unfreeze(data):             # <<<<<<<<<<<<<<
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return {key: unfreeze(value) for key, value in data.items()}
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_7);
   __Pyx_XDECREF(__pyx_t_8);
   __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("data.unfreeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.unfreeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_8genexpr6__pyx_v_key);
   __Pyx_XDECREF(__pyx_8genexpr6__pyx_v_value);
   __Pyx_XDECREF(__pyx_8genexpr7__pyx_v_value);
   __Pyx_XDECREF(__pyx_8genexpr8__pyx_v_value);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "data.pyx":166
+/* "pop/pop.data.pyx":166
  * 
  * 
  * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
  *     """
  *     Recursive version of the default dict.update
  */
 
-static PyObject *__pyx_pw_4data_5update(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_4data_5update(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyObject *__pyx_f_4data_update(PyObject *__pyx_v_dest, PyObject *__pyx_v_upd, CYTHON_UNUSED int __pyx_skip_dispatch, struct __pyx_opt_args_4data_update *__pyx_optional_args) {
+static PyObject *__pyx_f_3pop_4data_update(PyObject *__pyx_v_dest, PyObject *__pyx_v_upd, CYTHON_UNUSED int __pyx_skip_dispatch, struct __pyx_opt_args_3pop_4data_update *__pyx_optional_args) {
   int __pyx_v_recursive_update = ((int)1);
   int __pyx_v_merge_lists = ((int)0);
   PyObject *__pyx_v_keys = 0;
   PyObject *__pyx_v_key = 0;
   PyObject *__pyx_v_val = 0;
   PyObject *__pyx_v_dest_subkey = 0;
   PyObject *__pyx_v_ret = NULL;
@@ -10452,15 +10457,15 @@
       __pyx_v_recursive_update = __pyx_optional_args->recursive_update;
       if (__pyx_optional_args->__pyx_n > 1) {
         __pyx_v_merge_lists = __pyx_optional_args->merge_lists;
       }
     }
   }
 
-  /* "data.pyx":181
+  /* "pop/pop.data.pyx":181
  *     """
  *     cdef:
  *         list keys = list(upd.keys())             # <<<<<<<<<<<<<<
  *         object key, val, dest_subkey
  * 
  */
   __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_upd, __pyx_n_s_keys); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 181, __pyx_L1_error)
@@ -10489,24 +10494,24 @@
   }
   __pyx_t_2 = __Pyx_PySequence_ListKeepNew(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 181, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __pyx_v_keys = ((PyObject*)__pyx_t_2);
   __pyx_t_2 = 0;
 
-  /* "data.pyx":184
+  /* "pop/pop.data.pyx":184
  *         object key, val, dest_subkey
  * 
  *     if recursive_update:             # <<<<<<<<<<<<<<
  *         for key in keys:
  *             val = upd[key]
  */
   if (__pyx_v_recursive_update) {
 
-    /* "data.pyx":185
+    /* "pop/pop.data.pyx":185
  * 
  *     if recursive_update:
  *         for key in keys:             # <<<<<<<<<<<<<<
  *             val = upd[key]
  *             dest_subkey = dest.get(key, None)
  */
     __pyx_t_2 = __pyx_v_keys; __Pyx_INCREF(__pyx_t_2);
@@ -10524,27 +10529,27 @@
       #else
       __pyx_t_1 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 185, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       #endif
       __Pyx_XDECREF_SET(__pyx_v_key, __pyx_t_1);
       __pyx_t_1 = 0;
 
-      /* "data.pyx":186
+      /* "pop/pop.data.pyx":186
  *     if recursive_update:
  *         for key in keys:
  *             val = upd[key]             # <<<<<<<<<<<<<<
  *             dest_subkey = dest.get(key, None)
  *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):
  */
       __pyx_t_1 = __Pyx_PyObject_GetItem(__pyx_v_upd, __pyx_v_key); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 186, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_XDECREF_SET(__pyx_v_val, __pyx_t_1);
       __pyx_t_1 = 0;
 
-      /* "data.pyx":187
+      /* "pop/pop.data.pyx":187
  *         for key in keys:
  *             val = upd[key]
  *             dest_subkey = dest.get(key, None)             # <<<<<<<<<<<<<<
  *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):
  *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
  */
       __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_dest, __pyx_n_s_get); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 187, __pyx_L1_error)
@@ -10570,15 +10575,15 @@
         if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 187, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_1);
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
       }
       __Pyx_XDECREF_SET(__pyx_v_dest_subkey, __pyx_t_1);
       __pyx_t_1 = 0;
 
-      /* "data.pyx":188
+      /* "pop/pop.data.pyx":188
  *             val = upd[key]
  *             dest_subkey = dest.get(key, None)
  *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):             # <<<<<<<<<<<<<<
  *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
  *                 dest[key] = ret
  */
       __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Mapping); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 188, __pyx_L1_error)
@@ -10594,15 +10599,15 @@
       __Pyx_GOTREF(__pyx_t_1);
       __pyx_t_8 = PyObject_IsInstance(__pyx_v_val, __pyx_t_1); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 188, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       __pyx_t_7 = __pyx_t_8;
       __pyx_L7_bool_binop_done:;
       if (__pyx_t_7) {
 
-        /* "data.pyx":189
+        /* "pop/pop.data.pyx":189
  *             dest_subkey = dest.get(key, None)
  *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):
  *                 ret = update(dest_subkey, val, merge_lists=merge_lists)             # <<<<<<<<<<<<<<
  *                 dest[key] = ret
  *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
  */
         __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_update); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 189, __pyx_L1_error)
@@ -10625,34 +10630,34 @@
         __Pyx_GOTREF(__pyx_t_9);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
         __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
         __Pyx_XDECREF_SET(__pyx_v_ret, __pyx_t_9);
         __pyx_t_9 = 0;
 
-        /* "data.pyx":190
+        /* "pop/pop.data.pyx":190
  *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):
  *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
  *                 dest[key] = ret             # <<<<<<<<<<<<<<
  *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
  *                 merged = dest_subkey[:]
  */
         if (unlikely((PyObject_SetItem(__pyx_v_dest, __pyx_v_key, __pyx_v_ret) < 0))) __PYX_ERR(0, 190, __pyx_L1_error)
 
-        /* "data.pyx":188
+        /* "pop/pop.data.pyx":188
  *             val = upd[key]
  *             dest_subkey = dest.get(key, None)
  *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):             # <<<<<<<<<<<<<<
  *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
  *                 dest[key] = ret
  */
         goto __pyx_L6;
       }
 
-      /* "data.pyx":191
+      /* "pop/pop.data.pyx":191
  *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
  *                 dest[key] = ret
  *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:             # <<<<<<<<<<<<<<
  *                 merged = dest_subkey[:]
  *                 merged.extend([x for x in val if x not in merged])
  */
       __pyx_t_8 = PyList_Check(__pyx_v_dest_subkey); 
@@ -10667,27 +10672,27 @@
         __pyx_t_7 = __pyx_t_8;
         goto __pyx_L9_bool_binop_done;
       }
       __pyx_t_7 = __pyx_v_merge_lists;
       __pyx_L9_bool_binop_done:;
       if (__pyx_t_7) {
 
-        /* "data.pyx":192
+        /* "pop/pop.data.pyx":192
  *                 dest[key] = ret
  *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
  *                 merged = dest_subkey[:]             # <<<<<<<<<<<<<<
  *                 merged.extend([x for x in val if x not in merged])
  *                 dest[key] = merged
  */
         __pyx_t_9 = __Pyx_PyObject_GetSlice(__pyx_v_dest_subkey, 0, 0, NULL, NULL, &__pyx_slice__6, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 192, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_9);
         __Pyx_XDECREF_SET(__pyx_v_merged, __pyx_t_9);
         __pyx_t_9 = 0;
 
-        /* "data.pyx":193
+        /* "pop/pop.data.pyx":193
  *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
  *                 merged = dest_subkey[:]
  *                 merged.extend([x for x in val if x not in merged])             # <<<<<<<<<<<<<<
  *                 dest[key] = merged
  *             else:
  */
         __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_merged, __pyx_n_s_extend); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 193, __pyx_L1_error)
@@ -10783,69 +10788,69 @@
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
           if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 193, __pyx_L1_error)
           __Pyx_GOTREF(__pyx_t_9);
           __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
         }
         __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
 
-        /* "data.pyx":194
+        /* "pop/pop.data.pyx":194
  *                 merged = dest_subkey[:]
  *                 merged.extend([x for x in val if x not in merged])
  *                 dest[key] = merged             # <<<<<<<<<<<<<<
  *             else:
  *                 dest[key] = upd[key]
  */
         if (unlikely((PyObject_SetItem(__pyx_v_dest, __pyx_v_key, __pyx_v_merged) < 0))) __PYX_ERR(0, 194, __pyx_L1_error)
 
-        /* "data.pyx":191
+        /* "pop/pop.data.pyx":191
  *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
  *                 dest[key] = ret
  *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:             # <<<<<<<<<<<<<<
  *                 merged = dest_subkey[:]
  *                 merged.extend([x for x in val if x not in merged])
  */
         goto __pyx_L6;
       }
 
-      /* "data.pyx":196
+      /* "pop/pop.data.pyx":196
  *                 dest[key] = merged
  *             else:
  *                 dest[key] = upd[key]             # <<<<<<<<<<<<<<
  *     else:
  *         for key in keys:
  */
       /*else*/ {
         __pyx_t_9 = __Pyx_PyObject_GetItem(__pyx_v_upd, __pyx_v_key); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 196, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_9);
         if (unlikely((PyObject_SetItem(__pyx_v_dest, __pyx_v_key, __pyx_t_9) < 0))) __PYX_ERR(0, 196, __pyx_L1_error)
         __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
       }
       __pyx_L6:;
 
-      /* "data.pyx":185
+      /* "pop/pop.data.pyx":185
  * 
  *     if recursive_update:
  *         for key in keys:             # <<<<<<<<<<<<<<
  *             val = upd[key]
  *             dest_subkey = dest.get(key, None)
  */
     }
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-    /* "data.pyx":184
+    /* "pop/pop.data.pyx":184
  *         object key, val, dest_subkey
  * 
  *     if recursive_update:             # <<<<<<<<<<<<<<
  *         for key in keys:
  *             val = upd[key]
  */
     goto __pyx_L3;
   }
 
-  /* "data.pyx":198
+  /* "pop/pop.data.pyx":198
  *                 dest[key] = upd[key]
  *     else:
  *         for key in keys:             # <<<<<<<<<<<<<<
  *             dest[key] = upd[key]
  *     return dest
  */
   /*else*/ {
@@ -10864,48 +10869,48 @@
       #else
       __pyx_t_9 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 198, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_9);
       #endif
       __Pyx_XDECREF_SET(__pyx_v_key, __pyx_t_9);
       __pyx_t_9 = 0;
 
-      /* "data.pyx":199
+      /* "pop/pop.data.pyx":199
  *     else:
  *         for key in keys:
  *             dest[key] = upd[key]             # <<<<<<<<<<<<<<
  *     return dest
  */
       __pyx_t_9 = __Pyx_PyObject_GetItem(__pyx_v_upd, __pyx_v_key); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 199, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_9);
       if (unlikely((PyObject_SetItem(__pyx_v_dest, __pyx_v_key, __pyx_t_9) < 0))) __PYX_ERR(0, 199, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
 
-      /* "data.pyx":198
+      /* "pop/pop.data.pyx":198
  *                 dest[key] = upd[key]
  *     else:
  *         for key in keys:             # <<<<<<<<<<<<<<
  *             dest[key] = upd[key]
  *     return dest
  */
     }
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
   __pyx_L3:;
 
-  /* "data.pyx":200
+  /* "pop/pop.data.pyx":200
  *         for key in keys:
  *             dest[key] = upd[key]
  *     return dest             # <<<<<<<<<<<<<<
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_dest);
   __pyx_r = __pyx_v_dest;
   goto __pyx_L0;
 
-  /* "data.pyx":166
+  /* "pop/pop.data.pyx":166
  * 
  * 
  * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
  *     """
  *     Recursive version of the default dict.update
  */
 
@@ -10913,15 +10918,15 @@
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_6);
   __Pyx_XDECREF(__pyx_t_9);
   __Pyx_XDECREF(__pyx_t_12);
-  __Pyx_AddTraceback("data.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_keys);
   __Pyx_XDECREF(__pyx_v_key);
   __Pyx_XDECREF(__pyx_v_val);
   __Pyx_XDECREF(__pyx_v_dest_subkey);
   __Pyx_XDECREF(__pyx_v_ret);
@@ -10929,24 +10934,24 @@
   __Pyx_XDECREF(__pyx_8genexpr9__pyx_v_x);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_5update(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_4data_5update(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_4data_4update, "\n    Recursive version of the default dict.update\n\n    Merges upd recursively into dest\n\n    If recursive_update=False, will use the classic dict.update, or fall back\n    on a manual merge (helpful for non-dict types like FunctionWrapper)\n\n    If merge_lists=True, will aggregate list object types instead of replace.\n    The list in ``upd`` is added to the list in ``dest``, so the resulting list\n    is ``dest[key] + upd[key]``. This behavior is only activated when\n    recursive_update=True. By default merge_lists=False.\n    ");
-static PyMethodDef __pyx_mdef_4data_5update = {"update", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_5update, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_4data_4update};
-static PyObject *__pyx_pw_4data_5update(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_3pop_4data_4update, "\n    Recursive version of the default dict.update\n\n    Merges upd recursively into dest\n\n    If recursive_update=False, will use the classic dict.update, or fall back\n    on a manual merge (helpful for non-dict types like FunctionWrapper)\n\n    If merge_lists=True, will aggregate list object types instead of replace.\n    The list in ``upd`` is added to the list in ``dest``, so the resulting list\n    is ``dest[key] + upd[key]``. This behavior is only activated when\n    recursive_update=True. By default merge_lists=False.\n    ");
+static PyMethodDef __pyx_mdef_3pop_4data_5update = {"update", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_5update, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_3pop_4data_4update};
+static PyObject *__pyx_pw_3pop_4data_5update(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_dest = 0;
@@ -11059,77 +11064,77 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_4update(__pyx_self, __pyx_v_dest, __pyx_v_upd, __pyx_v_recursive_update, __pyx_v_merge_lists);
+  __pyx_r = __pyx_pf_3pop_4data_4update(__pyx_self, __pyx_v_dest, __pyx_v_upd, __pyx_v_recursive_update, __pyx_v_merge_lists);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_4update(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_dest, PyObject *__pyx_v_upd, int __pyx_v_recursive_update, int __pyx_v_merge_lists) {
+static PyObject *__pyx_pf_3pop_4data_4update(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_dest, PyObject *__pyx_v_upd, int __pyx_v_recursive_update, int __pyx_v_merge_lists) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
-  struct __pyx_opt_args_4data_update __pyx_t_2;
+  struct __pyx_opt_args_3pop_4data_update __pyx_t_2;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("update", 1);
   __Pyx_XDECREF(__pyx_r);
   __pyx_t_2.__pyx_n = 2;
   __pyx_t_2.recursive_update = __pyx_v_recursive_update;
   __pyx_t_2.merge_lists = __pyx_v_merge_lists;
-  __pyx_t_1 = __pyx_f_4data_update(__pyx_v_dest, __pyx_v_upd, 0, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 166, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_3pop_4data_update(__pyx_v_dest, __pyx_v_upd, 0, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 166, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("data.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":1
  * def __pyx_unpickle_NamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_7__pyx_unpickle_NamespaceDict(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_4data_7__pyx_unpickle_NamespaceDict(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_7__pyx_unpickle_NamespaceDict = {"__pyx_unpickle_NamespaceDict", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_7__pyx_unpickle_NamespaceDict, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_7__pyx_unpickle_NamespaceDict(PyObject *__pyx_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_7__pyx_unpickle_NamespaceDict = {"__pyx_unpickle_NamespaceDict", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_7__pyx_unpickle_NamespaceDict, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_7__pyx_unpickle_NamespaceDict(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_type = 0;
@@ -11221,32 +11226,32 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.__pyx_unpickle_NamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.__pyx_unpickle_NamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_6__pyx_unpickle_NamespaceDict(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_4data_6__pyx_unpickle_NamespaceDict(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_6__pyx_unpickle_NamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_4data_6__pyx_unpickle_NamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_v___pyx_PickleError = 0;
   PyObject *__pyx_v___pyx_result = 0;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
@@ -11320,15 +11325,15 @@
   /* "(tree fragment)":7
  *         from pickle import PickleError as __pyx_PickleError
  *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum
  *     __pyx_result = NamespaceDict.__new__(__pyx_type)             # <<<<<<<<<<<<<<
  *     if __pyx_state is not None:
  *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
  */
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_4data_NamespaceDict), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_3pop_4data_NamespaceDict), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_4 = NULL;
   __pyx_t_5 = 0;
   #if CYTHON_UNPACK_METHODS
   if (likely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_4)) {
@@ -11365,15 +11370,15 @@
  *     __pyx_result = NamespaceDict.__new__(__pyx_type)
  *     if __pyx_state is not None:
  *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)             # <<<<<<<<<<<<<<
  *     return __pyx_result
  * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):
  */
     if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 9, __pyx_L1_error)
-    __pyx_t_1 = __pyx_f_4data___pyx_unpickle_NamespaceDict__set_state(((struct __pyx_obj_4data_NamespaceDict *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
+    __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_NamespaceDict__set_state(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
     /* "(tree fragment)":8
  *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum
  *     __pyx_result = NamespaceDict.__new__(__pyx_type)
  *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
@@ -11401,15 +11406,15 @@
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("data.__pyx_unpickle_NamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.__pyx_unpickle_NamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v___pyx_PickleError);
   __Pyx_XDECREF(__pyx_v___pyx_result);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
@@ -11419,15 +11424,15 @@
  *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
  *     return __pyx_result
  * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
  *     if len(__pyx_state) > 0 and hasattr(__pyx_result, '__dict__'):
  *         __pyx_result.__dict__.update(__pyx_state[0])
  */
 
-static PyObject *__pyx_f_4data___pyx_unpickle_NamespaceDict__set_state(struct __pyx_obj_4data_NamespaceDict *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_f_3pop_4data___pyx_unpickle_NamespaceDict__set_state(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
   Py_ssize_t __pyx_t_2;
   int __pyx_t_3;
   PyObject *__pyx_t_4 = NULL;
   PyObject *__pyx_t_5 = NULL;
@@ -11522,38 +11527,38 @@
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
   __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_AddTraceback("data.__pyx_unpickle_NamespaceDict__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.__pyx_unpickle_NamespaceDict__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":1
  * def __pyx_unpickle_MultidictCache(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_9__pyx_unpickle_MultidictCache(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_4data_9__pyx_unpickle_MultidictCache(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_9__pyx_unpickle_MultidictCache = {"__pyx_unpickle_MultidictCache", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_9__pyx_unpickle_MultidictCache, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_9__pyx_unpickle_MultidictCache(PyObject *__pyx_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_9__pyx_unpickle_MultidictCache = {"__pyx_unpickle_MultidictCache", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_9__pyx_unpickle_MultidictCache, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_9__pyx_unpickle_MultidictCache(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_type = 0;
@@ -11645,32 +11650,32 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.__pyx_unpickle_MultidictCache", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.__pyx_unpickle_MultidictCache", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_8__pyx_unpickle_MultidictCache(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_4data_8__pyx_unpickle_MultidictCache(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_8__pyx_unpickle_MultidictCache(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_4data_8__pyx_unpickle_MultidictCache(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_v___pyx_PickleError = 0;
   PyObject *__pyx_v___pyx_result = 0;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
@@ -11744,15 +11749,15 @@
   /* "(tree fragment)":7
  *         from pickle import PickleError as __pyx_PickleError
  *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))" % __pyx_checksum
  *     __pyx_result = MultidictCache.__new__(__pyx_type)             # <<<<<<<<<<<<<<
  *     if __pyx_state is not None:
  *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)
  */
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_4data_MultidictCache), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_3pop_4data_MultidictCache), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_4 = NULL;
   __pyx_t_5 = 0;
   #if CYTHON_UNPACK_METHODS
   if (likely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_4)) {
@@ -11789,15 +11794,15 @@
  *     __pyx_result = MultidictCache.__new__(__pyx_type)
  *     if __pyx_state is not None:
  *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)             # <<<<<<<<<<<<<<
  *     return __pyx_result
  * cdef __pyx_unpickle_MultidictCache__set_state(MultidictCache __pyx_result, tuple __pyx_state):
  */
     if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 9, __pyx_L1_error)
-    __pyx_t_1 = __pyx_f_4data___pyx_unpickle_MultidictCache__set_state(((struct __pyx_obj_4data_MultidictCache *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
+    __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_MultidictCache__set_state(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
     /* "(tree fragment)":8
  *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))" % __pyx_checksum
  *     __pyx_result = MultidictCache.__new__(__pyx_type)
  *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
@@ -11825,15 +11830,15 @@
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("data.__pyx_unpickle_MultidictCache", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.__pyx_unpickle_MultidictCache", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v___pyx_PickleError);
   __Pyx_XDECREF(__pyx_v___pyx_result);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
@@ -11843,15 +11848,15 @@
  *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)
  *     return __pyx_result
  * cdef __pyx_unpickle_MultidictCache__set_state(MultidictCache __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_result._base_dicts = __pyx_state[0]; __pyx_result._cache = __pyx_state[1]; __pyx_result._split_cache = __pyx_state[2]
  *     if len(__pyx_state) > 3 and hasattr(__pyx_result, '__dict__'):
  */
 
-static PyObject *__pyx_f_4data___pyx_unpickle_MultidictCache__set_state(struct __pyx_obj_4data_MultidictCache *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_f_3pop_4data___pyx_unpickle_MultidictCache__set_state(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   Py_ssize_t __pyx_t_3;
   int __pyx_t_4;
   PyObject *__pyx_t_5 = NULL;
@@ -11990,38 +11995,38 @@
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
   __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_AddTraceback("data.__pyx_unpickle_MultidictCache__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.__pyx_unpickle_MultidictCache__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":1
  * def __pyx_unpickle_ImmutableNamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_4data_11__pyx_unpickle_ImmutableNamespaceDict(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_4data_11__pyx_unpickle_ImmutableNamespaceDict = {"__pyx_unpickle_ImmutableNamespaceDict", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_11__pyx_unpickle_ImmutableNamespaceDict, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_4data_11__pyx_unpickle_ImmutableNamespaceDict(PyObject *__pyx_self, 
+static PyMethodDef __pyx_mdef_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict = {"__pyx_unpickle_ImmutableNamespaceDict", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_type = 0;
@@ -12113,32 +12118,32 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("data.__pyx_unpickle_ImmutableNamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.__pyx_unpickle_ImmutableNamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_4data_10__pyx_unpickle_ImmutableNamespaceDict(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_4data_10__pyx_unpickle_ImmutableNamespaceDict(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_4data_10__pyx_unpickle_ImmutableNamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_4data_10__pyx_unpickle_ImmutableNamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_v___pyx_PickleError = 0;
   PyObject *__pyx_v___pyx_result = 0;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
@@ -12212,15 +12217,15 @@
   /* "(tree fragment)":7
  *         from pickle import PickleError as __pyx_PickleError
  *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))" % __pyx_checksum
  *     __pyx_result = ImmutableNamespaceDict.__new__(__pyx_type)             # <<<<<<<<<<<<<<
  *     if __pyx_state is not None:
  *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)
  */
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_4 = NULL;
   __pyx_t_5 = 0;
   #if CYTHON_UNPACK_METHODS
   if (likely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_4)) {
@@ -12257,15 +12262,15 @@
  *     __pyx_result = ImmutableNamespaceDict.__new__(__pyx_type)
  *     if __pyx_state is not None:
  *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)             # <<<<<<<<<<<<<<
  *     return __pyx_result
  * cdef __pyx_unpickle_ImmutableNamespaceDict__set_state(ImmutableNamespaceDict __pyx_result, tuple __pyx_state):
  */
     if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 9, __pyx_L1_error)
-    __pyx_t_1 = __pyx_f_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(((struct __pyx_obj_4data_ImmutableNamespaceDict *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
+    __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
     /* "(tree fragment)":8
  *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))" % __pyx_checksum
  *     __pyx_result = ImmutableNamespaceDict.__new__(__pyx_type)
  *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
@@ -12293,15 +12298,15 @@
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("data.__pyx_unpickle_ImmutableNamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.__pyx_unpickle_ImmutableNamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v___pyx_PickleError);
   __Pyx_XDECREF(__pyx_v___pyx_result);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
@@ -12311,15 +12316,15 @@
  *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)
  *     return __pyx_result
  * cdef __pyx_unpickle_ImmutableNamespaceDict__set_state(ImmutableNamespaceDict __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_result._ImmutableNamespaceDict__data = __pyx_state[0]
  *     if len(__pyx_state) > 1 and hasattr(__pyx_result, '__dict__'):
  */
 
-static PyObject *__pyx_f_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(struct __pyx_obj_4data_ImmutableNamespaceDict *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_f_3pop_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   Py_ssize_t __pyx_t_3;
   int __pyx_t_4;
   PyObject *__pyx_t_5 = NULL;
@@ -12434,81 +12439,81 @@
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
   __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_AddTraceback("data.__pyx_unpickle_ImmutableNamespaceDict__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.data.__pyx_unpickle_ImmutableNamespaceDict__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_tp_traverse_4data_NamespaceDict(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_4data_NamespaceDict(PyObject *o, visitproc v, void *a) {
   int e;
   if (!(&PyDict_Type)->tp_traverse); else { e = (&PyDict_Type)->tp_traverse(o,v,a); if (e) return e; }
   return 0;
 }
 
-static int __pyx_tp_clear_4data_NamespaceDict(PyObject *o) {
+static int __pyx_tp_clear_3pop_4data_NamespaceDict(PyObject *o) {
   if (!(&PyDict_Type)->tp_clear); else (&PyDict_Type)->tp_clear(o);
   return 0;
 }
 
-static PyObject *__pyx_tp_getattro_4data_NamespaceDict(PyObject *o, PyObject *n) {
+static PyObject *__pyx_tp_getattro_3pop_4data_NamespaceDict(PyObject *o, PyObject *n) {
   PyObject *v = __Pyx_PyObject_GenericGetAttr(o, n);
   if (!v && PyErr_ExceptionMatches(PyExc_AttributeError)) {
     PyErr_Clear();
-    v = __pyx_pw_4data_13NamespaceDict_1__getattr__(o, n);
+    v = __pyx_pw_3pop_4data_13NamespaceDict_1__getattr__(o, n);
   }
   return v;
 }
 
-static int __pyx_tp_setattro_4data_NamespaceDict(PyObject *o, PyObject *n, PyObject *v) {
+static int __pyx_tp_setattro_3pop_4data_NamespaceDict(PyObject *o, PyObject *n, PyObject *v) {
   if (v) {
-    return __pyx_pw_4data_13NamespaceDict_3__setattr__(o, n, v);
+    return __pyx_pw_3pop_4data_13NamespaceDict_3__setattr__(o, n, v);
   }
   else {
     if ((&PyDict_Type)->tp_setattro)
       return (&PyDict_Type)->tp_setattro(o, n, v);
     return PyObject_GenericSetAttr(o, n, 0);
   }
 }
 
-static PyMethodDef __pyx_methods_4data_NamespaceDict[] = {
-  {"__getattr__", (PyCFunction)__pyx_pw_4data_13NamespaceDict_1__getattr__, METH_O|METH_COEXIST, 0},
-  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_13NamespaceDict_5__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_13NamespaceDict_7__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+static PyMethodDef __pyx_methods_3pop_4data_NamespaceDict[] = {
+  {"__getattr__", (PyCFunction)__pyx_pw_3pop_4data_13NamespaceDict_1__getattr__, METH_O|METH_COEXIST, 0},
+  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_13NamespaceDict_5__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_13NamespaceDict_7__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
   {0, 0, 0, 0}
 };
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_4data_NamespaceDict_slots[] = {
-  {Py_tp_getattro, (void *)__pyx_tp_getattro_4data_NamespaceDict},
-  {Py_tp_setattro, (void *)__pyx_tp_setattro_4data_NamespaceDict},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_4data_NamespaceDict},
-  {Py_tp_clear, (void *)__pyx_tp_clear_4data_NamespaceDict},
-  {Py_tp_methods, (void *)__pyx_methods_4data_NamespaceDict},
+static PyType_Slot __pyx_type_3pop_4data_NamespaceDict_slots[] = {
+  {Py_tp_getattro, (void *)__pyx_tp_getattro_3pop_4data_NamespaceDict},
+  {Py_tp_setattro, (void *)__pyx_tp_setattro_3pop_4data_NamespaceDict},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data_NamespaceDict},
+  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_4data_NamespaceDict},
+  {Py_tp_methods, (void *)__pyx_methods_3pop_4data_NamespaceDict},
   {0, 0},
 };
-static PyType_Spec __pyx_type_4data_NamespaceDict_spec = {
-  "data.NamespaceDict",
-  sizeof(struct __pyx_obj_4data_NamespaceDict),
+static PyType_Spec __pyx_type_3pop_4data_NamespaceDict_spec = {
+  "pop.data.NamespaceDict",
+  sizeof(struct __pyx_obj_3pop_4data_NamespaceDict),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_4data_NamespaceDict_slots,
+  __pyx_type_3pop_4data_NamespaceDict_slots,
 };
 #else
 
-static PyTypeObject __pyx_type_4data_NamespaceDict = {
+static PyTypeObject __pyx_type_3pop_4data_NamespaceDict = {
   PyVarObject_HEAD_INIT(0, 0)
-  "data.""NamespaceDict", /*tp_name*/
-  sizeof(struct __pyx_obj_4data_NamespaceDict), /*tp_basicsize*/
+  "pop.data.""NamespaceDict", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_4data_NamespaceDict), /*tp_basicsize*/
   0, /*tp_itemsize*/
   0, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
@@ -12524,26 +12529,26 @@
   0, /*tp_repr*/
   0, /*tp_as_number*/
   0, /*tp_as_sequence*/
   0, /*tp_as_mapping*/
   0, /*tp_hash*/
   0, /*tp_call*/
   0, /*tp_str*/
-  __pyx_tp_getattro_4data_NamespaceDict, /*tp_getattro*/
-  __pyx_tp_setattro_4data_NamespaceDict, /*tp_setattro*/
+  __pyx_tp_getattro_3pop_4data_NamespaceDict, /*tp_getattro*/
+  __pyx_tp_setattro_3pop_4data_NamespaceDict, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_4data_NamespaceDict, /*tp_traverse*/
-  __pyx_tp_clear_4data_NamespaceDict, /*tp_clear*/
+  __pyx_tp_traverse_3pop_4data_NamespaceDict, /*tp_traverse*/
+  __pyx_tp_clear_3pop_4data_NamespaceDict, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
   0, /*tp_iter*/
   0, /*tp_iternext*/
-  __pyx_methods_4data_NamespaceDict, /*tp_methods*/
+  __pyx_methods_3pop_4data_NamespaceDict, /*tp_methods*/
   0, /*tp_members*/
   0, /*tp_getset*/
   0, /*tp_base*/
   0, /*tp_dict*/
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
@@ -12578,43 +12583,43 @@
   0, /*tp_watched*/
   #endif
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
-static struct __pyx_vtabstruct_4data_MultidictCache __pyx_vtable_4data_MultidictCache;
+static struct __pyx_vtabstruct_3pop_4data_MultidictCache __pyx_vtable_3pop_4data_MultidictCache;
 
-static PyObject *__pyx_tp_new_4data_MultidictCache(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
-  struct __pyx_obj_4data_MultidictCache *p;
+static PyObject *__pyx_tp_new_3pop_4data_MultidictCache(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+  struct __pyx_obj_3pop_4data_MultidictCache *p;
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   if (likely(!__Pyx_PyType_HasFeature(t, Py_TPFLAGS_IS_ABSTRACT))) {
     o = (*t->tp_alloc)(t, 0);
   } else {
     o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
   }
   if (unlikely(!o)) return 0;
   #endif
-  p = ((struct __pyx_obj_4data_MultidictCache *)o);
-  p->__pyx_vtab = __pyx_vtabptr_4data_MultidictCache;
+  p = ((struct __pyx_obj_3pop_4data_MultidictCache *)o);
+  p->__pyx_vtab = __pyx_vtabptr_3pop_4data_MultidictCache;
   p->_cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
   p->_base_dicts = ((PyObject*)Py_None); Py_INCREF(Py_None);
   p->_split_cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
   return o;
 }
 
-static void __pyx_tp_dealloc_4data_MultidictCache(PyObject *o) {
-  struct __pyx_obj_4data_MultidictCache *p = (struct __pyx_obj_4data_MultidictCache *)o;
+static void __pyx_tp_dealloc_3pop_4data_MultidictCache(PyObject *o) {
+  struct __pyx_obj_3pop_4data_MultidictCache *p = (struct __pyx_obj_3pop_4data_MultidictCache *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_4data_MultidictCache) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data_MultidictCache) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
   Py_CLEAR(p->_cache);
   Py_CLEAR(p->_base_dicts);
@@ -12625,104 +12630,104 @@
   {
     freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
     if (tp_free) tp_free(o);
   }
   #endif
 }
 
-static int __pyx_tp_traverse_4data_MultidictCache(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_4data_MultidictCache(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_4data_MultidictCache *p = (struct __pyx_obj_4data_MultidictCache *)o;
+  struct __pyx_obj_3pop_4data_MultidictCache *p = (struct __pyx_obj_3pop_4data_MultidictCache *)o;
   if (p->_cache) {
     e = (*v)(p->_cache, a); if (e) return e;
   }
   if (p->_base_dicts) {
     e = (*v)(p->_base_dicts, a); if (e) return e;
   }
   if (p->_split_cache) {
     e = (*v)(p->_split_cache, a); if (e) return e;
   }
   return 0;
 }
 
-static int __pyx_tp_clear_4data_MultidictCache(PyObject *o) {
+static int __pyx_tp_clear_3pop_4data_MultidictCache(PyObject *o) {
   PyObject* tmp;
-  struct __pyx_obj_4data_MultidictCache *p = (struct __pyx_obj_4data_MultidictCache *)o;
+  struct __pyx_obj_3pop_4data_MultidictCache *p = (struct __pyx_obj_3pop_4data_MultidictCache *)o;
   tmp = ((PyObject*)p->_cache);
   p->_cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
   Py_XDECREF(tmp);
   tmp = ((PyObject*)p->_base_dicts);
   p->_base_dicts = ((PyObject*)Py_None); Py_INCREF(Py_None);
   Py_XDECREF(tmp);
   tmp = ((PyObject*)p->_split_cache);
   p->_split_cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
   Py_XDECREF(tmp);
   return 0;
 }
-static PyObject *__pyx_sq_item_4data_MultidictCache(PyObject *o, Py_ssize_t i) {
+static PyObject *__pyx_sq_item_3pop_4data_MultidictCache(PyObject *o, Py_ssize_t i) {
   PyObject *r;
   PyObject *x = PyInt_FromSsize_t(i); if(!x) return 0;
   r = Py_TYPE(o)->tp_as_mapping->mp_subscript(o, x);
   Py_DECREF(x);
   return r;
 }
 
-static PyMethodDef __pyx_methods_4data_MultidictCache[] = {
-  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_14MultidictCache_11__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_14MultidictCache_13__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+static PyMethodDef __pyx_methods_3pop_4data_MultidictCache[] = {
+  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_11__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_13__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
   {0, 0, 0, 0}
 };
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_4data_MultidictCache_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_4data_MultidictCache},
-  {Py_sq_item, (void *)__pyx_sq_item_4data_MultidictCache},
-  {Py_sq_contains, (void *)__pyx_pw_4data_14MultidictCache_9__contains__},
-  {Py_mp_subscript, (void *)__pyx_pw_4data_14MultidictCache_5__getitem__},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_4data_MultidictCache},
-  {Py_tp_clear, (void *)__pyx_tp_clear_4data_MultidictCache},
-  {Py_tp_iter, (void *)__pyx_pw_4data_14MultidictCache_7__iter__},
-  {Py_tp_methods, (void *)__pyx_methods_4data_MultidictCache},
-  {Py_tp_init, (void *)__pyx_pw_4data_14MultidictCache_1__init__},
-  {Py_tp_new, (void *)__pyx_tp_new_4data_MultidictCache},
+static PyType_Slot __pyx_type_3pop_4data_MultidictCache_slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data_MultidictCache},
+  {Py_sq_item, (void *)__pyx_sq_item_3pop_4data_MultidictCache},
+  {Py_sq_contains, (void *)__pyx_pw_3pop_4data_14MultidictCache_9__contains__},
+  {Py_mp_subscript, (void *)__pyx_pw_3pop_4data_14MultidictCache_5__getitem__},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data_MultidictCache},
+  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_4data_MultidictCache},
+  {Py_tp_iter, (void *)__pyx_pw_3pop_4data_14MultidictCache_7__iter__},
+  {Py_tp_methods, (void *)__pyx_methods_3pop_4data_MultidictCache},
+  {Py_tp_init, (void *)__pyx_pw_3pop_4data_14MultidictCache_1__init__},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data_MultidictCache},
   {0, 0},
 };
-static PyType_Spec __pyx_type_4data_MultidictCache_spec = {
-  "data.MultidictCache",
-  sizeof(struct __pyx_obj_4data_MultidictCache),
+static PyType_Spec __pyx_type_3pop_4data_MultidictCache_spec = {
+  "pop.data.MultidictCache",
+  sizeof(struct __pyx_obj_3pop_4data_MultidictCache),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC,
-  __pyx_type_4data_MultidictCache_slots,
+  __pyx_type_3pop_4data_MultidictCache_slots,
 };
 #else
 
 static PySequenceMethods __pyx_tp_as_sequence_MultidictCache = {
   0, /*sq_length*/
   0, /*sq_concat*/
   0, /*sq_repeat*/
-  __pyx_sq_item_4data_MultidictCache, /*sq_item*/
+  __pyx_sq_item_3pop_4data_MultidictCache, /*sq_item*/
   0, /*sq_slice*/
   0, /*sq_ass_item*/
   0, /*sq_ass_slice*/
-  __pyx_pw_4data_14MultidictCache_9__contains__, /*sq_contains*/
+  __pyx_pw_3pop_4data_14MultidictCache_9__contains__, /*sq_contains*/
   0, /*sq_inplace_concat*/
   0, /*sq_inplace_repeat*/
 };
 
 static PyMappingMethods __pyx_tp_as_mapping_MultidictCache = {
   0, /*mp_length*/
-  __pyx_pw_4data_14MultidictCache_5__getitem__, /*mp_subscript*/
+  __pyx_pw_3pop_4data_14MultidictCache_5__getitem__, /*mp_subscript*/
   0, /*mp_ass_subscript*/
 };
 
-static PyTypeObject __pyx_type_4data_MultidictCache = {
+static PyTypeObject __pyx_type_3pop_4data_MultidictCache = {
   PyVarObject_HEAD_INIT(0, 0)
-  "data.""MultidictCache", /*tp_name*/
-  sizeof(struct __pyx_obj_4data_MultidictCache), /*tp_basicsize*/
+  "pop.data.""MultidictCache", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_4data_MultidictCache), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_4data_MultidictCache, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_4data_MultidictCache, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -12741,33 +12746,33 @@
   0, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_4data_MultidictCache, /*tp_traverse*/
-  __pyx_tp_clear_4data_MultidictCache, /*tp_clear*/
+  __pyx_tp_traverse_3pop_4data_MultidictCache, /*tp_traverse*/
+  __pyx_tp_clear_3pop_4data_MultidictCache, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
-  __pyx_pw_4data_14MultidictCache_7__iter__, /*tp_iter*/
+  __pyx_pw_3pop_4data_14MultidictCache_7__iter__, /*tp_iter*/
   0, /*tp_iternext*/
-  __pyx_methods_4data_MultidictCache, /*tp_methods*/
+  __pyx_methods_3pop_4data_MultidictCache, /*tp_methods*/
   0, /*tp_members*/
   0, /*tp_getset*/
   0, /*tp_base*/
   0, /*tp_dict*/
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
-  __pyx_pw_4data_14MultidictCache_1__init__, /*tp_init*/
+  __pyx_pw_3pop_4data_14MultidictCache_1__init__, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_4data_MultidictCache, /*tp_new*/
+  __pyx_tp_new_3pop_4data_MultidictCache, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -12791,38 +12796,38 @@
   #endif
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
 
-static PyObject *__pyx_tp_new_4data_ImmutableNamespaceDict(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
-  struct __pyx_obj_4data_ImmutableNamespaceDict *p;
+static PyObject *__pyx_tp_new_3pop_4data_ImmutableNamespaceDict(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+  struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *p;
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   if (likely(!__Pyx_PyType_HasFeature(t, Py_TPFLAGS_IS_ABSTRACT))) {
     o = (*t->tp_alloc)(t, 0);
   } else {
     o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
   }
   if (unlikely(!o)) return 0;
   #endif
-  p = ((struct __pyx_obj_4data_ImmutableNamespaceDict *)o);
+  p = ((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)o);
   p->_ImmutableNamespaceDict__data = ((PyObject*)Py_None); Py_INCREF(Py_None);
   return o;
 }
 
-static void __pyx_tp_dealloc_4data_ImmutableNamespaceDict(PyObject *o) {
-  struct __pyx_obj_4data_ImmutableNamespaceDict *p = (struct __pyx_obj_4data_ImmutableNamespaceDict *)o;
+static void __pyx_tp_dealloc_3pop_4data_ImmutableNamespaceDict(PyObject *o) {
+  struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *p = (struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_4data_ImmutableNamespaceDict) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data_ImmutableNamespaceDict) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
   Py_CLEAR(p->_ImmutableNamespaceDict__data);
   #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
@@ -12831,140 +12836,140 @@
   {
     freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
     if (tp_free) tp_free(o);
   }
   #endif
 }
 
-static int __pyx_tp_traverse_4data_ImmutableNamespaceDict(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_4data_ImmutableNamespaceDict(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_4data_ImmutableNamespaceDict *p = (struct __pyx_obj_4data_ImmutableNamespaceDict *)o;
+  struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *p = (struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)o;
   if (p->_ImmutableNamespaceDict__data) {
     e = (*v)(p->_ImmutableNamespaceDict__data, a); if (e) return e;
   }
   return 0;
 }
 
-static int __pyx_tp_clear_4data_ImmutableNamespaceDict(PyObject *o) {
+static int __pyx_tp_clear_3pop_4data_ImmutableNamespaceDict(PyObject *o) {
   PyObject* tmp;
-  struct __pyx_obj_4data_ImmutableNamespaceDict *p = (struct __pyx_obj_4data_ImmutableNamespaceDict *)o;
+  struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *p = (struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)o;
   tmp = ((PyObject*)p->_ImmutableNamespaceDict__data);
   p->_ImmutableNamespaceDict__data = ((PyObject*)Py_None); Py_INCREF(Py_None);
   Py_XDECREF(tmp);
   return 0;
 }
-static PyObject *__pyx_sq_item_4data_ImmutableNamespaceDict(PyObject *o, Py_ssize_t i) {
+static PyObject *__pyx_sq_item_3pop_4data_ImmutableNamespaceDict(PyObject *o, Py_ssize_t i) {
   PyObject *r;
   PyObject *x = PyInt_FromSsize_t(i); if(!x) return 0;
   r = Py_TYPE(o)->tp_as_mapping->mp_subscript(o, x);
   Py_DECREF(x);
   return r;
 }
 
-static int __pyx_mp_ass_subscript_4data_ImmutableNamespaceDict(PyObject *o, PyObject *i, PyObject *v) {
+static int __pyx_mp_ass_subscript_3pop_4data_ImmutableNamespaceDict(PyObject *o, PyObject *i, PyObject *v) {
   if (v) {
-    return __pyx_pw_4data_22ImmutableNamespaceDict_9__setitem__(o, i, v);
+    return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_9__setitem__(o, i, v);
   }
   else {
     __Pyx_TypeName o_type_name;
     o_type_name = __Pyx_PyType_GetName(Py_TYPE(o));
     PyErr_Format(PyExc_NotImplementedError,
       "Subscript deletion not supported by " __Pyx_FMT_TYPENAME, o_type_name);
     __Pyx_DECREF_TypeName(o_type_name);
     return -1;
   }
 }
 
-static PyObject *__pyx_tp_getattro_4data_ImmutableNamespaceDict(PyObject *o, PyObject *n) {
+static PyObject *__pyx_tp_getattro_3pop_4data_ImmutableNamespaceDict(PyObject *o, PyObject *n) {
   PyObject *v = __Pyx_PyObject_GenericGetAttr(o, n);
   if (!v && PyErr_ExceptionMatches(PyExc_AttributeError)) {
     PyErr_Clear();
-    v = __pyx_pw_4data_22ImmutableNamespaceDict_5__getattr__(o, n);
+    v = __pyx_pw_3pop_4data_22ImmutableNamespaceDict_5__getattr__(o, n);
   }
   return v;
 }
 
-static int __pyx_tp_setattro_4data_ImmutableNamespaceDict(PyObject *o, PyObject *n, PyObject *v) {
+static int __pyx_tp_setattro_3pop_4data_ImmutableNamespaceDict(PyObject *o, PyObject *n, PyObject *v) {
   if (v) {
-    return __pyx_pw_4data_22ImmutableNamespaceDict_7__setattr__(o, n, v);
+    return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_7__setattr__(o, n, v);
   }
   else {
     return PyObject_GenericSetAttr(o, n, 0);
   }
 }
 
-static PyObject *__pyx_tp_richcompare_4data_ImmutableNamespaceDict(PyObject *o1, PyObject *o2, int op) {
+static PyObject *__pyx_tp_richcompare_3pop_4data_ImmutableNamespaceDict(PyObject *o1, PyObject *o2, int op) {
   switch (op) {
     case Py_EQ: {
-      return __pyx_pw_4data_22ImmutableNamespaceDict_23__eq__(o1, o2);
+      return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_23__eq__(o1, o2);
     }
     case Py_NE: {
-      return __pyx_pw_4data_22ImmutableNamespaceDict_25__ne__(o1, o2);
+      return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_25__ne__(o1, o2);
     }
     default: {
       return __Pyx_NewRef(Py_NotImplemented);
     }
   }
 }
 
-static PyObject *__pyx_getprop_4data_22ImmutableNamespaceDict__ImmutableNamespaceDict__data(PyObject *o, CYTHON_UNUSED void *x) {
-  return __pyx_pw_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data_1__get__(o);
+static PyObject *__pyx_getprop_3pop_4data_22ImmutableNamespaceDict__ImmutableNamespaceDict__data(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data_1__get__(o);
 }
 
-static PyObject *__pyx_specialmethod___pyx_pw_4data_22ImmutableNamespaceDict_21__repr__(PyObject *self, CYTHON_UNUSED PyObject *arg) {
-  return __pyx_pw_4data_22ImmutableNamespaceDict_21__repr__(self);
+static PyObject *__pyx_specialmethod___pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__(PyObject *self, CYTHON_UNUSED PyObject *arg) {
+  return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__(self);
 }
 
-static PyMethodDef __pyx_methods_4data_ImmutableNamespaceDict[] = {
-  {"__getattr__", (PyCFunction)__pyx_pw_4data_22ImmutableNamespaceDict_5__getattr__, METH_O|METH_COEXIST, 0},
-  {"__repr__", (PyCFunction)__pyx_specialmethod___pyx_pw_4data_22ImmutableNamespaceDict_21__repr__, METH_NOARGS|METH_COEXIST, 0},
-  {"keys", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_27keys, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"values", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_29values, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"items", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_31items, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"get", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_33get, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"copy", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_35copy, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_37__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_4data_22ImmutableNamespaceDict_39__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+static PyMethodDef __pyx_methods_3pop_4data_ImmutableNamespaceDict[] = {
+  {"__getattr__", (PyCFunction)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_5__getattr__, METH_O|METH_COEXIST, 0},
+  {"__repr__", (PyCFunction)__pyx_specialmethod___pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__, METH_NOARGS|METH_COEXIST, 0},
+  {"keys", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_27keys, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"values", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29values, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"items", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_31items, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"get", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_33get, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"copy", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_35copy, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
   {0, 0, 0, 0}
 };
 
-static struct PyGetSetDef __pyx_getsets_4data_ImmutableNamespaceDict[] = {
-  {(char *)"_ImmutableNamespaceDict__data", __pyx_getprop_4data_22ImmutableNamespaceDict__ImmutableNamespaceDict__data, 0, (char *)0, 0},
+static struct PyGetSetDef __pyx_getsets_3pop_4data_ImmutableNamespaceDict[] = {
+  {(char *)"_ImmutableNamespaceDict__data", __pyx_getprop_3pop_4data_22ImmutableNamespaceDict__ImmutableNamespaceDict__data, 0, (char *)0, 0},
   {0, 0, 0, 0, 0}
 };
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_4data_ImmutableNamespaceDict_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_4data_ImmutableNamespaceDict},
-  {Py_tp_repr, (void *)__pyx_pw_4data_22ImmutableNamespaceDict_21__repr__},
-  {Py_nb_bool, (void *)__pyx_pw_4data_22ImmutableNamespaceDict_17__bool__},
-  {Py_sq_length, (void *)__pyx_pw_4data_22ImmutableNamespaceDict_13__len__},
-  {Py_sq_item, (void *)__pyx_sq_item_4data_ImmutableNamespaceDict},
-  {Py_sq_contains, (void *)__pyx_pw_4data_22ImmutableNamespaceDict_19__contains__},
-  {Py_mp_length, (void *)__pyx_pw_4data_22ImmutableNamespaceDict_13__len__},
-  {Py_mp_subscript, (void *)__pyx_pw_4data_22ImmutableNamespaceDict_3__getitem__},
-  {Py_mp_ass_subscript, (void *)__pyx_mp_ass_subscript_4data_ImmutableNamespaceDict},
-  {Py_tp_call, (void *)__pyx_pw_4data_22ImmutableNamespaceDict_11__call__},
-  {Py_tp_getattro, (void *)__pyx_tp_getattro_4data_ImmutableNamespaceDict},
-  {Py_tp_setattro, (void *)__pyx_tp_setattro_4data_ImmutableNamespaceDict},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_4data_ImmutableNamespaceDict},
-  {Py_tp_clear, (void *)__pyx_tp_clear_4data_ImmutableNamespaceDict},
-  {Py_tp_richcompare, (void *)__pyx_tp_richcompare_4data_ImmutableNamespaceDict},
-  {Py_tp_iter, (void *)__pyx_pw_4data_22ImmutableNamespaceDict_15__iter__},
-  {Py_tp_methods, (void *)__pyx_methods_4data_ImmutableNamespaceDict},
-  {Py_tp_getset, (void *)__pyx_getsets_4data_ImmutableNamespaceDict},
-  {Py_tp_init, (void *)__pyx_pw_4data_22ImmutableNamespaceDict_1__init__},
-  {Py_tp_new, (void *)__pyx_tp_new_4data_ImmutableNamespaceDict},
+static PyType_Slot __pyx_type_3pop_4data_ImmutableNamespaceDict_slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data_ImmutableNamespaceDict},
+  {Py_tp_repr, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__},
+  {Py_nb_bool, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_17__bool__},
+  {Py_sq_length, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__},
+  {Py_sq_item, (void *)__pyx_sq_item_3pop_4data_ImmutableNamespaceDict},
+  {Py_sq_contains, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_19__contains__},
+  {Py_mp_length, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__},
+  {Py_mp_subscript, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_3__getitem__},
+  {Py_mp_ass_subscript, (void *)__pyx_mp_ass_subscript_3pop_4data_ImmutableNamespaceDict},
+  {Py_tp_call, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_11__call__},
+  {Py_tp_getattro, (void *)__pyx_tp_getattro_3pop_4data_ImmutableNamespaceDict},
+  {Py_tp_setattro, (void *)__pyx_tp_setattro_3pop_4data_ImmutableNamespaceDict},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data_ImmutableNamespaceDict},
+  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_4data_ImmutableNamespaceDict},
+  {Py_tp_richcompare, (void *)__pyx_tp_richcompare_3pop_4data_ImmutableNamespaceDict},
+  {Py_tp_iter, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_15__iter__},
+  {Py_tp_methods, (void *)__pyx_methods_3pop_4data_ImmutableNamespaceDict},
+  {Py_tp_getset, (void *)__pyx_getsets_3pop_4data_ImmutableNamespaceDict},
+  {Py_tp_init, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_1__init__},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data_ImmutableNamespaceDict},
   {0, 0},
 };
-static PyType_Spec __pyx_type_4data_ImmutableNamespaceDict_spec = {
-  "data.ImmutableNamespaceDict",
-  sizeof(struct __pyx_obj_4data_ImmutableNamespaceDict),
+static PyType_Spec __pyx_type_3pop_4data_ImmutableNamespaceDict_spec = {
+  "pop.data.ImmutableNamespaceDict",
+  sizeof(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC,
-  __pyx_type_4data_ImmutableNamespaceDict_slots,
+  __pyx_type_3pop_4data_ImmutableNamespaceDict_slots,
 };
 #else
 
 static PyNumberMethods __pyx_tp_as_number_ImmutableNamespaceDict = {
   0, /*nb_add*/
   0, /*nb_subtract*/
   0, /*nb_multiply*/
@@ -12973,15 +12978,15 @@
   #endif
   0, /*nb_remainder*/
   0, /*nb_divmod*/
   0, /*nb_power*/
   0, /*nb_negative*/
   0, /*nb_positive*/
   0, /*nb_absolute*/
-  __pyx_pw_4data_22ImmutableNamespaceDict_17__bool__, /*nb_bool*/
+  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_17__bool__, /*nb_bool*/
   0, /*nb_invert*/
   0, /*nb_lshift*/
   0, /*nb_rshift*/
   0, /*nb_and*/
   0, /*nb_xor*/
   0, /*nb_or*/
   #if PY_MAJOR_VERSION < 3 || (CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX < 0x03050000)
@@ -13023,83 +13028,83 @@
   #endif
   #if PY_VERSION_HEX >= 0x03050000
   0, /*nb_inplace_matrix_multiply*/
   #endif
 };
 
 static PySequenceMethods __pyx_tp_as_sequence_ImmutableNamespaceDict = {
-  __pyx_pw_4data_22ImmutableNamespaceDict_13__len__, /*sq_length*/
+  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__, /*sq_length*/
   0, /*sq_concat*/
   0, /*sq_repeat*/
-  __pyx_sq_item_4data_ImmutableNamespaceDict, /*sq_item*/
+  __pyx_sq_item_3pop_4data_ImmutableNamespaceDict, /*sq_item*/
   0, /*sq_slice*/
   0, /*sq_ass_item*/
   0, /*sq_ass_slice*/
-  __pyx_pw_4data_22ImmutableNamespaceDict_19__contains__, /*sq_contains*/
+  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_19__contains__, /*sq_contains*/
   0, /*sq_inplace_concat*/
   0, /*sq_inplace_repeat*/
 };
 
 static PyMappingMethods __pyx_tp_as_mapping_ImmutableNamespaceDict = {
-  __pyx_pw_4data_22ImmutableNamespaceDict_13__len__, /*mp_length*/
-  __pyx_pw_4data_22ImmutableNamespaceDict_3__getitem__, /*mp_subscript*/
-  __pyx_mp_ass_subscript_4data_ImmutableNamespaceDict, /*mp_ass_subscript*/
+  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__, /*mp_length*/
+  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_3__getitem__, /*mp_subscript*/
+  __pyx_mp_ass_subscript_3pop_4data_ImmutableNamespaceDict, /*mp_ass_subscript*/
 };
 
-static PyTypeObject __pyx_type_4data_ImmutableNamespaceDict = {
+static PyTypeObject __pyx_type_3pop_4data_ImmutableNamespaceDict = {
   PyVarObject_HEAD_INIT(0, 0)
-  "data.""ImmutableNamespaceDict", /*tp_name*/
-  sizeof(struct __pyx_obj_4data_ImmutableNamespaceDict), /*tp_basicsize*/
+  "pop.data.""ImmutableNamespaceDict", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_4data_ImmutableNamespaceDict, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_4data_ImmutableNamespaceDict, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
   0, /*tp_setattr*/
   #if PY_MAJOR_VERSION < 3
   0, /*tp_compare*/
   #endif
   #if PY_MAJOR_VERSION >= 3
   0, /*tp_as_async*/
   #endif
-  __pyx_pw_4data_22ImmutableNamespaceDict_21__repr__, /*tp_repr*/
+  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__, /*tp_repr*/
   &__pyx_tp_as_number_ImmutableNamespaceDict, /*tp_as_number*/
   &__pyx_tp_as_sequence_ImmutableNamespaceDict, /*tp_as_sequence*/
   &__pyx_tp_as_mapping_ImmutableNamespaceDict, /*tp_as_mapping*/
   0, /*tp_hash*/
-  __pyx_pw_4data_22ImmutableNamespaceDict_11__call__, /*tp_call*/
+  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_11__call__, /*tp_call*/
   0, /*tp_str*/
-  __pyx_tp_getattro_4data_ImmutableNamespaceDict, /*tp_getattro*/
-  __pyx_tp_setattro_4data_ImmutableNamespaceDict, /*tp_setattro*/
+  __pyx_tp_getattro_3pop_4data_ImmutableNamespaceDict, /*tp_getattro*/
+  __pyx_tp_setattro_3pop_4data_ImmutableNamespaceDict, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_4data_ImmutableNamespaceDict, /*tp_traverse*/
-  __pyx_tp_clear_4data_ImmutableNamespaceDict, /*tp_clear*/
-  __pyx_tp_richcompare_4data_ImmutableNamespaceDict, /*tp_richcompare*/
+  __pyx_tp_traverse_3pop_4data_ImmutableNamespaceDict, /*tp_traverse*/
+  __pyx_tp_clear_3pop_4data_ImmutableNamespaceDict, /*tp_clear*/
+  __pyx_tp_richcompare_3pop_4data_ImmutableNamespaceDict, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
-  __pyx_pw_4data_22ImmutableNamespaceDict_15__iter__, /*tp_iter*/
+  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_15__iter__, /*tp_iter*/
   0, /*tp_iternext*/
-  __pyx_methods_4data_ImmutableNamespaceDict, /*tp_methods*/
+  __pyx_methods_3pop_4data_ImmutableNamespaceDict, /*tp_methods*/
   0, /*tp_members*/
-  __pyx_getsets_4data_ImmutableNamespaceDict, /*tp_getset*/
+  __pyx_getsets_3pop_4data_ImmutableNamespaceDict, /*tp_getset*/
   0, /*tp_base*/
   0, /*tp_dict*/
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
-  __pyx_pw_4data_22ImmutableNamespaceDict_1__init__, /*tp_init*/
+  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_1__init__, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_4data_ImmutableNamespaceDict, /*tp_new*/
+  __pyx_tp_new_3pop_4data_ImmutableNamespaceDict, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -13124,108 +13129,108 @@
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
 
 #if CYTHON_USE_FREELISTS
-static struct __pyx_obj_4data___pyx_scope_struct____contains__ *__pyx_freelist_4data___pyx_scope_struct____contains__[8];
-static int __pyx_freecount_4data___pyx_scope_struct____contains__ = 0;
+static struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *__pyx_freelist_3pop_4data___pyx_scope_struct____contains__[8];
+static int __pyx_freecount_3pop_4data___pyx_scope_struct____contains__ = 0;
 #endif
 
-static PyObject *__pyx_tp_new_4data___pyx_scope_struct____contains__(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct____contains__(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   #if CYTHON_USE_FREELISTS
-  if (likely((int)(__pyx_freecount_4data___pyx_scope_struct____contains__ > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_4data___pyx_scope_struct____contains__)))) {
-    o = (PyObject*)__pyx_freelist_4data___pyx_scope_struct____contains__[--__pyx_freecount_4data___pyx_scope_struct____contains__];
-    memset(o, 0, sizeof(struct __pyx_obj_4data___pyx_scope_struct____contains__));
+  if (likely((int)(__pyx_freecount_3pop_4data___pyx_scope_struct____contains__ > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__)))) {
+    o = (PyObject*)__pyx_freelist_3pop_4data___pyx_scope_struct____contains__[--__pyx_freecount_3pop_4data___pyx_scope_struct____contains__];
+    memset(o, 0, sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__));
     (void) PyObject_INIT(o, t);
     PyObject_GC_Track(o);
   } else
   #endif
   {
     o = (*t->tp_alloc)(t, 0);
     if (unlikely(!o)) return 0;
   }
   #endif
   return o;
 }
 
-static void __pyx_tp_dealloc_4data___pyx_scope_struct____contains__(PyObject *o) {
-  struct __pyx_obj_4data___pyx_scope_struct____contains__ *p = (struct __pyx_obj_4data___pyx_scope_struct____contains__ *)o;
+static void __pyx_tp_dealloc_3pop_4data___pyx_scope_struct____contains__(PyObject *o) {
+  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_4data___pyx_scope_struct____contains__) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data___pyx_scope_struct____contains__) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
   Py_CLEAR(p->__pyx_v_item);
   #if CYTHON_USE_FREELISTS
-  if (((int)(__pyx_freecount_4data___pyx_scope_struct____contains__ < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_4data___pyx_scope_struct____contains__)))) {
-    __pyx_freelist_4data___pyx_scope_struct____contains__[__pyx_freecount_4data___pyx_scope_struct____contains__++] = ((struct __pyx_obj_4data___pyx_scope_struct____contains__ *)o);
+  if (((int)(__pyx_freecount_3pop_4data___pyx_scope_struct____contains__ < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__)))) {
+    __pyx_freelist_3pop_4data___pyx_scope_struct____contains__[__pyx_freecount_3pop_4data___pyx_scope_struct____contains__++] = ((struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)o);
   } else
   #endif
   {
     #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
     (*Py_TYPE(o)->tp_free)(o);
     #else
     {
       freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
       if (tp_free) tp_free(o);
     }
     #endif
   }
 }
 
-static int __pyx_tp_traverse_4data___pyx_scope_struct____contains__(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_4data___pyx_scope_struct____contains__(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_4data___pyx_scope_struct____contains__ *p = (struct __pyx_obj_4data___pyx_scope_struct____contains__ *)o;
+  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)o;
   if (p->__pyx_v_item) {
     e = (*v)(p->__pyx_v_item, a); if (e) return e;
   }
   return 0;
 }
 
-static int __pyx_tp_clear_4data___pyx_scope_struct____contains__(PyObject *o) {
+static int __pyx_tp_clear_3pop_4data___pyx_scope_struct____contains__(PyObject *o) {
   PyObject* tmp;
-  struct __pyx_obj_4data___pyx_scope_struct____contains__ *p = (struct __pyx_obj_4data___pyx_scope_struct____contains__ *)o;
+  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)o;
   tmp = ((PyObject*)p->__pyx_v_item);
   p->__pyx_v_item = Py_None; Py_INCREF(Py_None);
   Py_XDECREF(tmp);
   return 0;
 }
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_4data___pyx_scope_struct____contains___slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_4data___pyx_scope_struct____contains__},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_4data___pyx_scope_struct____contains__},
-  {Py_tp_clear, (void *)__pyx_tp_clear_4data___pyx_scope_struct____contains__},
-  {Py_tp_new, (void *)__pyx_tp_new_4data___pyx_scope_struct____contains__},
+static PyType_Slot __pyx_type_3pop_4data___pyx_scope_struct____contains___slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data___pyx_scope_struct____contains__},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data___pyx_scope_struct____contains__},
+  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_4data___pyx_scope_struct____contains__},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data___pyx_scope_struct____contains__},
   {0, 0},
 };
-static PyType_Spec __pyx_type_4data___pyx_scope_struct____contains___spec = {
-  "data.__pyx_scope_struct____contains__",
-  sizeof(struct __pyx_obj_4data___pyx_scope_struct____contains__),
+static PyType_Spec __pyx_type_3pop_4data___pyx_scope_struct____contains___spec = {
+  "pop.data.__pyx_scope_struct____contains__",
+  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_4data___pyx_scope_struct____contains___slots,
+  __pyx_type_3pop_4data___pyx_scope_struct____contains___slots,
 };
 #else
 
-static PyTypeObject __pyx_type_4data___pyx_scope_struct____contains__ = {
+static PyTypeObject __pyx_type_3pop_4data___pyx_scope_struct____contains__ = {
   PyVarObject_HEAD_INIT(0, 0)
-  "data.""__pyx_scope_struct____contains__", /*tp_name*/
-  sizeof(struct __pyx_obj_4data___pyx_scope_struct____contains__), /*tp_basicsize*/
+  "pop.data.""__pyx_scope_struct____contains__", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_4data___pyx_scope_struct____contains__, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_4data___pyx_scope_struct____contains__, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -13244,16 +13249,16 @@
   0, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_4data___pyx_scope_struct____contains__, /*tp_traverse*/
-  __pyx_tp_clear_4data___pyx_scope_struct____contains__, /*tp_clear*/
+  __pyx_tp_traverse_3pop_4data___pyx_scope_struct____contains__, /*tp_traverse*/
+  __pyx_tp_clear_3pop_4data___pyx_scope_struct____contains__, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
   0, /*tp_iter*/
   0, /*tp_iternext*/
   0, /*tp_methods*/
   0, /*tp_members*/
   0, /*tp_getset*/
@@ -13262,15 +13267,15 @@
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
   0, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_4data___pyx_scope_struct____contains__, /*tp_new*/
+  __pyx_tp_new_3pop_4data___pyx_scope_struct____contains__, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -13295,106 +13300,106 @@
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
 
 #if CYTHON_USE_FREELISTS
-static struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *__pyx_freelist_4data___pyx_scope_struct_1_genexpr[8];
-static int __pyx_freecount_4data___pyx_scope_struct_1_genexpr = 0;
+static struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *__pyx_freelist_3pop_4data___pyx_scope_struct_1_genexpr[8];
+static int __pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr = 0;
 #endif
 
-static PyObject *__pyx_tp_new_4data___pyx_scope_struct_1_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   #if CYTHON_USE_FREELISTS
-  if (likely((int)(__pyx_freecount_4data___pyx_scope_struct_1_genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_4data___pyx_scope_struct_1_genexpr)))) {
-    o = (PyObject*)__pyx_freelist_4data___pyx_scope_struct_1_genexpr[--__pyx_freecount_4data___pyx_scope_struct_1_genexpr];
-    memset(o, 0, sizeof(struct __pyx_obj_4data___pyx_scope_struct_1_genexpr));
+  if (likely((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr)))) {
+    o = (PyObject*)__pyx_freelist_3pop_4data___pyx_scope_struct_1_genexpr[--__pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr];
+    memset(o, 0, sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr));
     (void) PyObject_INIT(o, t);
     PyObject_GC_Track(o);
   } else
   #endif
   {
     o = (*t->tp_alloc)(t, 0);
     if (unlikely(!o)) return 0;
   }
   #endif
   return o;
 }
 
-static void __pyx_tp_dealloc_4data___pyx_scope_struct_1_genexpr(PyObject *o) {
-  struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *p = (struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *)o;
+static void __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_1_genexpr(PyObject *o) {
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_4data___pyx_scope_struct_1_genexpr) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_1_genexpr) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
   Py_CLEAR(p->__pyx_outer_scope);
   Py_CLEAR(p->__pyx_genexpr_arg_0);
   Py_CLEAR(p->__pyx_v_base_dict);
   #if CYTHON_USE_FREELISTS
-  if (((int)(__pyx_freecount_4data___pyx_scope_struct_1_genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_4data___pyx_scope_struct_1_genexpr)))) {
-    __pyx_freelist_4data___pyx_scope_struct_1_genexpr[__pyx_freecount_4data___pyx_scope_struct_1_genexpr++] = ((struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *)o);
+  if (((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr)))) {
+    __pyx_freelist_3pop_4data___pyx_scope_struct_1_genexpr[__pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr++] = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)o);
   } else
   #endif
   {
     #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
     (*Py_TYPE(o)->tp_free)(o);
     #else
     {
       freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
       if (tp_free) tp_free(o);
     }
     #endif
   }
 }
 
-static int __pyx_tp_traverse_4data___pyx_scope_struct_1_genexpr(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_4data___pyx_scope_struct_1_genexpr(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *p = (struct __pyx_obj_4data___pyx_scope_struct_1_genexpr *)o;
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)o;
   if (p->__pyx_outer_scope) {
     e = (*v)(((PyObject *)p->__pyx_outer_scope), a); if (e) return e;
   }
   if (p->__pyx_genexpr_arg_0) {
     e = (*v)(p->__pyx_genexpr_arg_0, a); if (e) return e;
   }
   if (p->__pyx_v_base_dict) {
     e = (*v)(p->__pyx_v_base_dict, a); if (e) return e;
   }
   return 0;
 }
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_4data___pyx_scope_struct_1_genexpr_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_4data___pyx_scope_struct_1_genexpr},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_4data___pyx_scope_struct_1_genexpr},
-  {Py_tp_new, (void *)__pyx_tp_new_4data___pyx_scope_struct_1_genexpr},
+static PyType_Slot __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data___pyx_scope_struct_1_genexpr},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data___pyx_scope_struct_1_genexpr},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr},
   {0, 0},
 };
-static PyType_Spec __pyx_type_4data___pyx_scope_struct_1_genexpr_spec = {
-  "data.__pyx_scope_struct_1_genexpr",
-  sizeof(struct __pyx_obj_4data___pyx_scope_struct_1_genexpr),
+static PyType_Spec __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_spec = {
+  "pop.data.__pyx_scope_struct_1_genexpr",
+  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_4data___pyx_scope_struct_1_genexpr_slots,
+  __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_slots,
 };
 #else
 
-static PyTypeObject __pyx_type_4data___pyx_scope_struct_1_genexpr = {
+static PyTypeObject __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr = {
   PyVarObject_HEAD_INIT(0, 0)
-  "data.""__pyx_scope_struct_1_genexpr", /*tp_name*/
-  sizeof(struct __pyx_obj_4data___pyx_scope_struct_1_genexpr), /*tp_basicsize*/
+  "pop.data.""__pyx_scope_struct_1_genexpr", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_4data___pyx_scope_struct_1_genexpr, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_1_genexpr, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -13413,15 +13418,15 @@
   0, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_4data___pyx_scope_struct_1_genexpr, /*tp_traverse*/
+  __pyx_tp_traverse_3pop_4data___pyx_scope_struct_1_genexpr, /*tp_traverse*/
   0, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
   0, /*tp_iter*/
   0, /*tp_iternext*/
   0, /*tp_methods*/
   0, /*tp_members*/
@@ -13431,15 +13436,15 @@
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
   0, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_4data___pyx_scope_struct_1_genexpr, /*tp_new*/
+  __pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -13464,106 +13469,106 @@
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
 
 #if CYTHON_USE_FREELISTS
-static struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *__pyx_freelist_4data___pyx_scope_struct_2_genexpr[8];
-static int __pyx_freecount_4data___pyx_scope_struct_2_genexpr = 0;
+static struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *__pyx_freelist_3pop_4data___pyx_scope_struct_2_genexpr[8];
+static int __pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr = 0;
 #endif
 
-static PyObject *__pyx_tp_new_4data___pyx_scope_struct_2_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   #if CYTHON_USE_FREELISTS
-  if (likely((int)(__pyx_freecount_4data___pyx_scope_struct_2_genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_4data___pyx_scope_struct_2_genexpr)))) {
-    o = (PyObject*)__pyx_freelist_4data___pyx_scope_struct_2_genexpr[--__pyx_freecount_4data___pyx_scope_struct_2_genexpr];
-    memset(o, 0, sizeof(struct __pyx_obj_4data___pyx_scope_struct_2_genexpr));
+  if (likely((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr)))) {
+    o = (PyObject*)__pyx_freelist_3pop_4data___pyx_scope_struct_2_genexpr[--__pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr];
+    memset(o, 0, sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr));
     (void) PyObject_INIT(o, t);
     PyObject_GC_Track(o);
   } else
   #endif
   {
     o = (*t->tp_alloc)(t, 0);
     if (unlikely(!o)) return 0;
   }
   #endif
   return o;
 }
 
-static void __pyx_tp_dealloc_4data___pyx_scope_struct_2_genexpr(PyObject *o) {
-  struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *p = (struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *)o;
+static void __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_2_genexpr(PyObject *o) {
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_4data___pyx_scope_struct_2_genexpr) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_2_genexpr) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
   Py_CLEAR(p->__pyx_genexpr_arg_0);
   Py_CLEAR(p->__pyx_v_value);
   Py_CLEAR(p->__pyx_t_0);
   #if CYTHON_USE_FREELISTS
-  if (((int)(__pyx_freecount_4data___pyx_scope_struct_2_genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_4data___pyx_scope_struct_2_genexpr)))) {
-    __pyx_freelist_4data___pyx_scope_struct_2_genexpr[__pyx_freecount_4data___pyx_scope_struct_2_genexpr++] = ((struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *)o);
+  if (((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr)))) {
+    __pyx_freelist_3pop_4data___pyx_scope_struct_2_genexpr[__pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr++] = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)o);
   } else
   #endif
   {
     #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
     (*Py_TYPE(o)->tp_free)(o);
     #else
     {
       freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
       if (tp_free) tp_free(o);
     }
     #endif
   }
 }
 
-static int __pyx_tp_traverse_4data___pyx_scope_struct_2_genexpr(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_4data___pyx_scope_struct_2_genexpr(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *p = (struct __pyx_obj_4data___pyx_scope_struct_2_genexpr *)o;
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)o;
   if (p->__pyx_genexpr_arg_0) {
     e = (*v)(p->__pyx_genexpr_arg_0, a); if (e) return e;
   }
   if (p->__pyx_v_value) {
     e = (*v)(p->__pyx_v_value, a); if (e) return e;
   }
   if (p->__pyx_t_0) {
     e = (*v)(p->__pyx_t_0, a); if (e) return e;
   }
   return 0;
 }
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_4data___pyx_scope_struct_2_genexpr_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_4data___pyx_scope_struct_2_genexpr},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_4data___pyx_scope_struct_2_genexpr},
-  {Py_tp_new, (void *)__pyx_tp_new_4data___pyx_scope_struct_2_genexpr},
+static PyType_Slot __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data___pyx_scope_struct_2_genexpr},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data___pyx_scope_struct_2_genexpr},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr},
   {0, 0},
 };
-static PyType_Spec __pyx_type_4data___pyx_scope_struct_2_genexpr_spec = {
-  "data.__pyx_scope_struct_2_genexpr",
-  sizeof(struct __pyx_obj_4data___pyx_scope_struct_2_genexpr),
+static PyType_Spec __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_spec = {
+  "pop.data.__pyx_scope_struct_2_genexpr",
+  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_4data___pyx_scope_struct_2_genexpr_slots,
+  __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_slots,
 };
 #else
 
-static PyTypeObject __pyx_type_4data___pyx_scope_struct_2_genexpr = {
+static PyTypeObject __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr = {
   PyVarObject_HEAD_INIT(0, 0)
-  "data.""__pyx_scope_struct_2_genexpr", /*tp_name*/
-  sizeof(struct __pyx_obj_4data___pyx_scope_struct_2_genexpr), /*tp_basicsize*/
+  "pop.data.""__pyx_scope_struct_2_genexpr", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_4data___pyx_scope_struct_2_genexpr, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_2_genexpr, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -13582,15 +13587,15 @@
   0, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_4data___pyx_scope_struct_2_genexpr, /*tp_traverse*/
+  __pyx_tp_traverse_3pop_4data___pyx_scope_struct_2_genexpr, /*tp_traverse*/
   0, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
   0, /*tp_iter*/
   0, /*tp_iternext*/
   0, /*tp_methods*/
   0, /*tp_members*/
@@ -13600,15 +13605,15 @@
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
   0, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_4data___pyx_scope_struct_2_genexpr, /*tp_new*/
+  __pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -13633,106 +13638,106 @@
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
 
 #if CYTHON_USE_FREELISTS
-static struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *__pyx_freelist_4data___pyx_scope_struct_3_genexpr[8];
-static int __pyx_freecount_4data___pyx_scope_struct_3_genexpr = 0;
+static struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *__pyx_freelist_3pop_4data___pyx_scope_struct_3_genexpr[8];
+static int __pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr = 0;
 #endif
 
-static PyObject *__pyx_tp_new_4data___pyx_scope_struct_3_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   #if CYTHON_USE_FREELISTS
-  if (likely((int)(__pyx_freecount_4data___pyx_scope_struct_3_genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_4data___pyx_scope_struct_3_genexpr)))) {
-    o = (PyObject*)__pyx_freelist_4data___pyx_scope_struct_3_genexpr[--__pyx_freecount_4data___pyx_scope_struct_3_genexpr];
-    memset(o, 0, sizeof(struct __pyx_obj_4data___pyx_scope_struct_3_genexpr));
+  if (likely((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr)))) {
+    o = (PyObject*)__pyx_freelist_3pop_4data___pyx_scope_struct_3_genexpr[--__pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr];
+    memset(o, 0, sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr));
     (void) PyObject_INIT(o, t);
     PyObject_GC_Track(o);
   } else
   #endif
   {
     o = (*t->tp_alloc)(t, 0);
     if (unlikely(!o)) return 0;
   }
   #endif
   return o;
 }
 
-static void __pyx_tp_dealloc_4data___pyx_scope_struct_3_genexpr(PyObject *o) {
-  struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *p = (struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *)o;
+static void __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_3_genexpr(PyObject *o) {
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_4data___pyx_scope_struct_3_genexpr) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_3_genexpr) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
   Py_CLEAR(p->__pyx_genexpr_arg_0);
   Py_CLEAR(p->__pyx_v_value);
   Py_CLEAR(p->__pyx_t_0);
   #if CYTHON_USE_FREELISTS
-  if (((int)(__pyx_freecount_4data___pyx_scope_struct_3_genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_4data___pyx_scope_struct_3_genexpr)))) {
-    __pyx_freelist_4data___pyx_scope_struct_3_genexpr[__pyx_freecount_4data___pyx_scope_struct_3_genexpr++] = ((struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *)o);
+  if (((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr)))) {
+    __pyx_freelist_3pop_4data___pyx_scope_struct_3_genexpr[__pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr++] = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)o);
   } else
   #endif
   {
     #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
     (*Py_TYPE(o)->tp_free)(o);
     #else
     {
       freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
       if (tp_free) tp_free(o);
     }
     #endif
   }
 }
 
-static int __pyx_tp_traverse_4data___pyx_scope_struct_3_genexpr(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_4data___pyx_scope_struct_3_genexpr(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *p = (struct __pyx_obj_4data___pyx_scope_struct_3_genexpr *)o;
+  struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)o;
   if (p->__pyx_genexpr_arg_0) {
     e = (*v)(p->__pyx_genexpr_arg_0, a); if (e) return e;
   }
   if (p->__pyx_v_value) {
     e = (*v)(p->__pyx_v_value, a); if (e) return e;
   }
   if (p->__pyx_t_0) {
     e = (*v)(p->__pyx_t_0, a); if (e) return e;
   }
   return 0;
 }
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_4data___pyx_scope_struct_3_genexpr_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_4data___pyx_scope_struct_3_genexpr},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_4data___pyx_scope_struct_3_genexpr},
-  {Py_tp_new, (void *)__pyx_tp_new_4data___pyx_scope_struct_3_genexpr},
+static PyType_Slot __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data___pyx_scope_struct_3_genexpr},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data___pyx_scope_struct_3_genexpr},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr},
   {0, 0},
 };
-static PyType_Spec __pyx_type_4data___pyx_scope_struct_3_genexpr_spec = {
-  "data.__pyx_scope_struct_3_genexpr",
-  sizeof(struct __pyx_obj_4data___pyx_scope_struct_3_genexpr),
+static PyType_Spec __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_spec = {
+  "pop.data.__pyx_scope_struct_3_genexpr",
+  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_4data___pyx_scope_struct_3_genexpr_slots,
+  __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_slots,
 };
 #else
 
-static PyTypeObject __pyx_type_4data___pyx_scope_struct_3_genexpr = {
+static PyTypeObject __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr = {
   PyVarObject_HEAD_INIT(0, 0)
-  "data.""__pyx_scope_struct_3_genexpr", /*tp_name*/
-  sizeof(struct __pyx_obj_4data___pyx_scope_struct_3_genexpr), /*tp_basicsize*/
+  "pop.data.""__pyx_scope_struct_3_genexpr", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_4data___pyx_scope_struct_3_genexpr, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_3_genexpr, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -13751,15 +13756,15 @@
   0, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_4data___pyx_scope_struct_3_genexpr, /*tp_traverse*/
+  __pyx_tp_traverse_3pop_4data___pyx_scope_struct_3_genexpr, /*tp_traverse*/
   0, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
   0, /*tp_iter*/
   0, /*tp_iternext*/
   0, /*tp_methods*/
   0, /*tp_members*/
@@ -13769,15 +13774,15 @@
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
   0, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_4data___pyx_scope_struct_3_genexpr, /*tp_new*/
+  __pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -13889,15 +13894,16 @@
     {&__pyx_n_s_merge_lists, __pyx_k_merge_lists, sizeof(__pyx_k_merge_lists), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
     {&__pyx_n_s_new, __pyx_k_new, sizeof(__pyx_k_new), 0, 0, 1, 1},
     {&__pyx_kp_u_not_found_in_any_base_dictionar, __pyx_k_not_found_in_any_base_dictionar, sizeof(__pyx_k_not_found_in_any_base_dictionar), 0, 1, 0, 0},
     {&__pyx_n_s_object, __pyx_k_object, sizeof(__pyx_k_object), 0, 0, 1, 1},
     {&__pyx_kp_u_object_has_no_attribute, __pyx_k_object_has_no_attribute, sizeof(__pyx_k_object_has_no_attribute), 0, 1, 0, 0},
     {&__pyx_n_s_pickle, __pyx_k_pickle, sizeof(__pyx_k_pickle), 0, 0, 1, 1},
-    {&__pyx_kp_s_pop_data_pyx, __pyx_k_pop_data_pyx, sizeof(__pyx_k_pop_data_pyx), 0, 0, 1, 0},
+    {&__pyx_n_s_pop_data, __pyx_k_pop_data, sizeof(__pyx_k_pop_data), 0, 0, 1, 1},
+    {&__pyx_kp_s_pop_pop_data_pyx, __pyx_k_pop_pop_data_pyx, sizeof(__pyx_k_pop_pop_data_pyx), 0, 0, 1, 0},
     {&__pyx_n_s_pyx_PickleError, __pyx_k_pyx_PickleError, sizeof(__pyx_k_pyx_PickleError), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_checksum, __pyx_k_pyx_checksum, sizeof(__pyx_k_pyx_checksum), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_result, __pyx_k_pyx_result, sizeof(__pyx_k_pyx_result), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_state, __pyx_k_pyx_state, sizeof(__pyx_k_pyx_state), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_type, __pyx_k_pyx_type, sizeof(__pyx_k_pyx_type), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_unpickle_ImmutableNamespac, __pyx_k_pyx_unpickle_ImmutableNamespac, sizeof(__pyx_k_pyx_unpickle_ImmutableNamespac), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_unpickle_MultidictCache, __pyx_k_pyx_unpickle_MultidictCache, sizeof(__pyx_k_pyx_unpickle_MultidictCache), 0, 0, 1, 1},
@@ -13938,37 +13944,37 @@
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "data.pyx":94
+  /* "pop/pop.data.pyx":94
  *             object.__setattr__(self, key, value)
  *         else:
  *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")             # <<<<<<<<<<<<<<
  * 
  *     def __setitem__(self, key, value):
  */
   __pyx_tuple__4 = PyTuple_Pack(1, __pyx_kp_u_ImmutableNamespaceDict_does_not); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 94, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__4);
   __Pyx_GIVEREF(__pyx_tuple__4);
 
-  /* "data.pyx":97
+  /* "pop/pop.data.pyx":97
  * 
  *     def __setitem__(self, key, value):
  *         raise TypeError("ImmutableNamespaceDict does not support item assignment")             # <<<<<<<<<<<<<<
  * 
  *     def __call__(self):
  */
   __pyx_tuple__5 = PyTuple_Pack(1, __pyx_kp_u_ImmutableNamespaceDict_does_not_2); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 97, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__5);
   __Pyx_GIVEREF(__pyx_tuple__5);
 
-  /* "data.pyx":192
+  /* "pop/pop.data.pyx":192
  *                 dest[key] = ret
  *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
  *                 merged = dest_subkey[:]             # <<<<<<<<<<<<<<
  *                 merged.extend([x for x in val if x not in merged])
  *                 dest[key] = merged
  */
   __pyx_slice__6 = PySlice_New(Py_None, Py_None, Py_None); if (unlikely(!__pyx_slice__6)) __PYX_ERR(0, 192, __pyx_L1_error)
@@ -14009,25 +14015,25 @@
  *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)
  */
   __pyx_tuple__13 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_pyx_state); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__13);
   __Pyx_GIVEREF(__pyx_tuple__13);
   __pyx_codeobj__14 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__13, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 16, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__14)) __PYX_ERR(2, 16, __pyx_L1_error)
 
-  /* "data.pyx":38
+  /* "pop/pop.data.pyx":38
  *         self._split_cache = dict[str, list[str]]()
  * 
  *     cpdef _clear(self):             # <<<<<<<<<<<<<<
  *         self._cache.clear()
  *         self._split_cache.clear()
  */
   __pyx_tuple__15 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__15);
   __Pyx_GIVEREF(__pyx_tuple__15);
-  __pyx_codeobj__16 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_data_pyx, __pyx_n_s_clear, 38, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__16)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_codeobj__16 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_clear, 38, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__16)) __PYX_ERR(0, 38, __pyx_L1_error)
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
   __pyx_codeobj__17 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__11, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__17)) __PYX_ERR(2, 1, __pyx_L1_error)
@@ -14036,64 +14042,64 @@
  *     else:
  *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)
  */
   __pyx_codeobj__18 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__13, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 16, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__18)) __PYX_ERR(2, 16, __pyx_L1_error)
 
-  /* "data.pyx":127
+  /* "pop/pop.data.pyx":127
  *         return not self.__eq__(other)
  * 
  *     def keys(self):             # <<<<<<<<<<<<<<
  *         return self.__data.keys()
  * 
  */
-  __pyx_codeobj__19 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_data_pyx, __pyx_n_s_keys, 127, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__19)) __PYX_ERR(0, 127, __pyx_L1_error)
+  __pyx_codeobj__19 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_keys, 127, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__19)) __PYX_ERR(0, 127, __pyx_L1_error)
 
-  /* "data.pyx":130
+  /* "pop/pop.data.pyx":130
  *         return self.__data.keys()
  * 
  *     def values(self):             # <<<<<<<<<<<<<<
  *         return self.__data.values()
  * 
  */
-  __pyx_codeobj__20 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_data_pyx, __pyx_n_s_values, 130, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__20)) __PYX_ERR(0, 130, __pyx_L1_error)
+  __pyx_codeobj__20 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_values, 130, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__20)) __PYX_ERR(0, 130, __pyx_L1_error)
 
-  /* "data.pyx":133
+  /* "pop/pop.data.pyx":133
  *         return self.__data.values()
  * 
  *     def items(self):             # <<<<<<<<<<<<<<
  *         return self.__data.items()
  * 
  */
-  __pyx_codeobj__21 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_data_pyx, __pyx_n_s_items, 133, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__21)) __PYX_ERR(0, 133, __pyx_L1_error)
+  __pyx_codeobj__21 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_items, 133, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__21)) __PYX_ERR(0, 133, __pyx_L1_error)
 
-  /* "data.pyx":136
+  /* "pop/pop.data.pyx":136
  *         return self.__data.items()
  * 
  *     def get(self, key, default=None):             # <<<<<<<<<<<<<<
  *         return self.__data.get(key, default)
  * 
  */
   __pyx_tuple__22 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_key, __pyx_n_s_default); if (unlikely(!__pyx_tuple__22)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__22);
   __Pyx_GIVEREF(__pyx_tuple__22);
-  __pyx_codeobj__23 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__22, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_data_pyx, __pyx_n_s_get, 136, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__23)) __PYX_ERR(0, 136, __pyx_L1_error)
+  __pyx_codeobj__23 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__22, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_get, 136, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__23)) __PYX_ERR(0, 136, __pyx_L1_error)
   __pyx_tuple__24 = PyTuple_Pack(1, Py_None); if (unlikely(!__pyx_tuple__24)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__24);
   __Pyx_GIVEREF(__pyx_tuple__24);
 
-  /* "data.pyx":139
+  /* "pop/pop.data.pyx":139
  *         return self.__data.get(key, default)
  * 
  *     def copy(self):             # <<<<<<<<<<<<<<
  *         return unfreeze(self.__data)
  * 
  */
-  __pyx_codeobj__25 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_data_pyx, __pyx_n_s_copy, 139, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__25)) __PYX_ERR(0, 139, __pyx_L1_error)
+  __pyx_codeobj__25 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_copy, 139, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__25)) __PYX_ERR(0, 139, __pyx_L1_error)
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
   __pyx_codeobj__26 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__11, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__26)) __PYX_ERR(2, 1, __pyx_L1_error)
@@ -14102,49 +14108,49 @@
  *     else:
  *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)
  */
   __pyx_codeobj__27 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__13, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 16, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__27)) __PYX_ERR(2, 16, __pyx_L1_error)
 
-  /* "data.pyx":143
+  /* "pop/pop.data.pyx":143
  * 
  * 
  * def freeze(data):             # <<<<<<<<<<<<<<
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return data
  */
   __pyx_tuple__28 = PyTuple_Pack(6, __pyx_n_s_data, __pyx_n_s_key, __pyx_n_s_value, __pyx_n_s_genexpr, __pyx_n_s_genexpr, __pyx_n_s_genexpr); if (unlikely(!__pyx_tuple__28)) __PYX_ERR(0, 143, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__28);
   __Pyx_GIVEREF(__pyx_tuple__28);
-  __pyx_codeobj__29 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__28, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_data_pyx, __pyx_n_s_freeze, 143, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__29)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __pyx_codeobj__29 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__28, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_freeze, 143, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__29)) __PYX_ERR(0, 143, __pyx_L1_error)
 
-  /* "data.pyx":155
+  /* "pop/pop.data.pyx":155
  *         return data
  * 
  * def unfreeze(data):             # <<<<<<<<<<<<<<
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return {key: unfreeze(value) for key, value in data.items()}
  */
   __pyx_tuple__30 = PyTuple_Pack(5, __pyx_n_s_data, __pyx_n_s_key, __pyx_n_s_value, __pyx_n_s_value, __pyx_n_s_value); if (unlikely(!__pyx_tuple__30)) __PYX_ERR(0, 155, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__30);
   __Pyx_GIVEREF(__pyx_tuple__30);
-  __pyx_codeobj__31 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__30, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_data_pyx, __pyx_n_s_unfreeze, 155, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__31)) __PYX_ERR(0, 155, __pyx_L1_error)
+  __pyx_codeobj__31 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__30, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_unfreeze, 155, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__31)) __PYX_ERR(0, 155, __pyx_L1_error)
 
-  /* "data.pyx":166
+  /* "pop/pop.data.pyx":166
  * 
  * 
  * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
  *     """
  *     Recursive version of the default dict.update
  */
   __pyx_tuple__32 = PyTuple_Pack(4, __pyx_n_s_dest, __pyx_n_s_upd, __pyx_n_s_recursive_update, __pyx_n_s_merge_lists); if (unlikely(!__pyx_tuple__32)) __PYX_ERR(0, 166, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__32);
   __Pyx_GIVEREF(__pyx_tuple__32);
-  __pyx_codeobj__33 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__32, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_data_pyx, __pyx_n_s_update, 166, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__33)) __PYX_ERR(0, 166, __pyx_L1_error)
+  __pyx_codeobj__33 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__32, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_update, 166, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__33)) __PYX_ERR(0, 166, __pyx_L1_error)
   __pyx_tuple__34 = PyTuple_Pack(2, Py_True, Py_False); if (unlikely(!__pyx_tuple__34)) __PYX_ERR(0, 166, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__34);
   __Pyx_GIVEREF(__pyx_tuple__34);
 
   /* "(tree fragment)":1
  * def __pyx_unpickle_NamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
@@ -14202,15 +14208,15 @@
 static CYTHON_SMALL_CODE int __Pyx_modinit_variable_import_code(void); /*proto*/
 static CYTHON_SMALL_CODE int __Pyx_modinit_function_import_code(void); /*proto*/
 
 static int __Pyx_modinit_global_init_code(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_modinit_global_init_code", 0);
   /*--- Global init code ---*/
-  __pyx_v_4data_DICT_ATTRS = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  __pyx_v_3pop_4data_DICT_ATTRS = ((PyObject*)Py_None); Py_INCREF(Py_None);
   __Pyx_RefNannyFinishContext();
   return 0;
 }
 
 static int __Pyx_modinit_variable_export_code(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_modinit_variable_export_code", 0);
@@ -14234,160 +14240,160 @@
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__Pyx_modinit_type_init_code", 0);
   /*--- Type init code ---*/
   #if CYTHON_USE_TYPE_SPECS
   __pyx_t_1 = PyTuple_Pack(1, (PyObject *)(&PyDict_Type)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_ptype_4data_NamespaceDict = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_4data_NamespaceDict_spec, __pyx_t_1);
+  __pyx_ptype_3pop_4data_NamespaceDict = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data_NamespaceDict_spec, __pyx_t_1);
   __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-  if (unlikely(!__pyx_ptype_4data_NamespaceDict)) __PYX_ERR(0, 11, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_4data_NamespaceDict_spec, __pyx_ptype_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
+  if (unlikely(!__pyx_ptype_3pop_4data_NamespaceDict)) __PYX_ERR(0, 11, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data_NamespaceDict_spec, __pyx_ptype_3pop_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
   #else
-  __pyx_ptype_4data_NamespaceDict = &__pyx_type_4data_NamespaceDict;
+  __pyx_ptype_3pop_4data_NamespaceDict = &__pyx_type_3pop_4data_NamespaceDict;
   #endif
-  if (sizeof(struct __pyx_obj_4data_NamespaceDict) != sizeof(PyDictObject)) {
+  if (sizeof(struct __pyx_obj_3pop_4data_NamespaceDict) != sizeof(PyDictObject)) {
     if (__Pyx_validate_extern_base((&PyDict_Type)) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
   }
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  __pyx_ptype_4data_NamespaceDict->tp_dealloc = (&PyDict_Type)->tp_dealloc;
-  __pyx_ptype_4data_NamespaceDict->tp_base = (&PyDict_Type);
-  __pyx_ptype_4data_NamespaceDict->tp_new = (&PyDict_Type)->tp_new;
+  __pyx_ptype_3pop_4data_NamespaceDict->tp_dealloc = (&PyDict_Type)->tp_dealloc;
+  __pyx_ptype_3pop_4data_NamespaceDict->tp_base = (&PyDict_Type);
+  __pyx_ptype_3pop_4data_NamespaceDict->tp_new = (&PyDict_Type)->tp_new;
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_4data_NamespaceDict->tp_print = 0;
+  __pyx_ptype_3pop_4data_NamespaceDict->tp_print = 0;
   #endif
-  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_NamespaceDict, (PyObject *) __pyx_ptype_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
+  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_NamespaceDict, (PyObject *) __pyx_ptype_3pop_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
+  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_3pop_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
   #endif
-  __pyx_vtabptr_4data_MultidictCache = &__pyx_vtable_4data_MultidictCache;
-  __pyx_vtable_4data_MultidictCache._clear = (PyObject *(*)(struct __pyx_obj_4data_MultidictCache *, int __pyx_skip_dispatch))__pyx_f_4data_14MultidictCache__clear;
+  __pyx_vtabptr_3pop_4data_MultidictCache = &__pyx_vtable_3pop_4data_MultidictCache;
+  __pyx_vtable_3pop_4data_MultidictCache._clear = (PyObject *(*)(struct __pyx_obj_3pop_4data_MultidictCache *, int __pyx_skip_dispatch))__pyx_f_3pop_4data_14MultidictCache__clear;
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_4data_MultidictCache = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_4data_MultidictCache_spec, NULL); if (unlikely(!__pyx_ptype_4data_MultidictCache)) __PYX_ERR(0, 26, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_4data_MultidictCache_spec, __pyx_ptype_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_ptype_3pop_4data_MultidictCache = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data_MultidictCache_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data_MultidictCache)) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data_MultidictCache_spec, __pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
   #else
-  __pyx_ptype_4data_MultidictCache = &__pyx_type_4data_MultidictCache;
+  __pyx_ptype_3pop_4data_MultidictCache = &__pyx_type_3pop_4data_MultidictCache;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_4data_MultidictCache->tp_print = 0;
+  __pyx_ptype_3pop_4data_MultidictCache->tp_print = 0;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_4data_MultidictCache->tp_dictoffset && __pyx_ptype_4data_MultidictCache->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_4data_MultidictCache->tp_getattro = __Pyx_PyObject_GenericGetAttr;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data_MultidictCache->tp_dictoffset && __pyx_ptype_3pop_4data_MultidictCache->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_4data_MultidictCache->tp_getattro = __Pyx_PyObject_GenericGetAttr;
   }
   #endif
-  if (__Pyx_SetVtable(__pyx_ptype_4data_MultidictCache, __pyx_vtabptr_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (__Pyx_SetVtable(__pyx_ptype_3pop_4data_MultidictCache, __pyx_vtabptr_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if (__Pyx_MergeVtables(__pyx_ptype_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (__Pyx_MergeVtables(__pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
   #endif
-  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_MultidictCache, (PyObject *) __pyx_ptype_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_MultidictCache, (PyObject *) __pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
   #endif
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_4data_ImmutableNamespaceDict = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_4data_ImmutableNamespaceDict_spec, NULL); if (unlikely(!__pyx_ptype_4data_ImmutableNamespaceDict)) __PYX_ERR(0, 68, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_4data_ImmutableNamespaceDict_spec, __pyx_ptype_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
+  __pyx_ptype_3pop_4data_ImmutableNamespaceDict = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data_ImmutableNamespaceDict_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data_ImmutableNamespaceDict)) __PYX_ERR(0, 68, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data_ImmutableNamespaceDict_spec, __pyx_ptype_3pop_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
   #else
-  __pyx_ptype_4data_ImmutableNamespaceDict = &__pyx_type_4data_ImmutableNamespaceDict;
+  __pyx_ptype_3pop_4data_ImmutableNamespaceDict = &__pyx_type_3pop_4data_ImmutableNamespaceDict;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_4data_ImmutableNamespaceDict->tp_print = 0;
+  __pyx_ptype_3pop_4data_ImmutableNamespaceDict->tp_print = 0;
   #endif
-  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_ImmutableNamespaceDict, (PyObject *) __pyx_ptype_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
+  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_ImmutableNamespaceDict, (PyObject *) __pyx_ptype_3pop_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
+  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_3pop_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
   #endif
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_4data___pyx_scope_struct____contains__ = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_4data___pyx_scope_struct____contains___spec, NULL); if (unlikely(!__pyx_ptype_4data___pyx_scope_struct____contains__)) __PYX_ERR(0, 65, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_4data___pyx_scope_struct____contains___spec, __pyx_ptype_4data___pyx_scope_struct____contains__) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_ptype_3pop_4data___pyx_scope_struct____contains__ = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data___pyx_scope_struct____contains___spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data___pyx_scope_struct____contains__)) __PYX_ERR(0, 65, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data___pyx_scope_struct____contains___spec, __pyx_ptype_3pop_4data___pyx_scope_struct____contains__) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
   #else
-  __pyx_ptype_4data___pyx_scope_struct____contains__ = &__pyx_type_4data___pyx_scope_struct____contains__;
+  __pyx_ptype_3pop_4data___pyx_scope_struct____contains__ = &__pyx_type_3pop_4data___pyx_scope_struct____contains__;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_4data___pyx_scope_struct____contains__) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data___pyx_scope_struct____contains__) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_4data___pyx_scope_struct____contains__->tp_print = 0;
+  __pyx_ptype_3pop_4data___pyx_scope_struct____contains__->tp_print = 0;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_4data___pyx_scope_struct____contains__->tp_dictoffset && __pyx_ptype_4data___pyx_scope_struct____contains__->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_4data___pyx_scope_struct____contains__->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data___pyx_scope_struct____contains__->tp_dictoffset && __pyx_ptype_3pop_4data___pyx_scope_struct____contains__->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_4data___pyx_scope_struct____contains__->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
   }
   #endif
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_4data___pyx_scope_struct_1_genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_4data___pyx_scope_struct_1_genexpr_spec, NULL); if (unlikely(!__pyx_ptype_4data___pyx_scope_struct_1_genexpr)) __PYX_ERR(0, 66, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_4data___pyx_scope_struct_1_genexpr_spec, __pyx_ptype_4data___pyx_scope_struct_1_genexpr) < 0) __PYX_ERR(0, 66, __pyx_L1_error)
+  __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr)) __PYX_ERR(0, 66, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_spec, __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr) < 0) __PYX_ERR(0, 66, __pyx_L1_error)
   #else
-  __pyx_ptype_4data___pyx_scope_struct_1_genexpr = &__pyx_type_4data___pyx_scope_struct_1_genexpr;
+  __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr = &__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_4data___pyx_scope_struct_1_genexpr) < 0) __PYX_ERR(0, 66, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr) < 0) __PYX_ERR(0, 66, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_4data___pyx_scope_struct_1_genexpr->tp_print = 0;
+  __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr->tp_print = 0;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_4data___pyx_scope_struct_1_genexpr->tp_dictoffset && __pyx_ptype_4data___pyx_scope_struct_1_genexpr->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_4data___pyx_scope_struct_1_genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr->tp_dictoffset && __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
   }
   #endif
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_4data___pyx_scope_struct_2_genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_4data___pyx_scope_struct_2_genexpr_spec, NULL); if (unlikely(!__pyx_ptype_4data___pyx_scope_struct_2_genexpr)) __PYX_ERR(0, 149, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_4data___pyx_scope_struct_2_genexpr_spec, __pyx_ptype_4data___pyx_scope_struct_2_genexpr) < 0) __PYX_ERR(0, 149, __pyx_L1_error)
+  __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr)) __PYX_ERR(0, 149, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_spec, __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr) < 0) __PYX_ERR(0, 149, __pyx_L1_error)
   #else
-  __pyx_ptype_4data___pyx_scope_struct_2_genexpr = &__pyx_type_4data___pyx_scope_struct_2_genexpr;
+  __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr = &__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_4data___pyx_scope_struct_2_genexpr) < 0) __PYX_ERR(0, 149, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr) < 0) __PYX_ERR(0, 149, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_4data___pyx_scope_struct_2_genexpr->tp_print = 0;
+  __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr->tp_print = 0;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_4data___pyx_scope_struct_2_genexpr->tp_dictoffset && __pyx_ptype_4data___pyx_scope_struct_2_genexpr->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_4data___pyx_scope_struct_2_genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr->tp_dictoffset && __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
   }
   #endif
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_4data___pyx_scope_struct_3_genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_4data___pyx_scope_struct_3_genexpr_spec, NULL); if (unlikely(!__pyx_ptype_4data___pyx_scope_struct_3_genexpr)) __PYX_ERR(0, 151, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_4data___pyx_scope_struct_3_genexpr_spec, __pyx_ptype_4data___pyx_scope_struct_3_genexpr) < 0) __PYX_ERR(0, 151, __pyx_L1_error)
+  __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr)) __PYX_ERR(0, 151, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_spec, __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr) < 0) __PYX_ERR(0, 151, __pyx_L1_error)
   #else
-  __pyx_ptype_4data___pyx_scope_struct_3_genexpr = &__pyx_type_4data___pyx_scope_struct_3_genexpr;
+  __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr = &__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_4data___pyx_scope_struct_3_genexpr) < 0) __PYX_ERR(0, 151, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr) < 0) __PYX_ERR(0, 151, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_4data___pyx_scope_struct_3_genexpr->tp_print = 0;
+  __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr->tp_print = 0;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_4data___pyx_scope_struct_3_genexpr->tp_dictoffset && __pyx_ptype_4data___pyx_scope_struct_3_genexpr->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_4data___pyx_scope_struct_3_genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr->tp_dictoffset && __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
   }
   #endif
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_RefNannyFinishContext();
@@ -14693,22 +14699,22 @@
   /*--- Initialize various global constants etc. ---*/
   if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   stringtab_initialized = 1;
   if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
   if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
-  if (__pyx_module_is_main_data) {
+  if (__pyx_module_is_main_pop__data) {
     if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   }
   #if PY_MAJOR_VERSION >= 3
   {
     PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
-    if (!PyDict_GetItemString(modules, "data")) {
-      if (unlikely((PyDict_SetItemString(modules, "data", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
+    if (!PyDict_GetItemString(modules, "pop.data")) {
+      if (unlikely((PyDict_SetItemString(modules, "pop.data", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     }
   }
   #endif
   /*--- Builtin init code ---*/
   if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   /*--- Constants init code ---*/
   if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -14721,15 +14727,15 @@
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
-  /* "data.pyx":3
+  /* "pop/pop.data.pyx":3
  * # cython: language_level=3
  * 
  * from collections.abc import Mapping             # <<<<<<<<<<<<<<
  * from cpython cimport dict
  * from cython cimport pint
  */
   __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
@@ -14742,249 +14748,249 @@
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_Mapping); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_Mapping, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "data.pyx":9
+  /* "pop/pop.data.pyx":9
  * 
  * 
  * cdef frozenset DICT_ATTRS = frozenset(dir(dict))             # <<<<<<<<<<<<<<
  * 
  * cdef class NamespaceDict(dict[str, object]):
  */
   __pyx_t_3 = PyObject_Dir(((PyObject *)(&PyDict_Type))); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_2 = __Pyx_PyFrozenSet_New(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __Pyx_XGOTREF(__pyx_v_4data_DICT_ATTRS);
-  __Pyx_DECREF_SET(__pyx_v_4data_DICT_ATTRS, ((PyObject*)__pyx_t_2));
+  __Pyx_XGOTREF(__pyx_v_3pop_4data_DICT_ATTRS);
+  __Pyx_DECREF_SET(__pyx_v_3pop_4data_DICT_ATTRS, ((PyObject*)__pyx_t_2));
   __Pyx_GIVEREF(__pyx_t_2);
   __pyx_t_2 = 0;
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_13NamespaceDict_5__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_NamespaceDict___reduce_cython, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__12)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_13NamespaceDict_5__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_NamespaceDict___reduce_cython, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__12)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_NamespaceDict, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_NamespaceDict, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_NamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_4data_NamespaceDict);
 
   /* "(tree fragment)":16
  *     else:
  *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_13NamespaceDict_7__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_NamespaceDict___setstate_cython, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__14)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_13NamespaceDict_7__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_NamespaceDict___setstate_cython, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__14)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_NamespaceDict, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_NamespaceDict, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_NamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_4data_NamespaceDict);
 
-  /* "data.pyx":38
+  /* "pop/pop.data.pyx":38
  *         self._split_cache = dict[str, list[str]]()
  * 
  *     cpdef _clear(self):             # <<<<<<<<<<<<<<
  *         self._cache.clear()
  *         self._split_cache.clear()
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_14MultidictCache_3_clear, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_MultidictCache__clear, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__16)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_14MultidictCache_3_clear, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_MultidictCache__clear, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__16)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_MultidictCache, __pyx_n_s_clear, __pyx_t_2) < 0) __PYX_ERR(0, 38, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_MultidictCache, __pyx_n_s_clear, __pyx_t_2) < 0) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_MultidictCache);
+  PyType_Modified(__pyx_ptype_3pop_4data_MultidictCache);
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_14MultidictCache_11__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_MultidictCache___reduce_cython, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__17)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_14MultidictCache_11__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_MultidictCache___reduce_cython, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__17)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_MultidictCache, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_MultidictCache, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_MultidictCache);
+  PyType_Modified(__pyx_ptype_3pop_4data_MultidictCache);
 
   /* "(tree fragment)":16
  *     else:
  *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_14MultidictCache_13__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_MultidictCache___setstate_cython, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__18)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_14MultidictCache_13__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_MultidictCache___setstate_cython, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__18)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_MultidictCache, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_MultidictCache, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_MultidictCache);
+  PyType_Modified(__pyx_ptype_3pop_4data_MultidictCache);
 
-  /* "data.pyx":127
+  /* "pop/pop.data.pyx":127
  *         return not self.__eq__(other)
  * 
  *     def keys(self):             # <<<<<<<<<<<<<<
  *         return self.__data.keys()
  * 
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_22ImmutableNamespaceDict_27keys, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_keys, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__19)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 127, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_27keys, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_keys, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__19)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 127, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict, __pyx_n_s_keys, __pyx_t_2) < 0) __PYX_ERR(0, 127, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_keys, __pyx_t_2) < 0) __PYX_ERR(0, 127, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
 
-  /* "data.pyx":130
+  /* "pop/pop.data.pyx":130
  *         return self.__data.keys()
  * 
  *     def values(self):             # <<<<<<<<<<<<<<
  *         return self.__data.values()
  * 
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_22ImmutableNamespaceDict_29values, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_values, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__20)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 130, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_29values, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_values, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__20)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 130, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict, __pyx_n_s_values, __pyx_t_2) < 0) __PYX_ERR(0, 130, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_values, __pyx_t_2) < 0) __PYX_ERR(0, 130, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
 
-  /* "data.pyx":133
+  /* "pop/pop.data.pyx":133
  *         return self.__data.values()
  * 
  *     def items(self):             # <<<<<<<<<<<<<<
  *         return self.__data.items()
  * 
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_22ImmutableNamespaceDict_31items, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_items, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__21)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 133, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_31items, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_items, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__21)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 133, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict, __pyx_n_s_items, __pyx_t_2) < 0) __PYX_ERR(0, 133, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_items, __pyx_t_2) < 0) __PYX_ERR(0, 133, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
 
-  /* "data.pyx":136
+  /* "pop/pop.data.pyx":136
  *         return self.__data.items()
  * 
  *     def get(self, key, default=None):             # <<<<<<<<<<<<<<
  *         return self.__data.get(key, default)
  * 
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_22ImmutableNamespaceDict_33get, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_get, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__23)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 136, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_33get, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_get, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__23)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_2, __pyx_tuple__24);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict, __pyx_n_s_get, __pyx_t_2) < 0) __PYX_ERR(0, 136, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_get, __pyx_t_2) < 0) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
 
-  /* "data.pyx":139
+  /* "pop/pop.data.pyx":139
  *         return self.__data.get(key, default)
  * 
  *     def copy(self):             # <<<<<<<<<<<<<<
  *         return unfreeze(self.__data)
  * 
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_22ImmutableNamespaceDict_35copy, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_copy, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__25)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 139, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_35copy, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_copy, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__25)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 139, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict, __pyx_n_s_copy, __pyx_t_2) < 0) __PYX_ERR(0, 139, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_copy, __pyx_t_2) < 0) __PYX_ERR(0, 139, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_22ImmutableNamespaceDict_37__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict___reduce, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict___reduce, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
 
   /* "(tree fragment)":16
  *     else:
  *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
  *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_22ImmutableNamespaceDict_39__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict___setstat, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__27)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict___setstat, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__27)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_4data_ImmutableNamespaceDict, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
 
-  /* "data.pyx":143
+  /* "pop/pop.data.pyx":143
  * 
  * 
  * def freeze(data):             # <<<<<<<<<<<<<<
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return data
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_1freeze, 0, __pyx_n_s_freeze, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__29)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_1freeze, 0, __pyx_n_s_freeze, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__29)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 143, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_freeze, __pyx_t_2) < 0) __PYX_ERR(0, 143, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "data.pyx":155
+  /* "pop/pop.data.pyx":155
  *         return data
  * 
  * def unfreeze(data):             # <<<<<<<<<<<<<<
  *     if isinstance(data, ImmutableNamespaceDict):
  *         return {key: unfreeze(value) for key, value in data.items()}
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_3unfreeze, 0, __pyx_n_s_unfreeze, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__31)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 155, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_3unfreeze, 0, __pyx_n_s_unfreeze, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__31)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 155, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_unfreeze, __pyx_t_2) < 0) __PYX_ERR(0, 155, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "data.pyx":166
+  /* "pop/pop.data.pyx":166
  * 
  * 
  * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
  *     """
  *     Recursive version of the default dict.update
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_5update, 0, __pyx_n_s_update, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__33)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 166, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_5update, 0, __pyx_n_s_update, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__33)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 166, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_2, __pyx_tuple__34);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_update, __pyx_t_2) < 0) __PYX_ERR(0, 166, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "(tree fragment)":1
  * def __pyx_unpickle_NamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_7__pyx_unpickle_NamespaceDict, 0, __pyx_n_s_pyx_unpickle_NamespaceDict, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__36)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_7__pyx_unpickle_NamespaceDict, 0, __pyx_n_s_pyx_unpickle_NamespaceDict, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__36)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_NamespaceDict, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "(tree fragment)":11
  *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
  *     return __pyx_result
  * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
  *     if len(__pyx_state) > 0 and hasattr(__pyx_result, '__dict__'):
  *         __pyx_result.__dict__.update(__pyx_state[0])
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_9__pyx_unpickle_MultidictCache, 0, __pyx_n_s_pyx_unpickle_MultidictCache, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__37)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_9__pyx_unpickle_MultidictCache, 0, __pyx_n_s_pyx_unpickle_MultidictCache, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__37)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_MultidictCache, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "(tree fragment)":1
  * def __pyx_unpickle_ImmutableNamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_4data_11__pyx_unpickle_ImmutableNamespaceDict, 0, __pyx_n_s_pyx_unpickle_ImmutableNamespac, NULL, __pyx_n_s_data, __pyx_d, ((PyObject *)__pyx_codeobj__38)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict, 0, __pyx_n_s_pyx_unpickle_ImmutableNamespac, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__38)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_ImmutableNamespac, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "data.pyx":1
+  /* "pop/pop.data.pyx":1
  * # cython: language_level=3             # <<<<<<<<<<<<<<
  * 
  * from collections.abc import Mapping
  */
   __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -14994,29 +15000,29 @@
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
-      __Pyx_AddTraceback("init data", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("init pop.data", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
     Py_DECREF(__pyx_m);
     if (pystate_addmodule_run) {
       PyObject *tp, *value, *tb;
       PyErr_Fetch(&tp, &value, &tb);
       PyState_RemoveModule(&__pyx_moduledef);
       PyErr_Restore(tp, value, tb);
     }
     #endif
   } else if (!PyErr_Occurred()) {
-    PyErr_SetString(PyExc_ImportError, "init data");
+    PyErr_SetString(PyExc_ImportError, "init pop.data");
   }
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   return (__pyx_m != NULL) ? 0 : -1;
   #elif PY_MAJOR_VERSION >= 3
   return __pyx_m;
```

### Comparing `cpop-28.4.1/pop/dirs.py` & `cpop-28.5.0/pop/dirs.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/exc.py` & `cpop-28.5.0/pop/exc.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/hub.py` & `cpop-28.5.0/pop/hub.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/loader.py` & `cpop-28.5.0/pop/loader.py`

 * *Files 1% similar despite different names*

```diff
@@ -273,24 +273,28 @@
                 # imported classes
                 if not klass.__module__.startswith(mod.__name__):
                     continue
                 lmod._classes[name] = klass
 
     # Add external aliased functions to the loaded mod
     for attr, func_alias in __func_alias__.items():
-        if isinstance(func_alias, Callable):
+        if isinstance(func_alias, pop.contract.Contracted):
+            obj = func_alias
+        elif isinstance(func_alias, Callable):
             obj = pop.contract.create_contracted(
                 this_sub._hub,
                 ordered_contracts,
                 func_alias,
                 ref,
                 attr,
                 implicit_hub=False,
             )
-            lmod._funcs[attr] = obj
+        else:
+            continue
+        lmod._funcs[attr] = obj
 
     return lmod
 
 
 class LoadedMod(types.ModuleType):
     """
     The LoadedMod class allows for the module loaded onto the sub to return
```

### Comparing `cpop-28.4.1/pop/log/async.py` & `cpop-28.5.0/pop/log/async.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/mods/pop/config.py` & `cpop-28.5.0/pop/mods/pop/config.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/mods/pop/contract.py` & `cpop-28.5.0/pop/mods/pop/contract.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/mods/pop/sub.py` & `cpop-28.5.0/pop/mods/pop/sub.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/mods/pop/test.py` & `cpop-28.5.0/pop/mods/pop/test.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/pop.data.c` & `cpop-28.5.0/pop/pop.contract.c`

 * *Files 11% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 /* Generated by Cython 3.0.10 */
 
 /* BEGIN: Cython Metadata
 {
     "distutils": {
         "depends": [],
-        "name": "pop.data",
+        "name": "pop.contract",
         "sources": [
-            "pop/pop.data.pyx"
+            "pop/pop.contract.pyx"
         ]
     },
-    "module_name": "pop.data"
+    "module_name": "pop.contract"
 }
 END: Cython Metadata */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
@@ -1242,16 +1242,16 @@
   #ifdef __cplusplus
     #define __PYX_EXTERN_C extern "C"
   #else
     #define __PYX_EXTERN_C extern
   #endif
 #endif
 
-#define __PYX_HAVE__pop__data
-#define __PYX_HAVE_API__pop__data
+#define __PYX_HAVE__pop__contract
+#define __PYX_HAVE_API__pop__contract
 /* Early includes */
 #include <string.h>
 #include <stdio.h>
 #include <stddef.h>
 #include "pythread.h"
 #ifdef _OPENMP
 #include <omp.h>
@@ -1497,15 +1497,15 @@
 static int __pyx_clineno = 0;
 static const char * __pyx_cfilenm = __FILE__;
 static const char *__pyx_filename;
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
-  "pop/pop.data.pyx",
+  "pop/pop.contract.pyx",
   "contextvars.pxd",
   "<stringsource>",
   "type.pxd",
   "bool.pxd",
   "complex.pxd",
 };
 /* #### Code section: utility_code_proto_before_types ### */
@@ -1515,21 +1515,19 @@
 #endif
 
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
-struct __pyx_obj_3pop_4data_NamespaceDict;
-struct __pyx_obj_3pop_4data_MultidictCache;
-struct __pyx_obj_3pop_4data_ImmutableNamespaceDict;
-struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__;
-struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr;
-struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr;
-struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr;
+struct __pyx_obj_3pop_8contract_ContractedContext;
+struct __pyx_obj_3pop_8contract_Contracted;
+struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr;
+struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__;
+struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__;
 struct __pyx_opt_args_7cpython_11contextvars_get_value;
 struct __pyx_opt_args_7cpython_11contextvars_get_value_no_default;
 
 /* "cpython/contextvars.pxd":112
  * 
  * 
  * cdef inline object get_value(var, default_value=None):             # <<<<<<<<<<<<<<
@@ -1548,145 +1546,138 @@
  *     """Return a new reference to the value of the context variable,
  *     or the provided default value if no such value was found.
  */
 struct __pyx_opt_args_7cpython_11contextvars_get_value_no_default {
   int __pyx_n;
   PyObject *default_value;
 };
-struct __pyx_opt_args_3pop_4data_update;
 
-/* "pop/pop.data.pyx":166
+/* "pop/pop.contract.pyx":10
+ * from cpython.ref cimport PyObject
  * 
- * 
- * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
+ * cdef class ContractedContext:             # <<<<<<<<<<<<<<
  *     """
- *     Recursive version of the default dict.update
- */
-struct __pyx_opt_args_3pop_4data_update {
-  int __pyx_n;
-  int recursive_update;
-  int merge_lists;
-};
-
-/* "pop/pop.data.pyx":11
- * cdef frozenset DICT_ATTRS = frozenset(dir(dict))
- * 
- * cdef class NamespaceDict(dict[str, object]):             # <<<<<<<<<<<<<<
- *     def __getattr__(self, key: str):
- *         if key.startswith("__") and key.endswith("__"):
- */
-struct __pyx_obj_3pop_4data_NamespaceDict {
-  PyDictObject __pyx_base;
-};
-
-
-/* "pop/pop.data.pyx":26
- * 
- * 
- * cdef class MultidictCache:             # <<<<<<<<<<<<<<
- *     cdef dict[str, object] _cache
- *     cdef list[dict[str, object]] _base_dicts
- */
-struct __pyx_obj_3pop_4data_MultidictCache {
-  PyObject_HEAD
-  struct __pyx_vtabstruct_3pop_4data_MultidictCache *__pyx_vtab;
-  PyObject *_cache;
-  PyObject *_base_dicts;
-  PyObject *_split_cache;
-};
-
-
-/* "pop/pop.data.pyx":68
- *         return any(item in base_dict for base_dict in self._base_dicts)
- * 
- * cdef class ImmutableNamespaceDict:             # <<<<<<<<<<<<<<
- *     cdef readonly dict __data
- * 
+ *     Contracted function calling context
  */
-struct __pyx_obj_3pop_4data_ImmutableNamespaceDict {
+struct __pyx_obj_3pop_8contract_ContractedContext {
   PyObject_HEAD
-  PyObject *_ImmutableNamespaceDict__data;
+  PyObject *func;
+  PyObject *args;
+  PyObject *kwargs;
+  PyObject *ref;
+  PyObject *__name__;
+  PyObject *ret;
+  PyObject *signature;
+  PyObject *_ContractedContext__cache;
 };
 
 
-/* "pop/pop.data.pyx":65
- *         return iter({k for base_dict in self._base_dicts for k in base_dict})
- * 
- *     def __contains__(self, item):             # <<<<<<<<<<<<<<
- *         return any(item in base_dict for base_dict in self._base_dicts)
+/* "pop/pop.contract.pyx":100
+ *     return raws
  * 
+ * cdef class Contracted:             # <<<<<<<<<<<<<<
+ *     """
+ *     This class wraps functions that have a contract associated with them
  */
-struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ {
+struct __pyx_obj_3pop_8contract_Contracted {
   PyObject_HEAD
-  PyObject *__pyx_v_item;
+  struct __pyx_vtabstruct_3pop_8contract_Contracted *__pyx_vtab;
+  int _has_contracts;
+  int implicit_hub;
+  PyObject *contract_functions;
+  PyObject *hub;
+  PyObject *func;
+  PyObject *signature;
+  PyObject *__name__;
+  PyObject *ref;
+  PyObject *_sig_errors;
+  PyObject *contracts;
+  PyObject *__pyx___wrapped__;
 };
 
 
-/* "pop/pop.data.pyx":66
- * 
- *     def __contains__(self, item):
- *         return any(item in base_dict for base_dict in self._base_dicts)             # <<<<<<<<<<<<<<
+/* "pop/pop.contract.pyx":164
+ *             "post": self._get_contracts_by_type("post"),
+ *         }
+ *         self._has_contracts = sum(len(l) for l in self.contract_functions.values()) > 0             # <<<<<<<<<<<<<<
  * 
- * cdef class ImmutableNamespaceDict:
+ *     async def __call__(self, *args, **kwargs):
  */
-struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr {
+struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr {
   PyObject_HEAD
-  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *__pyx_outer_scope;
   PyObject *__pyx_genexpr_arg_0;
-  PyObject *__pyx_v_base_dict;
+  PyObject *__pyx_v_l;
+  PyObject *__pyx_t_0;
+  Py_ssize_t __pyx_t_1;
+  Py_ssize_t __pyx_t_2;
+  int __pyx_t_3;
 };
 
 
-/* "pop/pop.data.pyx":149
- *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
- *     elif isinstance(data, list):
- *         return tuple(freeze(value) for value in data)             # <<<<<<<<<<<<<<
- *     elif isinstance(data, set):
- *         return frozenset(freeze(value) for value in data)
+/* "pop/pop.contract.pyx":166
+ *         self._has_contracts = sum(len(l) for l in self.contract_functions.values()) > 0
+ * 
+ *     async def __call__(self, *args, **kwargs):             # <<<<<<<<<<<<<<
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args
  */
-struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr {
+struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ {
   PyObject_HEAD
-  PyObject *__pyx_genexpr_arg_0;
-  PyObject *__pyx_v_value;
+  PyObject *__pyx_v_args;
+  struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_contract_context;
+  PyObject *__pyx_v_fn;
+  PyObject *__pyx_v_kwargs;
+  PyObject *__pyx_v_post_ret;
+  PyObject *__pyx_v_pre_ret;
+  PyObject *__pyx_v_ret;
+  struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self;
   PyObject *__pyx_t_0;
   Py_ssize_t __pyx_t_1;
   PyObject *(*__pyx_t_2)(PyObject *);
 };
 
 
-/* "pop/pop.data.pyx":151
- *         return tuple(freeze(value) for value in data)
- *     elif isinstance(data, set):
- *         return frozenset(freeze(value) for value in data)             # <<<<<<<<<<<<<<
- *     else:
- *         return data
+/* "pop/pop.contract.pyx":216
+ * 
+ * class ContractedAsyncGen(Contracted):
+ *     async def __call__(self, *args, **kwargs):             # <<<<<<<<<<<<<<
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args
  */
-struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr {
+struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ {
   PyObject_HEAD
-  PyObject *__pyx_genexpr_arg_0;
-  PyObject *__pyx_v_value;
+  PyObject *__pyx_v_args;
+  PyObject *__pyx_v_chunk;
+  struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_contract_context;
+  PyObject *__pyx_v_fn;
+  PyObject *__pyx_v_kwargs;
+  PyObject *__pyx_v_post_ret;
+  PyObject *__pyx_v_pre_ret;
+  PyObject *__pyx_v_ret;
+  PyObject *__pyx_v_self;
   PyObject *__pyx_t_0;
   Py_ssize_t __pyx_t_1;
   PyObject *(*__pyx_t_2)(PyObject *);
 };
 
 
 
-/* "pop/pop.data.pyx":26
- * 
+/* "pop/pop.contract.pyx":100
+ *     return raws
  * 
- * cdef class MultidictCache:             # <<<<<<<<<<<<<<
- *     cdef dict[str, object] _cache
- *     cdef list[dict[str, object]] _base_dicts
+ * cdef class Contracted:             # <<<<<<<<<<<<<<
+ *     """
+ *     This class wraps functions that have a contract associated with them
  */
 
-struct __pyx_vtabstruct_3pop_4data_MultidictCache {
-  PyObject *(*_clear)(struct __pyx_obj_3pop_4data_MultidictCache *, int __pyx_skip_dispatch);
+struct __pyx_vtabstruct_3pop_8contract_Contracted {
+  PyObject *(*_get_contracts_by_type)(struct __pyx_obj_3pop_8contract_Contracted *, PyObject *);
+  PyObject *(*_load_contracts)(struct __pyx_obj_3pop_8contract_Contracted *);
 };
-static struct __pyx_vtabstruct_3pop_4data_MultidictCache *__pyx_vtabptr_3pop_4data_MultidictCache;
+static struct __pyx_vtabstruct_3pop_8contract_Contracted *__pyx_vtabptr_3pop_8contract_Contracted;
 /* #### Code section: utility_code_proto ### */
 
 /* --- Runtime support code (head) --- */
 /* Refnanny.proto */
 #ifndef CYTHON_REFNANNY
   #define CYTHON_REFNANNY 0
 #endif
@@ -1889,23 +1880,62 @@
 #define __Pyx_ArgsSlice_VARARGS(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_VARARGS(args, start), stop - start)
 #define __Pyx_ArgsSlice_FASTCALL(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_FASTCALL(args, start), stop - start)
 #else
 #define __Pyx_ArgsSlice_VARARGS(args, start, stop) PyTuple_GetSlice(args, start, stop)
 #define __Pyx_ArgsSlice_FASTCALL(args, start, stop) PyTuple_GetSlice(args, start, stop)
 #endif
 
+/* RaiseArgTupleInvalid.proto */
+static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
+    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
+
+/* RaiseDoubleKeywords.proto */
+static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);
+
+/* ParseKeywords.proto */
+static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
+    PyObject **argnames[],
+    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
+    const char* function_name);
+
 /* ArgTypeTest.proto */
 #define __Pyx_ArgTypeTest(obj, type, none_allowed, name, exact)\
     ((likely(__Pyx_IS_TYPE(obj, type) | (none_allowed && (obj == Py_None)))) ? 1 :\
         __Pyx__ArgTypeTest(obj, type, name, exact))
 static int __Pyx__ArgTypeTest(PyObject *obj, PyTypeObject *type, const char *name, int exact);
 
-/* unicode_tailmatch.proto */
-static int __Pyx_PyUnicode_Tailmatch(
-    PyObject* s, PyObject* substr, Py_ssize_t start, Py_ssize_t end, int direction);
+/* RaiseUnexpectedTypeError.proto */
+static int __Pyx_RaiseUnexpectedTypeError(const char *expected, PyObject *obj);
+
+/* KeywordStringCheck.proto */
+static int __Pyx_CheckKeywordStrings(PyObject *kw, const char* function_name, int kw_allowed);
+
+/* PyDictContains.proto */
+static CYTHON_INLINE int __Pyx_PyDict_ContainsTF(PyObject* item, PyObject* dict, int eq) {
+    int result = PyDict_Contains(dict, item);
+    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
+}
+
+/* PyObjectCall.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
+#else
+#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
+#endif
+
+/* DictGetItem.proto */
+#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
+static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key);
+#define __Pyx_PyObject_Dict_GetItem(obj, name)\
+    (likely(PyDict_CheckExact(obj)) ?\
+     __Pyx_PyDict_GetItem(obj, name) : PyObject_GetItem(obj, name))
+#else
+#define __Pyx_PyDict_GetItem(d, key) PyObject_GetItem(d, key)
+#define __Pyx_PyObject_Dict_GetItem(obj, name)  PyObject_GetItem(obj, name)
+#endif
 
 /* PyFunctionFastCall.proto */
 #if CYTHON_FAST_PYCALL
 #if !CYTHON_VECTORCALL
 #define __Pyx_PyFunction_FastCall(func, args, nargs)\
     __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
 static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
@@ -1934,104 +1964,23 @@
      (void)(__pyx_pyframe_localsplus_offset = ((size_t)PyFrame_Type.tp_basicsize) - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
   #define __Pyx_PyFrame_GetLocalsplus(frame)\
     (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
 #endif
 #endif
 #endif
 
-/* PyObjectCall.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
-#else
-#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
-#endif
-
 /* PyObjectCallMethO.proto */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
 #endif
 
 /* PyObjectFastCall.proto */
 #define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
 static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
-/* GetItemInt.proto */
-#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
-    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
-               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
-#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
-                                                     int is_list, int wraparound, int boundscheck);
-
-/* PyObjectCallOneArg.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
-
-/* ObjectGetItem.proto */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject *key);
-#else
-#define __Pyx_PyObject_GetItem(obj, key)  PyObject_GetItem(obj, key)
-#endif
-
-/* GetTopmostException.proto */
-#if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
-static _PyErr_StackItem * __Pyx_PyErr_GetTopmostException(PyThreadState *tstate);
-#endif
-
-/* SaveResetException.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_ExceptionSave(type, value, tb)  __Pyx__ExceptionSave(__pyx_tstate, type, value, tb)
-static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
-#define __Pyx_ExceptionReset(type, value, tb)  __Pyx__ExceptionReset(__pyx_tstate, type, value, tb)
-static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
-#else
-#define __Pyx_ExceptionSave(type, value, tb)   PyErr_GetExcInfo(type, value, tb)
-#define __Pyx_ExceptionReset(type, value, tb)  PyErr_SetExcInfo(type, value, tb)
-#endif
-
-/* GetException.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_GetException(type, value, tb)  __Pyx__GetException(__pyx_tstate, type, value, tb)
-static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
-#else
-static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb);
-#endif
-
-/* RaiseException.proto */
-static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);
-
-/* SwapException.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_ExceptionSwap(type, value, tb)  __Pyx__ExceptionSwap(__pyx_tstate, type, value, tb)
-static CYTHON_INLINE void __Pyx__ExceptionSwap(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
-#else
-static CYTHON_INLINE void __Pyx_ExceptionSwap(PyObject **type, PyObject **value, PyObject **tb);
-#endif
-
-/* RaiseArgTupleInvalid.proto */
-static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
-    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
-
-/* KeywordStringCheck.proto */
-static int __Pyx_CheckKeywordStrings(PyObject *kw, const char* function_name, int kw_allowed);
-
 /* GetAttr3.proto */
 static CYTHON_INLINE PyObject *__Pyx_GetAttr3(PyObject *, PyObject *, PyObject *);
 
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
@@ -2074,71 +2023,67 @@
 static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
 #else
 #define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 #define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
 #endif
 
-/* RaiseDoubleKeywords.proto */
-static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);
-
-/* ParseKeywords.proto */
-static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
-    PyObject **argnames[],
-    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
-    const char* function_name);
-
-/* RaiseUnexpectedTypeError.proto */
-static int __Pyx_RaiseUnexpectedTypeError(const char *expected, PyObject *obj);
+/* GetAttr.proto */
+static CYTHON_INLINE PyObject *__Pyx_GetAttr(PyObject *, PyObject *);
 
-/* py_dict_clear.proto */
-#define __Pyx_PyDict_Clear(d) (PyDict_Clear(d), 0)
+/* HasAttr.proto */
+#if __PYX_LIMITED_VERSION_HEX >= 0x030d00A1
+#define __Pyx_HasAttr(o, n)  PyObject_HasAttrWithError(o, n)
+#else
+static CYTHON_INLINE int __Pyx_HasAttr(PyObject *, PyObject *);
+#endif
 
-/* PyDictContains.proto */
-static CYTHON_INLINE int __Pyx_PyDict_ContainsTF(PyObject* item, PyObject* dict, int eq) {
-    int result = PyDict_Contains(dict, item);
-    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
+/* ListAppend.proto */
+#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
+static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
+    PyListObject* L = (PyListObject*) list;
+    Py_ssize_t len = Py_SIZE(list);
+    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
+        Py_INCREF(x);
+        #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030d0000
+        L->ob_item[len] = x;
+        #else
+        PyList_SET_ITEM(list, len, x);
+        #endif
+        __Pyx_SET_SIZE(list, len + 1);
+        return 0;
+    }
+    return PyList_Append(list, x);
 }
-
-/* DictGetItem.proto */
-#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
-static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key);
-#define __Pyx_PyObject_Dict_GetItem(obj, name)\
-    (likely(PyDict_CheckExact(obj)) ?\
-     __Pyx_PyDict_GetItem(obj, name) : PyObject_GetItem(obj, name))
 #else
-#define __Pyx_PyDict_GetItem(d, key) PyObject_GetItem(d, key)
-#define __Pyx_PyObject_Dict_GetItem(obj, name)  PyObject_GetItem(obj, name)
+#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
 #endif
 
-/* JoinPyUnicode.proto */
-static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
-                                      Py_UCS4 max_char);
-
-/* RaiseUnboundLocalError.proto */
-static CYTHON_INLINE void __Pyx_RaiseUnboundLocalError(const char *varname);
-
-/* RaiseClosureNameError.proto */
-static CYTHON_INLINE void __Pyx_RaiseClosureNameError(const char *varname);
-
 /* PySequenceContains.proto */
 static CYTHON_INLINE int __Pyx_PySequence_ContainsTF(PyObject* item, PyObject* seq, int eq) {
     int result = PySequence_Contains(seq, item);
     return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
 }
 
-/* pep479.proto */
-static void __Pyx_Generator_Replace_StopIteration(int in_async_gen);
+/* PyUnicode_Unicode.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyUnicode_Unicode(PyObject *obj);
+
+/* JoinPyUnicode.proto */
+static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
+                                      Py_UCS4 max_char);
 
 /* IterFinish.proto */
 static CYTHON_INLINE int __Pyx_IterFinish(void);
 
 /* PyObjectCallNoArg.proto */
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallNoArg(PyObject *func);
 
+/* PyObjectCallOneArg.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
+
 /* PyObjectGetMethod.proto */
 static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method);
 
 /* PyObjectCallMethod0.proto */
 static PyObject* __Pyx_PyObject_CallMethod0(PyObject* obj, PyObject* method_name);
 
 /* RaiseNeedMoreValuesToUnpack.proto */
@@ -2170,185 +2115,243 @@
 
 /* dict_iter.proto */
 static CYTHON_INLINE PyObject* __Pyx_dict_iterator(PyObject* dict, int is_dict, PyObject* method_name,
                                                    Py_ssize_t* p_orig_length, int* p_is_dict);
 static CYTHON_INLINE int __Pyx_dict_iter_next(PyObject* dict_or_iter, Py_ssize_t orig_length, Py_ssize_t* ppos,
                                               PyObject** pkey, PyObject** pvalue, PyObject** pitem, int is_dict);
 
-/* PyObjectFormatSimple.proto */
-#if CYTHON_COMPILING_IN_PYPY
-    #define __Pyx_PyObject_FormatSimple(s, f) (\
-        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
-        PyObject_Format(s, f))
-#elif PY_MAJOR_VERSION < 3
-    #define __Pyx_PyObject_FormatSimple(s, f) (\
-        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
-        likely(PyString_CheckExact(s)) ? PyUnicode_FromEncodedObject(s, NULL, "strict") :\
-        PyObject_Format(s, f))
-#elif CYTHON_USE_TYPE_SLOTS
-    #define __Pyx_PyObject_FormatSimple(s, f) (\
-        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
-        likely(PyLong_CheckExact(s)) ? PyLong_Type.tp_repr(s) :\
-        likely(PyFloat_CheckExact(s)) ? PyFloat_Type.tp_repr(s) :\
-        PyObject_Format(s, f))
-#else
-    #define __Pyx_PyObject_FormatSimple(s, f) (\
-        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
-        PyObject_Format(s, f))
+/* RaiseUnboundLocalError.proto */
+static CYTHON_INLINE void __Pyx_RaiseUnboundLocalError(const char *varname);
+
+/* GetException.proto */
+#if CYTHON_FAST_THREAD_STATE
+#define __Pyx_GetException(type, value, tb)  __Pyx__GetException(__pyx_tstate, type, value, tb)
+static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
+#else
+static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb);
 #endif
 
-/* py_dict_keys.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyDict_Keys(PyObject* d);
+/* pep479.proto */
+static void __Pyx_Generator_Replace_StopIteration(int in_async_gen);
 
-/* UnpackUnboundCMethod.proto */
-typedef struct {
-    PyObject *type;
-    PyObject **method_name;
-    PyCFunction func;
-    PyObject *method;
-    int flag;
-} __Pyx_CachedCFunction;
+/* SliceObject.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(
+        PyObject* obj, Py_ssize_t cstart, Py_ssize_t cstop,
+        PyObject** py_start, PyObject** py_stop, PyObject** py_slice,
+        int has_cstart, int has_cstop, int wraparound);
 
-/* CallUnboundCMethod0.proto */
-static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self);
-#if CYTHON_COMPILING_IN_CPYTHON
-#define __Pyx_CallUnboundCMethod0(cfunc, self)\
-    (likely((cfunc)->func) ?\
-        (likely((cfunc)->flag == METH_NOARGS) ?  (*((cfunc)->func))(self, NULL) :\
-         (PY_VERSION_HEX >= 0x030600B1 && likely((cfunc)->flag == METH_FASTCALL) ?\
-            (PY_VERSION_HEX >= 0x030700A0 ?\
-                (*(__Pyx_PyCFunctionFast)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0) :\
-                (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0, NULL)) :\
-          (PY_VERSION_HEX >= 0x030700A0 && (cfunc)->flag == (METH_FASTCALL | METH_KEYWORDS) ?\
-            (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0, NULL) :\
-            (likely((cfunc)->flag == (METH_VARARGS | METH_KEYWORDS)) ?  ((*(PyCFunctionWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, __pyx_empty_tuple, NULL)) :\
-               ((cfunc)->flag == METH_VARARGS ?  (*((cfunc)->func))(self, __pyx_empty_tuple) :\
-               __Pyx__CallUnboundCMethod0(cfunc, self)))))) :\
-        __Pyx__CallUnboundCMethod0(cfunc, self))
-#else
-#define __Pyx_CallUnboundCMethod0(cfunc, self)  __Pyx__CallUnboundCMethod0(cfunc, self)
-#endif
-
-/* py_dict_values.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyDict_Values(PyObject* d);
+/* IncludeStructmemberH.proto */
+#include <structmember.h>
 
-/* py_dict_items.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyDict_Items(PyObject* d);
+/* FixUpExtensionType.proto */
+#if CYTHON_USE_TYPE_SPECS
+static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type);
+#endif
 
-/* dict_getitem_default.proto */
-static PyObject* __Pyx_PyDict_GetItemDefault(PyObject* d, PyObject* key, PyObject* default_value);
+/* FetchSharedCythonModule.proto */
+static PyObject *__Pyx_FetchSharedCythonABIModule(void);
 
-/* CallUnboundCMethod1.proto */
-static PyObject* __Pyx__CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg);
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg);
+/* FetchCommonType.proto */
+#if !CYTHON_USE_TYPE_SPECS
+static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type);
 #else
-#define __Pyx_CallUnboundCMethod1(cfunc, self, arg)  __Pyx__CallUnboundCMethod1(cfunc, self, arg)
+static PyTypeObject* __Pyx_FetchCommonTypeFromSpec(PyObject *module, PyType_Spec *spec, PyObject *bases);
 #endif
 
-/* CallUnboundCMethod2.proto */
-static PyObject* __Pyx__CallUnboundCMethod2(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg1, PyObject* arg2);
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030600B1
-static CYTHON_INLINE PyObject *__Pyx_CallUnboundCMethod2(__Pyx_CachedCFunction *cfunc, PyObject *self, PyObject *arg1, PyObject *arg2);
-#else
-#define __Pyx_CallUnboundCMethod2(cfunc, self, arg1, arg2)  __Pyx__CallUnboundCMethod2(cfunc, self, arg1, arg2)
-#endif
+/* RaiseException.proto */
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);
 
-/* pyfrozenset_new.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyFrozenSet_New(PyObject* it);
+/* GetTopmostException.proto */
+#if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
+static _PyErr_StackItem * __Pyx_PyErr_GetTopmostException(PyThreadState *tstate);
+#endif
 
-/* ListCompAppend.proto */
-#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
-static CYTHON_INLINE int __Pyx_ListComp_Append(PyObject* list, PyObject* x) {
-    PyListObject* L = (PyListObject*) list;
-    Py_ssize_t len = Py_SIZE(list);
-    if (likely(L->allocated > len)) {
-        Py_INCREF(x);
-        #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030d0000
-        L->ob_item[len] = x;
-        #else
-        PyList_SET_ITEM(list, len, x);
-        #endif
-        __Pyx_SET_SIZE(list, len + 1);
-        return 0;
-    }
-    return PyList_Append(list, x);
-}
+/* SaveResetException.proto */
+#if CYTHON_FAST_THREAD_STATE
+#define __Pyx_ExceptionSave(type, value, tb)  __Pyx__ExceptionSave(__pyx_tstate, type, value, tb)
+static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
+#define __Pyx_ExceptionReset(type, value, tb)  __Pyx__ExceptionReset(__pyx_tstate, type, value, tb)
+static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
 #else
-#define __Pyx_ListComp_Append(L,x) PyList_Append(L,x)
+#define __Pyx_ExceptionSave(type, value, tb)   PyErr_GetExcInfo(type, value, tb)
+#define __Pyx_ExceptionReset(type, value, tb)  PyErr_SetExcInfo(type, value, tb)
 #endif
 
-/* SliceObject.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(
-        PyObject* obj, Py_ssize_t cstart, Py_ssize_t cstop,
-        PyObject** py_start, PyObject** py_stop, PyObject** py_slice,
-        int has_cstart, int has_cstop, int wraparound);
-
-/* Import.proto */
-static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
+/* SwapException.proto */
+#if CYTHON_FAST_THREAD_STATE
+#define __Pyx_ExceptionSwap(type, value, tb)  __Pyx__ExceptionSwap(__pyx_tstate, type, value, tb)
+static CYTHON_INLINE void __Pyx__ExceptionSwap(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
+#else
+static CYTHON_INLINE void __Pyx_ExceptionSwap(PyObject **type, PyObject **value, PyObject **tb);
+#endif
 
-/* ImportFrom.proto */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
+/* PyObjectCall2Args.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);
 
-/* GetAttr.proto */
-static CYTHON_INLINE PyObject *__Pyx_GetAttr(PyObject *, PyObject *);
+/* PyObjectCallMethod1.proto */
+static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg);
 
-/* HasAttr.proto */
-#if __PYX_LIMITED_VERSION_HEX >= 0x030d00A1
-#define __Pyx_HasAttr(o, n)  PyObject_HasAttrWithError(o, n)
+/* CoroutineBase.proto */
+struct __pyx_CoroutineObject;
+typedef PyObject *(*__pyx_coroutine_body_t)(struct __pyx_CoroutineObject *, PyThreadState *, PyObject *);
+#if CYTHON_USE_EXC_INFO_STACK
+#define __Pyx_ExcInfoStruct  _PyErr_StackItem
 #else
-static CYTHON_INLINE int __Pyx_HasAttr(PyObject *, PyObject *);
+typedef struct {
+    PyObject *exc_type;
+    PyObject *exc_value;
+    PyObject *exc_traceback;
+} __Pyx_ExcInfoStruct;
+#endif
+typedef struct __pyx_CoroutineObject {
+    PyObject_HEAD
+    __pyx_coroutine_body_t body;
+    PyObject *closure;
+    __Pyx_ExcInfoStruct gi_exc_state;
+    PyObject *gi_weakreflist;
+    PyObject *classobj;
+    PyObject *yieldfrom;
+    PyObject *gi_name;
+    PyObject *gi_qualname;
+    PyObject *gi_modulename;
+    PyObject *gi_code;
+    PyObject *gi_frame;
+    int resume_label;
+    char is_running;
+} __pyx_CoroutineObject;
+static __pyx_CoroutineObject *__Pyx__Coroutine_New(
+    PyTypeObject *type, __pyx_coroutine_body_t body, PyObject *code, PyObject *closure,
+    PyObject *name, PyObject *qualname, PyObject *module_name);
+static __pyx_CoroutineObject *__Pyx__Coroutine_NewInit(
+            __pyx_CoroutineObject *gen, __pyx_coroutine_body_t body, PyObject *code, PyObject *closure,
+            PyObject *name, PyObject *qualname, PyObject *module_name);
+static CYTHON_INLINE void __Pyx_Coroutine_ExceptionClear(__Pyx_ExcInfoStruct *self);
+static int __Pyx_Coroutine_clear(PyObject *self);
+static PyObject *__Pyx_Coroutine_Send(PyObject *self, PyObject *value);
+static PyObject *__Pyx_Coroutine_Close(PyObject *self);
+static PyObject *__Pyx_Coroutine_Throw(PyObject *gen, PyObject *args);
+#if CYTHON_USE_EXC_INFO_STACK
+#define __Pyx_Coroutine_SwapException(self)
+#define __Pyx_Coroutine_ResetAndClearException(self)  __Pyx_Coroutine_ExceptionClear(&(self)->gi_exc_state)
+#else
+#define __Pyx_Coroutine_SwapException(self) {\
+    __Pyx_ExceptionSwap(&(self)->gi_exc_state.exc_type, &(self)->gi_exc_state.exc_value, &(self)->gi_exc_state.exc_traceback);\
+    __Pyx_Coroutine_ResetFrameBackpointer(&(self)->gi_exc_state);\
+    }
+#define __Pyx_Coroutine_ResetAndClearException(self) {\
+    __Pyx_ExceptionReset((self)->gi_exc_state.exc_type, (self)->gi_exc_state.exc_value, (self)->gi_exc_state.exc_traceback);\
+    (self)->gi_exc_state.exc_type = (self)->gi_exc_state.exc_value = (self)->gi_exc_state.exc_traceback = NULL;\
+    }
+#endif
+#if CYTHON_FAST_THREAD_STATE
+#define __Pyx_PyGen_FetchStopIterationValue(pvalue)\
+    __Pyx_PyGen__FetchStopIterationValue(__pyx_tstate, pvalue)
+#else
+#define __Pyx_PyGen_FetchStopIterationValue(pvalue)\
+    __Pyx_PyGen__FetchStopIterationValue(__Pyx_PyThreadState_Current, pvalue)
 #endif
+static int __Pyx_PyGen__FetchStopIterationValue(PyThreadState *tstate, PyObject **pvalue);
+static CYTHON_INLINE void __Pyx_Coroutine_ResetFrameBackpointer(__Pyx_ExcInfoStruct *exc_state);
 
 /* PyObject_GenericGetAttrNoDict.proto */
 #if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
 static CYTHON_INLINE PyObject* __Pyx_PyObject_GenericGetAttrNoDict(PyObject* obj, PyObject* attr_name);
 #else
 #define __Pyx_PyObject_GenericGetAttrNoDict PyObject_GenericGetAttr
 #endif
 
-/* PyObject_GenericGetAttr.proto */
-#if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
-static PyObject* __Pyx_PyObject_GenericGetAttr(PyObject* obj, PyObject* attr_name);
-#else
-#define __Pyx_PyObject_GenericGetAttr PyObject_GenericGetAttr
-#endif
+/* PatchModuleWithCoroutine.proto */
+static PyObject* __Pyx_Coroutine_patch_module(PyObject* module, const char* py_code);
 
-/* IncludeStructmemberH.proto */
-#include <structmember.h>
+/* PatchGeneratorABC.proto */
+static int __Pyx_patch_abc(void);
 
-/* FixUpExtensionType.proto */
-#if CYTHON_USE_TYPE_SPECS
-static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type);
-#endif
+/* Coroutine.proto */
+#define __Pyx_Coroutine_USED
+#define __Pyx_Coroutine_CheckExact(obj) __Pyx_IS_TYPE(obj, __pyx_CoroutineType)
+#define __Pyx_Coroutine_Check(obj) __Pyx_Coroutine_CheckExact(obj)
+#define __Pyx_CoroutineAwait_CheckExact(obj) __Pyx_IS_TYPE(obj, __pyx_CoroutineAwaitType)
+#define __Pyx_Coroutine_New(body, code, closure, name, qualname, module_name)\
+    __Pyx__Coroutine_New(__pyx_CoroutineType, body, code, closure, name, qualname, module_name)
+static int __pyx_Coroutine_init(PyObject *module);
+static PyObject *__Pyx__Coroutine_await(PyObject *coroutine);
+typedef struct {
+    PyObject_HEAD
+    PyObject *coroutine;
+} __pyx_CoroutineAwaitObject;
+static PyObject *__Pyx_CoroutineAwait_Close(__pyx_CoroutineAwaitObject *self, PyObject *arg);
+static PyObject *__Pyx_CoroutineAwait_Throw(__pyx_CoroutineAwaitObject *self, PyObject *args);
+
+/* GetAwaitIter.proto */
+static CYTHON_INLINE PyObject *__Pyx_Coroutine_GetAwaitableIter(PyObject *o);
+static PyObject *__Pyx__Coroutine_GetAwaitableIter(PyObject *o);
+
+/* CoroutineYieldFrom.proto */
+static CYTHON_INLINE PyObject* __Pyx_Coroutine_Yield_From(__pyx_CoroutineObject *gen, PyObject *source);
+
+/* ReturnWithStopIteration.proto */
+#define __Pyx_ReturnWithStopIteration(value)\
+    if (value == Py_None) PyErr_SetNone(PyExc_StopIteration); else __Pyx__ReturnWithStopIteration(value)
+static void __Pyx__ReturnWithStopIteration(PyObject* value);
 
-/* FormatTypeName.proto */
-#if CYTHON_COMPILING_IN_LIMITED_API
-typedef PyObject *__Pyx_TypeName;
-#define __Pyx_FMT_TYPENAME "%U"
-static __Pyx_TypeName __Pyx_PyType_GetName(PyTypeObject* tp);
-#define __Pyx_DECREF_TypeName(obj) Py_XDECREF(obj)
-#else
-typedef const char *__Pyx_TypeName;
-#define __Pyx_FMT_TYPENAME "%.200s"
-#define __Pyx_PyType_GetName(tp) ((tp)->tp_name)
-#define __Pyx_DECREF_TypeName(obj)
-#endif
+/* GetItemInt.proto */
+#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
+    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
+    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
+    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
+               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
+#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
+    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
+    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
+    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
+                                                              int wraparound, int boundscheck);
+#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
+    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
+    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
+    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
+                                                              int wraparound, int boundscheck);
+static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
+                                                     int is_list, int wraparound, int boundscheck);
+
+/* AsyncIter.proto */
+static CYTHON_INLINE PyObject *__Pyx_Coroutine_GetAsyncIter(PyObject *o);
+static CYTHON_INLINE PyObject *__Pyx_Coroutine_AsyncIterNext(PyObject *o);
+
+/* StopAsyncIteration.proto */
+#define __Pyx_StopAsyncIteration_USED
+static PyObject *__Pyx_PyExc_StopAsyncIteration;
+static int __pyx_StopAsyncIteration_init(PyObject *module);
+
+/* ExtTypeTest.proto */
+static CYTHON_INLINE int __Pyx_TypeTest(PyObject *obj, PyTypeObject *type);
+
+/* Import.proto */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
 
-/* ValidateExternBase.proto */
-static int __Pyx_validate_extern_base(PyTypeObject *base);
+/* ImportFrom.proto */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
 
 /* ValidateBasesTuple.proto */
 #if CYTHON_COMPILING_IN_CPYTHON || CYTHON_COMPILING_IN_LIMITED_API || CYTHON_USE_TYPE_SPECS
 static int __Pyx_validate_bases_tuple(const char *type_name, Py_ssize_t dictoffset, PyObject *bases);
 #endif
 
 /* PyType_Ready.proto */
 CYTHON_UNUSED static int __Pyx_PyType_Ready(PyTypeObject *t);
 
+/* PyObject_GenericGetAttr.proto */
+#if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
+static PyObject* __Pyx_PyObject_GenericGetAttr(PyObject* obj, PyObject* attr_name);
+#else
+#define __Pyx_PyObject_GenericGetAttr PyObject_GenericGetAttr
+#endif
+
 /* SetupReduce.proto */
 #if !CYTHON_COMPILING_IN_LIMITED_API
 static int __Pyx_setup_reduce(PyObject* type_obj);
 #endif
 
 /* SetVTable.proto */
 static int __Pyx_SetVtable(PyTypeObject* typeptr , void* vtable);
@@ -2376,24 +2379,23 @@
    __Pyx_ImportType_CheckSize_Error_3_0_10 = 0,
    __Pyx_ImportType_CheckSize_Warn_3_0_10 = 1,
    __Pyx_ImportType_CheckSize_Ignore_3_0_10 = 2
 };
 static PyTypeObject *__Pyx_ImportType_3_0_10(PyObject* module, const char *module_name, const char *class_name, size_t size, size_t alignment, enum __Pyx_ImportType_CheckSize_3_0_10 check_size);
 #endif
 
-/* FetchSharedCythonModule.proto */
-static PyObject *__Pyx_FetchSharedCythonABIModule(void);
-
-/* FetchCommonType.proto */
-#if !CYTHON_USE_TYPE_SPECS
-static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type);
-#else
-static PyTypeObject* __Pyx_FetchCommonTypeFromSpec(PyObject *module, PyType_Spec *spec, PyObject *bases);
+/* ImportDottedModule.proto */
+static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
 #endif
 
+/* PatchInspect.proto */
+static PyObject* __Pyx_patch_inspect(PyObject* module);
+
 /* PyMethodNew.proto */
 #if CYTHON_COMPILING_IN_LIMITED_API
 static PyObject *__Pyx_PyMethod_New(PyObject *func, PyObject *self, PyObject *typ) {
     PyObject *typesModule=NULL, *methodType=NULL, *result=NULL;
     CYTHON_UNUSED_VAR(typ);
     if (!self)
         return __Pyx_NewRef(func);
@@ -2516,14 +2518,47 @@
 /* CythonFunction.proto */
 static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml,
                                       int flags, PyObject* qualname,
                                       PyObject *closure,
                                       PyObject *module, PyObject *globals,
                                       PyObject* code);
 
+/* Py3UpdateBases.proto */
+static PyObject* __Pyx_PEP560_update_bases(PyObject *bases);
+
+/* CalculateMetaclass.proto */
+static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases);
+
+/* SetNameInClass.proto */
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1 && PY_VERSION_HEX < 0x030d0000
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? _PyDict_SetItem_KnownHash(ns, name, value, ((PyASCIIObject *) name)->hash) : PyObject_SetItem(ns, name, value))
+#elif CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? PyDict_SetItem(ns, name, value) : PyObject_SetItem(ns, name, value))
+#else
+#define __Pyx_SetNameInClass(ns, name, value)  PyObject_SetItem(ns, name, value)
+#endif
+
+/* PyObjectLookupSpecial.proto */
+#if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_LookupSpecialNoError(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 0)
+#define __Pyx_PyObject_LookupSpecial(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 1)
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error);
+#else
+#define __Pyx_PyObject_LookupSpecialNoError(o,n) __Pyx_PyObject_GetAttrStrNoError(o,n)
+#define __Pyx_PyObject_LookupSpecial(o,n) __Pyx_PyObject_GetAttrStr(o,n)
+#endif
+
+/* Py3ClassCreate.proto */
+static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name, PyObject *qualname,
+                                           PyObject *mkw, PyObject *modname, PyObject *doc);
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases, PyObject *dict,
+                                      PyObject *mkw, int calculate_metaclass, int allow_py2_metaclass);
+
 /* CLineInTraceback.proto */
 #ifdef CYTHON_CLINE_IN_TRACEBACK
 #define __Pyx_CLineForTraceback(tstate, c_line)  (((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0)
 #else
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line);
 #endif
 
@@ -2552,20 +2587,33 @@
 #if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
 #define __Pyx_HAS_GCC_DIAGNOSTIC
 #endif
 
 /* CIntFromPy.proto */
 static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);
 
-/* CIntFromPy.proto */
-static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);
-
 /* CIntToPy.proto */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
 
+/* FormatTypeName.proto */
+#if CYTHON_COMPILING_IN_LIMITED_API
+typedef PyObject *__Pyx_TypeName;
+#define __Pyx_FMT_TYPENAME "%U"
+static __Pyx_TypeName __Pyx_PyType_GetName(PyTypeObject* tp);
+#define __Pyx_DECREF_TypeName(obj) Py_XDECREF(obj)
+#else
+typedef const char *__Pyx_TypeName;
+#define __Pyx_FMT_TYPENAME "%.200s"
+#define __Pyx_PyType_GetName(tp) ((tp)->tp_name)
+#define __Pyx_DECREF_TypeName(obj)
+#endif
+
+/* CIntFromPy.proto */
+static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);
+
 /* FastTypeChecks.proto */
 #if CYTHON_COMPILING_IN_CPYTHON
 #define __Pyx_TypeCheck(obj, type) __Pyx_IsSubtype(Py_TYPE(obj), (PyTypeObject *)type)
 #define __Pyx_TypeCheck2(obj, type1, type2) __Pyx_IsAnySubtype2(Py_TYPE(obj), (PyTypeObject *)type1, (PyTypeObject *)type2)
 static CYTHON_INLINE int __Pyx_IsSubtype(PyTypeObject *a, PyTypeObject *b);
 static CYTHON_INLINE int __Pyx_IsAnySubtype2(PyTypeObject *cls, PyTypeObject *a, PyTypeObject *b);
 static CYTHON_INLINE int __Pyx_PyErr_GivenExceptionMatches(PyObject *err, PyObject *type);
@@ -2575,107 +2623,73 @@
 #define __Pyx_TypeCheck2(obj, type1, type2) (PyObject_TypeCheck(obj, (PyTypeObject *)type1) || PyObject_TypeCheck(obj, (PyTypeObject *)type2))
 #define __Pyx_PyErr_GivenExceptionMatches(err, type) PyErr_GivenExceptionMatches(err, type)
 #define __Pyx_PyErr_GivenExceptionMatches2(err, type1, type2) (PyErr_GivenExceptionMatches(err, type1) || PyErr_GivenExceptionMatches(err, type2))
 #endif
 #define __Pyx_PyErr_ExceptionMatches2(err1, err2)  __Pyx_PyErr_GivenExceptionMatches2(__Pyx_PyErr_CurrentExceptionType(), err1, err2)
 #define __Pyx_PyException_Check(obj) __Pyx_TypeCheck(obj, PyExc_Exception)
 
-/* PyObjectCall2Args.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);
-
-/* PyObjectCallMethod1.proto */
-static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg);
-
-/* CoroutineBase.proto */
-struct __pyx_CoroutineObject;
-typedef PyObject *(*__pyx_coroutine_body_t)(struct __pyx_CoroutineObject *, PyThreadState *, PyObject *);
-#if CYTHON_USE_EXC_INFO_STACK
-#define __Pyx_ExcInfoStruct  _PyErr_StackItem
-#else
-typedef struct {
-    PyObject *exc_type;
-    PyObject *exc_value;
-    PyObject *exc_traceback;
-} __Pyx_ExcInfoStruct;
-#endif
-typedef struct __pyx_CoroutineObject {
-    PyObject_HEAD
-    __pyx_coroutine_body_t body;
-    PyObject *closure;
-    __Pyx_ExcInfoStruct gi_exc_state;
-    PyObject *gi_weakreflist;
-    PyObject *classobj;
-    PyObject *yieldfrom;
-    PyObject *gi_name;
-    PyObject *gi_qualname;
-    PyObject *gi_modulename;
-    PyObject *gi_code;
-    PyObject *gi_frame;
-    int resume_label;
-    char is_running;
-} __pyx_CoroutineObject;
-static __pyx_CoroutineObject *__Pyx__Coroutine_New(
-    PyTypeObject *type, __pyx_coroutine_body_t body, PyObject *code, PyObject *closure,
-    PyObject *name, PyObject *qualname, PyObject *module_name);
-static __pyx_CoroutineObject *__Pyx__Coroutine_NewInit(
-            __pyx_CoroutineObject *gen, __pyx_coroutine_body_t body, PyObject *code, PyObject *closure,
-            PyObject *name, PyObject *qualname, PyObject *module_name);
-static CYTHON_INLINE void __Pyx_Coroutine_ExceptionClear(__Pyx_ExcInfoStruct *self);
-static int __Pyx_Coroutine_clear(PyObject *self);
-static PyObject *__Pyx_Coroutine_Send(PyObject *self, PyObject *value);
-static PyObject *__Pyx_Coroutine_Close(PyObject *self);
-static PyObject *__Pyx_Coroutine_Throw(PyObject *gen, PyObject *args);
-#if CYTHON_USE_EXC_INFO_STACK
-#define __Pyx_Coroutine_SwapException(self)
-#define __Pyx_Coroutine_ResetAndClearException(self)  __Pyx_Coroutine_ExceptionClear(&(self)->gi_exc_state)
-#else
-#define __Pyx_Coroutine_SwapException(self) {\
-    __Pyx_ExceptionSwap(&(self)->gi_exc_state.exc_type, &(self)->gi_exc_state.exc_value, &(self)->gi_exc_state.exc_traceback);\
-    __Pyx_Coroutine_ResetFrameBackpointer(&(self)->gi_exc_state);\
-    }
-#define __Pyx_Coroutine_ResetAndClearException(self) {\
-    __Pyx_ExceptionReset((self)->gi_exc_state.exc_type, (self)->gi_exc_state.exc_value, (self)->gi_exc_state.exc_traceback);\
-    (self)->gi_exc_state.exc_type = (self)->gi_exc_state.exc_value = (self)->gi_exc_state.exc_traceback = NULL;\
-    }
-#endif
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_PyGen_FetchStopIterationValue(pvalue)\
-    __Pyx_PyGen__FetchStopIterationValue(__pyx_tstate, pvalue)
-#else
-#define __Pyx_PyGen_FetchStopIterationValue(pvalue)\
-    __Pyx_PyGen__FetchStopIterationValue(__Pyx_PyThreadState_Current, pvalue)
-#endif
-static int __Pyx_PyGen__FetchStopIterationValue(PyThreadState *tstate, PyObject **pvalue);
-static CYTHON_INLINE void __Pyx_Coroutine_ResetFrameBackpointer(__Pyx_ExcInfoStruct *exc_state);
-
-/* PatchModuleWithCoroutine.proto */
-static PyObject* __Pyx_Coroutine_patch_module(PyObject* module, const char* py_code);
-
-/* PatchGeneratorABC.proto */
-static int __Pyx_patch_abc(void);
-
 /* Generator.proto */
 #define __Pyx_Generator_USED
 #define __Pyx_Generator_CheckExact(obj) __Pyx_IS_TYPE(obj, __pyx_GeneratorType)
 #define __Pyx_Generator_New(body, code, closure, name, qualname, module_name)\
     __Pyx__Coroutine_New(__pyx_GeneratorType, body, code, closure, name, qualname, module_name)
 static PyObject *__Pyx_Generator_Next(PyObject *self);
 static int __pyx_Generator_init(PyObject *module);
 
+/* AsyncGenerator.proto */
+#define __Pyx_AsyncGen_USED
+typedef struct {
+    __pyx_CoroutineObject coro;
+    PyObject *ag_finalizer;
+    int ag_hooks_inited;
+    int ag_closed;
+    int ag_running_async;
+} __pyx_PyAsyncGenObject;
+static PyTypeObject *__pyx__PyAsyncGenWrappedValueType = 0;
+static PyTypeObject *__pyx__PyAsyncGenASendType = 0;
+static PyTypeObject *__pyx__PyAsyncGenAThrowType = 0;
+static PyTypeObject *__pyx_AsyncGenType = 0;
+#define __Pyx_AsyncGen_CheckExact(obj) __Pyx_IS_TYPE(obj, __pyx_AsyncGenType)
+#define __pyx_PyAsyncGenASend_CheckExact(o)\
+                    __Pyx_IS_TYPE(o, __pyx__PyAsyncGenASendType)
+#define __pyx_PyAsyncGenAThrow_CheckExact(o)\
+                    __Pyx_IS_TYPE(o, __pyx__PyAsyncGenAThrowType)
+static PyObject *__Pyx_async_gen_anext(PyObject *o);
+static CYTHON_INLINE PyObject *__Pyx_async_gen_asend_iternext(PyObject *o);
+static PyObject *__Pyx_async_gen_asend_send(PyObject *o, PyObject *arg);
+static PyObject *__Pyx_async_gen_asend_close(PyObject *o, PyObject *args);
+static PyObject *__Pyx_async_gen_athrow_close(PyObject *o, PyObject *args);
+static PyObject *__Pyx__PyAsyncGenValueWrapperNew(PyObject *val);
+static __pyx_CoroutineObject *__Pyx_AsyncGen_New(
+            __pyx_coroutine_body_t body, PyObject *code, PyObject *closure,
+            PyObject *name, PyObject *qualname, PyObject *module_name) {
+    __pyx_PyAsyncGenObject *gen = PyObject_GC_New(__pyx_PyAsyncGenObject, __pyx_AsyncGenType);
+    if (unlikely(!gen))
+        return NULL;
+    gen->ag_finalizer = NULL;
+    gen->ag_closed = 0;
+    gen->ag_hooks_inited = 0;
+    gen->ag_running_async = 0;
+    return __Pyx__Coroutine_NewInit((__pyx_CoroutineObject*)gen, body, code, closure, name, qualname, module_name);
+}
+static int __pyx_AsyncGen_init(PyObject *module);
+static void __Pyx_PyAsyncGen_Fini(void);
+
 /* CheckBinaryVersion.proto */
 static unsigned long __Pyx_get_runtime_version(void);
 static int __Pyx_check_binary_version(unsigned long ct_version, unsigned long rt_version, int allow_newer);
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 static CYTHON_INLINE double __pyx_f_7cpython_7complex_7complex_4real_real(PyComplexObject *__pyx_v_self); /* proto*/
 static CYTHON_INLINE double __pyx_f_7cpython_7complex_7complex_4imag_imag(PyComplexObject *__pyx_v_self); /* proto*/
-static PyObject *__pyx_f_3pop_4data_14MultidictCache__clear(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
+static PyObject *__pyx_f_3pop_8contract_10Contracted__get_contracts_by_type(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_contract_type); /* proto*/
+static PyObject *__pyx_f_3pop_8contract_10Contracted__load_contracts(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto*/
 
 /* Module declarations from "cpython.version" */
 
 /* Module declarations from "__builtin__" */
 
 /* Module declarations from "cpython.type" */
 
@@ -2755,186 +2769,226 @@
 
 /* Module declarations from "cpython.pycapsule" */
 
 /* Module declarations from "cpython.contextvars" */
 
 /* Module declarations from "cpython" */
 
-/* Module declarations from "pop.data" */
-static PyObject *__pyx_v_3pop_4data_DICT_ATTRS = 0;
-static PyObject *__pyx_f_3pop_4data_update(PyObject *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_3pop_4data_update *__pyx_optional_args); /*proto*/
-static PyObject *__pyx_f_3pop_4data___pyx_unpickle_NamespaceDict__set_state(struct __pyx_obj_3pop_4data_NamespaceDict *, PyObject *); /*proto*/
-static PyObject *__pyx_f_3pop_4data___pyx_unpickle_MultidictCache__set_state(struct __pyx_obj_3pop_4data_MultidictCache *, PyObject *); /*proto*/
-static PyObject *__pyx_f_3pop_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *, PyObject *); /*proto*/
+/* Module declarations from "pop.contract" */
+static PyObject *__pyx_f_3pop_8contract___pyx_unpickle_ContractedContext__set_state(struct __pyx_obj_3pop_8contract_ContractedContext *, PyObject *); /*proto*/
+static PyObject *__pyx_f_3pop_8contract___pyx_unpickle_Contracted__set_state(struct __pyx_obj_3pop_8contract_Contracted *, PyObject *); /*proto*/
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
-#define __Pyx_MODULE_NAME "pop.data"
-extern int __pyx_module_is_main_pop__data;
-int __pyx_module_is_main_pop__data = 0;
+#define __Pyx_MODULE_NAME "pop.contract"
+extern int __pyx_module_is_main_pop__contract;
+int __pyx_module_is_main_pop__contract = 0;
 
-/* Implementation of "pop.data" */
+/* Implementation of "pop.contract" */
 /* #### Code section: global_var ### */
-static PyObject *__pyx_builtin_KeyError;
-static PyObject *__pyx_builtin_AttributeError;
-static PyObject *__pyx_builtin_object;
-static PyObject *__pyx_builtin_TypeError;
+static PyObject *__pyx_builtin_sum;
 /* #### Code section: string_decls ### */
-static const char __pyx_k_[] = "__";
-static const char __pyx_k__2[] = ".";
-static const char __pyx_k__3[] = "'";
-static const char __pyx_k_eq[] = "__eq__";
+static const char __pyx_k_[] = "_";
+static const char __pyx_k__5[] = ".";
+static const char __pyx_k__7[] = "*";
+static const char __pyx_k_fn[] = "fn";
 static const char __pyx_k_gc[] = "gc";
-static const char __pyx_k__10[] = "?";
-static const char __pyx_k_get[] = "get";
-static const char __pyx_k_key[] = "key";
+static const char __pyx_k__28[] = "?";
+static const char __pyx_k_doc[] = "__doc__";
+static const char __pyx_k_hub[] = "hub";
+static const char __pyx_k_mod[] = "mod";
 static const char __pyx_k_new[] = "__new__";
-static const char __pyx_k_upd[] = "upd";
-static const char __pyx_k_Item[] = "Item '";
+static const char __pyx_k_pop[] = "pop";
+static const char __pyx_k_pre[] = "pre";
+static const char __pyx_k_ref[] = "ref";
+static const char __pyx_k_ret[] = "ret";
+static const char __pyx_k_str[] = "str";
+static const char __pyx_k_sum[] = "sum";
+static const char __pyx_k_None[] = "None";
 static const char __pyx_k_args[] = "args";
-static const char __pyx_k_copy[] = "copy";
-static const char __pyx_k_data[] = "data";
-static const char __pyx_k_dest[] = "dest";
+static const char __pyx_k_bind[] = "bind";
+static const char __pyx_k_bool[] = "bool";
+static const char __pyx_k_call[] = "call";
 static const char __pyx_k_dict[] = "__dict__";
-static const char __pyx_k_keys[] = "keys";
+static const char __pyx_k_func[] = "func";
+static const char __pyx_k_init[] = "init";
 static const char __pyx_k_main[] = "__main__";
-static const char __pyx_k_name[] = "__name__";
+static const char __pyx_k_name[] = "name";
+static const char __pyx_k_post[] = "post";
+static const char __pyx_k_raws[] = "raws";
 static const char __pyx_k_self[] = "self";
 static const char __pyx_k_send[] = "send";
+static const char __pyx_k_spec[] = "__spec__";
 static const char __pyx_k_test[] = "__test__";
-static const char __pyx_k_clear[] = "_clear";
+static const char __pyx_k_aiter[] = "__aiter__";
+static const char __pyx_k_anext[] = "__anext__";
+static const char __pyx_k_await[] = "__await__";
+static const char __pyx_k_cache[] = "cache";
+static const char __pyx_k_chunk[] = "chunk";
 static const char __pyx_k_close[] = "close";
-static const char __pyx_k_items[] = "items";
+static const char __pyx_k_cname[] = "cname";
 static const char __pyx_k_state[] = "state";
+static const char __pyx_k_super[] = "super";
 static const char __pyx_k_throw[] = "throw";
-static const char __pyx_k_value[] = "value";
+static const char __pyx_k_call_2[] = "__call__";
+static const char __pyx_k_cnames[] = "cnames";
 static const char __pyx_k_dict_2[] = "_dict";
 static const char __pyx_k_enable[] = "enable";
-static const char __pyx_k_extend[] = "extend";
-static const char __pyx_k_freeze[] = "freeze";
 static const char __pyx_k_import[] = "__import__";
+static const char __pyx_k_kwargs[] = "kwargs";
+static const char __pyx_k_module[] = "__module__";
+static const char __pyx_k_name_2[] = "__name__";
 static const char __pyx_k_object[] = "object";
 static const char __pyx_k_pickle[] = "pickle";
 static const char __pyx_k_reduce[] = "__reduce__";
+static const char __pyx_k_return[] = "return";
 static const char __pyx_k_update[] = "update";
 static const char __pyx_k_values[] = "values";
 static const char __pyx_k_Mapping[] = "Mapping";
-static const char __pyx_k_default[] = "default";
 static const char __pyx_k_disable[] = "disable";
 static const char __pyx_k_genexpr[] = "genexpr";
-static const char __pyx_k_setattr[] = "__setattr__";
-static const char __pyx_k_KeyError[] = "KeyError";
+static const char __pyx_k_inspect[] = "inspect";
+static const char __pyx_k_pre_ret[] = "pre_ret";
+static const char __pyx_k_prepare[] = "__prepare__";
+static const char __pyx_k_Iterable[] = "Iterable";
+static const char __pyx_k_contract[] = "contract";
 static const char __pyx_k_getstate[] = "__getstate__";
-static const char __pyx_k_pop_data[] = "pop.data";
+static const char __pyx_k_post_ret[] = "post_ret";
 static const char __pyx_k_pyx_type[] = "__pyx_type";
+static const char __pyx_k_qualname[] = "__qualname__";
+static const char __pyx_k_set_name[] = "__set_name__";
 static const char __pyx_k_setstate[] = "__setstate__";
-static const char __pyx_k_unfreeze[] = "unfreeze";
-static const char __pyx_k_TypeError[] = "TypeError";
+static const char __pyx_k_arguments[] = "arguments";
+static const char __pyx_k_contracts[] = "contracts";
 static const char __pyx_k_isenabled[] = "isenabled";
+static const char __pyx_k_metaclass[] = "__metaclass__";
 static const char __pyx_k_pyx_state[] = "__pyx_state";
 static const char __pyx_k_reduce_ex[] = "__reduce_ex__";
-static const char __pyx_k_base_dicts[] = "base_dicts";
+static const char __pyx_k_signature[] = "signature";
+static const char __pyx_k_Contracted[] = "Contracted";
 static const char __pyx_k_pyx_result[] = "__pyx_result";
 static const char __pyx_k_pyx_vtable[] = "__pyx_vtable__";
 static const char __pyx_k_PickleError[] = "PickleError";
-static const char __pyx_k_merge_lists[] = "merge_lists";
-static const char __pyx_k_getattribute[] = "__getattribute__";
+static const char __pyx_k_contracts_2[] = "__contracts__";
+static const char __pyx_k_list_object[] = "list[object]";
+static const char __pyx_k_mro_entries[] = "__mro_entries__";
+static const char __pyx_k_pop_hub_Hub[] = "'pop.hub.Hub'";
+static const char __pyx_k_pop_hub_Sub[] = "'pop.hub.Sub'";
+static const char __pyx_k_Iterable_str[] = "Iterable[str]";
+static const char __pyx_k_implicit_hub[] = "implicit_hub";
+static const char __pyx_k_initializing[] = "_initializing";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
+static const char __pyx_k_pop_contract[] = "pop.contract";
 static const char __pyx_k_pyx_checksum[] = "__pyx_checksum";
 static const char __pyx_k_stringsource[] = "<stringsource>";
 static const char __pyx_k_use_setstate[] = "use_setstate";
-static const char __pyx_k_NamespaceDict[] = "NamespaceDict";
-static const char __pyx_k_class_getitem[] = "__class_getitem__";
+static const char __pyx_k_get_arguments[] = "get_arguments";
+static const char __pyx_k_has_contracts[] = "_has_contracts";
+static const char __pyx_k_init_subclass[] = "__init_subclass__";
+static const char __pyx_k_load_contract[] = "load_contract";
 static const char __pyx_k_reduce_cython[] = "__reduce_cython__";
-static const char __pyx_k_AttributeError[] = "AttributeError";
-static const char __pyx_k_MultidictCache[] = "MultidictCache";
+static const char __pyx_k_apply_defaults[] = "apply_defaults";
+static const char __pyx_k_bound_signature[] = "__bound_signature__";
 static const char __pyx_k_collections_abc[] = "collections.abc";
+static const char __pyx_k_dict_str_object[] = "dict[str, object]";
 static const char __pyx_k_pyx_PickleError[] = "__pyx_PickleError";
 static const char __pyx_k_setstate_cython[] = "__setstate_cython__";
-static const char __pyx_k_pop_pop_data_pyx[] = "pop/pop.data.pyx";
-static const char __pyx_k_recursive_update[] = "recursive_update";
+static const char __pyx_k_contract_context[] = "contract_context";
+static const char __pyx_k_loaded_contracts[] = "loaded_contracts";
+static const char __pyx_k_ContractedContext[] = "ContractedContext";
+static const char __pyx_k_Contracted___call[] = "Contracted.__call__";
+static const char __pyx_k_create_contracted[] = "create_contracted";
+static const char __pyx_k_default_contracts[] = "default_contracts";
+static const char __pyx_k_functools_partial[] = "functools.partial";
+static const char __pyx_k_ContractedAsyncGen[] = "ContractedAsyncGen";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
-static const char __pyx_k_MultidictCache__clear[] = "MultidictCache._clear";
-static const char __pyx_k_freeze_locals_genexpr[] = "freeze.<locals>.genexpr";
-static const char __pyx_k_ImmutableNamespaceDict[] = "ImmutableNamespaceDict";
-static const char __pyx_k_object_has_no_attribute[] = "' object has no attribute '";
-static const char __pyx_k_contains___locals_genexpr[] = "__contains__.<locals>.genexpr";
-static const char __pyx_k_ImmutableNamespaceDict_get[] = "ImmutableNamespaceDict.get";
-static const char __pyx_k_pyx_unpickle_NamespaceDict[] = "__pyx_unpickle_NamespaceDict";
-static const char __pyx_k_ImmutableNamespaceDict_copy[] = "ImmutableNamespaceDict.copy";
-static const char __pyx_k_ImmutableNamespaceDict_keys[] = "ImmutableNamespaceDict.keys";
-static const char __pyx_k_pyx_unpickle_MultidictCache[] = "__pyx_unpickle_MultidictCache";
-static const char __pyx_k_ImmutableNamespaceDict__data[] = "_ImmutableNamespaceDict__data";
-static const char __pyx_k_ImmutableNamespaceDict_items[] = "ImmutableNamespaceDict.items";
-static const char __pyx_k_ImmutableNamespaceDict_values[] = "ImmutableNamespaceDict.values";
-static const char __pyx_k_NamespaceDict___reduce_cython[] = "NamespaceDict.__reduce_cython__";
-static const char __pyx_k_MultidictCache___reduce_cython[] = "MultidictCache.__reduce_cython__";
-static const char __pyx_k_pyx_unpickle_ImmutableNamespac[] = "__pyx_unpickle_ImmutableNamespaceDict";
-static const char __pyx_k_ImmutableNamespaceDict___reduce[] = "ImmutableNamespaceDict.__reduce_cython__";
-static const char __pyx_k_ImmutableNamespaceDict_does_not[] = "ImmutableNamespaceDict does not support attribute assignment";
-static const char __pyx_k_NamespaceDict___setstate_cython[] = "NamespaceDict.__setstate_cython__";
-static const char __pyx_k_not_found_in_any_base_dictionar[] = "' not found in any base dictionary";
-static const char __pyx_k_ImmutableNamespaceDict___setstat[] = "ImmutableNamespaceDict.__setstate_cython__";
-static const char __pyx_k_Incompatible_checksums_0x_x_vs_0[] = "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())";
-static const char __pyx_k_MultidictCache___setstate_cython[] = "MultidictCache.__setstate_cython__";
-static const char __pyx_k_ImmutableNamespaceDict_does_not_2[] = "ImmutableNamespaceDict does not support item assignment";
-static const char __pyx_k_Incompatible_checksums_0x_x_vs_0_2[] = "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))";
-static const char __pyx_k_Incompatible_checksums_0x_x_vs_0_3[] = "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))";
+static const char __pyx_k_contract_functions[] = "contract_functions";
+static const char __pyx_k_isasyncgenfunction[] = "isasyncgenfunction";
+static const char __pyx_k_process_pre_result[] = "process_pre_result";
+static const char __pyx_k_pop_pop_contract_pyx[] = "pop/pop.contract.pyx";
+static const char __pyx_k_Contracted___getstate[] = "Contracted.__getstate__";
+static const char __pyx_k_Contracted___setstate[] = "Contracted.__setstate__";
+static const char __pyx_k_pyx_unpickle_Contracted[] = "__pyx_unpickle_Contracted";
+static const char __pyx_k_ContractedAsyncGen___call[] = "ContractedAsyncGen.__call__";
+static const char __pyx_k_list_pop_loader_LoadedMod[] = "list['pop.loader.LoadedMod']";
+static const char __pyx_k_Contracted___reduce_cython[] = "Contracted.__reduce_cython__";
+static const char __pyx_k_Contracted___setstate_cython[] = "Contracted.__setstate_cython__";
+static const char __pyx_k_pyx_unpickle_ContractedContext[] = "__pyx_unpickle_ContractedContext";
+static const char __pyx_k_ContractedContext_get_arguments[] = "ContractedContext.get_arguments";
+static const char __pyx_k_ContractedContext___reduce_cytho[] = "ContractedContext.__reduce_cython__";
+static const char __pyx_k_ContractedContext___setstate_cyt[] = "ContractedContext.__setstate_cython__";
+static const char __pyx_k_Contracted__load_contracts_local[] = "Contracted._load_contracts.<locals>.genexpr";
+static const char __pyx_k_Incompatible_checksums_0x_x_vs_0[] = "Incompatible checksums (0x%x vs (0xa0c99bc, 0x2f6671f, 0xf637459) = (_ContractedContext__cache, __name__, args, func, kwargs, ref, ret, signature))";
+static const char __pyx_k_Incompatible_checksums_0x_x_vs_0_2[] = "Incompatible checksums (0x%x vs (0xa316dad, 0x35df901, 0x2d897cc) = (__name__, __wrapped__, _has_contracts, _sig_errors, contract_functions, contracts, func, hub, implicit_hub, ref, signature))";
 /* #### Code section: decls ### */
-static PyObject *__pyx_pf_3pop_4data_13NamespaceDict___getattr__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static int __pyx_pf_3pop_4data_13NamespaceDict_2__setattr__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /* proto */
-static PyObject *__pyx_pf_3pop_4data_13NamespaceDict_4__reduce_cython__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_13NamespaceDict_6__setstate_cython__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
-static int __pyx_pf_3pop_4data_14MultidictCache___init__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_base_dicts); /* proto */
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_2_clear(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_4__getitem__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_6__iter__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_12__contains___genexpr(PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
-static int __pyx_pf_3pop_4data_14MultidictCache_8__contains__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_item); /* proto */
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_10__reduce_cython__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_12__setstate_cython__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict___init__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_data); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_2__getitem__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_4__getattr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_6__setattr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /* proto */
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_8__setitem__(CYTHON_UNUSED struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_key, CYTHON_UNUSED PyObject *__pyx_v_value); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_10__call__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static Py_ssize_t __pyx_pf_3pop_4data_22ImmutableNamespaceDict_12__len__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_14__iter__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_16__bool__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_18__contains__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_20__repr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_22__eq__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_24__ne__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_26keys(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_28values(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_30items(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_32get(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_default); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_34copy(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data___get__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_36__reduce_cython__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self); /* proto */
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_38__setstate_cython__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
-static PyObject *__pyx_pf_3pop_4data_6freeze_genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
-static PyObject *__pyx_pf_3pop_4data_6freeze_3genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
-static PyObject *__pyx_pf_3pop_4data_freeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data); /* proto */
-static PyObject *__pyx_pf_3pop_4data_2unfreeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data); /* proto */
-static PyObject *__pyx_pf_3pop_4data_4update(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_dest, PyObject *__pyx_v_upd, int __pyx_v_recursive_update, int __pyx_v_merge_lists); /* proto */
-static PyObject *__pyx_pf_3pop_4data_6__pyx_unpickle_NamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
-static PyObject *__pyx_pf_3pop_4data_8__pyx_unpickle_MultidictCache(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
-static PyObject *__pyx_pf_3pop_4data_10__pyx_unpickle_ImmutableNamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
-static PyObject *__pyx_tp_new_3pop_4data_MultidictCache(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_3pop_4data_ImmutableNamespaceDict(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct____contains__(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
-static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_get = {0, 0, 0, 0, 0};
-static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_items = {0, 0, 0, 0, 0};
-static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_keys = {0, 0, 0, 0, 0};
-static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_values = {0, 0, 0, 0, 0};
+static int __pyx_pf_3pop_8contract_17ContractedContext___init__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_func, PyObject *__pyx_v_args, PyObject *__pyx_v_kwargs, PyObject *__pyx_v_signature, PyObject *__pyx_v_ref, PyObject *__pyx_v_name, PyObject *__pyx_v_ret, PyObject *__pyx_v_cache); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_13__signature_____get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_5cache___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_2get_arguments(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_4func___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_4func_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_4func_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_4args___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_4args_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_4args_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_6kwargs___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_6kwargs_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_6kwargs_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_3ref___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_3ref_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_3ref_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_8__name_____get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_8__name___2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_8__name___4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_3ret___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_3ret_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_17ContractedContext_3ret_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_4__reduce_cython__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_6__setstate_cython__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_load_contract(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_contracts, CYTHON_UNUSED PyObject *__pyx_v_default_contracts, PyObject *__pyx_v_mod, PyObject *__pyx_v_name); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted___init__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_hub, PyObject *__pyx_v_contracts, PyObject *__pyx_v_func, PyObject *__pyx_v_ref, PyObject *__pyx_v_name, PyObject *__pyx_v_implicit_hub); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_13__signature_____get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_8__dict_____get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_15_load_contracts_genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_2__call__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_args, PyObject *__pyx_v_kwargs); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_5__getstate__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_7__setstate__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_state); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_14_has_contracts___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_14_has_contracts_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_12implicit_hub___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_12implicit_hub_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_18contract_functions___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_18contract_functions_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_18contract_functions_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_3hub___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_3hub_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_3hub_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_4func___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_4func_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_4func_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_9signature___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_9signature_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_9signature_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_8__name_____get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_8__name___2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_8__name___4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_3ref___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_3ref_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
+static int __pyx_pf_3pop_8contract_10Contracted_3ref_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_9__reduce_cython__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_11__setstate_cython__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_18ContractedAsyncGen___call__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_args, PyObject *__pyx_v_kwargs); /* proto */
+static struct __pyx_obj_3pop_8contract_Contracted *__pyx_pf_3pop_8contract_2create_contracted(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_hub, PyObject *__pyx_v_contracts, PyObject *__pyx_v_func, PyObject *__pyx_v_ref, PyObject *__pyx_v_name, PyObject *__pyx_v_implicit_hub); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_4__pyx_unpickle_ContractedContext(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
+static PyObject *__pyx_pf_3pop_8contract_6__pyx_unpickle_Contracted(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
+static PyObject *__pyx_tp_new_3pop_8contract_ContractedContext(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_tp_new_3pop_8contract_Contracted(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_tp_new_3pop_8contract___pyx_scope_struct__genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_tp_new_3pop_8contract___pyx_scope_struct_1___call__(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
+static PyObject *__pyx_tp_new_3pop_8contract___pyx_scope_struct_2___call__(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -3044,174 +3098,194 @@
   #if CYTHON_USE_MODULE_STATE
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   #if CYTHON_USE_MODULE_STATE
-  PyObject *__pyx_type_3pop_4data_NamespaceDict;
-  PyObject *__pyx_type_3pop_4data_MultidictCache;
-  PyObject *__pyx_type_3pop_4data_ImmutableNamespaceDict;
-  PyObject *__pyx_type_3pop_4data___pyx_scope_struct____contains__;
-  PyObject *__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr;
-  PyObject *__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr;
-  PyObject *__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr;
-  #endif
-  PyTypeObject *__pyx_ptype_3pop_4data_NamespaceDict;
-  PyTypeObject *__pyx_ptype_3pop_4data_MultidictCache;
-  PyTypeObject *__pyx_ptype_3pop_4data_ImmutableNamespaceDict;
-  PyTypeObject *__pyx_ptype_3pop_4data___pyx_scope_struct____contains__;
-  PyTypeObject *__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr;
-  PyTypeObject *__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr;
-  PyTypeObject *__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr;
+  PyObject *__pyx_type_3pop_8contract_ContractedContext;
+  PyObject *__pyx_type_3pop_8contract_Contracted;
+  PyObject *__pyx_type_3pop_8contract___pyx_scope_struct__genexpr;
+  PyObject *__pyx_type_3pop_8contract___pyx_scope_struct_1___call__;
+  PyObject *__pyx_type_3pop_8contract___pyx_scope_struct_2___call__;
+  #endif
+  PyTypeObject *__pyx_ptype_3pop_8contract_ContractedContext;
+  PyTypeObject *__pyx_ptype_3pop_8contract_Contracted;
+  PyTypeObject *__pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr;
+  PyTypeObject *__pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__;
+  PyTypeObject *__pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__;
   PyObject *__pyx_n_u_;
-  PyObject *__pyx_n_s_AttributeError;
-  PyObject *__pyx_n_s_ImmutableNamespaceDict;
-  PyObject *__pyx_n_s_ImmutableNamespaceDict___reduce;
-  PyObject *__pyx_n_s_ImmutableNamespaceDict___setstat;
-  PyObject *__pyx_n_s_ImmutableNamespaceDict__data;
-  PyObject *__pyx_n_u_ImmutableNamespaceDict__data;
-  PyObject *__pyx_n_s_ImmutableNamespaceDict_copy;
-  PyObject *__pyx_kp_u_ImmutableNamespaceDict_does_not;
-  PyObject *__pyx_kp_u_ImmutableNamespaceDict_does_not_2;
-  PyObject *__pyx_n_s_ImmutableNamespaceDict_get;
-  PyObject *__pyx_n_s_ImmutableNamespaceDict_items;
-  PyObject *__pyx_n_s_ImmutableNamespaceDict_keys;
-  PyObject *__pyx_n_s_ImmutableNamespaceDict_values;
+  PyObject *__pyx_n_s_Contracted;
+  PyObject *__pyx_n_s_ContractedAsyncGen;
+  PyObject *__pyx_n_s_ContractedAsyncGen___call;
+  PyObject *__pyx_n_s_ContractedContext;
+  PyObject *__pyx_n_s_ContractedContext___reduce_cytho;
+  PyObject *__pyx_n_s_ContractedContext___setstate_cyt;
+  PyObject *__pyx_n_s_ContractedContext_get_arguments;
+  PyObject *__pyx_n_s_Contracted___call;
+  PyObject *__pyx_n_s_Contracted___getstate;
+  PyObject *__pyx_n_s_Contracted___reduce_cython;
+  PyObject *__pyx_n_s_Contracted___setstate;
+  PyObject *__pyx_n_s_Contracted___setstate_cython;
+  PyObject *__pyx_n_s_Contracted__load_contracts_local;
   PyObject *__pyx_kp_s_Incompatible_checksums_0x_x_vs_0;
   PyObject *__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_2;
-  PyObject *__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_3;
-  PyObject *__pyx_kp_u_Item;
-  PyObject *__pyx_n_s_KeyError;
+  PyObject *__pyx_n_s_Iterable;
+  PyObject *__pyx_kp_s_Iterable_str;
   PyObject *__pyx_n_s_Mapping;
-  PyObject *__pyx_n_s_MultidictCache;
-  PyObject *__pyx_n_s_MultidictCache___reduce_cython;
-  PyObject *__pyx_n_s_MultidictCache___setstate_cython;
-  PyObject *__pyx_n_s_MultidictCache__clear;
-  PyObject *__pyx_n_s_NamespaceDict;
-  PyObject *__pyx_n_s_NamespaceDict___reduce_cython;
-  PyObject *__pyx_n_s_NamespaceDict___setstate_cython;
+  PyObject *__pyx_kp_u_None;
   PyObject *__pyx_n_s_PickleError;
-  PyObject *__pyx_n_s_TypeError;
-  PyObject *__pyx_n_s__10;
-  PyObject *__pyx_kp_u__2;
-  PyObject *__pyx_kp_u__3;
+  PyObject *__pyx_n_s__28;
+  PyObject *__pyx_kp_u__5;
+  PyObject *__pyx_n_s__7;
+  PyObject *__pyx_n_s_aiter;
+  PyObject *__pyx_n_s_anext;
+  PyObject *__pyx_n_s_apply_defaults;
   PyObject *__pyx_n_s_args;
+  PyObject *__pyx_n_s_arguments;
   PyObject *__pyx_n_s_asyncio_coroutines;
-  PyObject *__pyx_n_s_base_dicts;
-  PyObject *__pyx_n_s_class_getitem;
-  PyObject *__pyx_n_s_clear;
+  PyObject *__pyx_n_s_await;
+  PyObject *__pyx_n_s_bind;
+  PyObject *__pyx_n_s_bool;
+  PyObject *__pyx_n_u_bound_signature;
+  PyObject *__pyx_n_s_cache;
+  PyObject *__pyx_n_u_call;
+  PyObject *__pyx_n_s_call_2;
+  PyObject *__pyx_n_s_chunk;
   PyObject *__pyx_n_s_cline_in_traceback;
   PyObject *__pyx_n_s_close;
+  PyObject *__pyx_n_s_cname;
+  PyObject *__pyx_n_s_cnames;
   PyObject *__pyx_n_s_collections_abc;
-  PyObject *__pyx_n_s_contains___locals_genexpr;
-  PyObject *__pyx_n_s_copy;
-  PyObject *__pyx_n_s_data;
-  PyObject *__pyx_n_s_default;
-  PyObject *__pyx_n_s_dest;
+  PyObject *__pyx_n_s_contract;
+  PyObject *__pyx_n_s_contract_context;
+  PyObject *__pyx_n_s_contract_functions;
+  PyObject *__pyx_n_s_contracts;
+  PyObject *__pyx_n_u_contracts;
+  PyObject *__pyx_n_u_contracts_2;
+  PyObject *__pyx_n_s_create_contracted;
+  PyObject *__pyx_n_s_default_contracts;
   PyObject *__pyx_n_s_dict;
   PyObject *__pyx_n_s_dict_2;
+  PyObject *__pyx_kp_s_dict_str_object;
   PyObject *__pyx_kp_u_disable;
+  PyObject *__pyx_n_s_doc;
   PyObject *__pyx_kp_u_enable;
-  PyObject *__pyx_n_s_eq;
-  PyObject *__pyx_n_s_extend;
-  PyObject *__pyx_n_s_freeze;
-  PyObject *__pyx_n_s_freeze_locals_genexpr;
+  PyObject *__pyx_n_s_fn;
+  PyObject *__pyx_n_s_func;
+  PyObject *__pyx_kp_s_functools_partial;
   PyObject *__pyx_kp_u_gc;
   PyObject *__pyx_n_s_genexpr;
-  PyObject *__pyx_n_s_get;
-  PyObject *__pyx_n_s_getattribute;
+  PyObject *__pyx_n_s_get_arguments;
   PyObject *__pyx_n_s_getstate;
+  PyObject *__pyx_n_s_has_contracts;
+  PyObject *__pyx_n_s_hub;
+  PyObject *__pyx_n_s_implicit_hub;
+  PyObject *__pyx_n_u_implicit_hub;
   PyObject *__pyx_n_s_import;
+  PyObject *__pyx_n_u_init;
+  PyObject *__pyx_n_s_init_subclass;
+  PyObject *__pyx_n_s_initializing;
+  PyObject *__pyx_n_s_inspect;
   PyObject *__pyx_n_s_is_coroutine;
+  PyObject *__pyx_n_s_isasyncgenfunction;
   PyObject *__pyx_kp_u_isenabled;
-  PyObject *__pyx_n_s_items;
-  PyObject *__pyx_n_s_key;
-  PyObject *__pyx_n_s_keys;
+  PyObject *__pyx_n_s_kwargs;
+  PyObject *__pyx_kp_s_list_object;
+  PyObject *__pyx_kp_s_list_pop_loader_LoadedMod;
+  PyObject *__pyx_n_s_load_contract;
+  PyObject *__pyx_n_s_loaded_contracts;
   PyObject *__pyx_n_s_main;
-  PyObject *__pyx_n_s_merge_lists;
+  PyObject *__pyx_n_s_metaclass;
+  PyObject *__pyx_n_s_mod;
+  PyObject *__pyx_n_s_module;
+  PyObject *__pyx_n_s_mro_entries;
   PyObject *__pyx_n_s_name;
+  PyObject *__pyx_n_u_name;
+  PyObject *__pyx_n_s_name_2;
   PyObject *__pyx_n_s_new;
-  PyObject *__pyx_kp_u_not_found_in_any_base_dictionar;
   PyObject *__pyx_n_s_object;
-  PyObject *__pyx_kp_u_object_has_no_attribute;
   PyObject *__pyx_n_s_pickle;
-  PyObject *__pyx_n_s_pop_data;
-  PyObject *__pyx_kp_s_pop_pop_data_pyx;
+  PyObject *__pyx_n_s_pop;
+  PyObject *__pyx_n_s_pop_contract;
+  PyObject *__pyx_kp_s_pop_hub_Hub;
+  PyObject *__pyx_kp_s_pop_hub_Sub;
+  PyObject *__pyx_kp_s_pop_pop_contract_pyx;
+  PyObject *__pyx_n_u_post;
+  PyObject *__pyx_n_s_post_ret;
+  PyObject *__pyx_n_u_pre;
+  PyObject *__pyx_n_s_pre_ret;
+  PyObject *__pyx_n_s_prepare;
+  PyObject *__pyx_n_s_process_pre_result;
   PyObject *__pyx_n_s_pyx_PickleError;
   PyObject *__pyx_n_s_pyx_checksum;
   PyObject *__pyx_n_s_pyx_result;
   PyObject *__pyx_n_s_pyx_state;
   PyObject *__pyx_n_s_pyx_type;
-  PyObject *__pyx_n_s_pyx_unpickle_ImmutableNamespac;
-  PyObject *__pyx_n_s_pyx_unpickle_MultidictCache;
-  PyObject *__pyx_n_s_pyx_unpickle_NamespaceDict;
+  PyObject *__pyx_n_s_pyx_unpickle_Contracted;
+  PyObject *__pyx_n_s_pyx_unpickle_ContractedContext;
   PyObject *__pyx_n_s_pyx_vtable;
-  PyObject *__pyx_n_s_recursive_update;
+  PyObject *__pyx_n_s_qualname;
+  PyObject *__pyx_n_s_raws;
   PyObject *__pyx_n_s_reduce;
   PyObject *__pyx_n_s_reduce_cython;
   PyObject *__pyx_n_s_reduce_ex;
+  PyObject *__pyx_n_s_ref;
+  PyObject *__pyx_n_u_ref;
+  PyObject *__pyx_n_s_ret;
+  PyObject *__pyx_n_s_return;
   PyObject *__pyx_n_s_self;
   PyObject *__pyx_n_s_send;
-  PyObject *__pyx_n_s_setattr;
+  PyObject *__pyx_n_s_set_name;
   PyObject *__pyx_n_s_setstate;
   PyObject *__pyx_n_s_setstate_cython;
+  PyObject *__pyx_n_s_signature;
+  PyObject *__pyx_n_s_spec;
   PyObject *__pyx_n_s_state;
+  PyObject *__pyx_n_s_str;
   PyObject *__pyx_kp_s_stringsource;
+  PyObject *__pyx_n_s_sum;
+  PyObject *__pyx_n_s_super;
   PyObject *__pyx_n_s_test;
   PyObject *__pyx_n_s_throw;
-  PyObject *__pyx_n_s_unfreeze;
-  PyObject *__pyx_n_s_upd;
   PyObject *__pyx_n_s_update;
   PyObject *__pyx_n_s_use_setstate;
-  PyObject *__pyx_n_s_value;
   PyObject *__pyx_n_s_values;
-  PyObject *__pyx_int_10383136;
-  PyObject *__pyx_int_73280139;
-  PyObject *__pyx_int_151484788;
-  PyObject *__pyx_int_214639601;
-  PyObject *__pyx_int_220666686;
-  PyObject *__pyx_int_222419149;
-  PyObject *__pyx_int_228825662;
-  PyObject *__pyx_int_238750788;
-  PyObject *__pyx_int_256609795;
-  PyObject *__pyx_slice__6;
+  PyObject *__pyx_int_0;
+  PyObject *__pyx_int_1;
+  PyObject *__pyx_int_47749068;
+  PyObject *__pyx_int_49702687;
+  PyObject *__pyx_int_56490241;
+  PyObject *__pyx_int_168597948;
+  PyObject *__pyx_int_171011501;
+  PyObject *__pyx_int_258176089;
+  PyObject *__pyx_slice__2;
   PyObject *__pyx_tuple__4;
-  PyObject *__pyx_tuple__5;
-  PyObject *__pyx_tuple__7;
+  PyObject *__pyx_tuple__6;
   PyObject *__pyx_tuple__8;
-  PyObject *__pyx_tuple__9;
-  PyObject *__pyx_tuple__11;
-  PyObject *__pyx_tuple__13;
-  PyObject *__pyx_tuple__15;
+  PyObject *__pyx_tuple__10;
+  PyObject *__pyx_tuple__12;
+  PyObject *__pyx_tuple__14;
+  PyObject *__pyx_tuple__17;
+  PyObject *__pyx_tuple__21;
   PyObject *__pyx_tuple__22;
   PyObject *__pyx_tuple__24;
-  PyObject *__pyx_tuple__28;
-  PyObject *__pyx_tuple__30;
-  PyObject *__pyx_tuple__32;
-  PyObject *__pyx_tuple__34;
-  PyObject *__pyx_tuple__35;
-  PyObject *__pyx_codeobj__12;
-  PyObject *__pyx_codeobj__14;
+  PyObject *__pyx_tuple__25;
+  PyObject *__pyx_codeobj__3;
+  PyObject *__pyx_codeobj__9;
+  PyObject *__pyx_codeobj__11;
+  PyObject *__pyx_codeobj__13;
+  PyObject *__pyx_codeobj__15;
   PyObject *__pyx_codeobj__16;
-  PyObject *__pyx_codeobj__17;
   PyObject *__pyx_codeobj__18;
   PyObject *__pyx_codeobj__19;
   PyObject *__pyx_codeobj__20;
-  PyObject *__pyx_codeobj__21;
   PyObject *__pyx_codeobj__23;
-  PyObject *__pyx_codeobj__25;
   PyObject *__pyx_codeobj__26;
   PyObject *__pyx_codeobj__27;
-  PyObject *__pyx_codeobj__29;
-  PyObject *__pyx_codeobj__31;
-  PyObject *__pyx_codeobj__33;
-  PyObject *__pyx_codeobj__36;
-  PyObject *__pyx_codeobj__37;
-  PyObject *__pyx_codeobj__38;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -3249,173 +3323,193 @@
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_ptype_7cpython_4type_type);
   Py_CLEAR(clear_module_state->__pyx_ptype_7cpython_4bool_bool);
   Py_CLEAR(clear_module_state->__pyx_ptype_7cpython_7complex_complex);
-  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data_NamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data_NamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data_MultidictCache);
-  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data_MultidictCache);
-  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data_ImmutableNamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct____contains__);
-  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data___pyx_scope_struct____contains__);
-  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_8contract_ContractedContext);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_8contract_ContractedContext);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_8contract_Contracted);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_8contract_Contracted);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_8contract___pyx_scope_struct__genexpr);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_8contract___pyx_scope_struct_1___call__);
+  Py_CLEAR(clear_module_state->__pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__);
+  Py_CLEAR(clear_module_state->__pyx_type_3pop_8contract___pyx_scope_struct_2___call__);
   Py_CLEAR(clear_module_state->__pyx_n_u_);
-  Py_CLEAR(clear_module_state->__pyx_n_s_AttributeError);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict___reduce);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict___setstat);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict__data);
-  Py_CLEAR(clear_module_state->__pyx_n_u_ImmutableNamespaceDict__data);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict_copy);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_ImmutableNamespaceDict_does_not);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_ImmutableNamespaceDict_does_not_2);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict_get);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict_items);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict_keys);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImmutableNamespaceDict_values);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Contracted);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ContractedAsyncGen);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ContractedAsyncGen___call);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ContractedContext);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ContractedContext___reduce_cytho);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ContractedContext___setstate_cyt);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ContractedContext_get_arguments);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Contracted___call);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Contracted___getstate);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Contracted___reduce_cython);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Contracted___setstate);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Contracted___setstate_cython);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Contracted__load_contracts_local);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0);
   Py_CLEAR(clear_module_state->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_2);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_3);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Item);
-  Py_CLEAR(clear_module_state->__pyx_n_s_KeyError);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Iterable);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_Iterable_str);
   Py_CLEAR(clear_module_state->__pyx_n_s_Mapping);
-  Py_CLEAR(clear_module_state->__pyx_n_s_MultidictCache);
-  Py_CLEAR(clear_module_state->__pyx_n_s_MultidictCache___reduce_cython);
-  Py_CLEAR(clear_module_state->__pyx_n_s_MultidictCache___setstate_cython);
-  Py_CLEAR(clear_module_state->__pyx_n_s_MultidictCache__clear);
-  Py_CLEAR(clear_module_state->__pyx_n_s_NamespaceDict);
-  Py_CLEAR(clear_module_state->__pyx_n_s_NamespaceDict___reduce_cython);
-  Py_CLEAR(clear_module_state->__pyx_n_s_NamespaceDict___setstate_cython);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_None);
   Py_CLEAR(clear_module_state->__pyx_n_s_PickleError);
-  Py_CLEAR(clear_module_state->__pyx_n_s_TypeError);
-  Py_CLEAR(clear_module_state->__pyx_n_s__10);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__2);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__3);
+  Py_CLEAR(clear_module_state->__pyx_n_s__28);
+  Py_CLEAR(clear_module_state->__pyx_kp_u__5);
+  Py_CLEAR(clear_module_state->__pyx_n_s__7);
+  Py_CLEAR(clear_module_state->__pyx_n_s_aiter);
+  Py_CLEAR(clear_module_state->__pyx_n_s_anext);
+  Py_CLEAR(clear_module_state->__pyx_n_s_apply_defaults);
   Py_CLEAR(clear_module_state->__pyx_n_s_args);
+  Py_CLEAR(clear_module_state->__pyx_n_s_arguments);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_CLEAR(clear_module_state->__pyx_n_s_base_dicts);
-  Py_CLEAR(clear_module_state->__pyx_n_s_class_getitem);
-  Py_CLEAR(clear_module_state->__pyx_n_s_clear);
+  Py_CLEAR(clear_module_state->__pyx_n_s_await);
+  Py_CLEAR(clear_module_state->__pyx_n_s_bind);
+  Py_CLEAR(clear_module_state->__pyx_n_s_bool);
+  Py_CLEAR(clear_module_state->__pyx_n_u_bound_signature);
+  Py_CLEAR(clear_module_state->__pyx_n_s_cache);
+  Py_CLEAR(clear_module_state->__pyx_n_u_call);
+  Py_CLEAR(clear_module_state->__pyx_n_s_call_2);
+  Py_CLEAR(clear_module_state->__pyx_n_s_chunk);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
   Py_CLEAR(clear_module_state->__pyx_n_s_close);
+  Py_CLEAR(clear_module_state->__pyx_n_s_cname);
+  Py_CLEAR(clear_module_state->__pyx_n_s_cnames);
   Py_CLEAR(clear_module_state->__pyx_n_s_collections_abc);
-  Py_CLEAR(clear_module_state->__pyx_n_s_contains___locals_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_n_s_copy);
-  Py_CLEAR(clear_module_state->__pyx_n_s_data);
-  Py_CLEAR(clear_module_state->__pyx_n_s_default);
-  Py_CLEAR(clear_module_state->__pyx_n_s_dest);
+  Py_CLEAR(clear_module_state->__pyx_n_s_contract);
+  Py_CLEAR(clear_module_state->__pyx_n_s_contract_context);
+  Py_CLEAR(clear_module_state->__pyx_n_s_contract_functions);
+  Py_CLEAR(clear_module_state->__pyx_n_s_contracts);
+  Py_CLEAR(clear_module_state->__pyx_n_u_contracts);
+  Py_CLEAR(clear_module_state->__pyx_n_u_contracts_2);
+  Py_CLEAR(clear_module_state->__pyx_n_s_create_contracted);
+  Py_CLEAR(clear_module_state->__pyx_n_s_default_contracts);
   Py_CLEAR(clear_module_state->__pyx_n_s_dict);
   Py_CLEAR(clear_module_state->__pyx_n_s_dict_2);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_dict_str_object);
   Py_CLEAR(clear_module_state->__pyx_kp_u_disable);
+  Py_CLEAR(clear_module_state->__pyx_n_s_doc);
   Py_CLEAR(clear_module_state->__pyx_kp_u_enable);
-  Py_CLEAR(clear_module_state->__pyx_n_s_eq);
-  Py_CLEAR(clear_module_state->__pyx_n_s_extend);
-  Py_CLEAR(clear_module_state->__pyx_n_s_freeze);
-  Py_CLEAR(clear_module_state->__pyx_n_s_freeze_locals_genexpr);
+  Py_CLEAR(clear_module_state->__pyx_n_s_fn);
+  Py_CLEAR(clear_module_state->__pyx_n_s_func);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_functools_partial);
   Py_CLEAR(clear_module_state->__pyx_kp_u_gc);
   Py_CLEAR(clear_module_state->__pyx_n_s_genexpr);
-  Py_CLEAR(clear_module_state->__pyx_n_s_get);
-  Py_CLEAR(clear_module_state->__pyx_n_s_getattribute);
+  Py_CLEAR(clear_module_state->__pyx_n_s_get_arguments);
   Py_CLEAR(clear_module_state->__pyx_n_s_getstate);
+  Py_CLEAR(clear_module_state->__pyx_n_s_has_contracts);
+  Py_CLEAR(clear_module_state->__pyx_n_s_hub);
+  Py_CLEAR(clear_module_state->__pyx_n_s_implicit_hub);
+  Py_CLEAR(clear_module_state->__pyx_n_u_implicit_hub);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
+  Py_CLEAR(clear_module_state->__pyx_n_u_init);
+  Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
+  Py_CLEAR(clear_module_state->__pyx_n_s_initializing);
+  Py_CLEAR(clear_module_state->__pyx_n_s_inspect);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
+  Py_CLEAR(clear_module_state->__pyx_n_s_isasyncgenfunction);
   Py_CLEAR(clear_module_state->__pyx_kp_u_isenabled);
-  Py_CLEAR(clear_module_state->__pyx_n_s_items);
-  Py_CLEAR(clear_module_state->__pyx_n_s_key);
-  Py_CLEAR(clear_module_state->__pyx_n_s_keys);
+  Py_CLEAR(clear_module_state->__pyx_n_s_kwargs);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_list_object);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_list_pop_loader_LoadedMod);
+  Py_CLEAR(clear_module_state->__pyx_n_s_load_contract);
+  Py_CLEAR(clear_module_state->__pyx_n_s_loaded_contracts);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
-  Py_CLEAR(clear_module_state->__pyx_n_s_merge_lists);
+  Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
+  Py_CLEAR(clear_module_state->__pyx_n_s_mod);
+  Py_CLEAR(clear_module_state->__pyx_n_s_module);
+  Py_CLEAR(clear_module_state->__pyx_n_s_mro_entries);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
+  Py_CLEAR(clear_module_state->__pyx_n_u_name);
+  Py_CLEAR(clear_module_state->__pyx_n_s_name_2);
   Py_CLEAR(clear_module_state->__pyx_n_s_new);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_not_found_in_any_base_dictionar);
   Py_CLEAR(clear_module_state->__pyx_n_s_object);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_object_has_no_attribute);
   Py_CLEAR(clear_module_state->__pyx_n_s_pickle);
-  Py_CLEAR(clear_module_state->__pyx_n_s_pop_data);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_pop_pop_data_pyx);
+  Py_CLEAR(clear_module_state->__pyx_n_s_pop);
+  Py_CLEAR(clear_module_state->__pyx_n_s_pop_contract);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_pop_hub_Hub);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_pop_hub_Sub);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_pop_pop_contract_pyx);
+  Py_CLEAR(clear_module_state->__pyx_n_u_post);
+  Py_CLEAR(clear_module_state->__pyx_n_s_post_ret);
+  Py_CLEAR(clear_module_state->__pyx_n_u_pre);
+  Py_CLEAR(clear_module_state->__pyx_n_s_pre_ret);
+  Py_CLEAR(clear_module_state->__pyx_n_s_prepare);
+  Py_CLEAR(clear_module_state->__pyx_n_s_process_pre_result);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_PickleError);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_checksum);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_result);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_state);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_type);
-  Py_CLEAR(clear_module_state->__pyx_n_s_pyx_unpickle_ImmutableNamespac);
-  Py_CLEAR(clear_module_state->__pyx_n_s_pyx_unpickle_MultidictCache);
-  Py_CLEAR(clear_module_state->__pyx_n_s_pyx_unpickle_NamespaceDict);
+  Py_CLEAR(clear_module_state->__pyx_n_s_pyx_unpickle_Contracted);
+  Py_CLEAR(clear_module_state->__pyx_n_s_pyx_unpickle_ContractedContext);
   Py_CLEAR(clear_module_state->__pyx_n_s_pyx_vtable);
-  Py_CLEAR(clear_module_state->__pyx_n_s_recursive_update);
+  Py_CLEAR(clear_module_state->__pyx_n_s_qualname);
+  Py_CLEAR(clear_module_state->__pyx_n_s_raws);
   Py_CLEAR(clear_module_state->__pyx_n_s_reduce);
   Py_CLEAR(clear_module_state->__pyx_n_s_reduce_cython);
   Py_CLEAR(clear_module_state->__pyx_n_s_reduce_ex);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ref);
+  Py_CLEAR(clear_module_state->__pyx_n_u_ref);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ret);
+  Py_CLEAR(clear_module_state->__pyx_n_s_return);
   Py_CLEAR(clear_module_state->__pyx_n_s_self);
   Py_CLEAR(clear_module_state->__pyx_n_s_send);
-  Py_CLEAR(clear_module_state->__pyx_n_s_setattr);
+  Py_CLEAR(clear_module_state->__pyx_n_s_set_name);
   Py_CLEAR(clear_module_state->__pyx_n_s_setstate);
   Py_CLEAR(clear_module_state->__pyx_n_s_setstate_cython);
+  Py_CLEAR(clear_module_state->__pyx_n_s_signature);
+  Py_CLEAR(clear_module_state->__pyx_n_s_spec);
   Py_CLEAR(clear_module_state->__pyx_n_s_state);
+  Py_CLEAR(clear_module_state->__pyx_n_s_str);
   Py_CLEAR(clear_module_state->__pyx_kp_s_stringsource);
+  Py_CLEAR(clear_module_state->__pyx_n_s_sum);
+  Py_CLEAR(clear_module_state->__pyx_n_s_super);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
   Py_CLEAR(clear_module_state->__pyx_n_s_throw);
-  Py_CLEAR(clear_module_state->__pyx_n_s_unfreeze);
-  Py_CLEAR(clear_module_state->__pyx_n_s_upd);
   Py_CLEAR(clear_module_state->__pyx_n_s_update);
   Py_CLEAR(clear_module_state->__pyx_n_s_use_setstate);
-  Py_CLEAR(clear_module_state->__pyx_n_s_value);
   Py_CLEAR(clear_module_state->__pyx_n_s_values);
-  Py_CLEAR(clear_module_state->__pyx_int_10383136);
-  Py_CLEAR(clear_module_state->__pyx_int_73280139);
-  Py_CLEAR(clear_module_state->__pyx_int_151484788);
-  Py_CLEAR(clear_module_state->__pyx_int_214639601);
-  Py_CLEAR(clear_module_state->__pyx_int_220666686);
-  Py_CLEAR(clear_module_state->__pyx_int_222419149);
-  Py_CLEAR(clear_module_state->__pyx_int_228825662);
-  Py_CLEAR(clear_module_state->__pyx_int_238750788);
-  Py_CLEAR(clear_module_state->__pyx_int_256609795);
-  Py_CLEAR(clear_module_state->__pyx_slice__6);
+  Py_CLEAR(clear_module_state->__pyx_int_0);
+  Py_CLEAR(clear_module_state->__pyx_int_1);
+  Py_CLEAR(clear_module_state->__pyx_int_47749068);
+  Py_CLEAR(clear_module_state->__pyx_int_49702687);
+  Py_CLEAR(clear_module_state->__pyx_int_56490241);
+  Py_CLEAR(clear_module_state->__pyx_int_168597948);
+  Py_CLEAR(clear_module_state->__pyx_int_171011501);
+  Py_CLEAR(clear_module_state->__pyx_int_258176089);
+  Py_CLEAR(clear_module_state->__pyx_slice__2);
   Py_CLEAR(clear_module_state->__pyx_tuple__4);
-  Py_CLEAR(clear_module_state->__pyx_tuple__5);
-  Py_CLEAR(clear_module_state->__pyx_tuple__7);
+  Py_CLEAR(clear_module_state->__pyx_tuple__6);
   Py_CLEAR(clear_module_state->__pyx_tuple__8);
-  Py_CLEAR(clear_module_state->__pyx_tuple__9);
-  Py_CLEAR(clear_module_state->__pyx_tuple__11);
-  Py_CLEAR(clear_module_state->__pyx_tuple__13);
-  Py_CLEAR(clear_module_state->__pyx_tuple__15);
+  Py_CLEAR(clear_module_state->__pyx_tuple__10);
+  Py_CLEAR(clear_module_state->__pyx_tuple__12);
+  Py_CLEAR(clear_module_state->__pyx_tuple__14);
+  Py_CLEAR(clear_module_state->__pyx_tuple__17);
+  Py_CLEAR(clear_module_state->__pyx_tuple__21);
   Py_CLEAR(clear_module_state->__pyx_tuple__22);
   Py_CLEAR(clear_module_state->__pyx_tuple__24);
-  Py_CLEAR(clear_module_state->__pyx_tuple__28);
-  Py_CLEAR(clear_module_state->__pyx_tuple__30);
-  Py_CLEAR(clear_module_state->__pyx_tuple__32);
-  Py_CLEAR(clear_module_state->__pyx_tuple__34);
-  Py_CLEAR(clear_module_state->__pyx_tuple__35);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__12);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__14);
+  Py_CLEAR(clear_module_state->__pyx_tuple__25);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__3);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__9);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__11);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__13);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__15);
   Py_CLEAR(clear_module_state->__pyx_codeobj__16);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__17);
   Py_CLEAR(clear_module_state->__pyx_codeobj__18);
   Py_CLEAR(clear_module_state->__pyx_codeobj__19);
   Py_CLEAR(clear_module_state->__pyx_codeobj__20);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__21);
   Py_CLEAR(clear_module_state->__pyx_codeobj__23);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__25);
   Py_CLEAR(clear_module_state->__pyx_codeobj__26);
   Py_CLEAR(clear_module_state->__pyx_codeobj__27);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__29);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__31);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__33);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__36);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__37);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__38);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -3431,173 +3525,193 @@
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_ptype_7cpython_4type_type);
   Py_VISIT(traverse_module_state->__pyx_ptype_7cpython_4bool_bool);
   Py_VISIT(traverse_module_state->__pyx_ptype_7cpython_7complex_complex);
-  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data_NamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data_NamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data_MultidictCache);
-  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data_MultidictCache);
-  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data_ImmutableNamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct____contains__);
-  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data___pyx_scope_struct____contains__);
-  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_8contract_ContractedContext);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_8contract_ContractedContext);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_8contract_Contracted);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_8contract_Contracted);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_8contract___pyx_scope_struct__genexpr);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_8contract___pyx_scope_struct_1___call__);
+  Py_VISIT(traverse_module_state->__pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__);
+  Py_VISIT(traverse_module_state->__pyx_type_3pop_8contract___pyx_scope_struct_2___call__);
   Py_VISIT(traverse_module_state->__pyx_n_u_);
-  Py_VISIT(traverse_module_state->__pyx_n_s_AttributeError);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict___reduce);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict___setstat);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict__data);
-  Py_VISIT(traverse_module_state->__pyx_n_u_ImmutableNamespaceDict__data);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict_copy);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_ImmutableNamespaceDict_does_not);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_ImmutableNamespaceDict_does_not_2);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict_get);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict_items);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict_keys);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImmutableNamespaceDict_values);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Contracted);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ContractedAsyncGen);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ContractedAsyncGen___call);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ContractedContext);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ContractedContext___reduce_cytho);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ContractedContext___setstate_cyt);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ContractedContext_get_arguments);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Contracted___call);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Contracted___getstate);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Contracted___reduce_cython);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Contracted___setstate);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Contracted___setstate_cython);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Contracted__load_contracts_local);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0);
   Py_VISIT(traverse_module_state->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_2);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_3);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Item);
-  Py_VISIT(traverse_module_state->__pyx_n_s_KeyError);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Iterable);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_Iterable_str);
   Py_VISIT(traverse_module_state->__pyx_n_s_Mapping);
-  Py_VISIT(traverse_module_state->__pyx_n_s_MultidictCache);
-  Py_VISIT(traverse_module_state->__pyx_n_s_MultidictCache___reduce_cython);
-  Py_VISIT(traverse_module_state->__pyx_n_s_MultidictCache___setstate_cython);
-  Py_VISIT(traverse_module_state->__pyx_n_s_MultidictCache__clear);
-  Py_VISIT(traverse_module_state->__pyx_n_s_NamespaceDict);
-  Py_VISIT(traverse_module_state->__pyx_n_s_NamespaceDict___reduce_cython);
-  Py_VISIT(traverse_module_state->__pyx_n_s_NamespaceDict___setstate_cython);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_None);
   Py_VISIT(traverse_module_state->__pyx_n_s_PickleError);
-  Py_VISIT(traverse_module_state->__pyx_n_s_TypeError);
-  Py_VISIT(traverse_module_state->__pyx_n_s__10);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__2);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__3);
+  Py_VISIT(traverse_module_state->__pyx_n_s__28);
+  Py_VISIT(traverse_module_state->__pyx_kp_u__5);
+  Py_VISIT(traverse_module_state->__pyx_n_s__7);
+  Py_VISIT(traverse_module_state->__pyx_n_s_aiter);
+  Py_VISIT(traverse_module_state->__pyx_n_s_anext);
+  Py_VISIT(traverse_module_state->__pyx_n_s_apply_defaults);
   Py_VISIT(traverse_module_state->__pyx_n_s_args);
+  Py_VISIT(traverse_module_state->__pyx_n_s_arguments);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_VISIT(traverse_module_state->__pyx_n_s_base_dicts);
-  Py_VISIT(traverse_module_state->__pyx_n_s_class_getitem);
-  Py_VISIT(traverse_module_state->__pyx_n_s_clear);
+  Py_VISIT(traverse_module_state->__pyx_n_s_await);
+  Py_VISIT(traverse_module_state->__pyx_n_s_bind);
+  Py_VISIT(traverse_module_state->__pyx_n_s_bool);
+  Py_VISIT(traverse_module_state->__pyx_n_u_bound_signature);
+  Py_VISIT(traverse_module_state->__pyx_n_s_cache);
+  Py_VISIT(traverse_module_state->__pyx_n_u_call);
+  Py_VISIT(traverse_module_state->__pyx_n_s_call_2);
+  Py_VISIT(traverse_module_state->__pyx_n_s_chunk);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
   Py_VISIT(traverse_module_state->__pyx_n_s_close);
+  Py_VISIT(traverse_module_state->__pyx_n_s_cname);
+  Py_VISIT(traverse_module_state->__pyx_n_s_cnames);
   Py_VISIT(traverse_module_state->__pyx_n_s_collections_abc);
-  Py_VISIT(traverse_module_state->__pyx_n_s_contains___locals_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_n_s_copy);
-  Py_VISIT(traverse_module_state->__pyx_n_s_data);
-  Py_VISIT(traverse_module_state->__pyx_n_s_default);
-  Py_VISIT(traverse_module_state->__pyx_n_s_dest);
+  Py_VISIT(traverse_module_state->__pyx_n_s_contract);
+  Py_VISIT(traverse_module_state->__pyx_n_s_contract_context);
+  Py_VISIT(traverse_module_state->__pyx_n_s_contract_functions);
+  Py_VISIT(traverse_module_state->__pyx_n_s_contracts);
+  Py_VISIT(traverse_module_state->__pyx_n_u_contracts);
+  Py_VISIT(traverse_module_state->__pyx_n_u_contracts_2);
+  Py_VISIT(traverse_module_state->__pyx_n_s_create_contracted);
+  Py_VISIT(traverse_module_state->__pyx_n_s_default_contracts);
   Py_VISIT(traverse_module_state->__pyx_n_s_dict);
   Py_VISIT(traverse_module_state->__pyx_n_s_dict_2);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_dict_str_object);
   Py_VISIT(traverse_module_state->__pyx_kp_u_disable);
+  Py_VISIT(traverse_module_state->__pyx_n_s_doc);
   Py_VISIT(traverse_module_state->__pyx_kp_u_enable);
-  Py_VISIT(traverse_module_state->__pyx_n_s_eq);
-  Py_VISIT(traverse_module_state->__pyx_n_s_extend);
-  Py_VISIT(traverse_module_state->__pyx_n_s_freeze);
-  Py_VISIT(traverse_module_state->__pyx_n_s_freeze_locals_genexpr);
+  Py_VISIT(traverse_module_state->__pyx_n_s_fn);
+  Py_VISIT(traverse_module_state->__pyx_n_s_func);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_functools_partial);
   Py_VISIT(traverse_module_state->__pyx_kp_u_gc);
   Py_VISIT(traverse_module_state->__pyx_n_s_genexpr);
-  Py_VISIT(traverse_module_state->__pyx_n_s_get);
-  Py_VISIT(traverse_module_state->__pyx_n_s_getattribute);
+  Py_VISIT(traverse_module_state->__pyx_n_s_get_arguments);
   Py_VISIT(traverse_module_state->__pyx_n_s_getstate);
+  Py_VISIT(traverse_module_state->__pyx_n_s_has_contracts);
+  Py_VISIT(traverse_module_state->__pyx_n_s_hub);
+  Py_VISIT(traverse_module_state->__pyx_n_s_implicit_hub);
+  Py_VISIT(traverse_module_state->__pyx_n_u_implicit_hub);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
+  Py_VISIT(traverse_module_state->__pyx_n_u_init);
+  Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
+  Py_VISIT(traverse_module_state->__pyx_n_s_initializing);
+  Py_VISIT(traverse_module_state->__pyx_n_s_inspect);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
+  Py_VISIT(traverse_module_state->__pyx_n_s_isasyncgenfunction);
   Py_VISIT(traverse_module_state->__pyx_kp_u_isenabled);
-  Py_VISIT(traverse_module_state->__pyx_n_s_items);
-  Py_VISIT(traverse_module_state->__pyx_n_s_key);
-  Py_VISIT(traverse_module_state->__pyx_n_s_keys);
+  Py_VISIT(traverse_module_state->__pyx_n_s_kwargs);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_list_object);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_list_pop_loader_LoadedMod);
+  Py_VISIT(traverse_module_state->__pyx_n_s_load_contract);
+  Py_VISIT(traverse_module_state->__pyx_n_s_loaded_contracts);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
-  Py_VISIT(traverse_module_state->__pyx_n_s_merge_lists);
+  Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
+  Py_VISIT(traverse_module_state->__pyx_n_s_mod);
+  Py_VISIT(traverse_module_state->__pyx_n_s_module);
+  Py_VISIT(traverse_module_state->__pyx_n_s_mro_entries);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
+  Py_VISIT(traverse_module_state->__pyx_n_u_name);
+  Py_VISIT(traverse_module_state->__pyx_n_s_name_2);
   Py_VISIT(traverse_module_state->__pyx_n_s_new);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_not_found_in_any_base_dictionar);
   Py_VISIT(traverse_module_state->__pyx_n_s_object);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_object_has_no_attribute);
   Py_VISIT(traverse_module_state->__pyx_n_s_pickle);
-  Py_VISIT(traverse_module_state->__pyx_n_s_pop_data);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_pop_pop_data_pyx);
+  Py_VISIT(traverse_module_state->__pyx_n_s_pop);
+  Py_VISIT(traverse_module_state->__pyx_n_s_pop_contract);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_pop_hub_Hub);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_pop_hub_Sub);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_pop_pop_contract_pyx);
+  Py_VISIT(traverse_module_state->__pyx_n_u_post);
+  Py_VISIT(traverse_module_state->__pyx_n_s_post_ret);
+  Py_VISIT(traverse_module_state->__pyx_n_u_pre);
+  Py_VISIT(traverse_module_state->__pyx_n_s_pre_ret);
+  Py_VISIT(traverse_module_state->__pyx_n_s_prepare);
+  Py_VISIT(traverse_module_state->__pyx_n_s_process_pre_result);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_PickleError);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_checksum);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_result);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_state);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_type);
-  Py_VISIT(traverse_module_state->__pyx_n_s_pyx_unpickle_ImmutableNamespac);
-  Py_VISIT(traverse_module_state->__pyx_n_s_pyx_unpickle_MultidictCache);
-  Py_VISIT(traverse_module_state->__pyx_n_s_pyx_unpickle_NamespaceDict);
+  Py_VISIT(traverse_module_state->__pyx_n_s_pyx_unpickle_Contracted);
+  Py_VISIT(traverse_module_state->__pyx_n_s_pyx_unpickle_ContractedContext);
   Py_VISIT(traverse_module_state->__pyx_n_s_pyx_vtable);
-  Py_VISIT(traverse_module_state->__pyx_n_s_recursive_update);
+  Py_VISIT(traverse_module_state->__pyx_n_s_qualname);
+  Py_VISIT(traverse_module_state->__pyx_n_s_raws);
   Py_VISIT(traverse_module_state->__pyx_n_s_reduce);
   Py_VISIT(traverse_module_state->__pyx_n_s_reduce_cython);
   Py_VISIT(traverse_module_state->__pyx_n_s_reduce_ex);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ref);
+  Py_VISIT(traverse_module_state->__pyx_n_u_ref);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ret);
+  Py_VISIT(traverse_module_state->__pyx_n_s_return);
   Py_VISIT(traverse_module_state->__pyx_n_s_self);
   Py_VISIT(traverse_module_state->__pyx_n_s_send);
-  Py_VISIT(traverse_module_state->__pyx_n_s_setattr);
+  Py_VISIT(traverse_module_state->__pyx_n_s_set_name);
   Py_VISIT(traverse_module_state->__pyx_n_s_setstate);
   Py_VISIT(traverse_module_state->__pyx_n_s_setstate_cython);
+  Py_VISIT(traverse_module_state->__pyx_n_s_signature);
+  Py_VISIT(traverse_module_state->__pyx_n_s_spec);
   Py_VISIT(traverse_module_state->__pyx_n_s_state);
+  Py_VISIT(traverse_module_state->__pyx_n_s_str);
   Py_VISIT(traverse_module_state->__pyx_kp_s_stringsource);
+  Py_VISIT(traverse_module_state->__pyx_n_s_sum);
+  Py_VISIT(traverse_module_state->__pyx_n_s_super);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
   Py_VISIT(traverse_module_state->__pyx_n_s_throw);
-  Py_VISIT(traverse_module_state->__pyx_n_s_unfreeze);
-  Py_VISIT(traverse_module_state->__pyx_n_s_upd);
   Py_VISIT(traverse_module_state->__pyx_n_s_update);
   Py_VISIT(traverse_module_state->__pyx_n_s_use_setstate);
-  Py_VISIT(traverse_module_state->__pyx_n_s_value);
   Py_VISIT(traverse_module_state->__pyx_n_s_values);
-  Py_VISIT(traverse_module_state->__pyx_int_10383136);
-  Py_VISIT(traverse_module_state->__pyx_int_73280139);
-  Py_VISIT(traverse_module_state->__pyx_int_151484788);
-  Py_VISIT(traverse_module_state->__pyx_int_214639601);
-  Py_VISIT(traverse_module_state->__pyx_int_220666686);
-  Py_VISIT(traverse_module_state->__pyx_int_222419149);
-  Py_VISIT(traverse_module_state->__pyx_int_228825662);
-  Py_VISIT(traverse_module_state->__pyx_int_238750788);
-  Py_VISIT(traverse_module_state->__pyx_int_256609795);
-  Py_VISIT(traverse_module_state->__pyx_slice__6);
+  Py_VISIT(traverse_module_state->__pyx_int_0);
+  Py_VISIT(traverse_module_state->__pyx_int_1);
+  Py_VISIT(traverse_module_state->__pyx_int_47749068);
+  Py_VISIT(traverse_module_state->__pyx_int_49702687);
+  Py_VISIT(traverse_module_state->__pyx_int_56490241);
+  Py_VISIT(traverse_module_state->__pyx_int_168597948);
+  Py_VISIT(traverse_module_state->__pyx_int_171011501);
+  Py_VISIT(traverse_module_state->__pyx_int_258176089);
+  Py_VISIT(traverse_module_state->__pyx_slice__2);
   Py_VISIT(traverse_module_state->__pyx_tuple__4);
-  Py_VISIT(traverse_module_state->__pyx_tuple__5);
-  Py_VISIT(traverse_module_state->__pyx_tuple__7);
+  Py_VISIT(traverse_module_state->__pyx_tuple__6);
   Py_VISIT(traverse_module_state->__pyx_tuple__8);
-  Py_VISIT(traverse_module_state->__pyx_tuple__9);
-  Py_VISIT(traverse_module_state->__pyx_tuple__11);
-  Py_VISIT(traverse_module_state->__pyx_tuple__13);
-  Py_VISIT(traverse_module_state->__pyx_tuple__15);
+  Py_VISIT(traverse_module_state->__pyx_tuple__10);
+  Py_VISIT(traverse_module_state->__pyx_tuple__12);
+  Py_VISIT(traverse_module_state->__pyx_tuple__14);
+  Py_VISIT(traverse_module_state->__pyx_tuple__17);
+  Py_VISIT(traverse_module_state->__pyx_tuple__21);
   Py_VISIT(traverse_module_state->__pyx_tuple__22);
   Py_VISIT(traverse_module_state->__pyx_tuple__24);
-  Py_VISIT(traverse_module_state->__pyx_tuple__28);
-  Py_VISIT(traverse_module_state->__pyx_tuple__30);
-  Py_VISIT(traverse_module_state->__pyx_tuple__32);
-  Py_VISIT(traverse_module_state->__pyx_tuple__34);
-  Py_VISIT(traverse_module_state->__pyx_tuple__35);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__12);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__14);
+  Py_VISIT(traverse_module_state->__pyx_tuple__25);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__3);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__9);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__11);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__13);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__15);
   Py_VISIT(traverse_module_state->__pyx_codeobj__16);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__17);
   Py_VISIT(traverse_module_state->__pyx_codeobj__18);
   Py_VISIT(traverse_module_state->__pyx_codeobj__19);
   Py_VISIT(traverse_module_state->__pyx_codeobj__20);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__21);
   Py_VISIT(traverse_module_state->__pyx_codeobj__23);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__25);
   Py_VISIT(traverse_module_state->__pyx_codeobj__26);
   Py_VISIT(traverse_module_state->__pyx_codeobj__27);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__29);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__31);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__33);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__36);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__37);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__38);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -3708,174 +3822,194 @@
 #if CYTHON_USE_MODULE_STATE
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #if CYTHON_USE_MODULE_STATE
-#define __pyx_type_3pop_4data_NamespaceDict __pyx_mstate_global->__pyx_type_3pop_4data_NamespaceDict
-#define __pyx_type_3pop_4data_MultidictCache __pyx_mstate_global->__pyx_type_3pop_4data_MultidictCache
-#define __pyx_type_3pop_4data_ImmutableNamespaceDict __pyx_mstate_global->__pyx_type_3pop_4data_ImmutableNamespaceDict
-#define __pyx_type_3pop_4data___pyx_scope_struct____contains__ __pyx_mstate_global->__pyx_type_3pop_4data___pyx_scope_struct____contains__
-#define __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr __pyx_mstate_global->__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr
-#define __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr __pyx_mstate_global->__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr
-#define __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr __pyx_mstate_global->__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr
-#endif
-#define __pyx_ptype_3pop_4data_NamespaceDict __pyx_mstate_global->__pyx_ptype_3pop_4data_NamespaceDict
-#define __pyx_ptype_3pop_4data_MultidictCache __pyx_mstate_global->__pyx_ptype_3pop_4data_MultidictCache
-#define __pyx_ptype_3pop_4data_ImmutableNamespaceDict __pyx_mstate_global->__pyx_ptype_3pop_4data_ImmutableNamespaceDict
-#define __pyx_ptype_3pop_4data___pyx_scope_struct____contains__ __pyx_mstate_global->__pyx_ptype_3pop_4data___pyx_scope_struct____contains__
-#define __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr __pyx_mstate_global->__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr
-#define __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr __pyx_mstate_global->__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr
-#define __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr __pyx_mstate_global->__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr
+#define __pyx_type_3pop_8contract_ContractedContext __pyx_mstate_global->__pyx_type_3pop_8contract_ContractedContext
+#define __pyx_type_3pop_8contract_Contracted __pyx_mstate_global->__pyx_type_3pop_8contract_Contracted
+#define __pyx_type_3pop_8contract___pyx_scope_struct__genexpr __pyx_mstate_global->__pyx_type_3pop_8contract___pyx_scope_struct__genexpr
+#define __pyx_type_3pop_8contract___pyx_scope_struct_1___call__ __pyx_mstate_global->__pyx_type_3pop_8contract___pyx_scope_struct_1___call__
+#define __pyx_type_3pop_8contract___pyx_scope_struct_2___call__ __pyx_mstate_global->__pyx_type_3pop_8contract___pyx_scope_struct_2___call__
+#endif
+#define __pyx_ptype_3pop_8contract_ContractedContext __pyx_mstate_global->__pyx_ptype_3pop_8contract_ContractedContext
+#define __pyx_ptype_3pop_8contract_Contracted __pyx_mstate_global->__pyx_ptype_3pop_8contract_Contracted
+#define __pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr __pyx_mstate_global->__pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr
+#define __pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__ __pyx_mstate_global->__pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__
+#define __pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__ __pyx_mstate_global->__pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__
 #define __pyx_n_u_ __pyx_mstate_global->__pyx_n_u_
-#define __pyx_n_s_AttributeError __pyx_mstate_global->__pyx_n_s_AttributeError
-#define __pyx_n_s_ImmutableNamespaceDict __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict
-#define __pyx_n_s_ImmutableNamespaceDict___reduce __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict___reduce
-#define __pyx_n_s_ImmutableNamespaceDict___setstat __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict___setstat
-#define __pyx_n_s_ImmutableNamespaceDict__data __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict__data
-#define __pyx_n_u_ImmutableNamespaceDict__data __pyx_mstate_global->__pyx_n_u_ImmutableNamespaceDict__data
-#define __pyx_n_s_ImmutableNamespaceDict_copy __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict_copy
-#define __pyx_kp_u_ImmutableNamespaceDict_does_not __pyx_mstate_global->__pyx_kp_u_ImmutableNamespaceDict_does_not
-#define __pyx_kp_u_ImmutableNamespaceDict_does_not_2 __pyx_mstate_global->__pyx_kp_u_ImmutableNamespaceDict_does_not_2
-#define __pyx_n_s_ImmutableNamespaceDict_get __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict_get
-#define __pyx_n_s_ImmutableNamespaceDict_items __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict_items
-#define __pyx_n_s_ImmutableNamespaceDict_keys __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict_keys
-#define __pyx_n_s_ImmutableNamespaceDict_values __pyx_mstate_global->__pyx_n_s_ImmutableNamespaceDict_values
+#define __pyx_n_s_Contracted __pyx_mstate_global->__pyx_n_s_Contracted
+#define __pyx_n_s_ContractedAsyncGen __pyx_mstate_global->__pyx_n_s_ContractedAsyncGen
+#define __pyx_n_s_ContractedAsyncGen___call __pyx_mstate_global->__pyx_n_s_ContractedAsyncGen___call
+#define __pyx_n_s_ContractedContext __pyx_mstate_global->__pyx_n_s_ContractedContext
+#define __pyx_n_s_ContractedContext___reduce_cytho __pyx_mstate_global->__pyx_n_s_ContractedContext___reduce_cytho
+#define __pyx_n_s_ContractedContext___setstate_cyt __pyx_mstate_global->__pyx_n_s_ContractedContext___setstate_cyt
+#define __pyx_n_s_ContractedContext_get_arguments __pyx_mstate_global->__pyx_n_s_ContractedContext_get_arguments
+#define __pyx_n_s_Contracted___call __pyx_mstate_global->__pyx_n_s_Contracted___call
+#define __pyx_n_s_Contracted___getstate __pyx_mstate_global->__pyx_n_s_Contracted___getstate
+#define __pyx_n_s_Contracted___reduce_cython __pyx_mstate_global->__pyx_n_s_Contracted___reduce_cython
+#define __pyx_n_s_Contracted___setstate __pyx_mstate_global->__pyx_n_s_Contracted___setstate
+#define __pyx_n_s_Contracted___setstate_cython __pyx_mstate_global->__pyx_n_s_Contracted___setstate_cython
+#define __pyx_n_s_Contracted__load_contracts_local __pyx_mstate_global->__pyx_n_s_Contracted__load_contracts_local
 #define __pyx_kp_s_Incompatible_checksums_0x_x_vs_0 __pyx_mstate_global->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0
 #define __pyx_kp_s_Incompatible_checksums_0x_x_vs_0_2 __pyx_mstate_global->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_2
-#define __pyx_kp_s_Incompatible_checksums_0x_x_vs_0_3 __pyx_mstate_global->__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_3
-#define __pyx_kp_u_Item __pyx_mstate_global->__pyx_kp_u_Item
-#define __pyx_n_s_KeyError __pyx_mstate_global->__pyx_n_s_KeyError
+#define __pyx_n_s_Iterable __pyx_mstate_global->__pyx_n_s_Iterable
+#define __pyx_kp_s_Iterable_str __pyx_mstate_global->__pyx_kp_s_Iterable_str
 #define __pyx_n_s_Mapping __pyx_mstate_global->__pyx_n_s_Mapping
-#define __pyx_n_s_MultidictCache __pyx_mstate_global->__pyx_n_s_MultidictCache
-#define __pyx_n_s_MultidictCache___reduce_cython __pyx_mstate_global->__pyx_n_s_MultidictCache___reduce_cython
-#define __pyx_n_s_MultidictCache___setstate_cython __pyx_mstate_global->__pyx_n_s_MultidictCache___setstate_cython
-#define __pyx_n_s_MultidictCache__clear __pyx_mstate_global->__pyx_n_s_MultidictCache__clear
-#define __pyx_n_s_NamespaceDict __pyx_mstate_global->__pyx_n_s_NamespaceDict
-#define __pyx_n_s_NamespaceDict___reduce_cython __pyx_mstate_global->__pyx_n_s_NamespaceDict___reduce_cython
-#define __pyx_n_s_NamespaceDict___setstate_cython __pyx_mstate_global->__pyx_n_s_NamespaceDict___setstate_cython
+#define __pyx_kp_u_None __pyx_mstate_global->__pyx_kp_u_None
 #define __pyx_n_s_PickleError __pyx_mstate_global->__pyx_n_s_PickleError
-#define __pyx_n_s_TypeError __pyx_mstate_global->__pyx_n_s_TypeError
-#define __pyx_n_s__10 __pyx_mstate_global->__pyx_n_s__10
-#define __pyx_kp_u__2 __pyx_mstate_global->__pyx_kp_u__2
-#define __pyx_kp_u__3 __pyx_mstate_global->__pyx_kp_u__3
+#define __pyx_n_s__28 __pyx_mstate_global->__pyx_n_s__28
+#define __pyx_kp_u__5 __pyx_mstate_global->__pyx_kp_u__5
+#define __pyx_n_s__7 __pyx_mstate_global->__pyx_n_s__7
+#define __pyx_n_s_aiter __pyx_mstate_global->__pyx_n_s_aiter
+#define __pyx_n_s_anext __pyx_mstate_global->__pyx_n_s_anext
+#define __pyx_n_s_apply_defaults __pyx_mstate_global->__pyx_n_s_apply_defaults
 #define __pyx_n_s_args __pyx_mstate_global->__pyx_n_s_args
+#define __pyx_n_s_arguments __pyx_mstate_global->__pyx_n_s_arguments
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
-#define __pyx_n_s_base_dicts __pyx_mstate_global->__pyx_n_s_base_dicts
-#define __pyx_n_s_class_getitem __pyx_mstate_global->__pyx_n_s_class_getitem
-#define __pyx_n_s_clear __pyx_mstate_global->__pyx_n_s_clear
+#define __pyx_n_s_await __pyx_mstate_global->__pyx_n_s_await
+#define __pyx_n_s_bind __pyx_mstate_global->__pyx_n_s_bind
+#define __pyx_n_s_bool __pyx_mstate_global->__pyx_n_s_bool
+#define __pyx_n_u_bound_signature __pyx_mstate_global->__pyx_n_u_bound_signature
+#define __pyx_n_s_cache __pyx_mstate_global->__pyx_n_s_cache
+#define __pyx_n_u_call __pyx_mstate_global->__pyx_n_u_call
+#define __pyx_n_s_call_2 __pyx_mstate_global->__pyx_n_s_call_2
+#define __pyx_n_s_chunk __pyx_mstate_global->__pyx_n_s_chunk
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
 #define __pyx_n_s_close __pyx_mstate_global->__pyx_n_s_close
+#define __pyx_n_s_cname __pyx_mstate_global->__pyx_n_s_cname
+#define __pyx_n_s_cnames __pyx_mstate_global->__pyx_n_s_cnames
 #define __pyx_n_s_collections_abc __pyx_mstate_global->__pyx_n_s_collections_abc
-#define __pyx_n_s_contains___locals_genexpr __pyx_mstate_global->__pyx_n_s_contains___locals_genexpr
-#define __pyx_n_s_copy __pyx_mstate_global->__pyx_n_s_copy
-#define __pyx_n_s_data __pyx_mstate_global->__pyx_n_s_data
-#define __pyx_n_s_default __pyx_mstate_global->__pyx_n_s_default
-#define __pyx_n_s_dest __pyx_mstate_global->__pyx_n_s_dest
+#define __pyx_n_s_contract __pyx_mstate_global->__pyx_n_s_contract
+#define __pyx_n_s_contract_context __pyx_mstate_global->__pyx_n_s_contract_context
+#define __pyx_n_s_contract_functions __pyx_mstate_global->__pyx_n_s_contract_functions
+#define __pyx_n_s_contracts __pyx_mstate_global->__pyx_n_s_contracts
+#define __pyx_n_u_contracts __pyx_mstate_global->__pyx_n_u_contracts
+#define __pyx_n_u_contracts_2 __pyx_mstate_global->__pyx_n_u_contracts_2
+#define __pyx_n_s_create_contracted __pyx_mstate_global->__pyx_n_s_create_contracted
+#define __pyx_n_s_default_contracts __pyx_mstate_global->__pyx_n_s_default_contracts
 #define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
 #define __pyx_n_s_dict_2 __pyx_mstate_global->__pyx_n_s_dict_2
+#define __pyx_kp_s_dict_str_object __pyx_mstate_global->__pyx_kp_s_dict_str_object
 #define __pyx_kp_u_disable __pyx_mstate_global->__pyx_kp_u_disable
+#define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
 #define __pyx_kp_u_enable __pyx_mstate_global->__pyx_kp_u_enable
-#define __pyx_n_s_eq __pyx_mstate_global->__pyx_n_s_eq
-#define __pyx_n_s_extend __pyx_mstate_global->__pyx_n_s_extend
-#define __pyx_n_s_freeze __pyx_mstate_global->__pyx_n_s_freeze
-#define __pyx_n_s_freeze_locals_genexpr __pyx_mstate_global->__pyx_n_s_freeze_locals_genexpr
+#define __pyx_n_s_fn __pyx_mstate_global->__pyx_n_s_fn
+#define __pyx_n_s_func __pyx_mstate_global->__pyx_n_s_func
+#define __pyx_kp_s_functools_partial __pyx_mstate_global->__pyx_kp_s_functools_partial
 #define __pyx_kp_u_gc __pyx_mstate_global->__pyx_kp_u_gc
 #define __pyx_n_s_genexpr __pyx_mstate_global->__pyx_n_s_genexpr
-#define __pyx_n_s_get __pyx_mstate_global->__pyx_n_s_get
-#define __pyx_n_s_getattribute __pyx_mstate_global->__pyx_n_s_getattribute
+#define __pyx_n_s_get_arguments __pyx_mstate_global->__pyx_n_s_get_arguments
 #define __pyx_n_s_getstate __pyx_mstate_global->__pyx_n_s_getstate
+#define __pyx_n_s_has_contracts __pyx_mstate_global->__pyx_n_s_has_contracts
+#define __pyx_n_s_hub __pyx_mstate_global->__pyx_n_s_hub
+#define __pyx_n_s_implicit_hub __pyx_mstate_global->__pyx_n_s_implicit_hub
+#define __pyx_n_u_implicit_hub __pyx_mstate_global->__pyx_n_u_implicit_hub
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
+#define __pyx_n_u_init __pyx_mstate_global->__pyx_n_u_init
+#define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
+#define __pyx_n_s_initializing __pyx_mstate_global->__pyx_n_s_initializing
+#define __pyx_n_s_inspect __pyx_mstate_global->__pyx_n_s_inspect
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
+#define __pyx_n_s_isasyncgenfunction __pyx_mstate_global->__pyx_n_s_isasyncgenfunction
 #define __pyx_kp_u_isenabled __pyx_mstate_global->__pyx_kp_u_isenabled
-#define __pyx_n_s_items __pyx_mstate_global->__pyx_n_s_items
-#define __pyx_n_s_key __pyx_mstate_global->__pyx_n_s_key
-#define __pyx_n_s_keys __pyx_mstate_global->__pyx_n_s_keys
+#define __pyx_n_s_kwargs __pyx_mstate_global->__pyx_n_s_kwargs
+#define __pyx_kp_s_list_object __pyx_mstate_global->__pyx_kp_s_list_object
+#define __pyx_kp_s_list_pop_loader_LoadedMod __pyx_mstate_global->__pyx_kp_s_list_pop_loader_LoadedMod
+#define __pyx_n_s_load_contract __pyx_mstate_global->__pyx_n_s_load_contract
+#define __pyx_n_s_loaded_contracts __pyx_mstate_global->__pyx_n_s_loaded_contracts
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
-#define __pyx_n_s_merge_lists __pyx_mstate_global->__pyx_n_s_merge_lists
+#define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
+#define __pyx_n_s_mod __pyx_mstate_global->__pyx_n_s_mod
+#define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
+#define __pyx_n_s_mro_entries __pyx_mstate_global->__pyx_n_s_mro_entries
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
+#define __pyx_n_u_name __pyx_mstate_global->__pyx_n_u_name
+#define __pyx_n_s_name_2 __pyx_mstate_global->__pyx_n_s_name_2
 #define __pyx_n_s_new __pyx_mstate_global->__pyx_n_s_new
-#define __pyx_kp_u_not_found_in_any_base_dictionar __pyx_mstate_global->__pyx_kp_u_not_found_in_any_base_dictionar
 #define __pyx_n_s_object __pyx_mstate_global->__pyx_n_s_object
-#define __pyx_kp_u_object_has_no_attribute __pyx_mstate_global->__pyx_kp_u_object_has_no_attribute
 #define __pyx_n_s_pickle __pyx_mstate_global->__pyx_n_s_pickle
-#define __pyx_n_s_pop_data __pyx_mstate_global->__pyx_n_s_pop_data
-#define __pyx_kp_s_pop_pop_data_pyx __pyx_mstate_global->__pyx_kp_s_pop_pop_data_pyx
+#define __pyx_n_s_pop __pyx_mstate_global->__pyx_n_s_pop
+#define __pyx_n_s_pop_contract __pyx_mstate_global->__pyx_n_s_pop_contract
+#define __pyx_kp_s_pop_hub_Hub __pyx_mstate_global->__pyx_kp_s_pop_hub_Hub
+#define __pyx_kp_s_pop_hub_Sub __pyx_mstate_global->__pyx_kp_s_pop_hub_Sub
+#define __pyx_kp_s_pop_pop_contract_pyx __pyx_mstate_global->__pyx_kp_s_pop_pop_contract_pyx
+#define __pyx_n_u_post __pyx_mstate_global->__pyx_n_u_post
+#define __pyx_n_s_post_ret __pyx_mstate_global->__pyx_n_s_post_ret
+#define __pyx_n_u_pre __pyx_mstate_global->__pyx_n_u_pre
+#define __pyx_n_s_pre_ret __pyx_mstate_global->__pyx_n_s_pre_ret
+#define __pyx_n_s_prepare __pyx_mstate_global->__pyx_n_s_prepare
+#define __pyx_n_s_process_pre_result __pyx_mstate_global->__pyx_n_s_process_pre_result
 #define __pyx_n_s_pyx_PickleError __pyx_mstate_global->__pyx_n_s_pyx_PickleError
 #define __pyx_n_s_pyx_checksum __pyx_mstate_global->__pyx_n_s_pyx_checksum
 #define __pyx_n_s_pyx_result __pyx_mstate_global->__pyx_n_s_pyx_result
 #define __pyx_n_s_pyx_state __pyx_mstate_global->__pyx_n_s_pyx_state
 #define __pyx_n_s_pyx_type __pyx_mstate_global->__pyx_n_s_pyx_type
-#define __pyx_n_s_pyx_unpickle_ImmutableNamespac __pyx_mstate_global->__pyx_n_s_pyx_unpickle_ImmutableNamespac
-#define __pyx_n_s_pyx_unpickle_MultidictCache __pyx_mstate_global->__pyx_n_s_pyx_unpickle_MultidictCache
-#define __pyx_n_s_pyx_unpickle_NamespaceDict __pyx_mstate_global->__pyx_n_s_pyx_unpickle_NamespaceDict
+#define __pyx_n_s_pyx_unpickle_Contracted __pyx_mstate_global->__pyx_n_s_pyx_unpickle_Contracted
+#define __pyx_n_s_pyx_unpickle_ContractedContext __pyx_mstate_global->__pyx_n_s_pyx_unpickle_ContractedContext
 #define __pyx_n_s_pyx_vtable __pyx_mstate_global->__pyx_n_s_pyx_vtable
-#define __pyx_n_s_recursive_update __pyx_mstate_global->__pyx_n_s_recursive_update
+#define __pyx_n_s_qualname __pyx_mstate_global->__pyx_n_s_qualname
+#define __pyx_n_s_raws __pyx_mstate_global->__pyx_n_s_raws
 #define __pyx_n_s_reduce __pyx_mstate_global->__pyx_n_s_reduce
 #define __pyx_n_s_reduce_cython __pyx_mstate_global->__pyx_n_s_reduce_cython
 #define __pyx_n_s_reduce_ex __pyx_mstate_global->__pyx_n_s_reduce_ex
+#define __pyx_n_s_ref __pyx_mstate_global->__pyx_n_s_ref
+#define __pyx_n_u_ref __pyx_mstate_global->__pyx_n_u_ref
+#define __pyx_n_s_ret __pyx_mstate_global->__pyx_n_s_ret
+#define __pyx_n_s_return __pyx_mstate_global->__pyx_n_s_return
 #define __pyx_n_s_self __pyx_mstate_global->__pyx_n_s_self
 #define __pyx_n_s_send __pyx_mstate_global->__pyx_n_s_send
-#define __pyx_n_s_setattr __pyx_mstate_global->__pyx_n_s_setattr
+#define __pyx_n_s_set_name __pyx_mstate_global->__pyx_n_s_set_name
 #define __pyx_n_s_setstate __pyx_mstate_global->__pyx_n_s_setstate
 #define __pyx_n_s_setstate_cython __pyx_mstate_global->__pyx_n_s_setstate_cython
+#define __pyx_n_s_signature __pyx_mstate_global->__pyx_n_s_signature
+#define __pyx_n_s_spec __pyx_mstate_global->__pyx_n_s_spec
 #define __pyx_n_s_state __pyx_mstate_global->__pyx_n_s_state
+#define __pyx_n_s_str __pyx_mstate_global->__pyx_n_s_str
 #define __pyx_kp_s_stringsource __pyx_mstate_global->__pyx_kp_s_stringsource
+#define __pyx_n_s_sum __pyx_mstate_global->__pyx_n_s_sum
+#define __pyx_n_s_super __pyx_mstate_global->__pyx_n_s_super
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
 #define __pyx_n_s_throw __pyx_mstate_global->__pyx_n_s_throw
-#define __pyx_n_s_unfreeze __pyx_mstate_global->__pyx_n_s_unfreeze
-#define __pyx_n_s_upd __pyx_mstate_global->__pyx_n_s_upd
 #define __pyx_n_s_update __pyx_mstate_global->__pyx_n_s_update
 #define __pyx_n_s_use_setstate __pyx_mstate_global->__pyx_n_s_use_setstate
-#define __pyx_n_s_value __pyx_mstate_global->__pyx_n_s_value
 #define __pyx_n_s_values __pyx_mstate_global->__pyx_n_s_values
-#define __pyx_int_10383136 __pyx_mstate_global->__pyx_int_10383136
-#define __pyx_int_73280139 __pyx_mstate_global->__pyx_int_73280139
-#define __pyx_int_151484788 __pyx_mstate_global->__pyx_int_151484788
-#define __pyx_int_214639601 __pyx_mstate_global->__pyx_int_214639601
-#define __pyx_int_220666686 __pyx_mstate_global->__pyx_int_220666686
-#define __pyx_int_222419149 __pyx_mstate_global->__pyx_int_222419149
-#define __pyx_int_228825662 __pyx_mstate_global->__pyx_int_228825662
-#define __pyx_int_238750788 __pyx_mstate_global->__pyx_int_238750788
-#define __pyx_int_256609795 __pyx_mstate_global->__pyx_int_256609795
-#define __pyx_slice__6 __pyx_mstate_global->__pyx_slice__6
+#define __pyx_int_0 __pyx_mstate_global->__pyx_int_0
+#define __pyx_int_1 __pyx_mstate_global->__pyx_int_1
+#define __pyx_int_47749068 __pyx_mstate_global->__pyx_int_47749068
+#define __pyx_int_49702687 __pyx_mstate_global->__pyx_int_49702687
+#define __pyx_int_56490241 __pyx_mstate_global->__pyx_int_56490241
+#define __pyx_int_168597948 __pyx_mstate_global->__pyx_int_168597948
+#define __pyx_int_171011501 __pyx_mstate_global->__pyx_int_171011501
+#define __pyx_int_258176089 __pyx_mstate_global->__pyx_int_258176089
+#define __pyx_slice__2 __pyx_mstate_global->__pyx_slice__2
 #define __pyx_tuple__4 __pyx_mstate_global->__pyx_tuple__4
-#define __pyx_tuple__5 __pyx_mstate_global->__pyx_tuple__5
-#define __pyx_tuple__7 __pyx_mstate_global->__pyx_tuple__7
+#define __pyx_tuple__6 __pyx_mstate_global->__pyx_tuple__6
 #define __pyx_tuple__8 __pyx_mstate_global->__pyx_tuple__8
-#define __pyx_tuple__9 __pyx_mstate_global->__pyx_tuple__9
-#define __pyx_tuple__11 __pyx_mstate_global->__pyx_tuple__11
-#define __pyx_tuple__13 __pyx_mstate_global->__pyx_tuple__13
-#define __pyx_tuple__15 __pyx_mstate_global->__pyx_tuple__15
+#define __pyx_tuple__10 __pyx_mstate_global->__pyx_tuple__10
+#define __pyx_tuple__12 __pyx_mstate_global->__pyx_tuple__12
+#define __pyx_tuple__14 __pyx_mstate_global->__pyx_tuple__14
+#define __pyx_tuple__17 __pyx_mstate_global->__pyx_tuple__17
+#define __pyx_tuple__21 __pyx_mstate_global->__pyx_tuple__21
 #define __pyx_tuple__22 __pyx_mstate_global->__pyx_tuple__22
 #define __pyx_tuple__24 __pyx_mstate_global->__pyx_tuple__24
-#define __pyx_tuple__28 __pyx_mstate_global->__pyx_tuple__28
-#define __pyx_tuple__30 __pyx_mstate_global->__pyx_tuple__30
-#define __pyx_tuple__32 __pyx_mstate_global->__pyx_tuple__32
-#define __pyx_tuple__34 __pyx_mstate_global->__pyx_tuple__34
-#define __pyx_tuple__35 __pyx_mstate_global->__pyx_tuple__35
-#define __pyx_codeobj__12 __pyx_mstate_global->__pyx_codeobj__12
-#define __pyx_codeobj__14 __pyx_mstate_global->__pyx_codeobj__14
+#define __pyx_tuple__25 __pyx_mstate_global->__pyx_tuple__25
+#define __pyx_codeobj__3 __pyx_mstate_global->__pyx_codeobj__3
+#define __pyx_codeobj__9 __pyx_mstate_global->__pyx_codeobj__9
+#define __pyx_codeobj__11 __pyx_mstate_global->__pyx_codeobj__11
+#define __pyx_codeobj__13 __pyx_mstate_global->__pyx_codeobj__13
+#define __pyx_codeobj__15 __pyx_mstate_global->__pyx_codeobj__15
 #define __pyx_codeobj__16 __pyx_mstate_global->__pyx_codeobj__16
-#define __pyx_codeobj__17 __pyx_mstate_global->__pyx_codeobj__17
 #define __pyx_codeobj__18 __pyx_mstate_global->__pyx_codeobj__18
 #define __pyx_codeobj__19 __pyx_mstate_global->__pyx_codeobj__19
 #define __pyx_codeobj__20 __pyx_mstate_global->__pyx_codeobj__20
-#define __pyx_codeobj__21 __pyx_mstate_global->__pyx_codeobj__21
 #define __pyx_codeobj__23 __pyx_mstate_global->__pyx_codeobj__23
-#define __pyx_codeobj__25 __pyx_mstate_global->__pyx_codeobj__25
 #define __pyx_codeobj__26 __pyx_mstate_global->__pyx_codeobj__26
 #define __pyx_codeobj__27 __pyx_mstate_global->__pyx_codeobj__27
-#define __pyx_codeobj__29 __pyx_mstate_global->__pyx_codeobj__29
-#define __pyx_codeobj__31 __pyx_mstate_global->__pyx_codeobj__31
-#define __pyx_codeobj__33 __pyx_mstate_global->__pyx_codeobj__33
-#define __pyx_codeobj__36 __pyx_mstate_global->__pyx_codeobj__36
-#define __pyx_codeobj__37 __pyx_mstate_global->__pyx_codeobj__37
-#define __pyx_codeobj__38 __pyx_mstate_global->__pyx_codeobj__38
 /* #### Code section: module_code ### */
 
 /* "cpython/complex.pxd":19
  * 
  *         @property
  *         cdef inline double real(self) noexcept:             # <<<<<<<<<<<<<<
  *             return self.cval.real
@@ -4163,414 +4297,1409 @@
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_pyvalue);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":12
+/* "pop/pop.contract.pyx":24
+ *         dict[str, object] __cache
  * 
- * cdef class NamespaceDict(dict[str, object]):
- *     def __getattr__(self, key: str):             # <<<<<<<<<<<<<<
- *         if key.startswith("__") and key.endswith("__"):
- *             self.__getattribute__(key)
+ *     def __init__(             # <<<<<<<<<<<<<<
+ *         self,
+ *         func: object,
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_1__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_1__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
+static int __pyx_pw_3pop_8contract_17ContractedContext_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
+  PyObject *__pyx_v_func = 0;
+  PyObject *__pyx_v_args = 0;
+  PyObject *__pyx_v_kwargs = 0;
+  PyObject *__pyx_v_signature = 0;
+  PyObject *__pyx_v_ref = 0;
+  PyObject *__pyx_v_name = 0;
+  PyObject *__pyx_v_ret = 0;
+  PyObject *__pyx_v_cache = 0;
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[8] = {0,0,0,0,0,0,0,0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__getattr__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return -1;
+  #endif
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_key), (&PyUnicode_Type), 0, "key", 1))) __PYX_ERR(0, 12, __pyx_L1_error)
-  __pyx_r = __pyx_pf_3pop_4data_13NamespaceDict___getattr__(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v_self), ((PyObject*)__pyx_v_key));
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_func,&__pyx_n_s_args,&__pyx_n_s_kwargs,&__pyx_n_s_signature,&__pyx_n_s_ref,&__pyx_n_s_name,&__pyx_n_s_ret,&__pyx_n_s_cache,0};
+
+    /* "pop/pop.contract.pyx":32
+ *         ref: str,
+ *         name: str,
+ *         ret=None,             # <<<<<<<<<<<<<<
+ *         cache=None,
+ *     ):
+ */
+    values[6] = __Pyx_Arg_NewRef_VARARGS(((PyObject *)Py_None));
+
+    /* "pop/pop.contract.pyx":33
+ *         name: str,
+ *         ret=None,
+ *         cache=None,             # <<<<<<<<<<<<<<
+ *     ):
+ *         if cache is None:
+ */
+    values[7] = __Pyx_Arg_NewRef_VARARGS(((PyObject *)Py_None));
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  8: values[7] = __Pyx_Arg_VARARGS(__pyx_args, 7);
+        CYTHON_FALLTHROUGH;
+        case  7: values[6] = __Pyx_Arg_VARARGS(__pyx_args, 6);
+        CYTHON_FALLTHROUGH;
+        case  6: values[5] = __Pyx_Arg_VARARGS(__pyx_args, 5);
+        CYTHON_FALLTHROUGH;
+        case  5: values[4] = __Pyx_Arg_VARARGS(__pyx_args, 4);
+        CYTHON_FALLTHROUGH;
+        case  4: values[3] = __Pyx_Arg_VARARGS(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_VARARGS(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_VARARGS(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_VARARGS(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_VARARGS(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_func)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 24, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_args)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[1]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 24, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 6, 8, 1); __PYX_ERR(0, 24, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (likely((values[2] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_kwargs)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[2]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 24, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 6, 8, 2); __PYX_ERR(0, 24, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  3:
+        if (likely((values[3] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_signature)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[3]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 24, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 6, 8, 3); __PYX_ERR(0, 24, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  4:
+        if (likely((values[4] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_ref)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[4]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 24, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 6, 8, 4); __PYX_ERR(0, 24, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  5:
+        if (likely((values[5] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_name)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[5]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 24, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 6, 8, 5); __PYX_ERR(0, 24, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  6:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_ret);
+          if (value) { values[6] = __Pyx_Arg_NewRef_VARARGS(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 24, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  7:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_cache);
+          if (value) { values[7] = __Pyx_Arg_NewRef_VARARGS(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 24, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 24, __pyx_L3_error)
+      }
+    } else {
+      switch (__pyx_nargs) {
+        case  8: values[7] = __Pyx_Arg_VARARGS(__pyx_args, 7);
+        CYTHON_FALLTHROUGH;
+        case  7: values[6] = __Pyx_Arg_VARARGS(__pyx_args, 6);
+        CYTHON_FALLTHROUGH;
+        case  6: values[5] = __Pyx_Arg_VARARGS(__pyx_args, 5);
+        values[4] = __Pyx_Arg_VARARGS(__pyx_args, 4);
+        values[3] = __Pyx_Arg_VARARGS(__pyx_args, 3);
+        values[2] = __Pyx_Arg_VARARGS(__pyx_args, 2);
+        values[1] = __Pyx_Arg_VARARGS(__pyx_args, 1);
+        values[0] = __Pyx_Arg_VARARGS(__pyx_args, 0);
+        break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+    }
+    __pyx_v_func = values[0];
+    __pyx_v_args = ((PyObject*)values[1]);
+    __pyx_v_kwargs = ((PyObject*)values[2]);
+    __pyx_v_signature = values[3];
+    __pyx_v_ref = ((PyObject*)values[4]);
+    __pyx_v_name = ((PyObject*)values[5]);
+    __pyx_v_ret = values[6];
+    __pyx_v_cache = values[7];
+  }
+  goto __pyx_L6_skip;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("__init__", 0, 6, 8, __pyx_nargs); __PYX_ERR(0, 24, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
+    }
+  }
+  __Pyx_AddTraceback("pop.contract.ContractedContext.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return -1;
+  __pyx_L4_argument_unpacking_done:;
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_args), (&PyTuple_Type), 0, "args", 1))) __PYX_ERR(0, 27, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_kwargs), (&PyDict_Type), 0, "kwargs", 1))) __PYX_ERR(0, 28, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_ref), (&PyUnicode_Type), 0, "ref", 1))) __PYX_ERR(0, 30, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_name), (&PyUnicode_Type), 0, "name", 1))) __PYX_ERR(0, 31, __pyx_L1_error)
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext___init__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self), __pyx_v_func, __pyx_v_args, __pyx_v_kwargs, __pyx_v_signature, __pyx_v_ref, __pyx_v_name, __pyx_v_ret, __pyx_v_cache);
+
+  /* "pop/pop.contract.pyx":24
+ *         dict[str, object] __cache
+ * 
+ *     def __init__(             # <<<<<<<<<<<<<<
+ *         self,
+ *         func: object,
+ */
 
   /* function exit code */
   goto __pyx_L0;
   __pyx_L1_error:;
-  __pyx_r = NULL;
+  __pyx_r = -1;
+  __pyx_L0:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
+    }
+  }
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext___init__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_func, PyObject *__pyx_v_args, PyObject *__pyx_v_kwargs, PyObject *__pyx_v_signature, PyObject *__pyx_v_ref, PyObject *__pyx_v_name, PyObject *__pyx_v_ret, PyObject *__pyx_v_cache) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  int __pyx_t_1;
+  PyObject *__pyx_t_2 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__init__", 0);
+  __Pyx_INCREF(__pyx_v_cache);
+
+  /* "pop/pop.contract.pyx":35
+ *         cache=None,
+ *     ):
+ *         if cache is None:             # <<<<<<<<<<<<<<
+ *             cache = {}
+ * 
+ */
+  __pyx_t_1 = (__pyx_v_cache == Py_None);
+  if (__pyx_t_1) {
+
+    /* "pop/pop.contract.pyx":36
+ *     ):
+ *         if cache is None:
+ *             cache = {}             # <<<<<<<<<<<<<<
+ * 
+ *         self.func = func
+ */
+    __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 36, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF_SET(__pyx_v_cache, __pyx_t_2);
+    __pyx_t_2 = 0;
+
+    /* "pop/pop.contract.pyx":35
+ *         cache=None,
+ *     ):
+ *         if cache is None:             # <<<<<<<<<<<<<<
+ *             cache = {}
+ * 
+ */
+  }
+
+  /* "pop/pop.contract.pyx":38
+ *             cache = {}
+ * 
+ *         self.func = func             # <<<<<<<<<<<<<<
+ *         self.args = list(args)
+ *         self.kwargs = kwargs
+ */
+  __Pyx_INCREF(__pyx_v_func);
+  __Pyx_GIVEREF(__pyx_v_func);
+  __Pyx_GOTREF(__pyx_v_self->func);
+  __Pyx_DECREF(__pyx_v_self->func);
+  __pyx_v_self->func = __pyx_v_func;
+
+  /* "pop/pop.contract.pyx":39
+ * 
+ *         self.func = func
+ *         self.args = list(args)             # <<<<<<<<<<<<<<
+ *         self.kwargs = kwargs
+ *         self.signature = signature
+ */
+  __pyx_t_2 = PySequence_List(__pyx_v_args); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 39, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_GIVEREF(__pyx_t_2);
+  __Pyx_GOTREF(__pyx_v_self->args);
+  __Pyx_DECREF(__pyx_v_self->args);
+  __pyx_v_self->args = ((PyObject*)__pyx_t_2);
+  __pyx_t_2 = 0;
+
+  /* "pop/pop.contract.pyx":40
+ *         self.func = func
+ *         self.args = list(args)
+ *         self.kwargs = kwargs             # <<<<<<<<<<<<<<
+ *         self.signature = signature
+ *         self.ref = ref
+ */
+  __Pyx_INCREF(__pyx_v_kwargs);
+  __Pyx_GIVEREF(__pyx_v_kwargs);
+  __Pyx_GOTREF(__pyx_v_self->kwargs);
+  __Pyx_DECREF(__pyx_v_self->kwargs);
+  __pyx_v_self->kwargs = __pyx_v_kwargs;
+
+  /* "pop/pop.contract.pyx":41
+ *         self.args = list(args)
+ *         self.kwargs = kwargs
+ *         self.signature = signature             # <<<<<<<<<<<<<<
+ *         self.ref = ref
+ *         self.__name__ = name
+ */
+  __Pyx_INCREF(__pyx_v_signature);
+  __Pyx_GIVEREF(__pyx_v_signature);
+  __Pyx_GOTREF(__pyx_v_self->signature);
+  __Pyx_DECREF(__pyx_v_self->signature);
+  __pyx_v_self->signature = __pyx_v_signature;
+
+  /* "pop/pop.contract.pyx":42
+ *         self.kwargs = kwargs
+ *         self.signature = signature
+ *         self.ref = ref             # <<<<<<<<<<<<<<
+ *         self.__name__ = name
+ *         self.ret = ret
+ */
+  __Pyx_INCREF(__pyx_v_ref);
+  __Pyx_GIVEREF(__pyx_v_ref);
+  __Pyx_GOTREF(__pyx_v_self->ref);
+  __Pyx_DECREF(__pyx_v_self->ref);
+  __pyx_v_self->ref = __pyx_v_ref;
+
+  /* "pop/pop.contract.pyx":43
+ *         self.signature = signature
+ *         self.ref = ref
+ *         self.__name__ = name             # <<<<<<<<<<<<<<
+ *         self.ret = ret
+ *         self.__cache = cache
+ */
+  __Pyx_INCREF(__pyx_v_name);
+  __Pyx_GIVEREF(__pyx_v_name);
+  __Pyx_GOTREF(__pyx_v_self->__name__);
+  __Pyx_DECREF(__pyx_v_self->__name__);
+  __pyx_v_self->__name__ = __pyx_v_name;
+
+  /* "pop/pop.contract.pyx":44
+ *         self.ref = ref
+ *         self.__name__ = name
+ *         self.ret = ret             # <<<<<<<<<<<<<<
+ *         self.__cache = cache
+ * 
+ */
+  __Pyx_INCREF(__pyx_v_ret);
+  __Pyx_GIVEREF(__pyx_v_ret);
+  __Pyx_GOTREF(__pyx_v_self->ret);
+  __Pyx_DECREF(__pyx_v_self->ret);
+  __pyx_v_self->ret = __pyx_v_ret;
+
+  /* "pop/pop.contract.pyx":45
+ *         self.__name__ = name
+ *         self.ret = ret
+ *         self.__cache = cache             # <<<<<<<<<<<<<<
+ * 
+ *     @property
+ */
+  if (!(likely(PyDict_CheckExact(__pyx_v_cache))||((__pyx_v_cache) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_v_cache))) __PYX_ERR(0, 45, __pyx_L1_error)
+  __pyx_t_2 = __pyx_v_cache;
+  __Pyx_INCREF(__pyx_t_2);
+  __Pyx_GIVEREF(__pyx_t_2);
+  __Pyx_GOTREF(__pyx_v_self->_ContractedContext__cache);
+  __Pyx_DECREF(__pyx_v_self->_ContractedContext__cache);
+  __pyx_v_self->_ContractedContext__cache = ((PyObject*)__pyx_t_2);
+  __pyx_t_2 = 0;
+
+  /* "pop/pop.contract.pyx":24
+ *         dict[str, object] __cache
+ * 
+ *     def __init__(             # <<<<<<<<<<<<<<
+ *         self,
+ *         func: object,
+ */
+
+  /* function exit code */
+  __pyx_r = 0;
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("pop.contract.ContractedContext.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = -1;
+  __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_cache);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":47
+ *         self.__cache = cache
+ * 
+ *     @property             # <<<<<<<<<<<<<<
+ *     def __signature__(self):
+ *         return self.signature
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_13__signature___1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_13__signature___1__get__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_13__signature_____get__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_13__signature_____get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__", 1);
+
+  /* "pop/pop.contract.pyx":49
+ *     @property
+ *     def __signature__(self):
+ *         return self.signature             # <<<<<<<<<<<<<<
+ * 
+ *     @property
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_self->signature);
+  __pyx_r = __pyx_v_self->signature;
+  goto __pyx_L0;
+
+  /* "pop/pop.contract.pyx":47
+ *         self.__cache = cache
+ * 
+ *     @property             # <<<<<<<<<<<<<<
+ *     def __signature__(self):
+ *         return self.signature
+ */
+
+  /* function exit code */
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":51
+ *         return self.signature
+ * 
+ *     @property             # <<<<<<<<<<<<<<
+ *     def cache(self):
+ *         return self.__cache
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_5cache_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_5cache_1__get__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_5cache___get__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_5cache___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__", 1);
+
+  /* "pop/pop.contract.pyx":53
+ *     @property
+ *     def cache(self):
+ *         return self.__cache             # <<<<<<<<<<<<<<
+ * 
+ *     def get_arguments(self):
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_self->_ContractedContext__cache);
+  __pyx_r = __pyx_v_self->_ContractedContext__cache;
+  goto __pyx_L0;
+
+  /* "pop/pop.contract.pyx":51
+ *         return self.signature
+ * 
+ *     @property             # <<<<<<<<<<<<<<
+ *     def cache(self):
+ *         return self.__cache
+ */
+
+  /* function exit code */
   __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":55
+ *         return self.__cache
+ * 
+ *     def get_arguments(self):             # <<<<<<<<<<<<<<
+ *         """
+ *         Return a dictionary of all arguments that will be passed to the function and their
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_3get_arguments(PyObject *__pyx_v_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_3pop_8contract_17ContractedContext_2get_arguments, "\n        Return a dictionary of all arguments that will be passed to the function and their\n        values, including default arguments.\n        ");
+static PyMethodDef __pyx_mdef_3pop_8contract_17ContractedContext_3get_arguments = {"get_arguments", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_17ContractedContext_3get_arguments, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_3pop_8contract_17ContractedContext_2get_arguments};
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_3get_arguments(PyObject *__pyx_v_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("get_arguments (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  if (unlikely(__pyx_nargs > 0)) {
+    __Pyx_RaiseArgtupleInvalid("get_arguments", 1, 0, 0, __pyx_nargs); return NULL;}
+  if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "get_arguments", 0))) return NULL;
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_2get_arguments(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_13NamespaceDict___getattr__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
-  PyObject *__pyx_v_e = NULL;
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_2get_arguments(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_t_1;
-  int __pyx_t_2;
+  PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   PyObject *__pyx_t_5 = NULL;
   int __pyx_t_6;
-  PyObject *__pyx_t_7 = NULL;
-  PyObject *__pyx_t_8 = NULL;
-  PyObject *__pyx_t_9 = NULL;
-  PyObject *__pyx_t_10 = NULL;
-  int __pyx_t_11;
-  char const *__pyx_t_12;
-  PyObject *__pyx_t_13 = NULL;
-  PyObject *__pyx_t_14 = NULL;
-  PyObject *__pyx_t_15 = NULL;
-  PyObject *__pyx_t_16 = NULL;
-  PyObject *__pyx_t_17 = NULL;
-  PyObject *__pyx_t_18 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__getattr__", 1);
+  __Pyx_RefNannySetupContext("get_arguments", 1);
 
-  /* "pop/pop.data.pyx":13
- * cdef class NamespaceDict(dict[str, object]):
- *     def __getattr__(self, key: str):
- *         if key.startswith("__") and key.endswith("__"):             # <<<<<<<<<<<<<<
- *             self.__getattribute__(key)
- *         try:
+  /* "pop/pop.contract.pyx":60
+ *         values, including default arguments.
+ *         """
+ *         if "__bound_signature__" not in self.__cache:             # <<<<<<<<<<<<<<
+ *             self.__cache["__bound_signature__"] = self.signature.bind(
+ *                 *self.args, **self.kwargs
  */
-  __pyx_t_2 = __Pyx_PyUnicode_Tailmatch(__pyx_v_key, __pyx_n_u_, 0, PY_SSIZE_T_MAX, -1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 13, __pyx_L1_error)
-  if (__pyx_t_2) {
-  } else {
-    __pyx_t_1 = __pyx_t_2;
-    goto __pyx_L4_bool_binop_done;
+  if (unlikely(__pyx_v_self->_ContractedContext__cache == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
+    __PYX_ERR(0, 60, __pyx_L1_error)
   }
-  __pyx_t_2 = __Pyx_PyUnicode_Tailmatch(__pyx_v_key, __pyx_n_u_, 0, PY_SSIZE_T_MAX, 1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 13, __pyx_L1_error)
-  __pyx_t_1 = __pyx_t_2;
-  __pyx_L4_bool_binop_done:;
+  __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_n_u_bound_signature, __pyx_v_self->_ContractedContext__cache, Py_NE)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 60, __pyx_L1_error)
   if (__pyx_t_1) {
 
-    /* "pop/pop.data.pyx":14
- *     def __getattr__(self, key: str):
- *         if key.startswith("__") and key.endswith("__"):
- *             self.__getattribute__(key)             # <<<<<<<<<<<<<<
- *         try:
- *             return self[key]
+    /* "pop/pop.contract.pyx":61
+ *         """
+ *         if "__bound_signature__" not in self.__cache:
+ *             self.__cache["__bound_signature__"] = self.signature.bind(             # <<<<<<<<<<<<<<
+ *                 *self.args, **self.kwargs
+ *             )
+ */
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->signature, __pyx_n_s_bind); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 61, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+
+    /* "pop/pop.contract.pyx":62
+ *         if "__bound_signature__" not in self.__cache:
+ *             self.__cache["__bound_signature__"] = self.signature.bind(
+ *                 *self.args, **self.kwargs             # <<<<<<<<<<<<<<
+ *             )
+ *             # Apply any default values from the signature
+ */
+    __pyx_t_3 = PySequence_Tuple(__pyx_v_self->args); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 61, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+
+    /* "pop/pop.contract.pyx":61
+ *         """
+ *         if "__bound_signature__" not in self.__cache:
+ *             self.__cache["__bound_signature__"] = self.signature.bind(             # <<<<<<<<<<<<<<
+ *                 *self.args, **self.kwargs
+ *             )
+ */
+    if (unlikely(__pyx_v_self->kwargs == Py_None)) {
+      PyErr_SetString(PyExc_TypeError, "argument after ** must be a mapping, not NoneType");
+      __PYX_ERR(0, 62, __pyx_L1_error)
+    }
+    __pyx_t_4 = PyDict_Copy(__pyx_v_self->kwargs); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 62, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 61, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    if (unlikely(__pyx_v_self->_ContractedContext__cache == Py_None)) {
+      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+      __PYX_ERR(0, 61, __pyx_L1_error)
+    }
+    if (unlikely((PyDict_SetItem(__pyx_v_self->_ContractedContext__cache, __pyx_n_u_bound_signature, __pyx_t_5) < 0))) __PYX_ERR(0, 61, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+
+    /* "pop/pop.contract.pyx":65
+ *             )
+ *             # Apply any default values from the signature
+ *             self.__cache["__bound_signature__"].apply_defaults()             # <<<<<<<<<<<<<<
+ *         return self.__cache["__bound_signature__"].arguments
+ * 
  */
-    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_getattribute); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 14, __pyx_L1_error)
+    if (unlikely(__pyx_v_self->_ContractedContext__cache == Py_None)) {
+      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+      __PYX_ERR(0, 65, __pyx_L1_error)
+    }
+    __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_self->_ContractedContext__cache, __pyx_n_u_bound_signature); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 65, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
-    __pyx_t_5 = NULL;
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_apply_defaults); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 65, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __pyx_t_4 = NULL;
     __pyx_t_6 = 0;
     #if CYTHON_UNPACK_METHODS
-    if (likely(PyMethod_Check(__pyx_t_4))) {
-      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
-      if (likely(__pyx_t_5)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
-        __Pyx_INCREF(__pyx_t_5);
+    if (likely(PyMethod_Check(__pyx_t_3))) {
+      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
+      if (likely(__pyx_t_4)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+        __Pyx_INCREF(__pyx_t_4);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_4, function);
+        __Pyx_DECREF_SET(__pyx_t_3, function);
         __pyx_t_6 = 1;
       }
     }
     #endif
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_v_key};
-      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
-      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_3);
-      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+      PyObject *__pyx_callargs[2] = {__pyx_t_4, NULL};
+      __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 0+__pyx_t_6);
+      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 65, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-    /* "pop/pop.data.pyx":13
- * cdef class NamespaceDict(dict[str, object]):
- *     def __getattr__(self, key: str):
- *         if key.startswith("__") and key.endswith("__"):             # <<<<<<<<<<<<<<
- *             self.__getattribute__(key)
- *         try:
+    /* "pop/pop.contract.pyx":60
+ *         values, including default arguments.
+ *         """
+ *         if "__bound_signature__" not in self.__cache:             # <<<<<<<<<<<<<<
+ *             self.__cache["__bound_signature__"] = self.signature.bind(
+ *                 *self.args, **self.kwargs
  */
   }
 
-  /* "pop/pop.data.pyx":15
- *         if key.startswith("__") and key.endswith("__"):
- *             self.__getattribute__(key)
- *         try:             # <<<<<<<<<<<<<<
- *             return self[key]
- *         except KeyError as e:
- */
-  {
-    __Pyx_PyThreadState_declare
-    __Pyx_PyThreadState_assign
-    __Pyx_ExceptionSave(&__pyx_t_7, &__pyx_t_8, &__pyx_t_9);
-    __Pyx_XGOTREF(__pyx_t_7);
-    __Pyx_XGOTREF(__pyx_t_8);
-    __Pyx_XGOTREF(__pyx_t_9);
-    /*try:*/ {
-
-      /* "pop/pop.data.pyx":16
- *             self.__getattribute__(key)
- *         try:
- *             return self[key]             # <<<<<<<<<<<<<<
- *         except KeyError as e:
- *             raise AttributeError(e)
- */
-      __Pyx_XDECREF(__pyx_r);
-      __pyx_t_3 = __Pyx_PyObject_GetItem(((PyObject *)__pyx_v_self), __pyx_v_key); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L6_error)
-      __Pyx_GOTREF(__pyx_t_3);
-      __pyx_r = __pyx_t_3;
-      __pyx_t_3 = 0;
-      goto __pyx_L10_try_return;
-
-      /* "pop/pop.data.pyx":15
- *         if key.startswith("__") and key.endswith("__"):
- *             self.__getattribute__(key)
- *         try:             # <<<<<<<<<<<<<<
- *             return self[key]
- *         except KeyError as e:
- */
-    }
-    __pyx_L6_error:;
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-
-    /* "pop/pop.data.pyx":17
- *         try:
- *             return self[key]
- *         except KeyError as e:             # <<<<<<<<<<<<<<
- *             raise AttributeError(e)
+  /* "pop/pop.contract.pyx":66
+ *             # Apply any default values from the signature
+ *             self.__cache["__bound_signature__"].apply_defaults()
+ *         return self.__cache["__bound_signature__"].arguments             # <<<<<<<<<<<<<<
+ * 
  * 
  */
-    __pyx_t_6 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_KeyError);
-    if (__pyx_t_6) {
-      __Pyx_AddTraceback("pop.data.NamespaceDict.__getattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-      if (__Pyx_GetException(&__pyx_t_3, &__pyx_t_4, &__pyx_t_5) < 0) __PYX_ERR(0, 17, __pyx_L8_except_error)
-      __Pyx_XGOTREF(__pyx_t_3);
-      __Pyx_XGOTREF(__pyx_t_4);
-      __Pyx_XGOTREF(__pyx_t_5);
-      __Pyx_INCREF(__pyx_t_4);
-      __pyx_v_e = __pyx_t_4;
-      /*try:*/ {
-
-        /* "pop/pop.data.pyx":18
- *             return self[key]
- *         except KeyError as e:
- *             raise AttributeError(e)             # <<<<<<<<<<<<<<
- * 
- *     def __setattr__(self, key: str, value: object):
- */
-        __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_AttributeError, __pyx_v_e); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 18, __pyx_L17_error)
-        __Pyx_GOTREF(__pyx_t_10);
-        __Pyx_Raise(__pyx_t_10, 0, 0, 0);
-        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
-        __PYX_ERR(0, 18, __pyx_L17_error)
-      }
-
-      /* "pop/pop.data.pyx":17
- *         try:
- *             return self[key]
- *         except KeyError as e:             # <<<<<<<<<<<<<<
- *             raise AttributeError(e)
- * 
- */
-      /*finally:*/ {
-        __pyx_L17_error:;
-        /*exception exit:*/{
-          __Pyx_PyThreadState_declare
-          __Pyx_PyThreadState_assign
-          __pyx_t_13 = 0; __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0; __pyx_t_17 = 0; __pyx_t_18 = 0;
-          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-          if (PY_MAJOR_VERSION >= 3) __Pyx_ExceptionSwap(&__pyx_t_16, &__pyx_t_17, &__pyx_t_18);
-          if ((PY_MAJOR_VERSION < 3) || unlikely(__Pyx_GetException(&__pyx_t_13, &__pyx_t_14, &__pyx_t_15) < 0)) __Pyx_ErrFetch(&__pyx_t_13, &__pyx_t_14, &__pyx_t_15);
-          __Pyx_XGOTREF(__pyx_t_13);
-          __Pyx_XGOTREF(__pyx_t_14);
-          __Pyx_XGOTREF(__pyx_t_15);
-          __Pyx_XGOTREF(__pyx_t_16);
-          __Pyx_XGOTREF(__pyx_t_17);
-          __Pyx_XGOTREF(__pyx_t_18);
-          __pyx_t_6 = __pyx_lineno; __pyx_t_11 = __pyx_clineno; __pyx_t_12 = __pyx_filename;
-          {
-            __Pyx_DECREF(__pyx_v_e); __pyx_v_e = 0;
-          }
-          if (PY_MAJOR_VERSION >= 3) {
-            __Pyx_XGIVEREF(__pyx_t_16);
-            __Pyx_XGIVEREF(__pyx_t_17);
-            __Pyx_XGIVEREF(__pyx_t_18);
-            __Pyx_ExceptionReset(__pyx_t_16, __pyx_t_17, __pyx_t_18);
-          }
-          __Pyx_XGIVEREF(__pyx_t_13);
-          __Pyx_XGIVEREF(__pyx_t_14);
-          __Pyx_XGIVEREF(__pyx_t_15);
-          __Pyx_ErrRestore(__pyx_t_13, __pyx_t_14, __pyx_t_15);
-          __pyx_t_13 = 0; __pyx_t_14 = 0; __pyx_t_15 = 0; __pyx_t_16 = 0; __pyx_t_17 = 0; __pyx_t_18 = 0;
-          __pyx_lineno = __pyx_t_6; __pyx_clineno = __pyx_t_11; __pyx_filename = __pyx_t_12;
-          goto __pyx_L8_except_error;
-        }
-      }
-    }
-    goto __pyx_L8_except_error;
-
-    /* "pop/pop.data.pyx":15
- *         if key.startswith("__") and key.endswith("__"):
- *             self.__getattribute__(key)
- *         try:             # <<<<<<<<<<<<<<
- *             return self[key]
- *         except KeyError as e:
- */
-    __pyx_L8_except_error:;
-    __Pyx_XGIVEREF(__pyx_t_7);
-    __Pyx_XGIVEREF(__pyx_t_8);
-    __Pyx_XGIVEREF(__pyx_t_9);
-    __Pyx_ExceptionReset(__pyx_t_7, __pyx_t_8, __pyx_t_9);
-    goto __pyx_L1_error;
-    __pyx_L10_try_return:;
-    __Pyx_XGIVEREF(__pyx_t_7);
-    __Pyx_XGIVEREF(__pyx_t_8);
-    __Pyx_XGIVEREF(__pyx_t_9);
-    __Pyx_ExceptionReset(__pyx_t_7, __pyx_t_8, __pyx_t_9);
-    goto __pyx_L0;
+  __Pyx_XDECREF(__pyx_r);
+  if (unlikely(__pyx_v_self->_ContractedContext__cache == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(0, 66, __pyx_L1_error)
   }
+  __pyx_t_5 = __Pyx_PyDict_GetItem(__pyx_v_self->_ContractedContext__cache, __pyx_n_u_bound_signature); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 66, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_arguments); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 66, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __pyx_r = __pyx_t_3;
+  __pyx_t_3 = 0;
+  goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":12
+  /* "pop/pop.contract.pyx":55
+ *         return self.__cache
  * 
- * cdef class NamespaceDict(dict[str, object]):
- *     def __getattr__(self, key: str):             # <<<<<<<<<<<<<<
- *         if key.startswith("__") and key.endswith("__"):
- *             self.__getattribute__(key)
+ *     def get_arguments(self):             # <<<<<<<<<<<<<<
+ *         """
+ *         Return a dictionary of all arguments that will be passed to the function and their
  */
 
   /* function exit code */
   __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("pop.data.NamespaceDict.__getattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.ContractedContext.get_arguments", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_e);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":20
- *             raise AttributeError(e)
- * 
- *     def __setattr__(self, key: str, value: object):             # <<<<<<<<<<<<<<
- *         if isinstance(value, dict):
- *             value = NamespaceDict(value)
+/* "pop/pop.contract.pyx":15
+ *     """
+ *     cdef:
+ *         public object func             # <<<<<<<<<<<<<<
+ *         public list args
+ *         public dict[str, object] kwargs
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_4func_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_4func_1__get__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_4func___get__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_4func___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__", 1);
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_self->func);
+  __pyx_r = __pyx_v_self->func;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_4func_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_4func_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_4func_2__set__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self), ((PyObject *)__pyx_v_value));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_4func_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__set__", 1);
+  __Pyx_INCREF(__pyx_v_value);
+  __Pyx_GIVEREF(__pyx_v_value);
+  __Pyx_GOTREF(__pyx_v_self->func);
+  __Pyx_DECREF(__pyx_v_self->func);
+  __pyx_v_self->func = __pyx_v_value;
+
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_4func_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_4func_5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_4func_4__del__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_4func_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->func);
+  __Pyx_DECREF(__pyx_v_self->func);
+  __pyx_v_self->func = Py_None;
+
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":16
+ *     cdef:
+ *         public object func
+ *         public list args             # <<<<<<<<<<<<<<
+ *         public dict[str, object] kwargs
+ *         public str ref
  */
 
 /* Python wrapper */
-static int __pyx_pw_3pop_4data_13NamespaceDict_3__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /*proto*/
-static int __pyx_pw_3pop_4data_13NamespaceDict_3__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_4args_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_4args_1__get__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_4args___get__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_4args___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__", 1);
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_self->args);
+  __pyx_r = __pyx_v_self->args;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_4args_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_4args_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_4args_2__set__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self), ((PyObject *)__pyx_v_value));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_4args_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__set__", 1);
+  if (!(likely(PyList_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None) || __Pyx_RaiseUnexpectedTypeError("list", __pyx_v_value))) __PYX_ERR(0, 16, __pyx_L1_error)
+  __pyx_t_1 = __pyx_v_value;
+  __Pyx_INCREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->args);
+  __Pyx_DECREF(__pyx_v_self->args);
+  __pyx_v_self->args = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+
+  /* function exit code */
+  __pyx_r = 0;
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("pop.contract.ContractedContext.args.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = -1;
+  __pyx_L0:;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_4args_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_4args_5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_4args_4__del__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_4args_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->args);
+  __Pyx_DECREF(__pyx_v_self->args);
+  __pyx_v_self->args = ((PyObject*)Py_None);
+
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":17
+ *         public object func
+ *         public list args
+ *         public dict[str, object] kwargs             # <<<<<<<<<<<<<<
+ *         public str ref
+ *         public str __name__
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_6kwargs_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_6kwargs_1__get__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_6kwargs___get__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_6kwargs___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__", 1);
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_self->kwargs);
+  __pyx_r = __pyx_v_self->kwargs;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_6kwargs_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_6kwargs_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__setattr__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_key), (&PyUnicode_Type), 0, "key", 1))) __PYX_ERR(0, 20, __pyx_L1_error)
-  __pyx_r = __pyx_pf_3pop_4data_13NamespaceDict_2__setattr__(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v_self), ((PyObject*)__pyx_v_key), ((PyObject *)__pyx_v_value));
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_6kwargs_2__set__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self), ((PyObject *)__pyx_v_value));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_6kwargs_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__set__", 1);
+  if (!(likely(PyDict_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_v_value))) __PYX_ERR(0, 17, __pyx_L1_error)
+  __pyx_t_1 = __pyx_v_value;
+  __Pyx_INCREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->kwargs);
+  __Pyx_DECREF(__pyx_v_self->kwargs);
+  __pyx_v_self->kwargs = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
   /* function exit code */
+  __pyx_r = 0;
   goto __pyx_L0;
   __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("pop.contract.ContractedContext.kwargs.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_3pop_4data_13NamespaceDict_2__setattr__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_6kwargs_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_6kwargs_5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_6kwargs_4__del__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_6kwargs_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
   int __pyx_r;
   __Pyx_RefNannyDeclarations
-  int __pyx_t_1;
-  PyObject *__pyx_t_2 = NULL;
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->kwargs);
+  __Pyx_DECREF(__pyx_v_self->kwargs);
+  __pyx_v_self->kwargs = ((PyObject*)Py_None);
+
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":18
+ *         public list args
+ *         public dict[str, object] kwargs
+ *         public str ref             # <<<<<<<<<<<<<<
+ *         public str __name__
+ *         public object ret
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_3ref_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_3ref_1__get__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_3ref___get__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_3ref___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__", 1);
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_self->ref);
+  __pyx_r = __pyx_v_self->ref;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_3ref_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_3ref_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_3ref_2__set__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self), ((PyObject *)__pyx_v_value));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_3ref_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__setattr__", 0);
-  __Pyx_INCREF(__pyx_v_value);
+  __Pyx_RefNannySetupContext("__set__", 1);
+  if (!(likely(PyUnicode_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_v_value))) __PYX_ERR(0, 18, __pyx_L1_error)
+  __pyx_t_1 = __pyx_v_value;
+  __Pyx_INCREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->ref);
+  __Pyx_DECREF(__pyx_v_self->ref);
+  __pyx_v_self->ref = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
-  /* "pop/pop.data.pyx":21
- * 
- *     def __setattr__(self, key: str, value: object):
- *         if isinstance(value, dict):             # <<<<<<<<<<<<<<
- *             value = NamespaceDict(value)
- *         self[key] = value
- */
-  __pyx_t_1 = PyDict_Check(__pyx_v_value); 
-  if (__pyx_t_1) {
+  /* function exit code */
+  __pyx_r = 0;
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("pop.contract.ContractedContext.ref.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = -1;
+  __pyx_L0:;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-    /* "pop/pop.data.pyx":22
- *     def __setattr__(self, key: str, value: object):
- *         if isinstance(value, dict):
- *             value = NamespaceDict(value)             # <<<<<<<<<<<<<<
- *         self[key] = value
- * 
- */
-    __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_3pop_4data_NamespaceDict), __pyx_v_value); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 22, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __Pyx_DECREF_SET(__pyx_v_value, __pyx_t_2);
-    __pyx_t_2 = 0;
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_3ref_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_3ref_5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_3ref_4__del__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
 
-    /* "pop/pop.data.pyx":21
- * 
- *     def __setattr__(self, key: str, value: object):
- *         if isinstance(value, dict):             # <<<<<<<<<<<<<<
- *             value = NamespaceDict(value)
- *         self[key] = value
- */
-  }
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-  /* "pop/pop.data.pyx":23
- *         if isinstance(value, dict):
- *             value = NamespaceDict(value)
- *         self[key] = value             # <<<<<<<<<<<<<<
- * 
- * 
- */
-  if (unlikely((PyObject_SetItem(((PyObject *)__pyx_v_self), __pyx_v_key, __pyx_v_value) < 0))) __PYX_ERR(0, 23, __pyx_L1_error)
+static int __pyx_pf_3pop_8contract_17ContractedContext_3ref_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->ref);
+  __Pyx_DECREF(__pyx_v_self->ref);
+  __pyx_v_self->ref = ((PyObject*)Py_None);
 
-  /* "pop/pop.data.pyx":20
- *             raise AttributeError(e)
- * 
- *     def __setattr__(self, key: str, value: object):             # <<<<<<<<<<<<<<
- *         if isinstance(value, dict):
- *             value = NamespaceDict(value)
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":19
+ *         public dict[str, object] kwargs
+ *         public str ref
+ *         public str __name__             # <<<<<<<<<<<<<<
+ *         public object ret
+ *         object signature
  */
 
+/* Python wrapper */
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_8__name___1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_8__name___1__get__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_8__name_____get__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_8__name_____get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__", 1);
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_self->__name__);
+  __pyx_r = __pyx_v_self->__name__;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_8__name___3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_8__name___3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_8__name___2__set__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self), ((PyObject *)__pyx_v_value));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_8__name___2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__set__", 1);
+  if (!(likely(PyUnicode_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_v_value))) __PYX_ERR(0, 19, __pyx_L1_error)
+  __pyx_t_1 = __pyx_v_value;
+  __Pyx_INCREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->__name__);
+  __Pyx_DECREF(__pyx_v_self->__name__);
+  __pyx_v_self->__name__ = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+
   /* function exit code */
   __pyx_r = 0;
   goto __pyx_L0;
   __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_AddTraceback("pop.data.NamespaceDict.__setattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("pop.contract.ContractedContext.__name__.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_value);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_8__name___5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_8__name___5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_8__name___4__del__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_8__name___4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->__name__);
+  __Pyx_DECREF(__pyx_v_self->__name__);
+  __pyx_v_self->__name__ = ((PyObject*)Py_None);
+
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":20
+ *         public str ref
+ *         public str __name__
+ *         public object ret             # <<<<<<<<<<<<<<
+ *         object signature
+ *         dict[str, object] __cache
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_3ret_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_3ret_1__get__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_3ret___get__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_3ret___get__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__", 1);
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_self->ret);
+  __pyx_r = __pyx_v_self->ret;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_3ret_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_3ret_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_3ret_2__set__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self), ((PyObject *)__pyx_v_value));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_3ret_2__set__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__set__", 1);
+  __Pyx_INCREF(__pyx_v_value);
+  __Pyx_GIVEREF(__pyx_v_value);
+  __Pyx_GOTREF(__pyx_v_self->ret);
+  __Pyx_DECREF(__pyx_v_self->ret);
+  __pyx_v_self->ret = __pyx_v_value;
+
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_17ContractedContext_3ret_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_17ContractedContext_3ret_5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_3ret_4__del__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_17ContractedContext_3ret_4__del__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->ret);
+  __Pyx_DECREF(__pyx_v_self->ret);
+  __pyx_v_self->ret = Py_None;
+
+  /* function exit code */
+  __pyx_r = 0;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_5__reduce_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_5__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_13NamespaceDict_5__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_13NamespaceDict_5__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_5__reduce_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_8contract_17ContractedContext_5__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_17ContractedContext_5__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_5__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -4587,60 +5716,87 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("__reduce_cython__", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__reduce_cython__", 0))) return NULL;
-  __pyx_r = __pyx_pf_3pop_4data_13NamespaceDict_4__reduce_cython__(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_4__reduce_cython__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_13NamespaceDict_4__reduce_cython__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_4__reduce_cython__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self) {
   PyObject *__pyx_v_state = 0;
   PyObject *__pyx_v__dict = 0;
   int __pyx_v_use_setstate;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_4;
+  PyObject *__pyx_t_5 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__reduce_cython__", 1);
 
   /* "(tree fragment)":5
  *     cdef object _dict
  *     cdef bint use_setstate
- *     state = ()             # <<<<<<<<<<<<<<
+ *     state = (self._ContractedContext__cache, self.__name__, self.args, self.func, self.kwargs, self.ref, self.ret, self.signature)             # <<<<<<<<<<<<<<
  *     _dict = getattr(self, '__dict__', None)
  *     if _dict is not None:
  */
-  __Pyx_INCREF(__pyx_empty_tuple);
-  __pyx_v_state = __pyx_empty_tuple;
+  __pyx_t_1 = PyTuple_New(8); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_INCREF(__pyx_v_self->_ContractedContext__cache);
+  __Pyx_GIVEREF(__pyx_v_self->_ContractedContext__cache);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_self->_ContractedContext__cache)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->__name__);
+  __Pyx_GIVEREF(__pyx_v_self->__name__);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_self->__name__)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->args);
+  __Pyx_GIVEREF(__pyx_v_self->args);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_self->args)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->func);
+  __Pyx_GIVEREF(__pyx_v_self->func);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_v_self->func)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->kwargs);
+  __Pyx_GIVEREF(__pyx_v_self->kwargs);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 4, __pyx_v_self->kwargs)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->ref);
+  __Pyx_GIVEREF(__pyx_v_self->ref);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 5, __pyx_v_self->ref)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->ret);
+  __Pyx_GIVEREF(__pyx_v_self->ret);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 6, __pyx_v_self->ret)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->signature);
+  __Pyx_GIVEREF(__pyx_v_self->signature);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 7, __pyx_v_self->signature)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __pyx_v_state = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
   /* "(tree fragment)":6
  *     cdef bint use_setstate
- *     state = ()
+ *     state = (self._ContractedContext__cache, self.__name__, self.args, self.func, self.kwargs, self.ref, self.ret, self.signature)
  *     _dict = getattr(self, '__dict__', None)             # <<<<<<<<<<<<<<
  *     if _dict is not None:
  *         state += (_dict,)
  */
   __pyx_t_1 = __Pyx_GetAttr3(((PyObject *)__pyx_v_self), __pyx_n_s_dict, Py_None); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v__dict = __pyx_t_1;
   __pyx_t_1 = 0;
 
   /* "(tree fragment)":7
- *     state = ()
+ *     state = (self._ContractedContext__cache, self.__name__, self.args, self.func, self.kwargs, self.ref, self.ret, self.signature)
  *     _dict = getattr(self, '__dict__', None)
  *     if _dict is not None:             # <<<<<<<<<<<<<<
  *         state += (_dict,)
  *         use_setstate = True
  */
   __pyx_t_2 = (__pyx_v__dict != Py_None);
   if (__pyx_t_2) {
@@ -4664,123 +5820,168 @@
     __pyx_t_3 = 0;
 
     /* "(tree fragment)":9
  *     if _dict is not None:
  *         state += (_dict,)
  *         use_setstate = True             # <<<<<<<<<<<<<<
  *     else:
- *         use_setstate = False
+ *         use_setstate = self._ContractedContext__cache is not None or self.__name__ is not None or self.args is not None or self.func is not None or self.kwargs is not None or self.ref is not None or self.ret is not None or self.signature is not None
  */
     __pyx_v_use_setstate = 1;
 
     /* "(tree fragment)":7
- *     state = ()
+ *     state = (self._ContractedContext__cache, self.__name__, self.args, self.func, self.kwargs, self.ref, self.ret, self.signature)
  *     _dict = getattr(self, '__dict__', None)
  *     if _dict is not None:             # <<<<<<<<<<<<<<
  *         state += (_dict,)
  *         use_setstate = True
  */
     goto __pyx_L3;
   }
 
   /* "(tree fragment)":11
  *         use_setstate = True
  *     else:
- *         use_setstate = False             # <<<<<<<<<<<<<<
+ *         use_setstate = self._ContractedContext__cache is not None or self.__name__ is not None or self.args is not None or self.func is not None or self.kwargs is not None or self.ref is not None or self.ret is not None or self.signature is not None             # <<<<<<<<<<<<<<
  *     if use_setstate:
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, None), state
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, None), state
  */
   /*else*/ {
-    __pyx_v_use_setstate = 0;
+    __pyx_t_4 = (__pyx_v_self->_ContractedContext__cache != ((PyObject*)Py_None));
+    if (!__pyx_t_4) {
+    } else {
+      __pyx_t_2 = __pyx_t_4;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_4 = (__pyx_v_self->__name__ != ((PyObject*)Py_None));
+    if (!__pyx_t_4) {
+    } else {
+      __pyx_t_2 = __pyx_t_4;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_4 = (__pyx_v_self->args != ((PyObject*)Py_None));
+    if (!__pyx_t_4) {
+    } else {
+      __pyx_t_2 = __pyx_t_4;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_4 = (__pyx_v_self->func != Py_None);
+    if (!__pyx_t_4) {
+    } else {
+      __pyx_t_2 = __pyx_t_4;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_4 = (__pyx_v_self->kwargs != ((PyObject*)Py_None));
+    if (!__pyx_t_4) {
+    } else {
+      __pyx_t_2 = __pyx_t_4;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_4 = (__pyx_v_self->ref != ((PyObject*)Py_None));
+    if (!__pyx_t_4) {
+    } else {
+      __pyx_t_2 = __pyx_t_4;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_4 = (__pyx_v_self->ret != Py_None);
+    if (!__pyx_t_4) {
+    } else {
+      __pyx_t_2 = __pyx_t_4;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_4 = (__pyx_v_self->signature != Py_None);
+    __pyx_t_2 = __pyx_t_4;
+    __pyx_L4_bool_binop_done:;
+    __pyx_v_use_setstate = __pyx_t_2;
   }
   __pyx_L3:;
 
   /* "(tree fragment)":12
  *     else:
- *         use_setstate = False
+ *         use_setstate = self._ContractedContext__cache is not None or self.__name__ is not None or self.args is not None or self.func is not None or self.kwargs is not None or self.ref is not None or self.ret is not None or self.signature is not None
  *     if use_setstate:             # <<<<<<<<<<<<<<
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, None), state
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, None), state
  *     else:
  */
   if (__pyx_v_use_setstate) {
 
     /* "(tree fragment)":13
- *         use_setstate = False
+ *         use_setstate = self._ContractedContext__cache is not None or self.__name__ is not None or self.args is not None or self.func is not None or self.kwargs is not None or self.ref is not None or self.ret is not None or self.signature is not None
  *     if use_setstate:
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, None), state             # <<<<<<<<<<<<<<
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, None), state             # <<<<<<<<<<<<<<
  *     else:
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, state)
  */
     __Pyx_XDECREF(__pyx_r);
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_pyx_unpickle_NamespaceDict); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_pyx_unpickle_ContractedContext); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
     __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
     if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))))) __PYX_ERR(2, 13, __pyx_L1_error);
-    __Pyx_INCREF(__pyx_int_238750788);
-    __Pyx_GIVEREF(__pyx_int_238750788);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_238750788)) __PYX_ERR(2, 13, __pyx_L1_error);
+    __Pyx_INCREF(__pyx_int_168597948);
+    __Pyx_GIVEREF(__pyx_int_168597948);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_168597948)) __PYX_ERR(2, 13, __pyx_L1_error);
     __Pyx_INCREF(Py_None);
     __Pyx_GIVEREF(Py_None);
     if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, Py_None)) __PYX_ERR(2, 13, __pyx_L1_error);
-    __pyx_t_4 = PyTuple_New(3); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 13, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_4);
+    __pyx_t_5 = PyTuple_New(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
     __Pyx_GIVEREF(__pyx_t_3);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error);
     __Pyx_GIVEREF(__pyx_t_1);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error);
     __Pyx_INCREF(__pyx_v_state);
     __Pyx_GIVEREF(__pyx_v_state);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 2, __pyx_v_state)) __PYX_ERR(2, 13, __pyx_L1_error);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_v_state)) __PYX_ERR(2, 13, __pyx_L1_error);
     __pyx_t_3 = 0;
     __pyx_t_1 = 0;
-    __pyx_r = __pyx_t_4;
-    __pyx_t_4 = 0;
+    __pyx_r = __pyx_t_5;
+    __pyx_t_5 = 0;
     goto __pyx_L0;
 
     /* "(tree fragment)":12
  *     else:
- *         use_setstate = False
+ *         use_setstate = self._ContractedContext__cache is not None or self.__name__ is not None or self.args is not None or self.func is not None or self.kwargs is not None or self.ref is not None or self.ret is not None or self.signature is not None
  *     if use_setstate:             # <<<<<<<<<<<<<<
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, None), state
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, None), state
  *     else:
  */
   }
 
   /* "(tree fragment)":15
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, None), state
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, None), state
  *     else:
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)             # <<<<<<<<<<<<<<
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, state)             # <<<<<<<<<<<<<<
  * def __setstate_cython__(self, __pyx_state):
- *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)
+ *     __pyx_unpickle_ContractedContext__set_state(self, __pyx_state)
  */
   /*else*/ {
     __Pyx_XDECREF(__pyx_r);
-    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_pyx_unpickle_NamespaceDict); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 15, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_pyx_unpickle_ContractedContext); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 15, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
     __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
     __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
     if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))))) __PYX_ERR(2, 15, __pyx_L1_error);
-    __Pyx_INCREF(__pyx_int_238750788);
-    __Pyx_GIVEREF(__pyx_int_238750788);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_238750788)) __PYX_ERR(2, 15, __pyx_L1_error);
+    __Pyx_INCREF(__pyx_int_168597948);
+    __Pyx_GIVEREF(__pyx_int_168597948);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_168597948)) __PYX_ERR(2, 15, __pyx_L1_error);
     __Pyx_INCREF(__pyx_v_state);
     __Pyx_GIVEREF(__pyx_v_state);
     if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_state)) __PYX_ERR(2, 15, __pyx_L1_error);
     __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 15, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_GIVEREF(__pyx_t_4);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_4)) __PYX_ERR(2, 15, __pyx_L1_error);
+    __Pyx_GIVEREF(__pyx_t_5);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_5)) __PYX_ERR(2, 15, __pyx_L1_error);
     __Pyx_GIVEREF(__pyx_t_1);
     if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error);
-    __pyx_t_4 = 0;
+    __pyx_t_5 = 0;
     __pyx_t_1 = 0;
     __pyx_r = __pyx_t_3;
     __pyx_t_3 = 0;
     goto __pyx_L0;
   }
 
   /* "(tree fragment)":1
@@ -4789,42 +5990,42 @@
  *     cdef object _dict
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("pop.data.NamespaceDict.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_AddTraceback("pop.contract.ContractedContext.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_state);
   __Pyx_XDECREF(__pyx_v__dict);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":16
  *     else:
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)
+ *     __pyx_unpickle_ContractedContext__set_state(self, __pyx_state)
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_7__setstate_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_7__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_13NamespaceDict_7__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_13NamespaceDict_7__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_13NamespaceDict_7__setstate_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_8contract_17ContractedContext_7__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_17ContractedContext_7__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_8contract_17ContractedContext_7__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_state = 0;
@@ -4886,237 +6087,854 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("pop.data.NamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.ContractedContext.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_13NamespaceDict_6__setstate_cython__(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v_self), __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_8contract_17ContractedContext_6__setstate_cython__(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v_self), __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_13NamespaceDict_6__setstate_cython__(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_8contract_17ContractedContext_6__setstate_cython__(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__setstate_cython__", 1);
 
   /* "(tree fragment)":17
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, state)
  * def __setstate_cython__(self, __pyx_state):
- *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
+ *     __pyx_unpickle_ContractedContext__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
  */
   if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 17, __pyx_L1_error)
-  __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_NamespaceDict__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_3pop_8contract___pyx_unpickle_ContractedContext__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
   /* "(tree fragment)":16
  *     else:
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)
+ *     __pyx_unpickle_ContractedContext__set_state(self, __pyx_state)
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.NamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.ContractedContext.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":31
- *     cdef dict[str, list[str]] _split_cache
+/* "pop/pop.contract.pyx":69
  * 
- *     def __init__(self, base_dicts=None):             # <<<<<<<<<<<<<<
- *         if base_dicts is None:
- *             base_dicts = []
+ * 
+ * def load_contract(             # <<<<<<<<<<<<<<
+ *     contracts: "pop.hub.Sub",
+ *     default_contracts: Iterable[str],
  */
 
 /* Python wrapper */
-static int __pyx_pw_3pop_4data_14MultidictCache_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
-static int __pyx_pw_3pop_4data_14MultidictCache_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
-  PyObject *__pyx_v_base_dicts = 0;
+static PyObject *__pyx_pw_3pop_8contract_1load_contract(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_3pop_8contract_load_contract, "\n    return a Contract object loaded up\n    Dynamically create the correct Contracted type\n    :param contracts: Contracts functions to add to the sub\n    :param default_contracts: The contracts that have been marked as defaults\n    :param mod: A loader module\n    :param name: The name of the module to get from the loader\n    ");
+static PyMethodDef __pyx_mdef_3pop_8contract_1load_contract = {"load_contract", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_1load_contract, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_3pop_8contract_load_contract};
+static PyObject *__pyx_pw_3pop_8contract_1load_contract(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_contracts = 0;
+  CYTHON_UNUSED PyObject *__pyx_v_default_contracts = 0;
+  PyObject *__pyx_v_mod = 0;
+  PyObject *__pyx_v_name = 0;
+  #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject* values[1] = {0};
+  PyObject* values[4] = {0,0,0,0};
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("load_contract (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_contracts,&__pyx_n_s_default_contracts,&__pyx_n_s_mod,&__pyx_n_s_name,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_contracts)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 69, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_default_contracts)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 69, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("load_contract", 1, 4, 4, 1); __PYX_ERR(0, 69, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_mod)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[2]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 69, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("load_contract", 1, 4, 4, 2); __PYX_ERR(0, 69, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  3:
+        if (likely((values[3] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_name)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[3]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 69, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("load_contract", 1, 4, 4, 3); __PYX_ERR(0, 69, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "load_contract") < 0)) __PYX_ERR(0, 69, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 4)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+      values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+      values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+    }
+    __pyx_v_contracts = values[0];
+    __pyx_v_default_contracts = values[1];
+    __pyx_v_mod = values[2];
+    __pyx_v_name = ((PyObject*)values[3]);
+  }
+  goto __pyx_L6_skip;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("load_contract", 1, 4, 4, __pyx_nargs); __PYX_ERR(0, 69, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_AddTraceback("pop.contract.load_contract", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_name), (&PyUnicode_Type), 0, "name", 1))) __PYX_ERR(0, 73, __pyx_L1_error)
+  __pyx_r = __pyx_pf_3pop_8contract_load_contract(__pyx_self, __pyx_v_contracts, __pyx_v_default_contracts, __pyx_v_mod, __pyx_v_name);
+
+  /* function exit code */
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __pyx_r = NULL;
+  __pyx_L0:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_load_contract(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_contracts, CYTHON_UNUSED PyObject *__pyx_v_default_contracts, PyObject *__pyx_v_mod, PyObject *__pyx_v_name) {
+  PyObject *__pyx_v_raws = NULL;
+  PyObject *__pyx_v_loaded_contracts = NULL;
+  PyObject *__pyx_v_cnames = NULL;
+  PyObject *__pyx_v_cname = NULL;
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  int __pyx_t_2;
+  int __pyx_t_3;
+  Py_ssize_t __pyx_t_4;
+  PyObject *(*__pyx_t_5)(PyObject *);
+  PyObject *__pyx_t_6 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("load_contract", 1);
+
+  /* "pop/pop.contract.pyx":83
+ *     :param name: The name of the module to get from the loader
+ *     """
+ *     raws = []             # <<<<<<<<<<<<<<
+ *     loaded_contracts = []
+ *     if hasattr(contracts, name):
+ */
+  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 83, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_v_raws = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+
+  /* "pop/pop.contract.pyx":84
+ *     """
+ *     raws = []
+ *     loaded_contracts = []             # <<<<<<<<<<<<<<
+ *     if hasattr(contracts, name):
+ *         loaded_contracts.append(name)
+ */
+  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 84, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_v_loaded_contracts = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+
+  /* "pop/pop.contract.pyx":85
+ *     raws = []
+ *     loaded_contracts = []
+ *     if hasattr(contracts, name):             # <<<<<<<<<<<<<<
+ *         loaded_contracts.append(name)
+ *         raws.append(getattr(contracts, name))
+ */
+  __pyx_t_2 = __Pyx_HasAttr(__pyx_v_contracts, __pyx_v_name); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 85, __pyx_L1_error)
+  if (__pyx_t_2) {
+
+    /* "pop/pop.contract.pyx":86
+ *     loaded_contracts = []
+ *     if hasattr(contracts, name):
+ *         loaded_contracts.append(name)             # <<<<<<<<<<<<<<
+ *         raws.append(getattr(contracts, name))
+ *     if hasattr(contracts, "init"):
+ */
+    __pyx_t_3 = __Pyx_PyList_Append(__pyx_v_loaded_contracts, __pyx_v_name); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 86, __pyx_L1_error)
+
+    /* "pop/pop.contract.pyx":87
+ *     if hasattr(contracts, name):
+ *         loaded_contracts.append(name)
+ *         raws.append(getattr(contracts, name))             # <<<<<<<<<<<<<<
+ *     if hasattr(contracts, "init"):
+ *         if "init" not in loaded_contracts:
+ */
+    __pyx_t_1 = __Pyx_GetAttr(__pyx_v_contracts, __pyx_v_name); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 87, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_3 = __Pyx_PyList_Append(__pyx_v_raws, __pyx_t_1); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 87, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+    /* "pop/pop.contract.pyx":85
+ *     raws = []
+ *     loaded_contracts = []
+ *     if hasattr(contracts, name):             # <<<<<<<<<<<<<<
+ *         loaded_contracts.append(name)
+ *         raws.append(getattr(contracts, name))
+ */
+  }
+
+  /* "pop/pop.contract.pyx":88
+ *         loaded_contracts.append(name)
+ *         raws.append(getattr(contracts, name))
+ *     if hasattr(contracts, "init"):             # <<<<<<<<<<<<<<
+ *         if "init" not in loaded_contracts:
+ *             loaded_contracts.append("init")
+ */
+  __pyx_t_2 = __Pyx_HasAttr(__pyx_v_contracts, __pyx_n_u_init); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 88, __pyx_L1_error)
+  if (__pyx_t_2) {
+
+    /* "pop/pop.contract.pyx":89
+ *         raws.append(getattr(contracts, name))
+ *     if hasattr(contracts, "init"):
+ *         if "init" not in loaded_contracts:             # <<<<<<<<<<<<<<
+ *             loaded_contracts.append("init")
+ *             raws.append(getattr(contracts, "init"))
+ */
+    __pyx_t_2 = (__Pyx_PySequence_ContainsTF(__pyx_n_u_init, __pyx_v_loaded_contracts, Py_NE)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 89, __pyx_L1_error)
+    if (__pyx_t_2) {
+
+      /* "pop/pop.contract.pyx":90
+ *     if hasattr(contracts, "init"):
+ *         if "init" not in loaded_contracts:
+ *             loaded_contracts.append("init")             # <<<<<<<<<<<<<<
+ *             raws.append(getattr(contracts, "init"))
+ *     if hasattr(mod, "__contracts__"):
+ */
+      __pyx_t_3 = __Pyx_PyList_Append(__pyx_v_loaded_contracts, __pyx_n_u_init); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 90, __pyx_L1_error)
+
+      /* "pop/pop.contract.pyx":91
+ *         if "init" not in loaded_contracts:
+ *             loaded_contracts.append("init")
+ *             raws.append(getattr(contracts, "init"))             # <<<<<<<<<<<<<<
+ *     if hasattr(mod, "__contracts__"):
+ *         cnames = getattr(mod, "__contracts__")
+ */
+      __pyx_t_1 = __Pyx_GetAttr(__pyx_v_contracts, __pyx_n_u_init); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 91, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_t_3 = __Pyx_PyList_Append(__pyx_v_raws, __pyx_t_1); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 91, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+      /* "pop/pop.contract.pyx":89
+ *         raws.append(getattr(contracts, name))
+ *     if hasattr(contracts, "init"):
+ *         if "init" not in loaded_contracts:             # <<<<<<<<<<<<<<
+ *             loaded_contracts.append("init")
+ *             raws.append(getattr(contracts, "init"))
+ */
+    }
+
+    /* "pop/pop.contract.pyx":88
+ *         loaded_contracts.append(name)
+ *         raws.append(getattr(contracts, name))
+ *     if hasattr(contracts, "init"):             # <<<<<<<<<<<<<<
+ *         if "init" not in loaded_contracts:
+ *             loaded_contracts.append("init")
+ */
+  }
+
+  /* "pop/pop.contract.pyx":92
+ *             loaded_contracts.append("init")
+ *             raws.append(getattr(contracts, "init"))
+ *     if hasattr(mod, "__contracts__"):             # <<<<<<<<<<<<<<
+ *         cnames = getattr(mod, "__contracts__")
+ *         for cname in cnames:
+ */
+  __pyx_t_2 = __Pyx_HasAttr(__pyx_v_mod, __pyx_n_u_contracts_2); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 92, __pyx_L1_error)
+  if (__pyx_t_2) {
+
+    /* "pop/pop.contract.pyx":93
+ *             raws.append(getattr(contracts, "init"))
+ *     if hasattr(mod, "__contracts__"):
+ *         cnames = getattr(mod, "__contracts__")             # <<<<<<<<<<<<<<
+ *         for cname in cnames:
+ *             if cname in contracts:
+ */
+    __pyx_t_1 = __Pyx_GetAttr(__pyx_v_mod, __pyx_n_u_contracts_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 93, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_v_cnames = __pyx_t_1;
+    __pyx_t_1 = 0;
+
+    /* "pop/pop.contract.pyx":94
+ *     if hasattr(mod, "__contracts__"):
+ *         cnames = getattr(mod, "__contracts__")
+ *         for cname in cnames:             # <<<<<<<<<<<<<<
+ *             if cname in contracts:
+ *                 loaded_contracts.append(cname)
+ */
+    if (likely(PyList_CheckExact(__pyx_v_cnames)) || PyTuple_CheckExact(__pyx_v_cnames)) {
+      __pyx_t_1 = __pyx_v_cnames; __Pyx_INCREF(__pyx_t_1);
+      __pyx_t_4 = 0;
+      __pyx_t_5 = NULL;
+    } else {
+      __pyx_t_4 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_cnames); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 94, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_t_5 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 94, __pyx_L1_error)
+    }
+    for (;;) {
+      if (likely(!__pyx_t_5)) {
+        if (likely(PyList_CheckExact(__pyx_t_1))) {
+          {
+            Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_1);
+            #if !CYTHON_ASSUME_SAFE_MACROS
+            if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 94, __pyx_L1_error)
+            #endif
+            if (__pyx_t_4 >= __pyx_temp) break;
+          }
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_6 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_4); __Pyx_INCREF(__pyx_t_6); __pyx_t_4++; if (unlikely((0 < 0))) __PYX_ERR(0, 94, __pyx_L1_error)
+          #else
+          __pyx_t_6 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 94, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          #endif
+        } else {
+          {
+            Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_1);
+            #if !CYTHON_ASSUME_SAFE_MACROS
+            if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 94, __pyx_L1_error)
+            #endif
+            if (__pyx_t_4 >= __pyx_temp) break;
+          }
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_4); __Pyx_INCREF(__pyx_t_6); __pyx_t_4++; if (unlikely((0 < 0))) __PYX_ERR(0, 94, __pyx_L1_error)
+          #else
+          __pyx_t_6 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 94, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          #endif
+        }
+      } else {
+        __pyx_t_6 = __pyx_t_5(__pyx_t_1);
+        if (unlikely(!__pyx_t_6)) {
+          PyObject* exc_type = PyErr_Occurred();
+          if (exc_type) {
+            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+            else __PYX_ERR(0, 94, __pyx_L1_error)
+          }
+          break;
+        }
+        __Pyx_GOTREF(__pyx_t_6);
+      }
+      __Pyx_XDECREF_SET(__pyx_v_cname, __pyx_t_6);
+      __pyx_t_6 = 0;
+
+      /* "pop/pop.contract.pyx":95
+ *         cnames = getattr(mod, "__contracts__")
+ *         for cname in cnames:
+ *             if cname in contracts:             # <<<<<<<<<<<<<<
+ *                 loaded_contracts.append(cname)
+ *                 raws.append(getattr(contracts, cname))
+ */
+      __pyx_t_2 = (__Pyx_PySequence_ContainsTF(__pyx_v_cname, __pyx_v_contracts, Py_EQ)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 95, __pyx_L1_error)
+      if (__pyx_t_2) {
+
+        /* "pop/pop.contract.pyx":96
+ *         for cname in cnames:
+ *             if cname in contracts:
+ *                 loaded_contracts.append(cname)             # <<<<<<<<<<<<<<
+ *                 raws.append(getattr(contracts, cname))
+ *     return raws
+ */
+        __pyx_t_3 = __Pyx_PyList_Append(__pyx_v_loaded_contracts, __pyx_v_cname); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 96, __pyx_L1_error)
+
+        /* "pop/pop.contract.pyx":97
+ *             if cname in contracts:
+ *                 loaded_contracts.append(cname)
+ *                 raws.append(getattr(contracts, cname))             # <<<<<<<<<<<<<<
+ *     return raws
+ * 
+ */
+        __pyx_t_6 = __Pyx_GetAttr(__pyx_v_contracts, __pyx_v_cname); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 97, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_6);
+        __pyx_t_3 = __Pyx_PyList_Append(__pyx_v_raws, __pyx_t_6); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 97, __pyx_L1_error)
+        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+
+        /* "pop/pop.contract.pyx":95
+ *         cnames = getattr(mod, "__contracts__")
+ *         for cname in cnames:
+ *             if cname in contracts:             # <<<<<<<<<<<<<<
+ *                 loaded_contracts.append(cname)
+ *                 raws.append(getattr(contracts, cname))
+ */
+      }
+
+      /* "pop/pop.contract.pyx":94
+ *     if hasattr(mod, "__contracts__"):
+ *         cnames = getattr(mod, "__contracts__")
+ *         for cname in cnames:             # <<<<<<<<<<<<<<
+ *             if cname in contracts:
+ *                 loaded_contracts.append(cname)
+ */
+    }
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+    /* "pop/pop.contract.pyx":92
+ *             loaded_contracts.append("init")
+ *             raws.append(getattr(contracts, "init"))
+ *     if hasattr(mod, "__contracts__"):             # <<<<<<<<<<<<<<
+ *         cnames = getattr(mod, "__contracts__")
+ *         for cname in cnames:
+ */
+  }
+
+  /* "pop/pop.contract.pyx":98
+ *                 loaded_contracts.append(cname)
+ *                 raws.append(getattr(contracts, cname))
+ *     return raws             # <<<<<<<<<<<<<<
+ * 
+ * cdef class Contracted:
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_raws);
+  __pyx_r = __pyx_v_raws;
+  goto __pyx_L0;
+
+  /* "pop/pop.contract.pyx":69
+ * 
+ * 
+ * def load_contract(             # <<<<<<<<<<<<<<
+ *     contracts: "pop.hub.Sub",
+ *     default_contracts: Iterable[str],
+ */
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_AddTraceback("pop.contract.load_contract", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_raws);
+  __Pyx_XDECREF(__pyx_v_loaded_contracts);
+  __Pyx_XDECREF(__pyx_v_cnames);
+  __Pyx_XDECREF(__pyx_v_cname);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":119
+ * 
+ * 
+ *     def __init__(self, hub, contracts:list, func:object, ref:str, name:str, implicit_hub:bool=True):             # <<<<<<<<<<<<<<
+ *         self.__name__ = name
+ *         self.__wrapped__ = func
+ */
+
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_10Contracted_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
+  PyObject *__pyx_v_hub = 0;
+  PyObject *__pyx_v_contracts = 0;
+  PyObject *__pyx_v_func = 0;
+  PyObject *__pyx_v_ref = 0;
+  PyObject *__pyx_v_name = 0;
+  PyObject *__pyx_v_implicit_hub = 0;
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[6] = {0,0,0,0,0,0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
   #if CYTHON_ASSUME_SAFE_MACROS
   __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #else
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return -1;
   #endif
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_base_dicts,0};
-    values[0] = __Pyx_Arg_NewRef_VARARGS(((PyObject *)Py_None));
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_hub,&__pyx_n_s_contracts,&__pyx_n_s_func,&__pyx_n_s_ref,&__pyx_n_s_name,&__pyx_n_s_implicit_hub,0};
+    values[5] = __Pyx_Arg_NewRef_VARARGS(((PyObject *)Py_True));
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
+        case  6: values[5] = __Pyx_Arg_VARARGS(__pyx_args, 5);
+        CYTHON_FALLTHROUGH;
+        case  5: values[4] = __Pyx_Arg_VARARGS(__pyx_args, 4);
+        CYTHON_FALLTHROUGH;
+        case  4: values[3] = __Pyx_Arg_VARARGS(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_VARARGS(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_VARARGS(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_VARARGS(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_VARARGS(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_hub)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 119, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_contracts)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[1]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 119, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 5, 6, 1); __PYX_ERR(0, 119, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (likely((values[2] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_func)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[2]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 119, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 5, 6, 2); __PYX_ERR(0, 119, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  3:
+        if (likely((values[3] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_ref)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[3]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 119, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 5, 6, 3); __PYX_ERR(0, 119, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  4:
+        if (likely((values[4] = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_name)) != 0)) {
+          (void)__Pyx_Arg_NewRef_VARARGS(values[4]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 119, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 5, 6, 4); __PYX_ERR(0, 119, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  5:
         if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_base_dicts);
-          if (value) { values[0] = __Pyx_Arg_NewRef_VARARGS(value); kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 31, __pyx_L3_error)
+          PyObject* value = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_implicit_hub);
+          if (value) { values[5] = __Pyx_Arg_NewRef_VARARGS(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 119, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 31, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 119, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
-        case  1: values[0] = __Pyx_Arg_VARARGS(__pyx_args, 0);
+        case  6: values[5] = __Pyx_Arg_VARARGS(__pyx_args, 5);
         CYTHON_FALLTHROUGH;
-        case  0: break;
+        case  5: values[4] = __Pyx_Arg_VARARGS(__pyx_args, 4);
+        values[3] = __Pyx_Arg_VARARGS(__pyx_args, 3);
+        values[2] = __Pyx_Arg_VARARGS(__pyx_args, 2);
+        values[1] = __Pyx_Arg_VARARGS(__pyx_args, 1);
+        values[0] = __Pyx_Arg_VARARGS(__pyx_args, 0);
+        break;
         default: goto __pyx_L5_argtuple_error;
       }
     }
-    __pyx_v_base_dicts = values[0];
+    __pyx_v_hub = values[0];
+    __pyx_v_contracts = ((PyObject*)values[1]);
+    __pyx_v_func = values[2];
+    __pyx_v_ref = ((PyObject*)values[3]);
+    __pyx_v_name = ((PyObject*)values[4]);
+    __pyx_v_implicit_hub = values[5];
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("__init__", 0, 0, 1, __pyx_nargs); __PYX_ERR(0, 31, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__init__", 0, 5, 6, __pyx_nargs); __PYX_ERR(0, 119, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("pop.data.MultidictCache.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return -1;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache___init__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self), __pyx_v_base_dicts);
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_contracts), (&PyList_Type), 0, "contracts", 1))) __PYX_ERR(0, 119, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_ref), (&PyUnicode_Type), 0, "ref", 1))) __PYX_ERR(0, 119, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_name), (&PyUnicode_Type), 0, "name", 1))) __PYX_ERR(0, 119, __pyx_L1_error)
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted___init__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), __pyx_v_hub, __pyx_v_contracts, __pyx_v_func, __pyx_v_ref, __pyx_v_name, __pyx_v_implicit_hub);
 
   /* function exit code */
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __pyx_r = -1;
+  __pyx_L0:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_3pop_4data_14MultidictCache___init__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_base_dicts) {
+static int __pyx_pf_3pop_8contract_10Contracted___init__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_hub, PyObject *__pyx_v_contracts, PyObject *__pyx_v_func, PyObject *__pyx_v_ref, PyObject *__pyx_v_name, PyObject *__pyx_v_implicit_hub) {
   int __pyx_r;
   __Pyx_RefNannyDeclarations
-  int __pyx_t_1;
-  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_1 = NULL;
+  int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__init__", 0);
-  __Pyx_INCREF(__pyx_v_base_dicts);
+  __Pyx_RefNannySetupContext("__init__", 1);
 
-  /* "pop/pop.data.pyx":32
+  /* "pop/pop.contract.pyx":120
  * 
- *     def __init__(self, base_dicts=None):
- *         if base_dicts is None:             # <<<<<<<<<<<<<<
- *             base_dicts = []
- *         self._base_dicts = base_dicts
- */
-  __pyx_t_1 = (__pyx_v_base_dicts == Py_None);
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":33
- *     def __init__(self, base_dicts=None):
- *         if base_dicts is None:
- *             base_dicts = []             # <<<<<<<<<<<<<<
- *         self._base_dicts = base_dicts
- *         self._cache = dict[str, object]()
+ *     def __init__(self, hub, contracts:list, func:object, ref:str, name:str, implicit_hub:bool=True):
+ *         self.__name__ = name             # <<<<<<<<<<<<<<
+ *         self.__wrapped__ = func
+ *         self._sig_errors = []
+ */
+  __Pyx_INCREF(__pyx_v_name);
+  __Pyx_GIVEREF(__pyx_v_name);
+  __Pyx_GOTREF(__pyx_v_self->__name__);
+  __Pyx_DECREF(__pyx_v_self->__name__);
+  __pyx_v_self->__name__ = __pyx_v_name;
+
+  /* "pop/pop.contract.pyx":121
+ *     def __init__(self, hub, contracts:list, func:object, ref:str, name:str, implicit_hub:bool=True):
+ *         self.__name__ = name
+ *         self.__wrapped__ = func             # <<<<<<<<<<<<<<
+ *         self._sig_errors = []
+ *         self.contracts = contracts or []
+ */
+  __Pyx_INCREF(__pyx_v_func);
+  __Pyx_GIVEREF(__pyx_v_func);
+  __Pyx_GOTREF(__pyx_v_self->__pyx___wrapped__);
+  __Pyx_DECREF(__pyx_v_self->__pyx___wrapped__);
+  __pyx_v_self->__pyx___wrapped__ = __pyx_v_func;
+
+  /* "pop/pop.contract.pyx":122
+ *         self.__name__ = name
+ *         self.__wrapped__ = func
+ *         self._sig_errors = []             # <<<<<<<<<<<<<<
+ *         self.contracts = contracts or []
+ *         self.func = func
  */
-    __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 33, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __Pyx_DECREF_SET(__pyx_v_base_dicts, __pyx_t_2);
-    __pyx_t_2 = 0;
+  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 122, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->_sig_errors);
+  __Pyx_DECREF(__pyx_v_self->_sig_errors);
+  __pyx_v_self->_sig_errors = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
-    /* "pop/pop.data.pyx":32
- * 
- *     def __init__(self, base_dicts=None):
- *         if base_dicts is None:             # <<<<<<<<<<<<<<
- *             base_dicts = []
- *         self._base_dicts = base_dicts
+  /* "pop/pop.contract.pyx":123
+ *         self.__wrapped__ = func
+ *         self._sig_errors = []
+ *         self.contracts = contracts or []             # <<<<<<<<<<<<<<
+ *         self.func = func
+ *         self.hub = hub
  */
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_contracts); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 123, __pyx_L1_error)
+  if (!__pyx_t_2) {
+  } else {
+    __Pyx_INCREF(__pyx_v_contracts);
+    __pyx_t_1 = __pyx_v_contracts;
+    goto __pyx_L3_bool_binop_done;
   }
+  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 123, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_t_3);
+  __pyx_t_1 = __pyx_t_3;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_L3_bool_binop_done:;
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->contracts);
+  __Pyx_DECREF(__pyx_v_self->contracts);
+  __pyx_v_self->contracts = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
-  /* "pop/pop.data.pyx":34
- *         if base_dicts is None:
- *             base_dicts = []
- *         self._base_dicts = base_dicts             # <<<<<<<<<<<<<<
- *         self._cache = dict[str, object]()
- *         self._split_cache = dict[str, list[str]]()
- */
-  if (!(likely(PyList_CheckExact(__pyx_v_base_dicts))||((__pyx_v_base_dicts) == Py_None) || __Pyx_RaiseUnexpectedTypeError("list", __pyx_v_base_dicts))) __PYX_ERR(0, 34, __pyx_L1_error)
-  __pyx_t_2 = __pyx_v_base_dicts;
-  __Pyx_INCREF(__pyx_t_2);
-  __Pyx_GIVEREF(__pyx_t_2);
-  __Pyx_GOTREF(__pyx_v_self->_base_dicts);
-  __Pyx_DECREF(__pyx_v_self->_base_dicts);
-  __pyx_v_self->_base_dicts = ((PyObject*)__pyx_t_2);
-  __pyx_t_2 = 0;
-
-  /* "pop/pop.data.pyx":35
- *             base_dicts = []
- *         self._base_dicts = base_dicts
- *         self._cache = dict[str, object]()             # <<<<<<<<<<<<<<
- *         self._split_cache = dict[str, list[str]]()
+  /* "pop/pop.contract.pyx":124
+ *         self._sig_errors = []
+ *         self.contracts = contracts or []
+ *         self.func = func             # <<<<<<<<<<<<<<
+ *         self.hub = hub
+ *         self.implicit_hub = implicit_hub
+ */
+  __Pyx_INCREF(__pyx_v_func);
+  __Pyx_GIVEREF(__pyx_v_func);
+  __Pyx_GOTREF(__pyx_v_self->func);
+  __Pyx_DECREF(__pyx_v_self->func);
+  __pyx_v_self->func = __pyx_v_func;
+
+  /* "pop/pop.contract.pyx":125
+ *         self.contracts = contracts or []
+ *         self.func = func
+ *         self.hub = hub             # <<<<<<<<<<<<<<
+ *         self.implicit_hub = implicit_hub
+ *         self.ref = ref
+ */
+  __Pyx_INCREF(__pyx_v_hub);
+  __Pyx_GIVEREF(__pyx_v_hub);
+  __Pyx_GOTREF(__pyx_v_self->hub);
+  __Pyx_DECREF(__pyx_v_self->hub);
+  __pyx_v_self->hub = __pyx_v_hub;
+
+  /* "pop/pop.contract.pyx":126
+ *         self.func = func
+ *         self.hub = hub
+ *         self.implicit_hub = implicit_hub             # <<<<<<<<<<<<<<
+ *         self.ref = ref
+ *         # Manually define the function signature if needed
+ */
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_implicit_hub); if (unlikely((__pyx_t_2 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 126, __pyx_L1_error)
+  __pyx_v_self->implicit_hub = __pyx_t_2;
+
+  /* "pop/pop.contract.pyx":127
+ *         self.hub = hub
+ *         self.implicit_hub = implicit_hub
+ *         self.ref = ref             # <<<<<<<<<<<<<<
+ *         # Manually define the function signature if needed
+ *         self.signature = inspect.signature(self.func)
+ */
+  __Pyx_INCREF(__pyx_v_ref);
+  __Pyx_GIVEREF(__pyx_v_ref);
+  __Pyx_GOTREF(__pyx_v_self->ref);
+  __Pyx_DECREF(__pyx_v_self->ref);
+  __pyx_v_self->ref = __pyx_v_ref;
+
+  /* "pop/pop.contract.pyx":129
+ *         self.ref = ref
+ *         # Manually define the function signature if needed
+ *         self.signature = inspect.signature(self.func)             # <<<<<<<<<<<<<<
  * 
+ *         self._load_contracts()
  */
-  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 35, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_inspect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 129, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF((PyObject *)(&PyUnicode_Type));
-  __Pyx_GIVEREF((PyObject *)(&PyUnicode_Type));
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, ((PyObject *)(&PyUnicode_Type)))) __PYX_ERR(0, 35, __pyx_L1_error);
-  __Pyx_INCREF(__pyx_builtin_object);
-  __Pyx_GIVEREF(__pyx_builtin_object);
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_builtin_object)) __PYX_ERR(0, 35, __pyx_L1_error);
-  __pyx_t_4 = __Pyx_PyObject_GetItem(((PyObject *)(&PyDict_Type)), __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 35, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_signature); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 129, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __pyx_t_3 = NULL;
   __pyx_t_5 = 0;
   #if CYTHON_UNPACK_METHODS
   if (unlikely(PyMethod_Check(__pyx_t_4))) {
     __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
@@ -5126,3641 +6944,2674 @@
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_4, function);
       __pyx_t_5 = 1;
     }
   }
   #endif
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, NULL};
-    __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
+    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_self->func};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 35, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 129, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   }
-  if (!(likely(PyDict_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_2))) __PYX_ERR(0, 35, __pyx_L1_error)
-  __Pyx_GIVEREF(__pyx_t_2);
-  __Pyx_GOTREF(__pyx_v_self->_cache);
-  __Pyx_DECREF(__pyx_v_self->_cache);
-  __pyx_v_self->_cache = ((PyObject*)__pyx_t_2);
-  __pyx_t_2 = 0;
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->signature);
+  __Pyx_DECREF(__pyx_v_self->signature);
+  __pyx_v_self->signature = __pyx_t_1;
+  __pyx_t_1 = 0;
 
-  /* "pop/pop.data.pyx":36
- *         self._base_dicts = base_dicts
- *         self._cache = dict[str, object]()
- *         self._split_cache = dict[str, list[str]]()             # <<<<<<<<<<<<<<
+  /* "pop/pop.contract.pyx":131
+ *         self.signature = inspect.signature(self.func)
+ * 
+ *         self._load_contracts()             # <<<<<<<<<<<<<<
  * 
- *     cpdef _clear(self):
+ *     @property
  */
-  __pyx_t_4 = __Pyx_PyObject_GetItem(((PyObject *)(&PyList_Type)), ((PyObject *)(&PyUnicode_Type))); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 36, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_4);
-  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 36, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF((PyObject *)(&PyUnicode_Type));
-  __Pyx_GIVEREF((PyObject *)(&PyUnicode_Type));
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, ((PyObject *)(&PyUnicode_Type)))) __PYX_ERR(0, 36, __pyx_L1_error);
-  __Pyx_GIVEREF(__pyx_t_4);
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_4)) __PYX_ERR(0, 36, __pyx_L1_error);
-  __pyx_t_4 = 0;
-  __pyx_t_4 = __Pyx_PyObject_GetItem(((PyObject *)(&PyDict_Type)), __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 36, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_4);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = NULL;
-  __pyx_t_5 = 0;
-  #if CYTHON_UNPACK_METHODS
-  if (unlikely(PyMethod_Check(__pyx_t_4))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
-      __Pyx_INCREF(__pyx_t_3);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_4, function);
-      __pyx_t_5 = 1;
-    }
-  }
-  #endif
-  {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, NULL};
-    __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 36, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-  }
-  if (!(likely(PyDict_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_2))) __PYX_ERR(0, 36, __pyx_L1_error)
-  __Pyx_GIVEREF(__pyx_t_2);
-  __Pyx_GOTREF(__pyx_v_self->_split_cache);
-  __Pyx_DECREF(__pyx_v_self->_split_cache);
-  __pyx_v_self->_split_cache = ((PyObject*)__pyx_t_2);
-  __pyx_t_2 = 0;
+  __pyx_t_1 = ((struct __pyx_vtabstruct_3pop_8contract_Contracted *)__pyx_v_self->__pyx_vtab)->_load_contracts(__pyx_v_self); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 131, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "pop/pop.data.pyx":31
- *     cdef dict[str, list[str]] _split_cache
+  /* "pop/pop.contract.pyx":119
+ * 
  * 
- *     def __init__(self, base_dicts=None):             # <<<<<<<<<<<<<<
- *         if base_dicts is None:
- *             base_dicts = []
+ *     def __init__(self, hub, contracts:list, func:object, ref:str, name:str, implicit_hub:bool=True):             # <<<<<<<<<<<<<<
+ *         self.__name__ = name
+ *         self.__wrapped__ = func
  */
 
   /* function exit code */
   __pyx_r = 0;
   goto __pyx_L0;
   __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("pop.data.MultidictCache.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_base_dicts);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":38
- *         self._split_cache = dict[str, list[str]]()
+/* "pop/pop.contract.pyx":133
+ *         self._load_contracts()
  * 
- *     cpdef _clear(self):             # <<<<<<<<<<<<<<
- *         self._cache.clear()
- *         self._split_cache.clear()
+ *     @property             # <<<<<<<<<<<<<<
+ *     def __signature__(self):
+ *         return self.signature
  */
 
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_3_clear(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyObject *__pyx_f_3pop_4data_14MultidictCache__clear(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, int __pyx_skip_dispatch) {
-  PyObject *__pyx_r = NULL;
+/* Python wrapper */
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_13__signature___1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_13__signature___1__get__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
-  int __pyx_t_5;
-  int __pyx_t_6;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("_clear", 1);
-  /* Check if called by wrapper */
-  if (unlikely(__pyx_skip_dispatch)) ;
-  /* Check if overridden in Python */
-  else if (unlikely((Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0) || __Pyx_PyType_HasFeature(Py_TYPE(((PyObject *)__pyx_v_self)), (Py_TPFLAGS_IS_ABSTRACT | Py_TPFLAGS_HEAPTYPE)))) {
-    #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
-    static PY_UINT64_T __pyx_tp_dict_version = __PYX_DICT_VERSION_INIT, __pyx_obj_dict_version = __PYX_DICT_VERSION_INIT;
-    if (unlikely(!__Pyx_object_dict_version_matches(((PyObject *)__pyx_v_self), __pyx_tp_dict_version, __pyx_obj_dict_version))) {
-      PY_UINT64_T __pyx_typedict_guard = __Pyx_get_tp_dict_version(((PyObject *)__pyx_v_self));
-      #endif
-      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_clear); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 38, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      if (!__Pyx_IsSameCFunction(__pyx_t_1, (void*) __pyx_pw_3pop_4data_14MultidictCache_3_clear)) {
-        __Pyx_XDECREF(__pyx_r);
-        __Pyx_INCREF(__pyx_t_1);
-        __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
-        __pyx_t_5 = 0;
-        #if CYTHON_UNPACK_METHODS
-        if (unlikely(PyMethod_Check(__pyx_t_3))) {
-          __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
-          if (likely(__pyx_t_4)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-            __Pyx_INCREF(__pyx_t_4);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_3, function);
-            __pyx_t_5 = 1;
-          }
-        }
-        #endif
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_4, NULL};
-          __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
-          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-          if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 38, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-        }
-        __pyx_r = __pyx_t_2;
-        __pyx_t_2 = 0;
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        goto __pyx_L0;
-      }
-      #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
-      __pyx_tp_dict_version = __Pyx_get_tp_dict_version(((PyObject *)__pyx_v_self));
-      __pyx_obj_dict_version = __Pyx_get_object_dict_version(((PyObject *)__pyx_v_self));
-      if (unlikely(__pyx_typedict_guard != __pyx_tp_dict_version)) {
-        __pyx_tp_dict_version = __pyx_obj_dict_version = __PYX_DICT_VERSION_INIT;
-      }
-      #endif
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
-    }
-    #endif
-  }
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_13__signature_____get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
-  /* "pop/pop.data.pyx":39
- * 
- *     cpdef _clear(self):
- *         self._cache.clear()             # <<<<<<<<<<<<<<
- *         self._split_cache.clear()
- * 
- */
-  if (unlikely(__pyx_v_self->_cache == Py_None)) {
-    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "clear");
-    __PYX_ERR(0, 39, __pyx_L1_error)
-  }
-  __pyx_t_6 = __Pyx_PyDict_Clear(__pyx_v_self->_cache); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 39, __pyx_L1_error)
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_13__signature_____get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__get__", 1);
 
-  /* "pop/pop.data.pyx":40
- *     cpdef _clear(self):
- *         self._cache.clear()
- *         self._split_cache.clear()             # <<<<<<<<<<<<<<
+  /* "pop/pop.contract.pyx":135
+ *     @property
+ *     def __signature__(self):
+ *         return self.signature             # <<<<<<<<<<<<<<
  * 
- *     def __getitem__(self, key:str):
+ *     @property
  */
-  if (unlikely(__pyx_v_self->_split_cache == Py_None)) {
-    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "clear");
-    __PYX_ERR(0, 40, __pyx_L1_error)
-  }
-  __pyx_t_6 = __Pyx_PyDict_Clear(__pyx_v_self->_split_cache); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 40, __pyx_L1_error)
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_self->signature);
+  __pyx_r = __pyx_v_self->signature;
+  goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":38
- *         self._split_cache = dict[str, list[str]]()
+  /* "pop/pop.contract.pyx":133
+ *         self._load_contracts()
  * 
- *     cpdef _clear(self):             # <<<<<<<<<<<<<<
- *         self._cache.clear()
- *         self._split_cache.clear()
+ *     @property             # <<<<<<<<<<<<<<
+ *     def __signature__(self):
+ *         return self.signature
  */
 
   /* function exit code */
-  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
-  goto __pyx_L0;
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("pop.data.MultidictCache._clear", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
+/* "pop/pop.contract.pyx":137
+ *         return self.signature
+ * 
+ *     @property             # <<<<<<<<<<<<<<
+ *     def __dict__(self):
+ *         return self.func.__dict__
+ */
+
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_3_clear(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_14MultidictCache_3_clear = {"_clear", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_3_clear, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_3_clear(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
-  #endif
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_8__dict___1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_8__dict___1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("_clear (wrapper)", 0);
-  #if !CYTHON_METH_FASTCALL
-  #if CYTHON_ASSUME_SAFE_MACROS
-  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
-  #endif
-  #endif
-  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  if (unlikely(__pyx_nargs > 0)) {
-    __Pyx_RaiseArgtupleInvalid("_clear", 1, 0, 0, __pyx_nargs); return NULL;}
-  if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "_clear", 0))) return NULL;
-  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_2_clear(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self));
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_8__dict_____get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_2_clear(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_8__dict_____get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("_clear", 1);
+  __Pyx_RefNannySetupContext("__get__", 1);
+
+  /* "pop/pop.contract.pyx":139
+ *     @property
+ *     def __dict__(self):
+ *         return self.func.__dict__             # <<<<<<<<<<<<<<
+ * 
+ *     cdef _get_contracts_by_type(self, contract_type:str):
+ */
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_f_3pop_4data_14MultidictCache__clear(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->func, __pyx_n_s_dict); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 139, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
+  /* "pop/pop.contract.pyx":137
+ *         return self.signature
+ * 
+ *     @property             # <<<<<<<<<<<<<<
+ *     def __dict__(self):
+ *         return self.func.__dict__
+ */
+
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.MultidictCache._clear", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted.__dict__.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":42
- *         self._split_cache.clear()
+/* "pop/pop.contract.pyx":141
+ *         return self.func.__dict__
  * 
- *     def __getitem__(self, key:str):             # <<<<<<<<<<<<<<
- *         if key in self._cache:
- *             return self._cache[key]
+ *     cdef _get_contracts_by_type(self, contract_type:str):             # <<<<<<<<<<<<<<
+ *         matches = []
+ *         fn_contract_name = f"{contract_type}_{self.__name__}"
  */
 
-/* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_5__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_5__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__getitem__ (wrapper)", 0);
-  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_key), (&PyUnicode_Type), 0, "key", 1))) __PYX_ERR(0, 42, __pyx_L1_error)
-  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_4__getitem__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self), ((PyObject*)__pyx_v_key));
-
-  /* function exit code */
-  goto __pyx_L0;
-  __pyx_L1_error:;
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_4__getitem__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_key) {
-  PyObject *__pyx_v_parts = NULL;
-  PyObject *__pyx_v_base_dict = NULL;
-  PyObject *__pyx_v_finder = NULL;
-  PyObject *__pyx_v_part = NULL;
+static PyObject *__pyx_f_3pop_8contract_10Contracted__get_contracts_by_type(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_contract_type) {
+  PyObject *__pyx_v_matches = NULL;
+  PyObject *__pyx_v_fn_contract_name = NULL;
+  PyObject *__pyx_v_contract = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  int __pyx_t_1;
-  PyObject *__pyx_t_2 = NULL;
-  Py_ssize_t __pyx_t_3;
+  PyObject *__pyx_t_1 = NULL;
+  Py_ssize_t __pyx_t_2;
+  Py_UCS4 __pyx_t_3;
   PyObject *__pyx_t_4 = NULL;
-  PyObject *__pyx_t_5 = NULL;
-  PyObject *__pyx_t_6 = NULL;
-  PyObject *__pyx_t_7 = NULL;
-  Py_ssize_t __pyx_t_8;
-  PyObject *(*__pyx_t_9)(PyObject *);
-  PyObject *__pyx_t_10 = NULL;
-  int __pyx_t_11;
-  PyObject *__pyx_t_12 = NULL;
-  Py_UCS4 __pyx_t_13;
+  int __pyx_t_5;
+  int __pyx_t_6;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__getitem__", 1);
-
-  /* "pop/pop.data.pyx":43
- * 
- *     def __getitem__(self, key:str):
- *         if key in self._cache:             # <<<<<<<<<<<<<<
- *             return self._cache[key]
- * 
- */
-  if (unlikely(__pyx_v_self->_cache == Py_None)) {
-    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
-    __PYX_ERR(0, 43, __pyx_L1_error)
-  }
-  __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_key, __pyx_v_self->_cache, Py_EQ)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 43, __pyx_L1_error)
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":44
- *     def __getitem__(self, key:str):
- *         if key in self._cache:
- *             return self._cache[key]             # <<<<<<<<<<<<<<
- * 
- *         if key not in self._split_cache:
- */
-    __Pyx_XDECREF(__pyx_r);
-    if (unlikely(__pyx_v_self->_cache == Py_None)) {
-      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-      __PYX_ERR(0, 44, __pyx_L1_error)
-    }
-    __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_v_self->_cache, __pyx_v_key); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 44, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_r = __pyx_t_2;
-    __pyx_t_2 = 0;
-    goto __pyx_L0;
-
-    /* "pop/pop.data.pyx":43
- * 
- *     def __getitem__(self, key:str):
- *         if key in self._cache:             # <<<<<<<<<<<<<<
- *             return self._cache[key]
- * 
- */
-  }
-
-  /* "pop/pop.data.pyx":46
- *             return self._cache[key]
- * 
- *         if key not in self._split_cache:             # <<<<<<<<<<<<<<
- *             self._split_cache[key] = key.split('.')
- * 
- */
-  if (unlikely(__pyx_v_self->_split_cache == Py_None)) {
-    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
-    __PYX_ERR(0, 46, __pyx_L1_error)
-  }
-  __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_key, __pyx_v_self->_split_cache, Py_NE)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 46, __pyx_L1_error)
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":47
- * 
- *         if key not in self._split_cache:
- *             self._split_cache[key] = key.split('.')             # <<<<<<<<<<<<<<
- * 
- *         parts = self._split_cache[key]
- */
-    __pyx_t_2 = PyUnicode_Split(__pyx_v_key, __Pyx_NoneAsNull(__pyx_kp_u__2), -1L); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 47, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    if (unlikely(__pyx_v_self->_split_cache == Py_None)) {
-      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-      __PYX_ERR(0, 47, __pyx_L1_error)
-    }
-    if (unlikely((PyDict_SetItem(__pyx_v_self->_split_cache, __pyx_v_key, __pyx_t_2) < 0))) __PYX_ERR(0, 47, __pyx_L1_error)
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_RefNannySetupContext("_get_contracts_by_type", 1);
 
-    /* "pop/pop.data.pyx":46
- *             return self._cache[key]
- * 
- *         if key not in self._split_cache:             # <<<<<<<<<<<<<<
- *             self._split_cache[key] = key.split('.')
+  /* "pop/pop.contract.pyx":142
  * 
+ *     cdef _get_contracts_by_type(self, contract_type:str):
+ *         matches = []             # <<<<<<<<<<<<<<
+ *         fn_contract_name = f"{contract_type}_{self.__name__}"
+ *         for contract in self.contracts:
  */
-  }
+  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 142, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_v_matches = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
-  /* "pop/pop.data.pyx":49
- *             self._split_cache[key] = key.split('.')
- * 
- *         parts = self._split_cache[key]             # <<<<<<<<<<<<<<
- *         for base_dict in self._base_dicts:
- *             finder = base_dict
+  /* "pop/pop.contract.pyx":143
+ *     cdef _get_contracts_by_type(self, contract_type:str):
+ *         matches = []
+ *         fn_contract_name = f"{contract_type}_{self.__name__}"             # <<<<<<<<<<<<<<
+ *         for contract in self.contracts:
+ *             if hasattr(contract, fn_contract_name):
  */
-  if (unlikely(__pyx_v_self->_split_cache == Py_None)) {
-    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-    __PYX_ERR(0, 49, __pyx_L1_error)
-  }
-  __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_v_self->_split_cache, __pyx_v_key); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 49, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_v_parts = __pyx_t_2;
+  __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
   __pyx_t_2 = 0;
+  __pyx_t_3 = 127;
+  __Pyx_INCREF(__pyx_v_contract_type);
+  __pyx_t_3 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_v_contract_type) > __pyx_t_3) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_v_contract_type) : __pyx_t_3;
+  __pyx_t_2 += __Pyx_PyUnicode_GET_LENGTH(__pyx_v_contract_type);
+  __Pyx_GIVEREF(__pyx_v_contract_type);
+  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_contract_type);
+  __Pyx_INCREF(__pyx_n_u_);
+  __pyx_t_2 += 1;
+  __Pyx_GIVEREF(__pyx_n_u_);
+  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_n_u_);
+  __pyx_t_4 = __Pyx_PyUnicode_Unicode(__pyx_v_self->__name__); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_3 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) > __pyx_t_3) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) : __pyx_t_3;
+  __pyx_t_2 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_4);
+  __Pyx_GIVEREF(__pyx_t_4);
+  PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_t_4);
+  __pyx_t_4 = 0;
+  __pyx_t_4 = __Pyx_PyUnicode_Join(__pyx_t_1, 3, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_v_fn_contract_name = ((PyObject*)__pyx_t_4);
+  __pyx_t_4 = 0;
 
-  /* "pop/pop.data.pyx":50
- * 
- *         parts = self._split_cache[key]
- *         for base_dict in self._base_dicts:             # <<<<<<<<<<<<<<
- *             finder = base_dict
- *             try:
+  /* "pop/pop.contract.pyx":144
+ *         matches = []
+ *         fn_contract_name = f"{contract_type}_{self.__name__}"
+ *         for contract in self.contracts:             # <<<<<<<<<<<<<<
+ *             if hasattr(contract, fn_contract_name):
+ *                 matches.append(getattr(contract, fn_contract_name))
  */
-  if (unlikely(__pyx_v_self->_base_dicts == Py_None)) {
+  if (unlikely(__pyx_v_self->contracts == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
-    __PYX_ERR(0, 50, __pyx_L1_error)
+    __PYX_ERR(0, 144, __pyx_L1_error)
   }
-  __pyx_t_2 = __pyx_v_self->_base_dicts; __Pyx_INCREF(__pyx_t_2);
-  __pyx_t_3 = 0;
+  __pyx_t_4 = __pyx_v_self->contracts; __Pyx_INCREF(__pyx_t_4);
+  __pyx_t_2 = 0;
   for (;;) {
     {
-      Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_2);
+      Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_4);
       #if !CYTHON_ASSUME_SAFE_MACROS
-      if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 50, __pyx_L1_error)
+      if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 144, __pyx_L1_error)
       #endif
-      if (__pyx_t_3 >= __pyx_temp) break;
+      if (__pyx_t_2 >= __pyx_temp) break;
     }
     #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    __pyx_t_4 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_4); __pyx_t_3++; if (unlikely((0 < 0))) __PYX_ERR(0, 50, __pyx_L1_error)
+    __pyx_t_1 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_2); __Pyx_INCREF(__pyx_t_1); __pyx_t_2++; if (unlikely((0 < 0))) __PYX_ERR(0, 144, __pyx_L1_error)
     #else
-    __pyx_t_4 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 50, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_4);
+    __pyx_t_1 = __Pyx_PySequence_ITEM(__pyx_t_4, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 144, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
     #endif
-    __Pyx_XDECREF_SET(__pyx_v_base_dict, __pyx_t_4);
-    __pyx_t_4 = 0;
+    __Pyx_XDECREF_SET(__pyx_v_contract, __pyx_t_1);
+    __pyx_t_1 = 0;
 
-    /* "pop/pop.data.pyx":51
- *         parts = self._split_cache[key]
- *         for base_dict in self._base_dicts:
- *             finder = base_dict             # <<<<<<<<<<<<<<
- *             try:
- *                 for part in parts:
- */
-    __Pyx_INCREF(__pyx_v_base_dict);
-    __Pyx_XDECREF_SET(__pyx_v_finder, __pyx_v_base_dict);
-
-    /* "pop/pop.data.pyx":52
- *         for base_dict in self._base_dicts:
- *             finder = base_dict
- *             try:             # <<<<<<<<<<<<<<
- *                 for part in parts:
- *                     finder = finder[part]
+    /* "pop/pop.contract.pyx":145
+ *         fn_contract_name = f"{contract_type}_{self.__name__}"
+ *         for contract in self.contracts:
+ *             if hasattr(contract, fn_contract_name):             # <<<<<<<<<<<<<<
+ *                 matches.append(getattr(contract, fn_contract_name))
+ *             if hasattr(contract, contract_type):
  */
-    {
-      __Pyx_PyThreadState_declare
-      __Pyx_PyThreadState_assign
-      __Pyx_ExceptionSave(&__pyx_t_5, &__pyx_t_6, &__pyx_t_7);
-      __Pyx_XGOTREF(__pyx_t_5);
-      __Pyx_XGOTREF(__pyx_t_6);
-      __Pyx_XGOTREF(__pyx_t_7);
-      /*try:*/ {
-
-        /* "pop/pop.data.pyx":53
- *             finder = base_dict
- *             try:
- *                 for part in parts:             # <<<<<<<<<<<<<<
- *                     finder = finder[part]
- *                 self._cache[key] = finder
- */
-        if (likely(PyList_CheckExact(__pyx_v_parts)) || PyTuple_CheckExact(__pyx_v_parts)) {
-          __pyx_t_4 = __pyx_v_parts; __Pyx_INCREF(__pyx_t_4);
-          __pyx_t_8 = 0;
-          __pyx_t_9 = NULL;
-        } else {
-          __pyx_t_8 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_parts); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 53, __pyx_L7_error)
-          __Pyx_GOTREF(__pyx_t_4);
-          __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_4); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 53, __pyx_L7_error)
-        }
-        for (;;) {
-          if (likely(!__pyx_t_9)) {
-            if (likely(PyList_CheckExact(__pyx_t_4))) {
-              {
-                Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_4);
-                #if !CYTHON_ASSUME_SAFE_MACROS
-                if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 53, __pyx_L7_error)
-                #endif
-                if (__pyx_t_8 >= __pyx_temp) break;
-              }
-              #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-              __pyx_t_10 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_8); __Pyx_INCREF(__pyx_t_10); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 53, __pyx_L7_error)
-              #else
-              __pyx_t_10 = __Pyx_PySequence_ITEM(__pyx_t_4, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 53, __pyx_L7_error)
-              __Pyx_GOTREF(__pyx_t_10);
-              #endif
-            } else {
-              {
-                Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_4);
-                #if !CYTHON_ASSUME_SAFE_MACROS
-                if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 53, __pyx_L7_error)
-                #endif
-                if (__pyx_t_8 >= __pyx_temp) break;
-              }
-              #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-              __pyx_t_10 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_8); __Pyx_INCREF(__pyx_t_10); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 53, __pyx_L7_error)
-              #else
-              __pyx_t_10 = __Pyx_PySequence_ITEM(__pyx_t_4, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 53, __pyx_L7_error)
-              __Pyx_GOTREF(__pyx_t_10);
-              #endif
-            }
-          } else {
-            __pyx_t_10 = __pyx_t_9(__pyx_t_4);
-            if (unlikely(!__pyx_t_10)) {
-              PyObject* exc_type = PyErr_Occurred();
-              if (exc_type) {
-                if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-                else __PYX_ERR(0, 53, __pyx_L7_error)
-              }
-              break;
-            }
-            __Pyx_GOTREF(__pyx_t_10);
-          }
-          __Pyx_XDECREF_SET(__pyx_v_part, __pyx_t_10);
-          __pyx_t_10 = 0;
+    __pyx_t_5 = __Pyx_HasAttr(__pyx_v_contract, __pyx_v_fn_contract_name); if (unlikely(__pyx_t_5 == ((int)-1))) __PYX_ERR(0, 145, __pyx_L1_error)
+    if (__pyx_t_5) {
 
-          /* "pop/pop.data.pyx":54
- *             try:
- *                 for part in parts:
- *                     finder = finder[part]             # <<<<<<<<<<<<<<
- *                 self._cache[key] = finder
- *                 return finder
- */
-          __pyx_t_10 = __Pyx_PyObject_GetItem(__pyx_v_finder, __pyx_v_part); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 54, __pyx_L7_error)
-          __Pyx_GOTREF(__pyx_t_10);
-          __Pyx_DECREF_SET(__pyx_v_finder, __pyx_t_10);
-          __pyx_t_10 = 0;
-
-          /* "pop/pop.data.pyx":53
- *             finder = base_dict
- *             try:
- *                 for part in parts:             # <<<<<<<<<<<<<<
- *                     finder = finder[part]
- *                 self._cache[key] = finder
- */
-        }
-        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-
-        /* "pop/pop.data.pyx":55
- *                 for part in parts:
- *                     finder = finder[part]
- *                 self._cache[key] = finder             # <<<<<<<<<<<<<<
- *                 return finder
- *             except KeyError:
- */
-        if (unlikely(__pyx_v_self->_cache == Py_None)) {
-          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-          __PYX_ERR(0, 55, __pyx_L7_error)
-        }
-        if (unlikely((PyDict_SetItem(__pyx_v_self->_cache, __pyx_v_key, __pyx_v_finder) < 0))) __PYX_ERR(0, 55, __pyx_L7_error)
-
-        /* "pop/pop.data.pyx":56
- *                     finder = finder[part]
- *                 self._cache[key] = finder
- *                 return finder             # <<<<<<<<<<<<<<
- *             except KeyError:
- *                 continue
- */
-        __Pyx_XDECREF(__pyx_r);
-        __Pyx_INCREF(__pyx_v_finder);
-        __pyx_r = __pyx_v_finder;
-        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-        goto __pyx_L11_try_return;
-
-        /* "pop/pop.data.pyx":52
- *         for base_dict in self._base_dicts:
- *             finder = base_dict
- *             try:             # <<<<<<<<<<<<<<
- *                 for part in parts:
- *                     finder = finder[part]
+      /* "pop/pop.contract.pyx":146
+ *         for contract in self.contracts:
+ *             if hasattr(contract, fn_contract_name):
+ *                 matches.append(getattr(contract, fn_contract_name))             # <<<<<<<<<<<<<<
+ *             if hasattr(contract, contract_type):
+ *                 matches.append(getattr(contract, contract_type))
  */
-      }
-      __pyx_L7_error:;
-      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-
-      /* "pop/pop.data.pyx":57
- *                 self._cache[key] = finder
- *                 return finder
- *             except KeyError:             # <<<<<<<<<<<<<<
- *                 continue
- * 
- */
-      __pyx_t_11 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_KeyError);
-      if (__pyx_t_11) {
-        __Pyx_AddTraceback("pop.data.MultidictCache.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-        if (__Pyx_GetException(&__pyx_t_4, &__pyx_t_10, &__pyx_t_12) < 0) __PYX_ERR(0, 57, __pyx_L9_except_error)
-        __Pyx_XGOTREF(__pyx_t_4);
-        __Pyx_XGOTREF(__pyx_t_10);
-        __Pyx_XGOTREF(__pyx_t_12);
-
-        /* "pop/pop.data.pyx":58
- *                 return finder
- *             except KeyError:
- *                 continue             # <<<<<<<<<<<<<<
- * 
- *         raise KeyError(f"Item '{key}' not found in any base dictionary")
- */
-        goto __pyx_L18_except_continue;
-        __pyx_L18_except_continue:;
-        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
-        __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
-        goto __pyx_L13_try_continue;
-      }
-      goto __pyx_L9_except_error;
+      __pyx_t_1 = __Pyx_GetAttr(__pyx_v_contract, __pyx_v_fn_contract_name); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 146, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_t_6 = __Pyx_PyList_Append(__pyx_v_matches, __pyx_t_1); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 146, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-      /* "pop/pop.data.pyx":52
- *         for base_dict in self._base_dicts:
- *             finder = base_dict
- *             try:             # <<<<<<<<<<<<<<
- *                 for part in parts:
- *                     finder = finder[part]
+      /* "pop/pop.contract.pyx":145
+ *         fn_contract_name = f"{contract_type}_{self.__name__}"
+ *         for contract in self.contracts:
+ *             if hasattr(contract, fn_contract_name):             # <<<<<<<<<<<<<<
+ *                 matches.append(getattr(contract, fn_contract_name))
+ *             if hasattr(contract, contract_type):
  */
-      __pyx_L9_except_error:;
-      __Pyx_XGIVEREF(__pyx_t_5);
-      __Pyx_XGIVEREF(__pyx_t_6);
-      __Pyx_XGIVEREF(__pyx_t_7);
-      __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
-      goto __pyx_L1_error;
-      __pyx_L13_try_continue:;
-      __Pyx_XGIVEREF(__pyx_t_5);
-      __Pyx_XGIVEREF(__pyx_t_6);
-      __Pyx_XGIVEREF(__pyx_t_7);
-      __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
-      goto __pyx_L5_continue;
-      __pyx_L11_try_return:;
-      __Pyx_XGIVEREF(__pyx_t_5);
-      __Pyx_XGIVEREF(__pyx_t_6);
-      __Pyx_XGIVEREF(__pyx_t_7);
-      __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
-      goto __pyx_L0;
     }
 
-    /* "pop/pop.data.pyx":50
+    /* "pop/pop.contract.pyx":147
+ *             if hasattr(contract, fn_contract_name):
+ *                 matches.append(getattr(contract, fn_contract_name))
+ *             if hasattr(contract, contract_type):             # <<<<<<<<<<<<<<
+ *                 matches.append(getattr(contract, contract_type))
  * 
- *         parts = self._split_cache[key]
- *         for base_dict in self._base_dicts:             # <<<<<<<<<<<<<<
- *             finder = base_dict
- *             try:
  */
-    __pyx_L5_continue:;
-  }
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_t_5 = __Pyx_HasAttr(__pyx_v_contract, __pyx_v_contract_type); if (unlikely(__pyx_t_5 == ((int)-1))) __PYX_ERR(0, 147, __pyx_L1_error)
+    if (__pyx_t_5) {
 
-  /* "pop/pop.data.pyx":60
- *                 continue
- * 
- *         raise KeyError(f"Item '{key}' not found in any base dictionary")             # <<<<<<<<<<<<<<
+      /* "pop/pop.contract.pyx":148
+ *                 matches.append(getattr(contract, fn_contract_name))
+ *             if hasattr(contract, contract_type):
+ *                 matches.append(getattr(contract, contract_type))             # <<<<<<<<<<<<<<
  * 
- *     def __iter__(self):
+ *         if contract_type == "post":
  */
-  __pyx_t_2 = PyTuple_New(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = 0;
-  __pyx_t_13 = 127;
-  __Pyx_INCREF(__pyx_kp_u_Item);
-  __pyx_t_3 += 6;
-  __Pyx_GIVEREF(__pyx_kp_u_Item);
-  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_kp_u_Item);
-  __Pyx_INCREF(__pyx_v_key);
-  __pyx_t_13 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_v_key) > __pyx_t_13) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_v_key) : __pyx_t_13;
-  __pyx_t_3 += __Pyx_PyUnicode_GET_LENGTH(__pyx_v_key);
-  __Pyx_GIVEREF(__pyx_v_key);
-  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_key);
-  __Pyx_INCREF(__pyx_kp_u_not_found_in_any_base_dictionar);
-  __pyx_t_3 += 34;
-  __Pyx_GIVEREF(__pyx_kp_u_not_found_in_any_base_dictionar);
-  PyTuple_SET_ITEM(__pyx_t_2, 2, __pyx_kp_u_not_found_in_any_base_dictionar);
-  __pyx_t_12 = __Pyx_PyUnicode_Join(__pyx_t_2, 3, __pyx_t_3, __pyx_t_13); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 60, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_12);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_KeyError, __pyx_t_12); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-  __Pyx_Raise(__pyx_t_2, 0, 0, 0);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __PYX_ERR(0, 60, __pyx_L1_error)
+      __pyx_t_1 = __Pyx_GetAttr(__pyx_v_contract, __pyx_v_contract_type); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 148, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_t_6 = __Pyx_PyList_Append(__pyx_v_matches, __pyx_t_1); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 148, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "pop/pop.data.pyx":42
- *         self._split_cache.clear()
+      /* "pop/pop.contract.pyx":147
+ *             if hasattr(contract, fn_contract_name):
+ *                 matches.append(getattr(contract, fn_contract_name))
+ *             if hasattr(contract, contract_type):             # <<<<<<<<<<<<<<
+ *                 matches.append(getattr(contract, contract_type))
  * 
- *     def __getitem__(self, key:str):             # <<<<<<<<<<<<<<
- *         if key in self._cache:
- *             return self._cache[key]
  */
+    }
 
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_XDECREF(__pyx_t_12);
-  __Pyx_AddTraceback("pop.data.MultidictCache.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_parts);
-  __Pyx_XDECREF(__pyx_v_base_dict);
-  __Pyx_XDECREF(__pyx_v_finder);
-  __Pyx_XDECREF(__pyx_v_part);
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
+    /* "pop/pop.contract.pyx":144
+ *         matches = []
+ *         fn_contract_name = f"{contract_type}_{self.__name__}"
+ *         for contract in self.contracts:             # <<<<<<<<<<<<<<
+ *             if hasattr(contract, fn_contract_name):
+ *                 matches.append(getattr(contract, fn_contract_name))
+ */
+  }
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-/* "pop/pop.data.pyx":62
- *         raise KeyError(f"Item '{key}' not found in any base dictionary")
+  /* "pop/pop.contract.pyx":150
+ *                 matches.append(getattr(contract, contract_type))
  * 
- *     def __iter__(self):             # <<<<<<<<<<<<<<
- *         return iter({k for base_dict in self._base_dicts for k in base_dict})
+ *         if contract_type == "post":             # <<<<<<<<<<<<<<
+ *             matches.reverse()
  * 
  */
+  __pyx_t_5 = (__Pyx_PyUnicode_Equals(__pyx_v_contract_type, __pyx_n_u_post, Py_EQ)); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 150, __pyx_L1_error)
+  if (__pyx_t_5) {
 
-/* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_7__iter__(PyObject *__pyx_v_self); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_7__iter__(PyObject *__pyx_v_self) {
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__iter__ (wrapper)", 0);
-  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_6__iter__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self));
-
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
+    /* "pop/pop.contract.pyx":151
+ * 
+ *         if contract_type == "post":
+ *             matches.reverse()             # <<<<<<<<<<<<<<
+ * 
+ *         return matches
+ */
+    __pyx_t_6 = PyList_Reverse(__pyx_v_matches); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 151, __pyx_L1_error)
 
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_6__iter__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self) {
-  PyObject *__pyx_7genexpr__pyx_v_base_dict = NULL;
-  PyObject *__pyx_7genexpr__pyx_v_k = NULL;
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  Py_ssize_t __pyx_t_3;
-  PyObject *__pyx_t_4 = NULL;
-  Py_ssize_t __pyx_t_5;
-  PyObject *(*__pyx_t_6)(PyObject *);
-  PyObject *__pyx_t_7 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__iter__", 1);
+    /* "pop/pop.contract.pyx":150
+ *                 matches.append(getattr(contract, contract_type))
+ * 
+ *         if contract_type == "post":             # <<<<<<<<<<<<<<
+ *             matches.reverse()
+ * 
+ */
+  }
 
-  /* "pop/pop.data.pyx":63
+  /* "pop/pop.contract.pyx":153
+ *             matches.reverse()
  * 
- *     def __iter__(self):
- *         return iter({k for base_dict in self._base_dicts for k in base_dict})             # <<<<<<<<<<<<<<
+ *         return matches             # <<<<<<<<<<<<<<
  * 
- *     def __contains__(self, item):
+ *     cdef _load_contracts(self):
  */
   __Pyx_XDECREF(__pyx_r);
-  { /* enter inner scope */
-    __pyx_t_1 = PySet_New(NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 63, __pyx_L5_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    if (unlikely(__pyx_v_self->_base_dicts == Py_None)) {
-      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
-      __PYX_ERR(0, 63, __pyx_L5_error)
-    }
-    __pyx_t_2 = __pyx_v_self->_base_dicts; __Pyx_INCREF(__pyx_t_2);
-    __pyx_t_3 = 0;
-    for (;;) {
-      {
-        Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_2);
-        #if !CYTHON_ASSUME_SAFE_MACROS
-        if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 63, __pyx_L5_error)
-        #endif
-        if (__pyx_t_3 >= __pyx_temp) break;
-      }
-      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-      __pyx_t_4 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_4); __pyx_t_3++; if (unlikely((0 < 0))) __PYX_ERR(0, 63, __pyx_L5_error)
-      #else
-      __pyx_t_4 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 63, __pyx_L5_error)
-      __Pyx_GOTREF(__pyx_t_4);
-      #endif
-      __Pyx_XDECREF_SET(__pyx_7genexpr__pyx_v_base_dict, __pyx_t_4);
-      __pyx_t_4 = 0;
-      if (likely(PyList_CheckExact(__pyx_7genexpr__pyx_v_base_dict)) || PyTuple_CheckExact(__pyx_7genexpr__pyx_v_base_dict)) {
-        __pyx_t_4 = __pyx_7genexpr__pyx_v_base_dict; __Pyx_INCREF(__pyx_t_4);
-        __pyx_t_5 = 0;
-        __pyx_t_6 = NULL;
-      } else {
-        __pyx_t_5 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_7genexpr__pyx_v_base_dict); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 63, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_4);
-        __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 63, __pyx_L5_error)
-      }
-      for (;;) {
-        if (likely(!__pyx_t_6)) {
-          if (likely(PyList_CheckExact(__pyx_t_4))) {
-            {
-              Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_4);
-              #if !CYTHON_ASSUME_SAFE_MACROS
-              if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 63, __pyx_L5_error)
-              #endif
-              if (__pyx_t_5 >= __pyx_temp) break;
-            }
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_7 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 63, __pyx_L5_error)
-            #else
-            __pyx_t_7 = __Pyx_PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 63, __pyx_L5_error)
-            __Pyx_GOTREF(__pyx_t_7);
-            #endif
-          } else {
-            {
-              Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_4);
-              #if !CYTHON_ASSUME_SAFE_MACROS
-              if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 63, __pyx_L5_error)
-              #endif
-              if (__pyx_t_5 >= __pyx_temp) break;
-            }
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_7 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 63, __pyx_L5_error)
-            #else
-            __pyx_t_7 = __Pyx_PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 63, __pyx_L5_error)
-            __Pyx_GOTREF(__pyx_t_7);
-            #endif
-          }
-        } else {
-          __pyx_t_7 = __pyx_t_6(__pyx_t_4);
-          if (unlikely(!__pyx_t_7)) {
-            PyObject* exc_type = PyErr_Occurred();
-            if (exc_type) {
-              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-              else __PYX_ERR(0, 63, __pyx_L5_error)
-            }
-            break;
-          }
-          __Pyx_GOTREF(__pyx_t_7);
-        }
-        __Pyx_XDECREF_SET(__pyx_7genexpr__pyx_v_k, __pyx_t_7);
-        __pyx_t_7 = 0;
-        if (unlikely(PySet_Add(__pyx_t_1, (PyObject*)__pyx_7genexpr__pyx_v_k))) __PYX_ERR(0, 63, __pyx_L5_error)
-      }
-      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-    }
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_base_dict); __pyx_7genexpr__pyx_v_base_dict = 0;
-    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_k); __pyx_7genexpr__pyx_v_k = 0;
-    goto __pyx_L12_exit_scope;
-    __pyx_L5_error:;
-    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_base_dict); __pyx_7genexpr__pyx_v_base_dict = 0;
-    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_k); __pyx_7genexpr__pyx_v_k = 0;
-    goto __pyx_L1_error;
-    __pyx_L12_exit_scope:;
-  } /* exit inner scope */
-  __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 63, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_r = __pyx_t_2;
-  __pyx_t_2 = 0;
+  __Pyx_INCREF(__pyx_v_matches);
+  __pyx_r = __pyx_v_matches;
   goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":62
- *         raise KeyError(f"Item '{key}' not found in any base dictionary")
- * 
- *     def __iter__(self):             # <<<<<<<<<<<<<<
- *         return iter({k for base_dict in self._base_dicts for k in base_dict})
+  /* "pop/pop.contract.pyx":141
+ *         return self.func.__dict__
  * 
+ *     cdef _get_contracts_by_type(self, contract_type:str):             # <<<<<<<<<<<<<<
+ *         matches = []
+ *         fn_contract_name = f"{contract_type}_{self.__name__}"
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_AddTraceback("pop.data.MultidictCache.__iter__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
+  __Pyx_AddTraceback("pop.contract.Contracted._get_contracts_by_type", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = 0;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_7genexpr__pyx_v_base_dict);
-  __Pyx_XDECREF(__pyx_7genexpr__pyx_v_k);
+  __Pyx_XDECREF(__pyx_v_matches);
+  __Pyx_XDECREF(__pyx_v_fn_contract_name);
+  __Pyx_XDECREF(__pyx_v_contract);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
+static PyObject *__pyx_gb_3pop_8contract_10Contracted_15_load_contracts_2generator2(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
 
-/* "pop/pop.data.pyx":65
- *         return iter({k for base_dict in self._base_dicts for k in base_dict})
- * 
- *     def __contains__(self, item):             # <<<<<<<<<<<<<<
- *         return any(item in base_dict for base_dict in self._base_dicts)
- * 
- */
-
-/* Python wrapper */
-static int __pyx_pw_3pop_4data_14MultidictCache_9__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_item); /*proto*/
-static int __pyx_pw_3pop_4data_14MultidictCache_9__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_item) {
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  int __pyx_r;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__contains__ (wrapper)", 0);
-  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_8__contains__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self), ((PyObject *)__pyx_v_item));
-
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-static PyObject *__pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
-
-/* "pop/pop.data.pyx":66
+/* "pop/pop.contract.pyx":164
+ *             "post": self._get_contracts_by_type("post"),
+ *         }
+ *         self._has_contracts = sum(len(l) for l in self.contract_functions.values()) > 0             # <<<<<<<<<<<<<<
  * 
- *     def __contains__(self, item):
- *         return any(item in base_dict for base_dict in self._base_dicts)             # <<<<<<<<<<<<<<
- * 
- * cdef class ImmutableNamespaceDict:
+ *     async def __call__(self, *args, **kwargs):
  */
 
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_12__contains___genexpr(PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *__pyx_cur_scope;
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_15_load_contracts_genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *__pyx_cur_scope;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("genexpr", 0);
-  __pyx_cur_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)__pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr(__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr, __pyx_empty_tuple, NULL);
+  __pyx_cur_scope = (struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *)__pyx_tp_new_3pop_8contract___pyx_scope_struct__genexpr(__pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr, __pyx_empty_tuple, NULL);
   if (unlikely(!__pyx_cur_scope)) {
-    __pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)Py_None);
+    __pyx_cur_scope = ((struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *)Py_None);
     __Pyx_INCREF(Py_None);
-    __PYX_ERR(0, 66, __pyx_L1_error)
+    __PYX_ERR(0, 164, __pyx_L1_error)
   } else {
     __Pyx_GOTREF((PyObject *)__pyx_cur_scope);
   }
-  __pyx_cur_scope->__pyx_outer_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *) __pyx_self;
-  __Pyx_INCREF((PyObject *)__pyx_cur_scope->__pyx_outer_scope);
-  __Pyx_GIVEREF((PyObject *)__pyx_cur_scope->__pyx_outer_scope);
   __pyx_cur_scope->__pyx_genexpr_arg_0 = __pyx_genexpr_arg_0;
   __Pyx_INCREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
   __Pyx_GIVEREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
   {
-    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_contains___locals_genexpr, __pyx_n_s_pop_data); if (unlikely(!gen)) __PYX_ERR(0, 66, __pyx_L1_error)
+    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_3pop_8contract_10Contracted_15_load_contracts_2generator2, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_Contracted__load_contracts_local, __pyx_n_s_pop_contract); if (unlikely(!gen)) __PYX_ERR(0, 164, __pyx_L1_error)
     __Pyx_DECREF(__pyx_cur_scope);
     __Pyx_RefNannyFinishContext();
     return (PyObject *) gen;
   }
 
   /* function exit code */
   __pyx_L1_error:;
-  __Pyx_AddTraceback("pop.data.MultidictCache.__contains__.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted._load_contracts.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __Pyx_DECREF((PyObject *)__pyx_cur_scope);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
+static PyObject *__pyx_gb_3pop_8contract_10Contracted_15_load_contracts_2generator2(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
 {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *__pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)__pyx_generator->closure);
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *__pyx_cur_scope = ((struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *)__pyx_generator->closure);
   PyObject *__pyx_r = NULL;
   PyObject *__pyx_t_1 = NULL;
   Py_ssize_t __pyx_t_2;
-  PyObject *__pyx_t_3 = NULL;
+  Py_ssize_t __pyx_t_3;
   int __pyx_t_4;
+  PyObject *__pyx_t_5 = NULL;
+  int __pyx_t_6;
+  Py_ssize_t __pyx_t_7;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("genexpr", 0);
   switch (__pyx_generator->resume_label) {
     case 0: goto __pyx_L3_first_run;
+    case 1: goto __pyx_L6_resume_from_yield;
     default: /* CPython raises the right error here */
     __Pyx_RefNannyFinishContext();
     return NULL;
   }
   __pyx_L3_first_run:;
-  if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 66, __pyx_L1_error)
-  if (unlikely(!__pyx_cur_scope->__pyx_genexpr_arg_0)) { __Pyx_RaiseUnboundLocalError(".0"); __PYX_ERR(0, 66, __pyx_L1_error) }
+  if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 164, __pyx_L1_error)
+  __pyx_t_2 = 0;
+  if (unlikely(!__pyx_cur_scope->__pyx_genexpr_arg_0)) { __Pyx_RaiseUnboundLocalError(".0"); __PYX_ERR(0, 164, __pyx_L1_error) }
   if (unlikely(__pyx_cur_scope->__pyx_genexpr_arg_0 == Py_None)) {
-    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
-    __PYX_ERR(0, 66, __pyx_L1_error)
+    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "values");
+    __PYX_ERR(0, 164, __pyx_L1_error)
   }
-  __pyx_t_1 = __pyx_cur_scope->__pyx_genexpr_arg_0; __Pyx_INCREF(__pyx_t_1);
-  __pyx_t_2 = 0;
-  for (;;) {
-    {
-      Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_1);
-      #if !CYTHON_ASSUME_SAFE_MACROS
-      if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 66, __pyx_L1_error)
-      #endif
-      if (__pyx_t_2 >= __pyx_temp) break;
-    }
-    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_3); __pyx_t_2++; if (unlikely((0 < 0))) __PYX_ERR(0, 66, __pyx_L1_error)
-    #else
-    __pyx_t_3 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 66, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    #endif
-    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_base_dict);
-    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_base_dict, __pyx_t_3);
-    __Pyx_GIVEREF(__pyx_t_3);
-    __pyx_t_3 = 0;
-    if (unlikely(!__pyx_cur_scope->__pyx_outer_scope->__pyx_v_item)) { __Pyx_RaiseClosureNameError("item"); __PYX_ERR(0, 66, __pyx_L1_error) }
-    __pyx_t_4 = (__Pyx_PySequence_ContainsTF(__pyx_cur_scope->__pyx_outer_scope->__pyx_v_item, __pyx_cur_scope->__pyx_v_base_dict, Py_EQ)); if (unlikely((__pyx_t_4 < 0))) __PYX_ERR(0, 66, __pyx_L1_error)
-    if (__pyx_t_4) {
-      __Pyx_XDECREF(__pyx_r);
-      __Pyx_INCREF(Py_True);
-      __pyx_r = Py_True;
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      goto __pyx_L0;
-    }
+  __pyx_t_5 = __Pyx_dict_iterator(__pyx_cur_scope->__pyx_genexpr_arg_0, 1, __pyx_n_s_values, (&__pyx_t_3), (&__pyx_t_4)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 164, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __Pyx_XDECREF(__pyx_t_1);
+  __pyx_t_1 = __pyx_t_5;
+  __pyx_t_5 = 0;
+  while (1) {
+    __pyx_t_6 = __Pyx_dict_iter_next(__pyx_t_1, __pyx_t_3, &__pyx_t_2, NULL, &__pyx_t_5, NULL, __pyx_t_4);
+    if (unlikely(__pyx_t_6 == 0)) break;
+    if (unlikely(__pyx_t_6 == -1)) __PYX_ERR(0, 164, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_l);
+    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_l, __pyx_t_5);
+    __Pyx_GIVEREF(__pyx_t_5);
+    __pyx_t_5 = 0;
+    __pyx_t_7 = PyObject_Length(__pyx_cur_scope->__pyx_v_l); if (unlikely(__pyx_t_7 == ((Py_ssize_t)-1))) __PYX_ERR(0, 164, __pyx_L1_error)
+    __pyx_t_5 = PyInt_FromSsize_t(__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 164, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_r = __pyx_t_5;
+    __pyx_t_5 = 0;
+    __Pyx_XGIVEREF(__pyx_t_1);
+    __pyx_cur_scope->__pyx_t_0 = __pyx_t_1;
+    __pyx_cur_scope->__pyx_t_1 = __pyx_t_2;
+    __pyx_cur_scope->__pyx_t_2 = __pyx_t_3;
+    __pyx_cur_scope->__pyx_t_3 = __pyx_t_4;
+    __Pyx_XGIVEREF(__pyx_r);
+    __Pyx_RefNannyFinishContext();
+    __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+    /* return from generator, yielding value */
+    __pyx_generator->resume_label = 1;
+    return __pyx_r;
+    __pyx_L6_resume_from_yield:;
+    __pyx_t_1 = __pyx_cur_scope->__pyx_t_0;
+    __pyx_cur_scope->__pyx_t_0 = 0;
+    __Pyx_XGOTREF(__pyx_t_1);
+    __pyx_t_2 = __pyx_cur_scope->__pyx_t_1;
+    __pyx_t_3 = __pyx_cur_scope->__pyx_t_2;
+    __pyx_t_4 = __pyx_cur_scope->__pyx_t_3;
+    if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 164, __pyx_L1_error)
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  /*else*/ {
-    __Pyx_XDECREF(__pyx_r);
-    __Pyx_INCREF(Py_False);
-    __pyx_r = Py_False;
-    goto __pyx_L0;
-  }
   CYTHON_MAYBE_UNUSED_VAR(__pyx_cur_scope);
 
   /* function exit code */
+  PyErr_SetNone(PyExc_StopIteration);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_Generator_Replace_StopIteration(0);
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_5);
   __Pyx_AddTraceback("genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_XDECREF(__pyx_r); __pyx_r = 0;
   #if !CYTHON_USE_EXC_INFO_STACK
   __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
   #endif
   __pyx_generator->resume_label = -1;
   __Pyx_Coroutine_clear((PyObject*)__pyx_generator);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":65
- *         return iter({k for base_dict in self._base_dicts for k in base_dict})
- * 
- *     def __contains__(self, item):             # <<<<<<<<<<<<<<
- *         return any(item in base_dict for base_dict in self._base_dicts)
+/* "pop/pop.contract.pyx":155
+ *         return matches
  * 
+ *     cdef _load_contracts(self):             # <<<<<<<<<<<<<<
+ *         # if Contracted - only allow regular pre/post
+ *         # if ContractedAsync - allow coroutines and functions
  */
 
-static int __pyx_pf_3pop_4data_14MultidictCache_8__contains__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v_item) {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *__pyx_cur_scope;
-  PyObject *__pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator = 0;
-  int __pyx_r;
+static PyObject *__pyx_f_3pop_8contract_10Contracted__load_contracts(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
+  PyObject *__pyx_gb_3pop_8contract_10Contracted_15_load_contracts_2generator2 = 0;
+  PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
-  int __pyx_t_3;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__contains__", 0);
-  __pyx_cur_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)__pyx_tp_new_3pop_4data___pyx_scope_struct____contains__(__pyx_ptype_3pop_4data___pyx_scope_struct____contains__, __pyx_empty_tuple, NULL);
-  if (unlikely(!__pyx_cur_scope)) {
-    __pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)Py_None);
-    __Pyx_INCREF(Py_None);
-    __PYX_ERR(0, 65, __pyx_L1_error)
-  } else {
-    __Pyx_GOTREF((PyObject *)__pyx_cur_scope);
-  }
-  __pyx_cur_scope->__pyx_v_item = __pyx_v_item;
-  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_item);
-  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_item);
+  __Pyx_RefNannySetupContext("_load_contracts", 1);
 
-  /* "pop/pop.data.pyx":66
+  /* "pop/pop.contract.pyx":160
  * 
- *     def __contains__(self, item):
- *         return any(item in base_dict for base_dict in self._base_dicts)             # <<<<<<<<<<<<<<
- * 
- * cdef class ImmutableNamespaceDict:
+ *         self.contract_functions = {
+ *             "pre": self._get_contracts_by_type("pre"),             # <<<<<<<<<<<<<<
+ *             "call": self._get_contracts_by_type("call")[:1],
+ *             "post": self._get_contracts_by_type("post"),
  */
-  __pyx_t_1 = __pyx_pf_3pop_4data_14MultidictCache_12__contains___genexpr(((PyObject*)__pyx_cur_scope), __pyx_v_self->_base_dicts); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 66, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 160, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_Generator_Next(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 66, __pyx_L1_error)
+  __pyx_t_2 = ((struct __pyx_vtabstruct_3pop_8contract_Contracted *)__pyx_v_self->__pyx_vtab)->_get_contracts_by_type(__pyx_v_self, __pyx_n_u_pre); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 160, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_t_3 = __Pyx_PyInt_As_int(__pyx_t_2); if (unlikely((__pyx_t_3 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 66, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_pre, __pyx_t_2) < 0) __PYX_ERR(0, 160, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_r = __pyx_t_3;
-  goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":65
- *         return iter({k for base_dict in self._base_dicts for k in base_dict})
+  /* "pop/pop.contract.pyx":161
+ *         self.contract_functions = {
+ *             "pre": self._get_contracts_by_type("pre"),
+ *             "call": self._get_contracts_by_type("call")[:1],             # <<<<<<<<<<<<<<
+ *             "post": self._get_contracts_by_type("post"),
+ *         }
+ */
+  __pyx_t_2 = ((struct __pyx_vtabstruct_3pop_8contract_Contracted *)__pyx_v_self->__pyx_vtab)->_get_contracts_by_type(__pyx_v_self, __pyx_n_u_call); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 161, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetSlice(__pyx_t_2, 0, 1, NULL, NULL, &__pyx_slice__2, 0, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 161, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_call, __pyx_t_3) < 0) __PYX_ERR(0, 160, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "pop/pop.contract.pyx":162
+ *             "pre": self._get_contracts_by_type("pre"),
+ *             "call": self._get_contracts_by_type("call")[:1],
+ *             "post": self._get_contracts_by_type("post"),             # <<<<<<<<<<<<<<
+ *         }
+ *         self._has_contracts = sum(len(l) for l in self.contract_functions.values()) > 0
+ */
+  __pyx_t_3 = ((struct __pyx_vtabstruct_3pop_8contract_Contracted *)__pyx_v_self->__pyx_vtab)->_get_contracts_by_type(__pyx_v_self, __pyx_n_u_post); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 162, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_post, __pyx_t_3) < 0) __PYX_ERR(0, 160, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "pop/pop.contract.pyx":159
+ *         # if ContractedAsync - allow coroutines and functions
+ * 
+ *         self.contract_functions = {             # <<<<<<<<<<<<<<
+ *             "pre": self._get_contracts_by_type("pre"),
+ *             "call": self._get_contracts_by_type("call")[:1],
+ */
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->contract_functions);
+  __Pyx_DECREF(__pyx_v_self->contract_functions);
+  __pyx_v_self->contract_functions = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+
+  /* "pop/pop.contract.pyx":164
+ *             "post": self._get_contracts_by_type("post"),
+ *         }
+ *         self._has_contracts = sum(len(l) for l in self.contract_functions.values()) > 0             # <<<<<<<<<<<<<<
  * 
- *     def __contains__(self, item):             # <<<<<<<<<<<<<<
- *         return any(item in base_dict for base_dict in self._base_dicts)
+ *     async def __call__(self, *args, **kwargs):
+ */
+  __pyx_t_1 = __pyx_pf_3pop_8contract_10Contracted_15_load_contracts_genexpr(NULL, __pyx_v_self->contract_functions); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 164, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_sum, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 164, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 164, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_4 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 164, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_v_self->_has_contracts = __pyx_t_4;
+
+  /* "pop/pop.contract.pyx":155
+ *         return matches
  * 
+ *     cdef _load_contracts(self):             # <<<<<<<<<<<<<<
+ *         # if Contracted - only allow regular pre/post
+ *         # if ContractedAsync - allow coroutines and functions
  */
 
   /* function exit code */
+  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+  goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_AddTraceback("pop.data.MultidictCache.__contains__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = -1;
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_AddTraceback("pop.contract.Contracted._load_contracts", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = 0;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_gb_3pop_4data_14MultidictCache_12__contains___2generator);
-  __Pyx_DECREF((PyObject *)__pyx_cur_scope);
+  __Pyx_XDECREF(__pyx_gb_3pop_8contract_10Contracted_15_load_contracts_2generator2);
+  __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
+static PyObject *__pyx_gb_3pop_8contract_10Contracted_4generator(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
 
-/* "(tree fragment)":1
- * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
- *     cdef tuple state
- *     cdef object _dict
+/* "pop/pop.contract.pyx":166
+ *         self._has_contracts = sum(len(l) for l in self.contract_functions.values()) > 0
+ * 
+ *     async def __call__(self, *args, **kwargs):             # <<<<<<<<<<<<<<
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_11__reduce_cython__(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_14MultidictCache_11__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_11__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_11__reduce_cython__(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  #if !CYTHON_METH_FASTCALL
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_3__call__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_3__call__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
+  PyObject *__pyx_v_args = 0;
+  PyObject *__pyx_v_kwargs = 0;
   CYTHON_UNUSED Py_ssize_t __pyx_nargs;
-  #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__reduce_cython__ (wrapper)", 0);
-  #if !CYTHON_METH_FASTCALL
+  __Pyx_RefNannySetupContext("__call__ (wrapper)", 0);
   #if CYTHON_ASSUME_SAFE_MACROS
   __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #else
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
-  #endif
-  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  if (unlikely(__pyx_nargs > 0)) {
-    __Pyx_RaiseArgtupleInvalid("__reduce_cython__", 1, 0, 0, __pyx_nargs); return NULL;}
-  if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__reduce_cython__", 0))) return NULL;
-  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_10__reduce_cython__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self));
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  if (unlikely(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__call__", 1))) return NULL;
+  if (unlikely(__pyx_kwds)) {
+    __pyx_v_kwargs = __Pyx_KwargsAsDict_VARARGS(__pyx_kwds, __pyx_kwvalues);
+    if (unlikely(!__pyx_v_kwargs)) return NULL;
+    __Pyx_GOTREF(__pyx_v_kwargs);
+  } else {
+    __pyx_v_kwargs = PyDict_New();
+    if (unlikely(!__pyx_v_kwargs)) return NULL;
+    __Pyx_GOTREF(__pyx_v_kwargs);
+  }
+  __Pyx_INCREF(__pyx_args);
+  __pyx_v_args = __pyx_args;
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_2__call__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), __pyx_v_args, __pyx_v_kwargs);
 
   /* function exit code */
+  __Pyx_DECREF(__pyx_v_args);
+  __Pyx_DECREF(__pyx_v_kwargs);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_10__reduce_cython__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self) {
-  PyObject *__pyx_v_state = 0;
-  PyObject *__pyx_v__dict = 0;
-  int __pyx_v_use_setstate;
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_2__call__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_args, PyObject *__pyx_v_kwargs) {
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *__pyx_cur_scope;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__call__", 0);
+  __pyx_cur_scope = (struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *)__pyx_tp_new_3pop_8contract___pyx_scope_struct_1___call__(__pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__, __pyx_empty_tuple, NULL);
+  if (unlikely(!__pyx_cur_scope)) {
+    __pyx_cur_scope = ((struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *)Py_None);
+    __Pyx_INCREF(Py_None);
+    __PYX_ERR(0, 166, __pyx_L1_error)
+  } else {
+    __Pyx_GOTREF((PyObject *)__pyx_cur_scope);
+  }
+  __pyx_cur_scope->__pyx_v_self = __pyx_v_self;
+  __Pyx_INCREF((PyObject *)__pyx_cur_scope->__pyx_v_self);
+  __Pyx_GIVEREF((PyObject *)__pyx_cur_scope->__pyx_v_self);
+  __pyx_cur_scope->__pyx_v_args = __pyx_v_args;
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_args);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_args);
+  __pyx_cur_scope->__pyx_v_kwargs = __pyx_v_kwargs;
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_kwargs);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_kwargs);
+  {
+    __pyx_CoroutineObject *gen = __Pyx_Coroutine_New((__pyx_coroutine_body_t) __pyx_gb_3pop_8contract_10Contracted_4generator, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_call_2, __pyx_n_s_Contracted___call, __pyx_n_s_pop_contract); if (unlikely(!gen)) __PYX_ERR(0, 166, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_cur_scope);
+    __Pyx_RefNannyFinishContext();
+    return (PyObject *) gen;
+  }
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_AddTraceback("pop.contract.Contracted.__call__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __Pyx_DECREF((PyObject *)__pyx_cur_scope);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_gb_3pop_8contract_10Contracted_4generator(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
+{
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *__pyx_cur_scope = ((struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *)__pyx_generator->closure);
+  PyObject *__pyx_r = NULL;
   PyObject *__pyx_t_1 = NULL;
-  int __pyx_t_2;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  PyObject *__pyx_t_5 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  int __pyx_t_3;
+  Py_ssize_t __pyx_t_4;
+  PyObject *(*__pyx_t_5)(PyObject *);
+  PyObject *__pyx_t_6 = NULL;
+  PyObject *__pyx_t_7 = NULL;
+  int __pyx_t_8;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__reduce_cython__", 1);
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__call__", 0);
+  switch (__pyx_generator->resume_label) {
+    case 0: goto __pyx_L3_first_run;
+    case 1: goto __pyx_L6_resume_from_await;
+    case 2: goto __pyx_L9_resume_from_await;
+    case 3: goto __pyx_L10_resume_from_await;
+    case 4: goto __pyx_L13_resume_from_await;
+    case 5: goto __pyx_L14_resume_from_await;
+    case 6: goto __pyx_L17_resume_from_await;
+    default: /* CPython raises the right error here */
+    __Pyx_RefNannyFinishContext();
+    return NULL;
+  }
+  __pyx_L3_first_run:;
+  if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 166, __pyx_L1_error)
 
-  /* "(tree fragment)":5
- *     cdef object _dict
- *     cdef bint use_setstate
- *     state = (self._base_dicts, self._cache, self._split_cache)             # <<<<<<<<<<<<<<
- *     _dict = getattr(self, '__dict__', None)
- *     if _dict is not None:
+  /* "pop/pop.contract.pyx":167
+ * 
+ *     async def __call__(self, *args, **kwargs):
+ *         if self.implicit_hub:             # <<<<<<<<<<<<<<
+ *             args = (self.hub,) + args
+ * 
  */
-  __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 5, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_INCREF(__pyx_v_self->_base_dicts);
-  __Pyx_GIVEREF(__pyx_v_self->_base_dicts);
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_self->_base_dicts)) __PYX_ERR(2, 5, __pyx_L1_error);
-  __Pyx_INCREF(__pyx_v_self->_cache);
-  __Pyx_GIVEREF(__pyx_v_self->_cache);
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_self->_cache)) __PYX_ERR(2, 5, __pyx_L1_error);
-  __Pyx_INCREF(__pyx_v_self->_split_cache);
-  __Pyx_GIVEREF(__pyx_v_self->_split_cache);
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_self->_split_cache)) __PYX_ERR(2, 5, __pyx_L1_error);
-  __pyx_v_state = ((PyObject*)__pyx_t_1);
-  __pyx_t_1 = 0;
+  if (__pyx_cur_scope->__pyx_v_self->implicit_hub) {
 
-  /* "(tree fragment)":6
- *     cdef bint use_setstate
- *     state = (self._base_dicts, self._cache, self._split_cache)
- *     _dict = getattr(self, '__dict__', None)             # <<<<<<<<<<<<<<
- *     if _dict is not None:
- *         state += (_dict,)
+    /* "pop/pop.contract.pyx":168
+ *     async def __call__(self, *args, **kwargs):
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args             # <<<<<<<<<<<<<<
+ * 
+ *         if not self._has_contracts:
  */
-  __pyx_t_1 = __Pyx_GetAttr3(((PyObject *)__pyx_v_self), __pyx_n_s_dict, Py_None); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_v__dict = __pyx_t_1;
-  __pyx_t_1 = 0;
+    __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 168, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_INCREF(__pyx_cur_scope->__pyx_v_self->hub);
+    __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_self->hub);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_cur_scope->__pyx_v_self->hub)) __PYX_ERR(0, 168, __pyx_L1_error);
+    __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_cur_scope->__pyx_v_args); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 168, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_GOTREF(__pyx_cur_scope->__pyx_v_args);
+    __Pyx_DECREF_SET(__pyx_cur_scope->__pyx_v_args, ((PyObject*)__pyx_t_2));
+    __Pyx_GIVEREF(__pyx_t_2);
+    __pyx_t_2 = 0;
 
-  /* "(tree fragment)":7
- *     state = (self._base_dicts, self._cache, self._split_cache)
- *     _dict = getattr(self, '__dict__', None)
- *     if _dict is not None:             # <<<<<<<<<<<<<<
- *         state += (_dict,)
- *         use_setstate = True
+    /* "pop/pop.contract.pyx":167
+ * 
+ *     async def __call__(self, *args, **kwargs):
+ *         if self.implicit_hub:             # <<<<<<<<<<<<<<
+ *             args = (self.hub,) + args
+ * 
  */
-  __pyx_t_2 = (__pyx_v__dict != Py_None);
-  if (__pyx_t_2) {
+  }
 
-    /* "(tree fragment)":8
- *     _dict = getattr(self, '__dict__', None)
- *     if _dict is not None:
- *         state += (_dict,)             # <<<<<<<<<<<<<<
- *         use_setstate = True
- *     else:
+  /* "pop/pop.contract.pyx":170
+ *             args = (self.hub,) + args
+ * 
+ *         if not self._has_contracts:             # <<<<<<<<<<<<<<
+ *             ret = await self.func(*args, **kwargs)
+ *             return ret
  */
-    __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 8, __pyx_L1_error)
+  __pyx_t_3 = (!__pyx_cur_scope->__pyx_v_self->_has_contracts);
+  if (__pyx_t_3) {
+
+    /* "pop/pop.contract.pyx":171
+ * 
+ *         if not self._has_contracts:
+ *             ret = await self.func(*args, **kwargs)             # <<<<<<<<<<<<<<
+ *             return ret
+ *         contract_context = ContractedContext(
+ */
+    __pyx_t_2 = PyDict_Copy(__pyx_cur_scope->__pyx_v_kwargs); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 171, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_cur_scope->__pyx_v_self->func, __pyx_cur_scope->__pyx_v_args, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 171, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_INCREF(__pyx_v__dict);
-    __Pyx_GIVEREF(__pyx_v__dict);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v__dict)) __PYX_ERR(2, 8, __pyx_L1_error);
-    __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_state, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 8, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_1);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __Pyx_DECREF_SET(__pyx_v_state, ((PyObject*)__pyx_t_3));
-    __pyx_t_3 = 0;
+    __Pyx_XGOTREF(__pyx_r);
+    if (likely(__pyx_r)) {
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from generator, awaiting value */
+      __pyx_generator->resume_label = 1;
+      return __pyx_r;
+      __pyx_L6_resume_from_await:;
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 171, __pyx_L1_error)
+      __pyx_t_1 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_1);
+    } else {
+      __pyx_t_1 = NULL;
+      if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_1) < 0) __PYX_ERR(0, 171, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+    }
+    __Pyx_GIVEREF(__pyx_t_1);
+    __pyx_cur_scope->__pyx_v_ret = __pyx_t_1;
+    __pyx_t_1 = 0;
 
-    /* "(tree fragment)":9
- *     if _dict is not None:
- *         state += (_dict,)
- *         use_setstate = True             # <<<<<<<<<<<<<<
- *     else:
- *         use_setstate = self._base_dicts is not None or self._cache is not None or self._split_cache is not None
+    /* "pop/pop.contract.pyx":172
+ *         if not self._has_contracts:
+ *             ret = await self.func(*args, **kwargs)
+ *             return ret             # <<<<<<<<<<<<<<
+ *         contract_context = ContractedContext(
+ *             self.func, args, kwargs, self.signature, self.ref, self.__name__
  */
-    __pyx_v_use_setstate = 1;
+    __Pyx_XDECREF(__pyx_r);
+    __pyx_r = NULL; __Pyx_ReturnWithStopIteration(__pyx_cur_scope->__pyx_v_ret);
+    goto __pyx_L0;
 
-    /* "(tree fragment)":7
- *     state = (self._base_dicts, self._cache, self._split_cache)
- *     _dict = getattr(self, '__dict__', None)
- *     if _dict is not None:             # <<<<<<<<<<<<<<
- *         state += (_dict,)
- *         use_setstate = True
+    /* "pop/pop.contract.pyx":170
+ *             args = (self.hub,) + args
+ * 
+ *         if not self._has_contracts:             # <<<<<<<<<<<<<<
+ *             ret = await self.func(*args, **kwargs)
+ *             return ret
  */
-    goto __pyx_L3;
   }
 
-  /* "(tree fragment)":11
- *         use_setstate = True
- *     else:
- *         use_setstate = self._base_dicts is not None or self._cache is not None or self._split_cache is not None             # <<<<<<<<<<<<<<
- *     if use_setstate:
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, None), state
+  /* "pop/pop.contract.pyx":173
+ *             ret = await self.func(*args, **kwargs)
+ *             return ret
+ *         contract_context = ContractedContext(             # <<<<<<<<<<<<<<
+ *             self.func, args, kwargs, self.signature, self.ref, self.__name__
+ *         )
  */
-  /*else*/ {
-    __pyx_t_4 = (__pyx_v_self->_base_dicts != ((PyObject*)Py_None));
-    if (!__pyx_t_4) {
+  __pyx_t_1 = PyTuple_New(6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 173, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_self->func);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_self->func);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_cur_scope->__pyx_v_self->func)) __PYX_ERR(0, 173, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_args);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_args);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_cur_scope->__pyx_v_args)) __PYX_ERR(0, 173, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_kwargs);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_kwargs);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_cur_scope->__pyx_v_kwargs)) __PYX_ERR(0, 173, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_self->signature);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_self->signature);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_cur_scope->__pyx_v_self->signature)) __PYX_ERR(0, 173, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_self->ref);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_self->ref);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 4, __pyx_cur_scope->__pyx_v_self->ref)) __PYX_ERR(0, 173, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_self->__name__);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_self->__name__);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 5, __pyx_cur_scope->__pyx_v_self->__name__)) __PYX_ERR(0, 173, __pyx_L1_error);
+  __pyx_t_2 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_3pop_8contract_ContractedContext), __pyx_t_1, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 173, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __Pyx_GIVEREF(__pyx_t_2);
+  __pyx_cur_scope->__pyx_v_contract_context = ((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_t_2);
+  __pyx_t_2 = 0;
+
+  /* "pop/pop.contract.pyx":178
+ * 
+ *         # Process pre contracts
+ *         for fn in self.contract_functions["pre"]:             # <<<<<<<<<<<<<<
+ *             pre_ret = await fn(contract_context)
+ * 
+ */
+  if (unlikely(__pyx_cur_scope->__pyx_v_self->contract_functions == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(0, 178, __pyx_L1_error)
+  }
+  __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_cur_scope->__pyx_v_self->contract_functions, __pyx_n_u_pre); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 178, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
+    __pyx_t_1 = __pyx_t_2; __Pyx_INCREF(__pyx_t_1);
+    __pyx_t_4 = 0;
+    __pyx_t_5 = NULL;
+  } else {
+    __pyx_t_4 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 178, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_5 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 178, __pyx_L1_error)
+  }
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  for (;;) {
+    if (likely(!__pyx_t_5)) {
+      if (likely(PyList_CheckExact(__pyx_t_1))) {
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_1);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 178, __pyx_L1_error)
+          #endif
+          if (__pyx_t_4 >= __pyx_temp) break;
+        }
+        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely((0 < 0))) __PYX_ERR(0, 178, __pyx_L1_error)
+        #else
+        __pyx_t_2 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 178, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        #endif
+      } else {
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_1);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 178, __pyx_L1_error)
+          #endif
+          if (__pyx_t_4 >= __pyx_temp) break;
+        }
+        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely((0 < 0))) __PYX_ERR(0, 178, __pyx_L1_error)
+        #else
+        __pyx_t_2 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 178, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        #endif
+      }
     } else {
-      __pyx_t_2 = __pyx_t_4;
-      goto __pyx_L4_bool_binop_done;
+      __pyx_t_2 = __pyx_t_5(__pyx_t_1);
+      if (unlikely(!__pyx_t_2)) {
+        PyObject* exc_type = PyErr_Occurred();
+        if (exc_type) {
+          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+          else __PYX_ERR(0, 178, __pyx_L1_error)
+        }
+        break;
+      }
+      __Pyx_GOTREF(__pyx_t_2);
     }
-    __pyx_t_4 = (__pyx_v_self->_cache != ((PyObject*)Py_None));
-    if (!__pyx_t_4) {
+    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_fn);
+    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_fn, __pyx_t_2);
+    __Pyx_GIVEREF(__pyx_t_2);
+    __pyx_t_2 = 0;
+
+    /* "pop/pop.contract.pyx":179
+ *         # Process pre contracts
+ *         for fn in self.contract_functions["pre"]:
+ *             pre_ret = await fn(contract_context)             # <<<<<<<<<<<<<<
+ * 
+ *             await self.hub.pop.contract.process_pre_result(pre_ret, fn, self)
+ */
+    __Pyx_INCREF(__pyx_cur_scope->__pyx_v_fn);
+    __pyx_t_6 = __pyx_cur_scope->__pyx_v_fn; __pyx_t_7 = NULL;
+    __pyx_t_8 = 0;
+    #if CYTHON_UNPACK_METHODS
+    if (unlikely(PyMethod_Check(__pyx_t_6))) {
+      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
+      if (likely(__pyx_t_7)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
+        __Pyx_INCREF(__pyx_t_7);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_6, function);
+        __pyx_t_8 = 1;
+      }
+    }
+    #endif
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_7, ((PyObject *)__pyx_cur_scope->__pyx_v_contract_context)};
+      __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
+      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 179, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    }
+    __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_2);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_XGOTREF(__pyx_r);
+    if (likely(__pyx_r)) {
+      __Pyx_XGIVEREF(__pyx_t_1);
+      __pyx_cur_scope->__pyx_t_0 = __pyx_t_1;
+      __pyx_cur_scope->__pyx_t_1 = __pyx_t_4;
+      __pyx_cur_scope->__pyx_t_2 = __pyx_t_5;
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from generator, awaiting value */
+      __pyx_generator->resume_label = 2;
+      return __pyx_r;
+      __pyx_L9_resume_from_await:;
+      __pyx_t_1 = __pyx_cur_scope->__pyx_t_0;
+      __pyx_cur_scope->__pyx_t_0 = 0;
+      __Pyx_XGOTREF(__pyx_t_1);
+      __pyx_t_4 = __pyx_cur_scope->__pyx_t_1;
+      __pyx_t_5 = __pyx_cur_scope->__pyx_t_2;
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 179, __pyx_L1_error)
+      __pyx_t_2 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_2);
     } else {
-      __pyx_t_2 = __pyx_t_4;
-      goto __pyx_L4_bool_binop_done;
+      __pyx_t_2 = NULL;
+      if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_2) < 0) __PYX_ERR(0, 179, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
     }
-    __pyx_t_4 = (__pyx_v_self->_split_cache != ((PyObject*)Py_None));
-    __pyx_t_2 = __pyx_t_4;
-    __pyx_L4_bool_binop_done:;
-    __pyx_v_use_setstate = __pyx_t_2;
+    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_pre_ret);
+    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_pre_ret, __pyx_t_2);
+    __Pyx_GIVEREF(__pyx_t_2);
+    __pyx_t_2 = 0;
+
+    /* "pop/pop.contract.pyx":181
+ *             pre_ret = await fn(contract_context)
+ * 
+ *             await self.hub.pop.contract.process_pre_result(pre_ret, fn, self)             # <<<<<<<<<<<<<<
+ * 
+ *         # Call the one call contract
+ */
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self->hub, __pyx_n_s_pop); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 181, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_contract); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 181, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_process_pre_result); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 181, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __pyx_t_7 = NULL;
+    __pyx_t_8 = 0;
+    #if CYTHON_UNPACK_METHODS
+    if (likely(PyMethod_Check(__pyx_t_6))) {
+      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
+      if (likely(__pyx_t_7)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
+        __Pyx_INCREF(__pyx_t_7);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_6, function);
+        __pyx_t_8 = 1;
+      }
+    }
+    #endif
+    {
+      PyObject *__pyx_callargs[4] = {__pyx_t_7, __pyx_cur_scope->__pyx_v_pre_ret, __pyx_cur_scope->__pyx_v_fn, ((PyObject *)__pyx_cur_scope->__pyx_v_self)};
+      __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_8, 3+__pyx_t_8);
+      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 181, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    }
+    __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_2);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_XGOTREF(__pyx_r);
+    if (likely(__pyx_r)) {
+      __Pyx_XGIVEREF(__pyx_t_1);
+      __pyx_cur_scope->__pyx_t_0 = __pyx_t_1;
+      __pyx_cur_scope->__pyx_t_1 = __pyx_t_4;
+      __pyx_cur_scope->__pyx_t_2 = __pyx_t_5;
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from generator, awaiting value */
+      __pyx_generator->resume_label = 3;
+      return __pyx_r;
+      __pyx_L10_resume_from_await:;
+      __pyx_t_1 = __pyx_cur_scope->__pyx_t_0;
+      __pyx_cur_scope->__pyx_t_0 = 0;
+      __Pyx_XGOTREF(__pyx_t_1);
+      __pyx_t_4 = __pyx_cur_scope->__pyx_t_1;
+      __pyx_t_5 = __pyx_cur_scope->__pyx_t_2;
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 181, __pyx_L1_error)
+    } else {
+      PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+      if (exc_type) {
+        if (likely(exc_type == PyExc_StopIteration || (exc_type != PyExc_GeneratorExit && __Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration)))) PyErr_Clear();
+        else __PYX_ERR(0, 181, __pyx_L1_error)
+      }
+    }
+
+    /* "pop/pop.contract.pyx":178
+ * 
+ *         # Process pre contracts
+ *         for fn in self.contract_functions["pre"]:             # <<<<<<<<<<<<<<
+ *             pre_ret = await fn(contract_context)
+ * 
+ */
   }
-  __pyx_L3:;
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "(tree fragment)":12
- *     else:
- *         use_setstate = self._base_dicts is not None or self._cache is not None or self._split_cache is not None
- *     if use_setstate:             # <<<<<<<<<<<<<<
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, None), state
- *     else:
+  /* "pop/pop.contract.pyx":184
+ * 
+ *         # Call the one call contract
+ *         if self.contract_functions["call"]:             # <<<<<<<<<<<<<<
+ *             ret = await self.contract_functions["call"][0](contract_context)
+ *         else:
  */
-  if (__pyx_v_use_setstate) {
+  if (unlikely(__pyx_cur_scope->__pyx_v_self->contract_functions == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(0, 184, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_cur_scope->__pyx_v_self->contract_functions, __pyx_n_u_call); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 184, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 184, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (__pyx_t_3) {
 
-    /* "(tree fragment)":13
- *         use_setstate = self._base_dicts is not None or self._cache is not None or self._split_cache is not None
- *     if use_setstate:
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, None), state             # <<<<<<<<<<<<<<
- *     else:
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
+    /* "pop/pop.contract.pyx":185
+ *         # Call the one call contract
+ *         if self.contract_functions["call"]:
+ *             ret = await self.contract_functions["call"][0](contract_context)             # <<<<<<<<<<<<<<
+ *         else:
+ *             ret = await self.func(*contract_context.args, **contract_context.kwargs)
  */
-    __Pyx_XDECREF(__pyx_r);
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_pyx_unpickle_MultidictCache); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
-    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))))) __PYX_ERR(2, 13, __pyx_L1_error);
-    __Pyx_INCREF(__pyx_int_10383136);
-    __Pyx_GIVEREF(__pyx_int_10383136);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_10383136)) __PYX_ERR(2, 13, __pyx_L1_error);
-    __Pyx_INCREF(Py_None);
-    __Pyx_GIVEREF(Py_None);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, Py_None)) __PYX_ERR(2, 13, __pyx_L1_error);
-    __pyx_t_5 = PyTuple_New(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 13, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __Pyx_GIVEREF(__pyx_t_3);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error);
+    if (unlikely(__pyx_cur_scope->__pyx_v_self->contract_functions == Py_None)) {
+      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+      __PYX_ERR(0, 185, __pyx_L1_error)
+    }
+    __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_cur_scope->__pyx_v_self->contract_functions, __pyx_n_u_call); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 185, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 185, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_t_2 = NULL;
+    __pyx_t_8 = 0;
+    #if CYTHON_UNPACK_METHODS
+    if (unlikely(PyMethod_Check(__pyx_t_6))) {
+      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_6);
+      if (likely(__pyx_t_2)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
+        __Pyx_INCREF(__pyx_t_2);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_6, function);
+        __pyx_t_8 = 1;
+      }
+    }
+    #endif
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_2, ((PyObject *)__pyx_cur_scope->__pyx_v_contract_context)};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
+      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 185, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    }
+    __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_1);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_XGOTREF(__pyx_r);
+    if (likely(__pyx_r)) {
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from generator, awaiting value */
+      __pyx_generator->resume_label = 4;
+      return __pyx_r;
+      __pyx_L13_resume_from_await:;
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 185, __pyx_L1_error)
+      __pyx_t_1 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_1);
+    } else {
+      __pyx_t_1 = NULL;
+      if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_1) < 0) __PYX_ERR(0, 185, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+    }
     __Pyx_GIVEREF(__pyx_t_1);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error);
-    __Pyx_INCREF(__pyx_v_state);
-    __Pyx_GIVEREF(__pyx_v_state);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_v_state)) __PYX_ERR(2, 13, __pyx_L1_error);
-    __pyx_t_3 = 0;
+    __pyx_cur_scope->__pyx_v_ret = __pyx_t_1;
     __pyx_t_1 = 0;
-    __pyx_r = __pyx_t_5;
-    __pyx_t_5 = 0;
-    goto __pyx_L0;
 
-    /* "(tree fragment)":12
- *     else:
- *         use_setstate = self._base_dicts is not None or self._cache is not None or self._split_cache is not None
- *     if use_setstate:             # <<<<<<<<<<<<<<
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, None), state
- *     else:
+    /* "pop/pop.contract.pyx":184
+ * 
+ *         # Call the one call contract
+ *         if self.contract_functions["call"]:             # <<<<<<<<<<<<<<
+ *             ret = await self.contract_functions["call"][0](contract_context)
+ *         else:
  */
+    goto __pyx_L12;
   }
 
-  /* "(tree fragment)":15
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, None), state
- *     else:
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)             # <<<<<<<<<<<<<<
- * def __setstate_cython__(self, __pyx_state):
- *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)
+  /* "pop/pop.contract.pyx":187
+ *             ret = await self.contract_functions["call"][0](contract_context)
+ *         else:
+ *             ret = await self.func(*contract_context.args, **contract_context.kwargs)             # <<<<<<<<<<<<<<
+ * 
+ *         # Handle post contracts
  */
   /*else*/ {
-    __Pyx_XDECREF(__pyx_r);
-    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_pyx_unpickle_MultidictCache); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 15, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error)
+    __pyx_t_1 = PySequence_Tuple(__pyx_cur_scope->__pyx_v_contract_context->args); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 187, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
-    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))))) __PYX_ERR(2, 15, __pyx_L1_error);
-    __Pyx_INCREF(__pyx_int_10383136);
-    __Pyx_GIVEREF(__pyx_int_10383136);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_10383136)) __PYX_ERR(2, 15, __pyx_L1_error);
-    __Pyx_INCREF(__pyx_v_state);
-    __Pyx_GIVEREF(__pyx_v_state);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_state)) __PYX_ERR(2, 15, __pyx_L1_error);
-    __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 15, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_GIVEREF(__pyx_t_5);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_5)) __PYX_ERR(2, 15, __pyx_L1_error);
-    __Pyx_GIVEREF(__pyx_t_1);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error);
-    __pyx_t_5 = 0;
-    __pyx_t_1 = 0;
-    __pyx_r = __pyx_t_3;
-    __pyx_t_3 = 0;
-    goto __pyx_L0;
+    if (unlikely(__pyx_cur_scope->__pyx_v_contract_context->kwargs == Py_None)) {
+      PyErr_SetString(PyExc_TypeError, "argument after ** must be a mapping, not NoneType");
+      __PYX_ERR(0, 187, __pyx_L1_error)
+    }
+    __pyx_t_6 = PyDict_Copy(__pyx_cur_scope->__pyx_v_contract_context->kwargs); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 187, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_cur_scope->__pyx_v_self->func, __pyx_t_1, __pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 187, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_2);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_XGOTREF(__pyx_r);
+    if (likely(__pyx_r)) {
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from generator, awaiting value */
+      __pyx_generator->resume_label = 5;
+      return __pyx_r;
+      __pyx_L14_resume_from_await:;
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 187, __pyx_L1_error)
+      __pyx_t_2 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_2);
+    } else {
+      __pyx_t_2 = NULL;
+      if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_2) < 0) __PYX_ERR(0, 187, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+    }
+    __Pyx_GIVEREF(__pyx_t_2);
+    __pyx_cur_scope->__pyx_v_ret = __pyx_t_2;
+    __pyx_t_2 = 0;
   }
+  __pyx_L12:;
 
-  /* "(tree fragment)":1
- * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
- *     cdef tuple state
- *     cdef object _dict
+  /* "pop/pop.contract.pyx":190
+ * 
+ *         # Handle post contracts
+ *         for fn in self.contract_functions["post"]:             # <<<<<<<<<<<<<<
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)
+ */
+  if (unlikely(__pyx_cur_scope->__pyx_v_self->contract_functions == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(0, 190, __pyx_L1_error)
+  }
+  __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_cur_scope->__pyx_v_self->contract_functions, __pyx_n_u_post); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 190, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
+    __pyx_t_6 = __pyx_t_2; __Pyx_INCREF(__pyx_t_6);
+    __pyx_t_4 = 0;
+    __pyx_t_5 = NULL;
+  } else {
+    __pyx_t_4 = -1; __pyx_t_6 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 190, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __pyx_t_5 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 190, __pyx_L1_error)
+  }
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  for (;;) {
+    if (likely(!__pyx_t_5)) {
+      if (likely(PyList_CheckExact(__pyx_t_6))) {
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_6);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 190, __pyx_L1_error)
+          #endif
+          if (__pyx_t_4 >= __pyx_temp) break;
+        }
+        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_6, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely((0 < 0))) __PYX_ERR(0, 190, __pyx_L1_error)
+        #else
+        __pyx_t_2 = __Pyx_PySequence_ITEM(__pyx_t_6, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 190, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        #endif
+      } else {
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_6);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 190, __pyx_L1_error)
+          #endif
+          if (__pyx_t_4 >= __pyx_temp) break;
+        }
+        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_6, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely((0 < 0))) __PYX_ERR(0, 190, __pyx_L1_error)
+        #else
+        __pyx_t_2 = __Pyx_PySequence_ITEM(__pyx_t_6, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 190, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        #endif
+      }
+    } else {
+      __pyx_t_2 = __pyx_t_5(__pyx_t_6);
+      if (unlikely(!__pyx_t_2)) {
+        PyObject* exc_type = PyErr_Occurred();
+        if (exc_type) {
+          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+          else __PYX_ERR(0, 190, __pyx_L1_error)
+        }
+        break;
+      }
+      __Pyx_GOTREF(__pyx_t_2);
+    }
+    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_fn);
+    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_fn, __pyx_t_2);
+    __Pyx_GIVEREF(__pyx_t_2);
+    __pyx_t_2 = 0;
+
+    /* "pop/pop.contract.pyx":191
+ *         # Handle post contracts
+ *         for fn in self.contract_functions["post"]:
+ *             contract_context.ret = ret             # <<<<<<<<<<<<<<
+ *             post_ret = await fn(contract_context)
+ *             if post_ret is not None:
+ */
+    __Pyx_INCREF(__pyx_cur_scope->__pyx_v_ret);
+    __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_ret);
+    __Pyx_GOTREF(__pyx_cur_scope->__pyx_v_contract_context->ret);
+    __Pyx_DECREF(__pyx_cur_scope->__pyx_v_contract_context->ret);
+    __pyx_cur_scope->__pyx_v_contract_context->ret = __pyx_cur_scope->__pyx_v_ret;
+
+    /* "pop/pop.contract.pyx":192
+ *         for fn in self.contract_functions["post"]:
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)             # <<<<<<<<<<<<<<
+ *             if post_ret is not None:
+ *                 ret = post_ret
+ */
+    __Pyx_INCREF(__pyx_cur_scope->__pyx_v_fn);
+    __pyx_t_1 = __pyx_cur_scope->__pyx_v_fn; __pyx_t_7 = NULL;
+    __pyx_t_8 = 0;
+    #if CYTHON_UNPACK_METHODS
+    if (unlikely(PyMethod_Check(__pyx_t_1))) {
+      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_1);
+      if (likely(__pyx_t_7)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
+        __Pyx_INCREF(__pyx_t_7);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_1, function);
+        __pyx_t_8 = 1;
+      }
+    }
+    #endif
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_7, ((PyObject *)__pyx_cur_scope->__pyx_v_contract_context)};
+      __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
+      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 192, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    }
+    __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_2);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_XGOTREF(__pyx_r);
+    if (likely(__pyx_r)) {
+      __pyx_cur_scope->__pyx_t_1 = __pyx_t_4;
+      __pyx_cur_scope->__pyx_t_2 = __pyx_t_5;
+      __Pyx_XGIVEREF(__pyx_t_6);
+      __pyx_cur_scope->__pyx_t_0 = __pyx_t_6;
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from generator, awaiting value */
+      __pyx_generator->resume_label = 6;
+      return __pyx_r;
+      __pyx_L17_resume_from_await:;
+      __pyx_t_4 = __pyx_cur_scope->__pyx_t_1;
+      __pyx_t_5 = __pyx_cur_scope->__pyx_t_2;
+      __pyx_t_6 = __pyx_cur_scope->__pyx_t_0;
+      __pyx_cur_scope->__pyx_t_0 = 0;
+      __Pyx_XGOTREF(__pyx_t_6);
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 192, __pyx_L1_error)
+      __pyx_t_2 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_2);
+    } else {
+      __pyx_t_2 = NULL;
+      if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_2) < 0) __PYX_ERR(0, 192, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+    }
+    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_post_ret);
+    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_post_ret, __pyx_t_2);
+    __Pyx_GIVEREF(__pyx_t_2);
+    __pyx_t_2 = 0;
+
+    /* "pop/pop.contract.pyx":193
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)
+ *             if post_ret is not None:             # <<<<<<<<<<<<<<
+ *                 ret = post_ret
+ * 
+ */
+    __pyx_t_3 = (__pyx_cur_scope->__pyx_v_post_ret != Py_None);
+    if (__pyx_t_3) {
+
+      /* "pop/pop.contract.pyx":194
+ *             post_ret = await fn(contract_context)
+ *             if post_ret is not None:
+ *                 ret = post_ret             # <<<<<<<<<<<<<<
+ * 
+ *         return ret
+ */
+      __Pyx_INCREF(__pyx_cur_scope->__pyx_v_post_ret);
+      __Pyx_GOTREF(__pyx_cur_scope->__pyx_v_ret);
+      __Pyx_DECREF_SET(__pyx_cur_scope->__pyx_v_ret, __pyx_cur_scope->__pyx_v_post_ret);
+      __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_post_ret);
+
+      /* "pop/pop.contract.pyx":193
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)
+ *             if post_ret is not None:             # <<<<<<<<<<<<<<
+ *                 ret = post_ret
+ * 
+ */
+    }
+
+    /* "pop/pop.contract.pyx":190
+ * 
+ *         # Handle post contracts
+ *         for fn in self.contract_functions["post"]:             # <<<<<<<<<<<<<<
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)
+ */
+  }
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+
+  /* "pop/pop.contract.pyx":196
+ *                 ret = post_ret
+ * 
+ *         return ret             # <<<<<<<<<<<<<<
+ * 
+ *     def __getstate__(self):
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_r = NULL; __Pyx_ReturnWithStopIteration(__pyx_cur_scope->__pyx_v_ret);
+  goto __pyx_L0;
+  CYTHON_MAYBE_UNUSED_VAR(__pyx_cur_scope);
+
+  /* "pop/pop.contract.pyx":166
+ *         self._has_contracts = sum(len(l) for l in self.contract_functions.values()) > 0
+ * 
+ *     async def __call__(self, *args, **kwargs):             # <<<<<<<<<<<<<<
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args
  */
 
   /* function exit code */
   __pyx_L1_error:;
+  __Pyx_Generator_Replace_StopIteration(0);
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_AddTraceback("pop.data.MultidictCache.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_XDECREF(__pyx_t_7);
+  __Pyx_AddTraceback("__call__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_state);
-  __Pyx_XDECREF(__pyx_v__dict);
-  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_XDECREF(__pyx_r); __pyx_r = 0;
+  #if !CYTHON_USE_EXC_INFO_STACK
+  __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+  #endif
+  __pyx_generator->resume_label = -1;
+  __Pyx_Coroutine_clear((PyObject*)__pyx_generator);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "(tree fragment)":16
- *     else:
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
- * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)
+/* "pop/pop.contract.pyx":198
+ *         return ret
+ * 
+ *     def __getstate__(self):             # <<<<<<<<<<<<<<
+ *         return {
+ *             "ref": self.ref,
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_13__setstate_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_6__getstate__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_14MultidictCache_13__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_13__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_14MultidictCache_13__setstate_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_8contract_10Contracted_6__getstate__ = {"__getstate__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_10Contracted_6__getstate__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_6__getstate__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v___pyx_state = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED Py_ssize_t __pyx_nargs;
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject* values[1] = {0};
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__setstate_cython__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__getstate__ (wrapper)", 0);
   #if !CYTHON_METH_FASTCALL
   #if CYTHON_ASSUME_SAFE_MACROS
   __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #else
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_pyx_state,0};
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pyx_state)) != 0)) {
-          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
-          kw_args--;
-        }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(2, 16, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-      }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__setstate_cython__") < 0)) __PYX_ERR(2, 16, __pyx_L3_error)
-      }
-    } else if (unlikely(__pyx_nargs != 1)) {
-      goto __pyx_L5_argtuple_error;
-    } else {
-      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-    }
-    __pyx_v___pyx_state = values[0];
-  }
-  goto __pyx_L6_skip;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("__setstate_cython__", 1, 1, 1, __pyx_nargs); __PYX_ERR(2, 16, __pyx_L3_error)
-  __pyx_L6_skip:;
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L3_error:;
-  {
-    Py_ssize_t __pyx_temp;
-    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
-    }
-  }
-  __Pyx_AddTraceback("pop.data.MultidictCache.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_14MultidictCache_12__setstate_cython__(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v_self), __pyx_v___pyx_state);
+  if (unlikely(__pyx_nargs > 0)) {
+    __Pyx_RaiseArgtupleInvalid("__getstate__", 1, 0, 0, __pyx_nargs); return NULL;}
+  if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__getstate__", 0))) return NULL;
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_5__getstate__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
-  {
-    Py_ssize_t __pyx_temp;
-    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
-    }
-  }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_14MultidictCache_12__setstate_cython__(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_5__getstate__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__setstate_cython__", 1);
+  __Pyx_RefNannySetupContext("__getstate__", 1);
 
-  /* "(tree fragment)":17
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
- * def __setstate_cython__(self, __pyx_state):
- *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
+  /* "pop/pop.contract.pyx":199
+ * 
+ *     def __getstate__(self):
+ *         return {             # <<<<<<<<<<<<<<
+ *             "ref": self.ref,
+ *             "name": self.__name__,
  */
-  if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 17, __pyx_L1_error)
-  __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_MultidictCache__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
+  __Pyx_XDECREF(__pyx_r);
+
+  /* "pop/pop.contract.pyx":200
+ *     def __getstate__(self):
+ *         return {
+ *             "ref": self.ref,             # <<<<<<<<<<<<<<
+ *             "name": self.__name__,
+ *             "implicit_hub": self.implicit_hub,
+ */
+  __pyx_t_1 = __Pyx_PyDict_NewPresized(4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 200, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_ref, __pyx_v_self->ref) < 0) __PYX_ERR(0, 200, __pyx_L1_error)
 
-  /* "(tree fragment)":16
- *     else:
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
- * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)
+  /* "pop/pop.contract.pyx":201
+ *         return {
+ *             "ref": self.ref,
+ *             "name": self.__name__,             # <<<<<<<<<<<<<<
+ *             "implicit_hub": self.implicit_hub,
+ *             "contracts": self.contracts,
+ */
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_name, __pyx_v_self->__name__) < 0) __PYX_ERR(0, 200, __pyx_L1_error)
+
+  /* "pop/pop.contract.pyx":202
+ *             "ref": self.ref,
+ *             "name": self.__name__,
+ *             "implicit_hub": self.implicit_hub,             # <<<<<<<<<<<<<<
+ *             "contracts": self.contracts,
+ *         }
  */
+  __pyx_t_2 = __Pyx_PyBool_FromLong(__pyx_v_self->implicit_hub); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 202, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_implicit_hub, __pyx_t_2) < 0) __PYX_ERR(0, 200, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* function exit code */
-  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+  /* "pop/pop.contract.pyx":203
+ *             "name": self.__name__,
+ *             "implicit_hub": self.implicit_hub,
+ *             "contracts": self.contracts,             # <<<<<<<<<<<<<<
+ *         }
+ * 
+ */
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_contracts, __pyx_v_self->contracts) < 0) __PYX_ERR(0, 200, __pyx_L1_error)
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
   goto __pyx_L0;
+
+  /* "pop/pop.contract.pyx":198
+ *         return ret
+ * 
+ *     def __getstate__(self):             # <<<<<<<<<<<<<<
+ *         return {
+ *             "ref": self.ref,
+ */
+
+  /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.MultidictCache.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("pop.contract.Contracted.__getstate__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":71
- *     cdef readonly dict __data
+/* "pop/pop.contract.pyx":206
+ *         }
  * 
- *     def __init__(self, data=None):             # <<<<<<<<<<<<<<
- *         if isinstance(data, ImmutableNamespaceDict):
- *             self.__data = data.__data
+ *     def __setstate__(self, state:dict[str, object]):             # <<<<<<<<<<<<<<
+ *         self.ref = state["ref"]
+ *         self.__name__ = state["name"]
  */
 
 /* Python wrapper */
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
-  PyObject *__pyx_v_data = 0;
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_8__setstate__(PyObject *__pyx_v_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+static PyMethodDef __pyx_mdef_3pop_8contract_10Contracted_8__setstate__ = {"__setstate__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_10Contracted_8__setstate__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_8__setstate__(PyObject *__pyx_v_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_state = 0;
+  #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+  #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject* values[1] = {0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  int __pyx_r;
+  PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__setstate__ (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
   #if CYTHON_ASSUME_SAFE_MACROS
   __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return -1;
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
-  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_data,0};
-    values[0] = __Pyx_Arg_NewRef_VARARGS(((PyObject *)Py_None));
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_state,0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
-        case  1: values[0] = __Pyx_Arg_VARARGS(__pyx_args, 0);
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
-      kw_args = __Pyx_NumKwargs_VARARGS(__pyx_kwds);
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_VARARGS(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data);
-          if (value) { values[0] = __Pyx_Arg_NewRef_VARARGS(value); kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 71, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_state)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
         }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 206, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 71, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__setstate__") < 0)) __PYX_ERR(0, 206, __pyx_L3_error)
       }
+    } else if (unlikely(__pyx_nargs != 1)) {
+      goto __pyx_L5_argtuple_error;
     } else {
-      switch (__pyx_nargs) {
-        case  1: values[0] = __Pyx_Arg_VARARGS(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
-    __pyx_v_data = values[0];
+    __pyx_v_state = ((PyObject*)values[0]);
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("__init__", 0, 0, 1, __pyx_nargs); __PYX_ERR(0, 71, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__setstate__", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 206, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted.__setstate__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
-  return -1;
+  return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict___init__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), __pyx_v_data);
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_state), (&PyDict_Type), 0, "state", 1))) __PYX_ERR(0, 206, __pyx_L1_error)
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_7__setstate__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), __pyx_v_state);
 
   /* function exit code */
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __pyx_r = NULL;
+  __pyx_L0:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_VARARGS(values[__pyx_temp]);
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict___init__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_data) {
-  PyObject *__pyx_8genexpr2__pyx_v_key = NULL;
-  PyObject *__pyx_8genexpr2__pyx_v_value = NULL;
-  int __pyx_r;
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_7__setstate__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_state) {
+  PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  int __pyx_t_1;
+  PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  Py_ssize_t __pyx_t_4;
-  Py_ssize_t __pyx_t_5;
-  int __pyx_t_6;
-  PyObject *__pyx_t_7 = NULL;
-  PyObject *__pyx_t_8 = NULL;
-  int __pyx_t_9;
-  PyObject *__pyx_t_10 = NULL;
+  int __pyx_t_3;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__init__", 1);
-
-  /* "pop/pop.data.pyx":72
- * 
- *     def __init__(self, data=None):
- *         if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
- *             self.__data = data.__data
- *         elif isinstance(data, dict):
- */
-  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_data, __pyx_ptype_3pop_4data_ImmutableNamespaceDict); 
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":73
- *     def __init__(self, data=None):
- *         if isinstance(data, ImmutableNamespaceDict):
- *             self.__data = data.__data             # <<<<<<<<<<<<<<
- *         elif isinstance(data, dict):
- *             self.__data = {key: freeze(value) for key, value in data.items()}
- */
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_data, __pyx_n_s_ImmutableNamespaceDict__data); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 73, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    if (!(likely(PyDict_CheckExact(__pyx_t_2))||((__pyx_t_2) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_2))) __PYX_ERR(0, 73, __pyx_L1_error)
-    __Pyx_GIVEREF(__pyx_t_2);
-    __Pyx_GOTREF(__pyx_v_self->_ImmutableNamespaceDict__data);
-    __Pyx_DECREF(__pyx_v_self->_ImmutableNamespaceDict__data);
-    __pyx_v_self->_ImmutableNamespaceDict__data = ((PyObject*)__pyx_t_2);
-    __pyx_t_2 = 0;
+  __Pyx_RefNannySetupContext("__setstate__", 1);
 
-    /* "pop/pop.data.pyx":72
+  /* "pop/pop.contract.pyx":207
  * 
- *     def __init__(self, data=None):
- *         if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
- *             self.__data = data.__data
- *         elif isinstance(data, dict):
+ *     def __setstate__(self, state:dict[str, object]):
+ *         self.ref = state["ref"]             # <<<<<<<<<<<<<<
+ *         self.__name__ = state["name"]
+ *         self.func = self.hub[self.ref][self.__name__].func
  */
-    goto __pyx_L3;
-  }
+  __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_state, __pyx_n_u_ref); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 207, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  if (!(likely(PyUnicode_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_t_1))) __PYX_ERR(0, 207, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->ref);
+  __Pyx_DECREF(__pyx_v_self->ref);
+  __pyx_v_self->ref = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
-  /* "pop/pop.data.pyx":74
- *         if isinstance(data, ImmutableNamespaceDict):
- *             self.__data = data.__data
- *         elif isinstance(data, dict):             # <<<<<<<<<<<<<<
- *             self.__data = {key: freeze(value) for key, value in data.items()}
- *         else:
+  /* "pop/pop.contract.pyx":208
+ *     def __setstate__(self, state:dict[str, object]):
+ *         self.ref = state["ref"]
+ *         self.__name__ = state["name"]             # <<<<<<<<<<<<<<
+ *         self.func = self.hub[self.ref][self.__name__].func
+ *         self.implicit_hub = state["implicit_hub"]
  */
-  __pyx_t_1 = PyDict_Check(__pyx_v_data); 
-  if (__pyx_t_1) {
+  __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_state, __pyx_n_u_name); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 208, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  if (!(likely(PyUnicode_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_t_1))) __PYX_ERR(0, 208, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->__name__);
+  __Pyx_DECREF(__pyx_v_self->__name__);
+  __pyx_v_self->__name__ = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
-    /* "pop/pop.data.pyx":75
- *             self.__data = data.__data
- *         elif isinstance(data, dict):
- *             self.__data = {key: freeze(value) for key, value in data.items()}             # <<<<<<<<<<<<<<
- *         else:
- *             self.__data = {}
+  /* "pop/pop.contract.pyx":209
+ *         self.ref = state["ref"]
+ *         self.__name__ = state["name"]
+ *         self.func = self.hub[self.ref][self.__name__].func             # <<<<<<<<<<<<<<
+ *         self.implicit_hub = state["implicit_hub"]
+ *         self.contracts = state["contracts"]
  */
-    { /* enter inner scope */
-      __pyx_t_2 = PyDict_New(); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 75, __pyx_L6_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_4 = 0;
-      if (unlikely(__pyx_v_data == Py_None)) {
-        PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "items");
-        __PYX_ERR(0, 75, __pyx_L6_error)
-      }
-      __pyx_t_7 = __Pyx_dict_iterator(__pyx_v_data, 0, __pyx_n_s_items, (&__pyx_t_5), (&__pyx_t_6)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 75, __pyx_L6_error)
-      __Pyx_GOTREF(__pyx_t_7);
-      __Pyx_XDECREF(__pyx_t_3);
-      __pyx_t_3 = __pyx_t_7;
-      __pyx_t_7 = 0;
-      while (1) {
-        __pyx_t_9 = __Pyx_dict_iter_next(__pyx_t_3, __pyx_t_5, &__pyx_t_4, &__pyx_t_7, &__pyx_t_8, NULL, __pyx_t_6);
-        if (unlikely(__pyx_t_9 == 0)) break;
-        if (unlikely(__pyx_t_9 == -1)) __PYX_ERR(0, 75, __pyx_L6_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __Pyx_GOTREF(__pyx_t_8);
-        __Pyx_XDECREF_SET(__pyx_8genexpr2__pyx_v_key, __pyx_t_7);
-        __pyx_t_7 = 0;
-        __Pyx_XDECREF_SET(__pyx_8genexpr2__pyx_v_value, __pyx_t_8);
-        __pyx_t_8 = 0;
-        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_freeze); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 75, __pyx_L6_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __pyx_t_10 = NULL;
-        __pyx_t_9 = 0;
-        #if CYTHON_UNPACK_METHODS
-        if (unlikely(PyMethod_Check(__pyx_t_7))) {
-          __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
-          if (likely(__pyx_t_10)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
-            __Pyx_INCREF(__pyx_t_10);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_7, function);
-            __pyx_t_9 = 1;
-          }
-        }
-        #endif
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_10, __pyx_8genexpr2__pyx_v_value};
-          __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
-          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-          if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 75, __pyx_L6_error)
-          __Pyx_GOTREF(__pyx_t_8);
-          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-        }
-        if (unlikely(PyDict_SetItem(__pyx_t_2, (PyObject*)__pyx_8genexpr2__pyx_v_key, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 75, __pyx_L6_error)
-        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-      }
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_key); __pyx_8genexpr2__pyx_v_key = 0;
-      __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_value); __pyx_8genexpr2__pyx_v_value = 0;
-      goto __pyx_L9_exit_scope;
-      __pyx_L6_error:;
-      __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_key); __pyx_8genexpr2__pyx_v_key = 0;
-      __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_value); __pyx_8genexpr2__pyx_v_value = 0;
-      goto __pyx_L1_error;
-      __pyx_L9_exit_scope:;
-    } /* exit inner scope */
-    __Pyx_GIVEREF(__pyx_t_2);
-    __Pyx_GOTREF(__pyx_v_self->_ImmutableNamespaceDict__data);
-    __Pyx_DECREF(__pyx_v_self->_ImmutableNamespaceDict__data);
-    __pyx_v_self->_ImmutableNamespaceDict__data = ((PyObject*)__pyx_t_2);
-    __pyx_t_2 = 0;
+  __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_self->hub, __pyx_v_self->ref); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 209, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_Dict_GetItem(__pyx_t_1, __pyx_v_self->__name__); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 209, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_func); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 209, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->func);
+  __Pyx_DECREF(__pyx_v_self->func);
+  __pyx_v_self->func = __pyx_t_1;
+  __pyx_t_1 = 0;
 
-    /* "pop/pop.data.pyx":74
- *         if isinstance(data, ImmutableNamespaceDict):
- *             self.__data = data.__data
- *         elif isinstance(data, dict):             # <<<<<<<<<<<<<<
- *             self.__data = {key: freeze(value) for key, value in data.items()}
- *         else:
+  /* "pop/pop.contract.pyx":210
+ *         self.__name__ = state["name"]
+ *         self.func = self.hub[self.ref][self.__name__].func
+ *         self.implicit_hub = state["implicit_hub"]             # <<<<<<<<<<<<<<
+ *         self.contracts = state["contracts"]
+ * 
  */
-    goto __pyx_L3;
-  }
+  __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_state, __pyx_n_u_implicit_hub); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 210, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 210, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_v_self->implicit_hub = __pyx_t_3;
 
-  /* "pop/pop.data.pyx":77
- *             self.__data = {key: freeze(value) for key, value in data.items()}
- *         else:
- *             self.__data = {}             # <<<<<<<<<<<<<<
+  /* "pop/pop.contract.pyx":211
+ *         self.func = self.hub[self.ref][self.__name__].func
+ *         self.implicit_hub = state["implicit_hub"]
+ *         self.contracts = state["contracts"]             # <<<<<<<<<<<<<<
+ * 
  * 
- *     def __getitem__(self, key):
  */
-  /*else*/ {
-    __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 77, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __Pyx_GIVEREF(__pyx_t_2);
-    __Pyx_GOTREF(__pyx_v_self->_ImmutableNamespaceDict__data);
-    __Pyx_DECREF(__pyx_v_self->_ImmutableNamespaceDict__data);
-    __pyx_v_self->_ImmutableNamespaceDict__data = ((PyObject*)__pyx_t_2);
-    __pyx_t_2 = 0;
-  }
-  __pyx_L3:;
+  __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_state, __pyx_n_u_contracts); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 211, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  if (!(likely(PyList_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("list", __pyx_t_1))) __PYX_ERR(0, 211, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->contracts);
+  __Pyx_DECREF(__pyx_v_self->contracts);
+  __pyx_v_self->contracts = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
-  /* "pop/pop.data.pyx":71
- *     cdef readonly dict __data
+  /* "pop/pop.contract.pyx":206
+ *         }
  * 
- *     def __init__(self, data=None):             # <<<<<<<<<<<<<<
- *         if isinstance(data, ImmutableNamespaceDict):
- *             self.__data = data.__data
+ *     def __setstate__(self, state:dict[str, object]):             # <<<<<<<<<<<<<<
+ *         self.ref = state["ref"]
+ *         self.__name__ = state["name"]
  */
 
   /* function exit code */
-  __pyx_r = 0;
+  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_XDECREF(__pyx_t_8);
-  __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = -1;
+  __Pyx_AddTraceback("pop.contract.Contracted.__setstate__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_key);
-  __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_value);
+  __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":79
- *             self.__data = {}
- * 
- *     def __getitem__(self, key):             # <<<<<<<<<<<<<<
- *         try:
- *             return self.__data[key]
+/* "pop/pop.contract.pyx":106
+ *     """
+ *     cdef:
+ *         public bint _has_contracts             # <<<<<<<<<<<<<<
+ *         public bint implicit_hub
+ *         public dict[str, list[object]] contract_functions
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_3__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_3__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_14_has_contracts_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_14_has_contracts_1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__getitem__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_2__getitem__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_14_has_contracts___get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_2__getitem__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_14_has_contracts___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
-  int __pyx_t_5;
-  PyObject *__pyx_t_6 = NULL;
-  PyObject *__pyx_t_7 = NULL;
-  PyObject *__pyx_t_8 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__getitem__", 1);
-
-  /* "pop/pop.data.pyx":80
- * 
- *     def __getitem__(self, key):
- *         try:             # <<<<<<<<<<<<<<
- *             return self.__data[key]
- *         except KeyError:
- */
-  {
-    __Pyx_PyThreadState_declare
-    __Pyx_PyThreadState_assign
-    __Pyx_ExceptionSave(&__pyx_t_1, &__pyx_t_2, &__pyx_t_3);
-    __Pyx_XGOTREF(__pyx_t_1);
-    __Pyx_XGOTREF(__pyx_t_2);
-    __Pyx_XGOTREF(__pyx_t_3);
-    /*try:*/ {
-
-      /* "pop/pop.data.pyx":81
- *     def __getitem__(self, key):
- *         try:
- *             return self.__data[key]             # <<<<<<<<<<<<<<
- *         except KeyError:
- *             return ImmutableNamespaceDict()
- */
-      __Pyx_XDECREF(__pyx_r);
-      if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
-        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-        __PYX_ERR(0, 81, __pyx_L3_error)
-      }
-      __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_v_key); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 81, __pyx_L3_error)
-      __Pyx_GOTREF(__pyx_t_4);
-      __pyx_r = __pyx_t_4;
-      __pyx_t_4 = 0;
-      goto __pyx_L7_try_return;
-
-      /* "pop/pop.data.pyx":80
- * 
- *     def __getitem__(self, key):
- *         try:             # <<<<<<<<<<<<<<
- *             return self.__data[key]
- *         except KeyError:
- */
-    }
-    __pyx_L3_error:;
-    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-
-    /* "pop/pop.data.pyx":82
- *         try:
- *             return self.__data[key]
- *         except KeyError:             # <<<<<<<<<<<<<<
- *             return ImmutableNamespaceDict()
- * 
- */
-    __pyx_t_5 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_KeyError);
-    if (__pyx_t_5) {
-      __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-      if (__Pyx_GetException(&__pyx_t_4, &__pyx_t_6, &__pyx_t_7) < 0) __PYX_ERR(0, 82, __pyx_L5_except_error)
-      __Pyx_XGOTREF(__pyx_t_4);
-      __Pyx_XGOTREF(__pyx_t_6);
-      __Pyx_XGOTREF(__pyx_t_7);
-
-      /* "pop/pop.data.pyx":83
- *             return self.__data[key]
- *         except KeyError:
- *             return ImmutableNamespaceDict()             # <<<<<<<<<<<<<<
- * 
- *     def __getattr__(self, key):
- */
-      __Pyx_XDECREF(__pyx_r);
-      __pyx_t_8 = __Pyx_PyObject_CallNoArg(((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict)); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 83, __pyx_L5_except_error)
-      __Pyx_GOTREF(__pyx_t_8);
-      __pyx_r = __pyx_t_8;
-      __pyx_t_8 = 0;
-      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-      goto __pyx_L6_except_return;
-    }
-    goto __pyx_L5_except_error;
-
-    /* "pop/pop.data.pyx":80
- * 
- *     def __getitem__(self, key):
- *         try:             # <<<<<<<<<<<<<<
- *             return self.__data[key]
- *         except KeyError:
- */
-    __pyx_L5_except_error:;
-    __Pyx_XGIVEREF(__pyx_t_1);
-    __Pyx_XGIVEREF(__pyx_t_2);
-    __Pyx_XGIVEREF(__pyx_t_3);
-    __Pyx_ExceptionReset(__pyx_t_1, __pyx_t_2, __pyx_t_3);
-    goto __pyx_L1_error;
-    __pyx_L7_try_return:;
-    __Pyx_XGIVEREF(__pyx_t_1);
-    __Pyx_XGIVEREF(__pyx_t_2);
-    __Pyx_XGIVEREF(__pyx_t_3);
-    __Pyx_ExceptionReset(__pyx_t_1, __pyx_t_2, __pyx_t_3);
-    goto __pyx_L0;
-    __pyx_L6_except_return:;
-    __Pyx_XGIVEREF(__pyx_t_1);
-    __Pyx_XGIVEREF(__pyx_t_2);
-    __Pyx_XGIVEREF(__pyx_t_3);
-    __Pyx_ExceptionReset(__pyx_t_1, __pyx_t_2, __pyx_t_3);
-    goto __pyx_L0;
-  }
-
-  /* "pop/pop.data.pyx":79
- *             self.__data = {}
- * 
- *     def __getitem__(self, key):             # <<<<<<<<<<<<<<
- *         try:
- *             return self.__data[key]
- */
+  __Pyx_RefNannySetupContext("__get__", 1);
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_self->_has_contracts); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 106, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
+  goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_XDECREF(__pyx_t_8);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("pop.contract.Contracted._has_contracts.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":85
- *             return ImmutableNamespaceDict()
- * 
- *     def __getattr__(self, key):             # <<<<<<<<<<<<<<
- *         if key in self.__data:
- *             return self.__data[key]
- */
-
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_5__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_5__getattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
+static int __pyx_pw_3pop_8contract_10Contracted_14_has_contracts_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_14_has_contracts_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject *__pyx_r = 0;
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__getattr__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_4__getattr__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_14_has_contracts_2__set__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_4__getattr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
+static int __pyx_pf_3pop_8contract_10Contracted_14_has_contracts_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
   int __pyx_t_1;
-  PyObject *__pyx_t_2 = NULL;
-  Py_ssize_t __pyx_t_3;
-  Py_UCS4 __pyx_t_4;
-  PyObject *__pyx_t_5 = NULL;
-  PyObject *__pyx_t_6 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__getattr__", 1);
-
-  /* "pop/pop.data.pyx":86
- * 
- *     def __getattr__(self, key):
- *         if key in self.__data:             # <<<<<<<<<<<<<<
- *             return self.__data[key]
- *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
- */
-  if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
-    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
-    __PYX_ERR(0, 86, __pyx_L1_error)
-  }
-  __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_key, __pyx_v_self->_ImmutableNamespaceDict__data, Py_EQ)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 86, __pyx_L1_error)
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":87
- *     def __getattr__(self, key):
- *         if key in self.__data:
- *             return self.__data[key]             # <<<<<<<<<<<<<<
- *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
- * 
- */
-    __Pyx_XDECREF(__pyx_r);
-    if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
-      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-      __PYX_ERR(0, 87, __pyx_L1_error)
-    }
-    __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_v_key); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 87, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_r = __pyx_t_2;
-    __pyx_t_2 = 0;
-    goto __pyx_L0;
-
-    /* "pop/pop.data.pyx":86
- * 
- *     def __getattr__(self, key):
- *         if key in self.__data:             # <<<<<<<<<<<<<<
- *             return self.__data[key]
- *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
- */
-  }
-
-  /* "pop/pop.data.pyx":88
- *         if key in self.__data:
- *             return self.__data[key]
- *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")             # <<<<<<<<<<<<<<
- * 
- *     def __setattr__(self, key, value):
- */
-  __pyx_t_2 = PyTuple_New(5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = 0;
-  __pyx_t_4 = 127;
-  __Pyx_INCREF(__pyx_kp_u__3);
-  __pyx_t_3 += 1;
-  __Pyx_GIVEREF(__pyx_kp_u__3);
-  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_kp_u__3);
-  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))), __pyx_n_s_name); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 88, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_5);
-  __pyx_t_6 = __Pyx_PyObject_FormatSimple(__pyx_t_5, __pyx_empty_unicode); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 88, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-  __pyx_t_4 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_6) > __pyx_t_4) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_6) : __pyx_t_4;
-  __pyx_t_3 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_6);
-  __Pyx_GIVEREF(__pyx_t_6);
-  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_6);
-  __pyx_t_6 = 0;
-  __Pyx_INCREF(__pyx_kp_u_object_has_no_attribute);
-  __pyx_t_3 += 27;
-  __Pyx_GIVEREF(__pyx_kp_u_object_has_no_attribute);
-  PyTuple_SET_ITEM(__pyx_t_2, 2, __pyx_kp_u_object_has_no_attribute);
-  __pyx_t_6 = __Pyx_PyObject_FormatSimple(__pyx_v_key, __pyx_empty_unicode); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 88, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  __pyx_t_4 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_6) > __pyx_t_4) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_6) : __pyx_t_4;
-  __pyx_t_3 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_6);
-  __Pyx_GIVEREF(__pyx_t_6);
-  PyTuple_SET_ITEM(__pyx_t_2, 3, __pyx_t_6);
-  __pyx_t_6 = 0;
-  __Pyx_INCREF(__pyx_kp_u__3);
-  __pyx_t_3 += 1;
-  __Pyx_GIVEREF(__pyx_kp_u__3);
-  PyTuple_SET_ITEM(__pyx_t_2, 4, __pyx_kp_u__3);
-  __pyx_t_6 = __Pyx_PyUnicode_Join(__pyx_t_2, 5, __pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 88, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_AttributeError, __pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-  __Pyx_Raise(__pyx_t_2, 0, 0, 0);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __PYX_ERR(0, 88, __pyx_L1_error)
-
-  /* "pop/pop.data.pyx":85
- *             return ImmutableNamespaceDict()
- * 
- *     def __getattr__(self, key):             # <<<<<<<<<<<<<<
- *         if key in self.__data:
- *             return self.__data[key]
- */
+  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_value); if (unlikely((__pyx_t_1 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 106, __pyx_L1_error)
+  __pyx_v_self->_has_contracts = __pyx_t_1;
 
   /* function exit code */
+  __pyx_r = 0;
+  goto __pyx_L0;
   __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__getattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
+  __Pyx_AddTraceback("pop.contract.Contracted._has_contracts.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = -1;
   __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":90
- *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
- * 
- *     def __setattr__(self, key, value):             # <<<<<<<<<<<<<<
- *         if key == '_ImmutableNamespaceDict__data':
- *             object.__setattr__(self, key, value)
+/* "pop/pop.contract.pyx":107
+ *     cdef:
+ *         public bint _has_contracts
+ *         public bint implicit_hub             # <<<<<<<<<<<<<<
+ *         public dict[str, list[object]] contract_functions
+ *         public object hub
  */
 
 /* Python wrapper */
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_7__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /*proto*/
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_7__setattr__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_12implicit_hub_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_12implicit_hub_1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  int __pyx_r;
+  PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__setattr__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_6__setattr__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key), ((PyObject *)__pyx_v_value));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_12implicit_hub___get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_6__setattr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
-  int __pyx_r;
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_12implicit_hub___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  int __pyx_t_1;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
-  int __pyx_t_5;
+  PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__setattr__", 1);
-
-  /* "pop/pop.data.pyx":91
- * 
- *     def __setattr__(self, key, value):
- *         if key == '_ImmutableNamespaceDict__data':             # <<<<<<<<<<<<<<
- *             object.__setattr__(self, key, value)
- *         else:
- */
-  __pyx_t_1 = (__Pyx_PyUnicode_Equals(__pyx_v_key, __pyx_n_u_ImmutableNamespaceDict__data, Py_EQ)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 91, __pyx_L1_error)
-  if (likely(__pyx_t_1)) {
-
-    /* "pop/pop.data.pyx":92
- *     def __setattr__(self, key, value):
- *         if key == '_ImmutableNamespaceDict__data':
- *             object.__setattr__(self, key, value)             # <<<<<<<<<<<<<<
- *         else:
- *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")
- */
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_builtin_object, __pyx_n_s_setattr); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 92, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_4 = NULL;
-    __pyx_t_5 = 0;
-    #if CYTHON_UNPACK_METHODS
-    if (likely(PyMethod_Check(__pyx_t_3))) {
-      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
-      if (likely(__pyx_t_4)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-        __Pyx_INCREF(__pyx_t_4);
-        __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_3, function);
-        __pyx_t_5 = 1;
-      }
-    }
-    #endif
-    {
-      PyObject *__pyx_callargs[4] = {__pyx_t_4, ((PyObject *)__pyx_v_self), __pyx_v_key, __pyx_v_value};
-      __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 3+__pyx_t_5);
-      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 92, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    }
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-    /* "pop/pop.data.pyx":91
- * 
- *     def __setattr__(self, key, value):
- *         if key == '_ImmutableNamespaceDict__data':             # <<<<<<<<<<<<<<
- *             object.__setattr__(self, key, value)
- *         else:
- */
-    goto __pyx_L3;
-  }
-
-  /* "pop/pop.data.pyx":94
- *             object.__setattr__(self, key, value)
- *         else:
- *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")             # <<<<<<<<<<<<<<
- * 
- *     def __setitem__(self, key, value):
- */
-  /*else*/ {
-    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_TypeError, __pyx_tuple__4, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 94, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __PYX_ERR(0, 94, __pyx_L1_error)
-  }
-  __pyx_L3:;
-
-  /* "pop/pop.data.pyx":90
- *         raise AttributeError(f"'{type(self).__name__}' object has no attribute '{key}'")
- * 
- *     def __setattr__(self, key, value):             # <<<<<<<<<<<<<<
- *         if key == '_ImmutableNamespaceDict__data':
- *             object.__setattr__(self, key, value)
- */
+  __Pyx_RefNannySetupContext("__get__", 1);
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_self->implicit_hub); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 107, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
+  goto __pyx_L0;
 
   /* function exit code */
-  __pyx_r = 0;
-  goto __pyx_L0;
   __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__setattr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = -1;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("pop.contract.Contracted.implicit_hub.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
   __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":96
- *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")
- * 
- *     def __setitem__(self, key, value):             # <<<<<<<<<<<<<<
- *         raise TypeError("ImmutableNamespaceDict does not support item assignment")
- * 
- */
-
 /* Python wrapper */
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_9__setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value); /*proto*/
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_9__setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_value) {
+static int __pyx_pw_3pop_8contract_10Contracted_12implicit_hub_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_12implicit_hub_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__setitem__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_8__setitem__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key), ((PyObject *)__pyx_v_value));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_12implicit_hub_2__set__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_8__setitem__(CYTHON_UNUSED struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_key, CYTHON_UNUSED PyObject *__pyx_v_value) {
+static int __pyx_pf_3pop_8contract_10Contracted_12implicit_hub_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value) {
   int __pyx_r;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
+  int __pyx_t_1;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__setitem__", 1);
-
-  /* "pop/pop.data.pyx":97
- * 
- *     def __setitem__(self, key, value):
- *         raise TypeError("ImmutableNamespaceDict does not support item assignment")             # <<<<<<<<<<<<<<
- * 
- *     def __call__(self):
- */
-  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_TypeError, __pyx_tuple__5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 97, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_Raise(__pyx_t_1, 0, 0, 0);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __PYX_ERR(0, 97, __pyx_L1_error)
-
-  /* "pop/pop.data.pyx":96
- *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")
- * 
- *     def __setitem__(self, key, value):             # <<<<<<<<<<<<<<
- *         raise TypeError("ImmutableNamespaceDict does not support item assignment")
- * 
- */
+  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_value); if (unlikely((__pyx_t_1 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 107, __pyx_L1_error)
+  __pyx_v_self->implicit_hub = __pyx_t_1;
 
   /* function exit code */
+  __pyx_r = 0;
+  goto __pyx_L0;
   __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__setitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted.implicit_hub.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
-  __Pyx_RefNannyFinishContext();
+  __pyx_L0:;
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":99
- *         raise TypeError("ImmutableNamespaceDict does not support item assignment")
- * 
- *     def __call__(self):             # <<<<<<<<<<<<<<
- *         return unfreeze(self.__data)
- * 
+/* "pop/pop.contract.pyx":108
+ *         public bint _has_contracts
+ *         public bint implicit_hub
+ *         public dict[str, list[object]] contract_functions             # <<<<<<<<<<<<<<
+ *         public object hub
+ *         public object func
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_11__call__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_11__call__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
-  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_18contract_functions_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_18contract_functions_1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__call__ (wrapper)", 0);
-  #if CYTHON_ASSUME_SAFE_MACROS
-  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
-  #endif
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  if (unlikely(__pyx_nargs > 0)) {
-    __Pyx_RaiseArgtupleInvalid("__call__", 1, 0, 0, __pyx_nargs); return NULL;}
-  if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_VARARGS(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__call__", 0))) return NULL;
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_10__call__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_18contract_functions___get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_10__call__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_18contract_functions___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__call__", 1);
-
-  /* "pop/pop.data.pyx":100
- * 
- *     def __call__(self):
- *         return unfreeze(self.__data)             # <<<<<<<<<<<<<<
- * 
- *     def __len__(self):
- */
+  __Pyx_RefNannySetupContext("__get__", 1);
   __Pyx_XDECREF(__pyx_r);
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_unfreeze); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 100, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
-  #if CYTHON_UNPACK_METHODS
-  if (unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
-    }
-  }
-  #endif
-  {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_self->_ImmutableNamespaceDict__data};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 100, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  }
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __Pyx_INCREF(__pyx_v_self->contract_functions);
+  __pyx_r = __pyx_v_self->contract_functions;
   goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":99
- *         raise TypeError("ImmutableNamespaceDict does not support item assignment")
- * 
- *     def __call__(self):             # <<<<<<<<<<<<<<
- *         return unfreeze(self.__data)
- * 
- */
-
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__call__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":102
- *         return unfreeze(self.__data)
- * 
- *     def __len__(self):             # <<<<<<<<<<<<<<
- *         return len(self.__data)
- * 
- */
-
 /* Python wrapper */
-static Py_ssize_t __pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__(PyObject *__pyx_v_self); /*proto*/
-static Py_ssize_t __pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__(PyObject *__pyx_v_self) {
+static int __pyx_pw_3pop_8contract_10Contracted_18contract_functions_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_18contract_functions_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  Py_ssize_t __pyx_r;
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__len__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_12__len__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_18contract_functions_2__set__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static Py_ssize_t __pyx_pf_3pop_4data_22ImmutableNamespaceDict_12__len__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
-  Py_ssize_t __pyx_r;
+static int __pyx_pf_3pop_8contract_10Contracted_18contract_functions_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
-  Py_ssize_t __pyx_t_2;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__len__", 1);
-
-  /* "pop/pop.data.pyx":103
- * 
- *     def __len__(self):
- *         return len(self.__data)             # <<<<<<<<<<<<<<
- * 
- *     def __iter__(self):
- */
-  __pyx_t_1 = __pyx_v_self->_ImmutableNamespaceDict__data;
+  __Pyx_RefNannySetupContext("__set__", 1);
+  if (!(likely(PyDict_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_v_value))) __PYX_ERR(0, 108, __pyx_L1_error)
+  __pyx_t_1 = __pyx_v_value;
   __Pyx_INCREF(__pyx_t_1);
-  if (unlikely(__pyx_t_1 == Py_None)) {
-    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
-    __PYX_ERR(0, 103, __pyx_L1_error)
-  }
-  __pyx_t_2 = PyDict_Size(__pyx_t_1); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 103, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_r = __pyx_t_2;
-  goto __pyx_L0;
-
-  /* "pop/pop.data.pyx":102
- *         return unfreeze(self.__data)
- * 
- *     def __len__(self):             # <<<<<<<<<<<<<<
- *         return len(self.__data)
- * 
- */
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->contract_functions);
+  __Pyx_DECREF(__pyx_v_self->contract_functions);
+  __pyx_v_self->contract_functions = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
 
   /* function exit code */
+  __pyx_r = 0;
+  goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__len__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted.contract_functions.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = -1;
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":105
- *         return len(self.__data)
- * 
- *     def __iter__(self):             # <<<<<<<<<<<<<<
- *         return iter(self.__data)
- * 
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_10Contracted_18contract_functions_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_18contract_functions_5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_18contract_functions_4__del__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_10Contracted_18contract_functions_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->contract_functions);
+  __Pyx_DECREF(__pyx_v_self->contract_functions);
+  __pyx_v_self->contract_functions = ((PyObject*)Py_None);
+
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":109
+ *         public bint implicit_hub
+ *         public dict[str, list[object]] contract_functions
+ *         public object hub             # <<<<<<<<<<<<<<
+ *         public object func
+ *         public object signature
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_15__iter__(PyObject *__pyx_v_self); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_15__iter__(PyObject *__pyx_v_self) {
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_3hub_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_3hub_1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__iter__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_14__iter__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_3hub___get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_14__iter__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_3hub___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__iter__", 1);
-
-  /* "pop/pop.data.pyx":106
- * 
- *     def __iter__(self):
- *         return iter(self.__data)             # <<<<<<<<<<<<<<
- * 
- *     def __bool__(self):
- */
+  __Pyx_RefNannySetupContext("__get__", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __pyx_v_self->_ImmutableNamespaceDict__data;
-  __Pyx_INCREF(__pyx_t_1);
-  __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 106, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_r = __pyx_t_2;
-  __pyx_t_2 = 0;
+  __Pyx_INCREF(__pyx_v_self->hub);
+  __pyx_r = __pyx_v_self->hub;
   goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":105
- *         return len(self.__data)
- * 
- *     def __iter__(self):             # <<<<<<<<<<<<<<
- *         return iter(self.__data)
- * 
- */
-
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__iter__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":108
- *         return iter(self.__data)
- * 
- *     def __bool__(self):             # <<<<<<<<<<<<<<
- *         return bool(self.__data)
- * 
- */
-
 /* Python wrapper */
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_17__bool__(PyObject *__pyx_v_self); /*proto*/
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_17__bool__(PyObject *__pyx_v_self) {
+static int __pyx_pw_3pop_8contract_10Contracted_3hub_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_3hub_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__bool__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_16__bool__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_3hub_2__set__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_16__bool__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static int __pyx_pf_3pop_8contract_10Contracted_3hub_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value) {
   int __pyx_r;
-  int __pyx_t_1;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-
-  /* "pop/pop.data.pyx":109
- * 
- *     def __bool__(self):
- *         return bool(self.__data)             # <<<<<<<<<<<<<<
- * 
- *     def __contains__(self, key):
- */
-  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_self->_ImmutableNamespaceDict__data); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 109, __pyx_L1_error)
-  __pyx_r = (!(!__pyx_t_1));
-  goto __pyx_L0;
-
-  /* "pop/pop.data.pyx":108
- *         return iter(self.__data)
- * 
- *     def __bool__(self):             # <<<<<<<<<<<<<<
- *         return bool(self.__data)
- * 
- */
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__set__", 1);
+  __Pyx_INCREF(__pyx_v_value);
+  __Pyx_GIVEREF(__pyx_v_value);
+  __Pyx_GOTREF(__pyx_v_self->hub);
+  __Pyx_DECREF(__pyx_v_self->hub);
+  __pyx_v_self->hub = __pyx_v_value;
 
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__bool__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = -1;
-  __pyx_L0:;
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":111
- *         return bool(self.__data)
- * 
- *     def __contains__(self, key):             # <<<<<<<<<<<<<<
- *         return key in self.__data
- * 
- */
-
 /* Python wrapper */
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_19__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
-static int __pyx_pw_3pop_4data_22ImmutableNamespaceDict_19__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
+static int __pyx_pw_3pop_8contract_10Contracted_3hub_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_3hub_5__del__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__contains__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_18__contains__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_key));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_3hub_4__del__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_pf_3pop_4data_22ImmutableNamespaceDict_18__contains__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key) {
+static int __pyx_pf_3pop_8contract_10Contracted_3hub_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   int __pyx_r;
-  int __pyx_t_1;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-
-  /* "pop/pop.data.pyx":112
- * 
- *     def __contains__(self, key):
- *         return key in self.__data             # <<<<<<<<<<<<<<
- * 
- *     def __repr__(self):
- */
-  if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
-    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
-    __PYX_ERR(0, 112, __pyx_L1_error)
-  }
-  __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_key, __pyx_v_self->_ImmutableNamespaceDict__data, Py_EQ)); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 112, __pyx_L1_error)
-  __pyx_r = __pyx_t_1;
-  goto __pyx_L0;
-
-  /* "pop/pop.data.pyx":111
- *         return bool(self.__data)
- * 
- *     def __contains__(self, key):             # <<<<<<<<<<<<<<
- *         return key in self.__data
- * 
- */
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->hub);
+  __Pyx_DECREF(__pyx_v_self->hub);
+  __pyx_v_self->hub = Py_None;
 
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__contains__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = -1;
-  __pyx_L0:;
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":114
- *         return key in self.__data
- * 
- *     def __repr__(self):             # <<<<<<<<<<<<<<
- *         return f"{self.__data}"
- * 
+/* "pop/pop.contract.pyx":110
+ *         public dict[str, list[object]] contract_functions
+ *         public object hub
+ *         public object func             # <<<<<<<<<<<<<<
+ *         public object signature
+ *         public str __name__
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__(PyObject *__pyx_v_self); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__(PyObject *__pyx_v_self) {
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_4func_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_4func_1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__repr__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_20__repr__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_4func___get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_20__repr__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_4func___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__repr__", 1);
-
-  /* "pop/pop.data.pyx":115
- * 
- *     def __repr__(self):
- *         return f"{self.__data}"             # <<<<<<<<<<<<<<
- * 
- *     def __eq__(self, other):
- */
+  __Pyx_RefNannySetupContext("__get__", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __Pyx_PyObject_FormatSimple(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_empty_unicode); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 115, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __Pyx_INCREF(__pyx_v_self->func);
+  __pyx_r = __pyx_v_self->func;
   goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":114
- *         return key in self.__data
- * 
- *     def __repr__(self):             # <<<<<<<<<<<<<<
- *         return f"{self.__data}"
- * 
- */
-
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__repr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":117
- *         return f"{self.__data}"
- * 
- *     def __eq__(self, other):             # <<<<<<<<<<<<<<
- *         if isinstance(other, ImmutableNamespaceDict):
- *             return self.__data == other.__data
- */
-
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_23__eq__(PyObject *__pyx_v_self, PyObject *__pyx_v_other); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_23__eq__(PyObject *__pyx_v_self, PyObject *__pyx_v_other) {
+static int __pyx_pw_3pop_8contract_10Contracted_4func_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_4func_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject *__pyx_r = 0;
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__eq__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_22__eq__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_other));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_4func_2__set__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_22__eq__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other) {
-  PyObject *__pyx_r = NULL;
+static int __pyx_pf_3pop_8contract_10Contracted_4func_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  int __pyx_t_1;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__eq__", 1);
-
-  /* "pop/pop.data.pyx":118
- * 
- *     def __eq__(self, other):
- *         if isinstance(other, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
- *             return self.__data == other.__data
- *         elif isinstance(other, dict):
- */
-  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_other, __pyx_ptype_3pop_4data_ImmutableNamespaceDict); 
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":119
- *     def __eq__(self, other):
- *         if isinstance(other, ImmutableNamespaceDict):
- *             return self.__data == other.__data             # <<<<<<<<<<<<<<
- *         elif isinstance(other, dict):
- *             return self.__data == other
- */
-    __Pyx_XDECREF(__pyx_r);
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_other, __pyx_n_s_ImmutableNamespaceDict__data); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 119, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_3 = PyObject_RichCompare(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_t_2, Py_EQ); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 119, __pyx_L1_error)
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __pyx_r = __pyx_t_3;
-    __pyx_t_3 = 0;
-    goto __pyx_L0;
-
-    /* "pop/pop.data.pyx":118
- * 
- *     def __eq__(self, other):
- *         if isinstance(other, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
- *             return self.__data == other.__data
- *         elif isinstance(other, dict):
- */
-  }
-
-  /* "pop/pop.data.pyx":120
- *         if isinstance(other, ImmutableNamespaceDict):
- *             return self.__data == other.__data
- *         elif isinstance(other, dict):             # <<<<<<<<<<<<<<
- *             return self.__data == other
- *         return False
- */
-  __pyx_t_1 = PyDict_Check(__pyx_v_other); 
-  if (__pyx_t_1) {
+  __Pyx_RefNannySetupContext("__set__", 1);
+  __Pyx_INCREF(__pyx_v_value);
+  __Pyx_GIVEREF(__pyx_v_value);
+  __Pyx_GOTREF(__pyx_v_self->func);
+  __Pyx_DECREF(__pyx_v_self->func);
+  __pyx_v_self->func = __pyx_v_value;
 
-    /* "pop/pop.data.pyx":121
- *             return self.__data == other.__data
- *         elif isinstance(other, dict):
- *             return self.__data == other             # <<<<<<<<<<<<<<
- *         return False
- * 
- */
-    __Pyx_XDECREF(__pyx_r);
-    __pyx_t_3 = PyObject_RichCompare(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_v_other, Py_EQ); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 121, __pyx_L1_error)
-    __pyx_r = __pyx_t_3;
-    __pyx_t_3 = 0;
-    goto __pyx_L0;
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-    /* "pop/pop.data.pyx":120
- *         if isinstance(other, ImmutableNamespaceDict):
- *             return self.__data == other.__data
- *         elif isinstance(other, dict):             # <<<<<<<<<<<<<<
- *             return self.__data == other
- *         return False
- */
-  }
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_10Contracted_4func_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_4func_5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_4func_4__del__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
-  /* "pop/pop.data.pyx":122
- *         elif isinstance(other, dict):
- *             return self.__data == other
- *         return False             # <<<<<<<<<<<<<<
- * 
- *     def __ne__(self, other):
- */
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_INCREF(Py_False);
-  __pyx_r = Py_False;
-  goto __pyx_L0;
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-  /* "pop/pop.data.pyx":117
- *         return f"{self.__data}"
- * 
- *     def __eq__(self, other):             # <<<<<<<<<<<<<<
- *         if isinstance(other, ImmutableNamespaceDict):
- *             return self.__data == other.__data
- */
+static int __pyx_pf_3pop_8contract_10Contracted_4func_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->func);
+  __Pyx_DECREF(__pyx_v_self->func);
+  __pyx_v_self->func = Py_None;
 
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__eq__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
+  __pyx_r = 0;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":124
- *         return False
- * 
- *     def __ne__(self, other):             # <<<<<<<<<<<<<<
- *         return not self.__eq__(other)
- * 
+/* "pop/pop.contract.pyx":111
+ *         public object hub
+ *         public object func
+ *         public object signature             # <<<<<<<<<<<<<<
+ *         public str __name__
+ *         public str ref
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_25__ne__(PyObject *__pyx_v_self, PyObject *__pyx_v_other); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_25__ne__(PyObject *__pyx_v_self, PyObject *__pyx_v_other) {
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_9signature_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_9signature_1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__ne__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_24__ne__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), ((PyObject *)__pyx_v_other));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_9signature___get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_24__ne__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_other) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_9signature___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  int __pyx_t_5;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__ne__", 1);
-
-  /* "pop/pop.data.pyx":125
- * 
- *     def __ne__(self, other):
- *         return not self.__eq__(other)             # <<<<<<<<<<<<<<
- * 
- *     def keys(self):
- */
+  __Pyx_RefNannySetupContext("__get__", 1);
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_eq); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 125, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
-  #if CYTHON_UNPACK_METHODS
-  if (likely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
-    }
-  }
-  #endif
-  {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_other};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 125, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  }
-  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 125, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_t_1 = __Pyx_PyBool_FromLong((!__pyx_t_5)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 125, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __Pyx_INCREF(__pyx_v_self->signature);
+  __pyx_r = __pyx_v_self->signature;
   goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":124
- *         return False
- * 
- *     def __ne__(self, other):             # <<<<<<<<<<<<<<
- *         return not self.__eq__(other)
- * 
- */
-
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__ne__", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":127
- *         return not self.__eq__(other)
- * 
- *     def keys(self):             # <<<<<<<<<<<<<<
- *         return self.__data.keys()
- * 
- */
-
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_27keys(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_27keys = {"keys", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_27keys, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_27keys(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
-  #endif
+static int __pyx_pw_3pop_8contract_10Contracted_9signature_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_9signature_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject *__pyx_r = 0;
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("keys (wrapper)", 0);
-  #if !CYTHON_METH_FASTCALL
-  #if CYTHON_ASSUME_SAFE_MACROS
-  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
-  #endif
-  #endif
-  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  if (unlikely(__pyx_nargs > 0)) {
-    __Pyx_RaiseArgtupleInvalid("keys", 1, 0, 0, __pyx_nargs); return NULL;}
-  if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "keys", 0))) return NULL;
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_26keys(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_9signature_2__set__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_26keys(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
-  PyObject *__pyx_r = NULL;
+static int __pyx_pf_3pop_8contract_10Contracted_9signature_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("keys", 1);
+  __Pyx_RefNannySetupContext("__set__", 1);
+  __Pyx_INCREF(__pyx_v_value);
+  __Pyx_GIVEREF(__pyx_v_value);
+  __Pyx_GOTREF(__pyx_v_self->signature);
+  __Pyx_DECREF(__pyx_v_self->signature);
+  __pyx_v_self->signature = __pyx_v_value;
 
-  /* "pop/pop.data.pyx":128
- * 
- *     def keys(self):
- *         return self.__data.keys()             # <<<<<<<<<<<<<<
- * 
- *     def values(self):
- */
-  __Pyx_XDECREF(__pyx_r);
-  if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
-    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "keys");
-    __PYX_ERR(0, 128, __pyx_L1_error)
-  }
-  __pyx_t_1 = __Pyx_PyDict_Keys(__pyx_v_self->_ImmutableNamespaceDict__data); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 128, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
-  goto __pyx_L0;
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-  /* "pop/pop.data.pyx":127
- *         return not self.__eq__(other)
- * 
- *     def keys(self):             # <<<<<<<<<<<<<<
- *         return self.__data.keys()
- * 
- */
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_10Contracted_9signature_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_9signature_5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_9signature_4__del__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.keys", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":130
- *         return self.__data.keys()
- * 
- *     def values(self):             # <<<<<<<<<<<<<<
- *         return self.__data.values()
- * 
+static int __pyx_pf_3pop_8contract_10Contracted_9signature_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->signature);
+  __Pyx_DECREF(__pyx_v_self->signature);
+  __pyx_v_self->signature = Py_None;
+
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":112
+ *         public object func
+ *         public object signature
+ *         public str __name__             # <<<<<<<<<<<<<<
+ *         public str ref
+ *         list _sig_errors
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29values(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_29values = {"values", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29values, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29values(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
-  #endif
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_8__name___1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_8__name___1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("values (wrapper)", 0);
-  #if !CYTHON_METH_FASTCALL
-  #if CYTHON_ASSUME_SAFE_MACROS
-  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
-  #endif
-  #endif
-  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  if (unlikely(__pyx_nargs > 0)) {
-    __Pyx_RaiseArgtupleInvalid("values", 1, 0, 0, __pyx_nargs); return NULL;}
-  if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "values", 0))) return NULL;
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_28values(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_8__name_____get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_28values(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_8__name_____get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("values", 1);
-
-  /* "pop/pop.data.pyx":131
- * 
- *     def values(self):
- *         return self.__data.values()             # <<<<<<<<<<<<<<
- * 
- *     def items(self):
- */
+  __Pyx_RefNannySetupContext("__get__", 1);
   __Pyx_XDECREF(__pyx_r);
-  if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
-    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "values");
-    __PYX_ERR(0, 131, __pyx_L1_error)
-  }
-  __pyx_t_1 = __Pyx_PyDict_Values(__pyx_v_self->_ImmutableNamespaceDict__data); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 131, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __Pyx_INCREF(__pyx_v_self->__name__);
+  __pyx_r = __pyx_v_self->__name__;
   goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":130
- *         return self.__data.keys()
- * 
- *     def values(self):             # <<<<<<<<<<<<<<
- *         return self.__data.values()
- * 
- */
-
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.values", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":133
- *         return self.__data.values()
- * 
- *     def items(self):             # <<<<<<<<<<<<<<
- *         return self.__data.items()
- * 
- */
-
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_31items(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_31items = {"items", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_31items, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_31items(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
-  #endif
+static int __pyx_pw_3pop_8contract_10Contracted_8__name___3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_8__name___3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject *__pyx_r = 0;
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("items (wrapper)", 0);
-  #if !CYTHON_METH_FASTCALL
-  #if CYTHON_ASSUME_SAFE_MACROS
-  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
-  #endif
-  #endif
-  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  if (unlikely(__pyx_nargs > 0)) {
-    __Pyx_RaiseArgtupleInvalid("items", 1, 0, 0, __pyx_nargs); return NULL;}
-  if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "items", 0))) return NULL;
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_30items(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_8__name___2__set__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_30items(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
-  PyObject *__pyx_r = NULL;
+static int __pyx_pf_3pop_8contract_10Contracted_8__name___2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("items", 1);
-
-  /* "pop/pop.data.pyx":134
- * 
- *     def items(self):
- *         return self.__data.items()             # <<<<<<<<<<<<<<
- * 
- *     def get(self, key, default=None):
- */
-  __Pyx_XDECREF(__pyx_r);
-  if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
-    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "items");
-    __PYX_ERR(0, 134, __pyx_L1_error)
-  }
-  __pyx_t_1 = __Pyx_PyDict_Items(__pyx_v_self->_ImmutableNamespaceDict__data); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 134, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_r = __pyx_t_1;
+  __Pyx_RefNannySetupContext("__set__", 1);
+  if (!(likely(PyUnicode_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_v_value))) __PYX_ERR(0, 112, __pyx_L1_error)
+  __pyx_t_1 = __pyx_v_value;
+  __Pyx_INCREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->__name__);
+  __Pyx_DECREF(__pyx_v_self->__name__);
+  __pyx_v_self->__name__ = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
-  goto __pyx_L0;
-
-  /* "pop/pop.data.pyx":133
- *         return self.__data.values()
- * 
- *     def items(self):             # <<<<<<<<<<<<<<
- *         return self.__data.items()
- * 
- */
 
   /* function exit code */
+  __pyx_r = 0;
+  goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.items", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
+  __Pyx_AddTraceback("pop.contract.Contracted.__name__.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = -1;
   __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":136
- *         return self.__data.items()
- * 
- *     def get(self, key, default=None):             # <<<<<<<<<<<<<<
- *         return self.__data.get(key, default)
- * 
+/* Python wrapper */
+static int __pyx_pw_3pop_8contract_10Contracted_8__name___5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_8__name___5__del__(PyObject *__pyx_v_self) {
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_8__name___4__del__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static int __pyx_pf_3pop_8contract_10Contracted_8__name___4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
+  int __pyx_r;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->__name__);
+  __Pyx_DECREF(__pyx_v_self->__name__);
+  __pyx_v_self->__name__ = ((PyObject*)Py_None);
+
+  /* function exit code */
+  __pyx_r = 0;
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "pop/pop.contract.pyx":113
+ *         public object signature
+ *         public str __name__
+ *         public str ref             # <<<<<<<<<<<<<<
+ *         list _sig_errors
+ *         list contracts
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_33get(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_33get = {"get", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_33get, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_33get(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v_key = 0;
-  PyObject *__pyx_v_default = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
-  #endif
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_3ref_1__get__(PyObject *__pyx_v_self); /*proto*/
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_3ref_1__get__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject* values[2] = {0,0};
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("get (wrapper)", 0);
-  #if !CYTHON_METH_FASTCALL
-  #if CYTHON_ASSUME_SAFE_MACROS
-  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
-  #endif
-  #endif
-  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_key,&__pyx_n_s_default,0};
-    values[1] = __Pyx_Arg_NewRef_FASTCALL(((PyObject *)Py_None));
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_key)) != 0)) {
-          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
-          kw_args--;
-        }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 136, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-        CYTHON_FALLTHROUGH;
-        case  1:
-        if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_default);
-          if (value) { values[1] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 136, __pyx_L3_error)
-        }
-      }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "get") < 0)) __PYX_ERR(0, 136, __pyx_L3_error)
-      }
-    } else {
-      switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-    }
-    __pyx_v_key = values[0];
-    __pyx_v_default = values[1];
-  }
-  goto __pyx_L6_skip;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("get", 0, 1, 2, __pyx_nargs); __PYX_ERR(0, 136, __pyx_L3_error)
-  __pyx_L6_skip:;
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L3_error:;
-  {
-    Py_ssize_t __pyx_temp;
-    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
-    }
-  }
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.get", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_32get(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), __pyx_v_key, __pyx_v_default);
+  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_3ref___get__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
-  {
-    Py_ssize_t __pyx_temp;
-    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
-    }
-  }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_32get(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v_key, PyObject *__pyx_v_default) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_3ref___get__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("get", 1);
-
-  /* "pop/pop.data.pyx":137
- * 
- *     def get(self, key, default=None):
- *         return self.__data.get(key, default)             # <<<<<<<<<<<<<<
- * 
- *     def copy(self):
- */
+  __Pyx_RefNannySetupContext("__get__", 1);
   __Pyx_XDECREF(__pyx_r);
-  if (unlikely(__pyx_v_self->_ImmutableNamespaceDict__data == Py_None)) {
-    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "get");
-    __PYX_ERR(0, 137, __pyx_L1_error)
-  }
-  __pyx_t_1 = __Pyx_PyDict_GetItemDefault(__pyx_v_self->_ImmutableNamespaceDict__data, __pyx_v_key, __pyx_v_default); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 137, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __Pyx_INCREF(__pyx_v_self->ref);
+  __pyx_r = __pyx_v_self->ref;
   goto __pyx_L0;
 
-  /* "pop/pop.data.pyx":136
- *         return self.__data.items()
- * 
- *     def get(self, key, default=None):             # <<<<<<<<<<<<<<
- *         return self.__data.get(key, default)
- * 
- */
-
   /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.get", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":139
- *         return self.__data.get(key, default)
- * 
- *     def copy(self):             # <<<<<<<<<<<<<<
- *         return unfreeze(self.__data)
- * 
- */
-
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_35copy(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_35copy = {"copy", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_35copy, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_35copy(PyObject *__pyx_v_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
-  #endif
+static int __pyx_pw_3pop_8contract_10Contracted_3ref_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_3ref_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject *__pyx_r = 0;
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("copy (wrapper)", 0);
-  #if !CYTHON_METH_FASTCALL
-  #if CYTHON_ASSUME_SAFE_MACROS
-  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
-  #endif
-  #endif
-  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  if (unlikely(__pyx_nargs > 0)) {
-    __Pyx_RaiseArgtupleInvalid("copy", 1, 0, 0, __pyx_nargs); return NULL;}
-  if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "copy", 0))) return NULL;
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_34copy(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
+  __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_3ref_2__set__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), ((PyObject *)__pyx_v_value));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_34copy(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
-  PyObject *__pyx_r = NULL;
+static int __pyx_pf_3pop_8contract_10Contracted_3ref_2__set__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v_value) {
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("copy", 1);
-
-  /* "pop/pop.data.pyx":140
- * 
- *     def copy(self):
- *         return unfreeze(self.__data)             # <<<<<<<<<<<<<<
- * 
- * 
- */
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_unfreeze); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 140, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
-  #if CYTHON_UNPACK_METHODS
-  if (unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
-    }
-  }
-  #endif
-  {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_self->_ImmutableNamespaceDict__data};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 140, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  }
-  __pyx_r = __pyx_t_1;
+  __Pyx_RefNannySetupContext("__set__", 1);
+  if (!(likely(PyUnicode_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_v_value))) __PYX_ERR(0, 113, __pyx_L1_error)
+  __pyx_t_1 = __pyx_v_value;
+  __Pyx_INCREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v_self->ref);
+  __Pyx_DECREF(__pyx_v_self->ref);
+  __pyx_v_self->ref = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
-  goto __pyx_L0;
-
-  /* "pop/pop.data.pyx":139
- *         return self.__data.get(key, default)
- * 
- *     def copy(self):             # <<<<<<<<<<<<<<
- *         return unfreeze(self.__data)
- * 
- */
 
   /* function exit code */
+  __pyx_r = 0;
+  goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.copy", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
+  __Pyx_AddTraceback("pop.contract.Contracted.ref.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = -1;
   __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "pop/pop.data.pyx":69
- * 
- * cdef class ImmutableNamespaceDict:
- *     cdef readonly dict __data             # <<<<<<<<<<<<<<
- * 
- *     def __init__(self, data=None):
- */
-
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data_1__get__(PyObject *__pyx_v_self); /*proto*/
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data_1__get__(PyObject *__pyx_v_self) {
+static int __pyx_pw_3pop_8contract_10Contracted_3ref_5__del__(PyObject *__pyx_v_self); /*proto*/
+static int __pyx_pw_3pop_8contract_10Contracted_3ref_5__del__(PyObject *__pyx_v_self) {
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject *__pyx_r = 0;
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
   __pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data___get__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_3ref_4__del__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data___get__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
-  PyObject *__pyx_r = NULL;
+static int __pyx_pf_3pop_8contract_10Contracted_3ref_4__del__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
+  int __pyx_r;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__get__", 1);
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_INCREF(__pyx_v_self->_ImmutableNamespaceDict__data);
-  __pyx_r = __pyx_v_self->_ImmutableNamespaceDict__data;
-  goto __pyx_L0;
+  __Pyx_RefNannySetupContext("__del__", 1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __Pyx_GOTREF(__pyx_v_self->ref);
+  __Pyx_DECREF(__pyx_v_self->ref);
+  __pyx_v_self->ref = ((PyObject*)Py_None);
 
   /* function exit code */
-  __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
+  __pyx_r = 0;
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_10__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_8contract_10Contracted_10__reduce_cython__ = {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_10Contracted_10__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_10__reduce_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   #if !CYTHON_METH_FASTCALL
@@ -8777,250 +9628,335 @@
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   if (unlikely(__pyx_nargs > 0)) {
     __Pyx_RaiseArgtupleInvalid("__reduce_cython__", 1, 0, 0, __pyx_nargs); return NULL;}
   if (unlikely(__pyx_kwds) && __Pyx_NumKwargs_FASTCALL(__pyx_kwds) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__reduce_cython__", 0))) return NULL;
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_36__reduce_cython__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self));
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_9__reduce_cython__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self));
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_36__reduce_cython__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_9__reduce_cython__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self) {
   PyObject *__pyx_v_state = 0;
   PyObject *__pyx_v__dict = 0;
   int __pyx_v_use_setstate;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
-  int __pyx_t_2;
+  PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_4;
+  int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__reduce_cython__", 1);
 
   /* "(tree fragment)":5
  *     cdef object _dict
  *     cdef bint use_setstate
- *     state = (self._ImmutableNamespaceDict__data,)             # <<<<<<<<<<<<<<
+ *     state = (self.__name__, self.__wrapped__, self._has_contracts, self._sig_errors, self.contract_functions, self.contracts, self.func, self.hub, self.implicit_hub, self.ref, self.signature)             # <<<<<<<<<<<<<<
  *     _dict = getattr(self, '__dict__', None)
  *     if _dict is not None:
  */
-  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 5, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_self->_has_contracts); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_INCREF(__pyx_v_self->_ImmutableNamespaceDict__data);
-  __Pyx_GIVEREF(__pyx_v_self->_ImmutableNamespaceDict__data);
-  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_self->_ImmutableNamespaceDict__data)) __PYX_ERR(2, 5, __pyx_L1_error);
-  __pyx_v_state = ((PyObject*)__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyBool_FromLong(__pyx_v_self->implicit_hub); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = PyTuple_New(11); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_v_self->__name__);
+  __Pyx_GIVEREF(__pyx_v_self->__name__);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_self->__name__)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->__pyx___wrapped__);
+  __Pyx_GIVEREF(__pyx_v_self->__pyx___wrapped__);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_self->__pyx___wrapped__)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_GIVEREF(__pyx_t_1);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_t_1)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->_sig_errors);
+  __Pyx_GIVEREF(__pyx_v_self->_sig_errors);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_v_self->_sig_errors)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->contract_functions);
+  __Pyx_GIVEREF(__pyx_v_self->contract_functions);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 4, __pyx_v_self->contract_functions)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->contracts);
+  __Pyx_GIVEREF(__pyx_v_self->contracts);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 5, __pyx_v_self->contracts)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->func);
+  __Pyx_GIVEREF(__pyx_v_self->func);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 6, __pyx_v_self->func)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->hub);
+  __Pyx_GIVEREF(__pyx_v_self->hub);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 7, __pyx_v_self->hub)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_GIVEREF(__pyx_t_2);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 8, __pyx_t_2)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->ref);
+  __Pyx_GIVEREF(__pyx_v_self->ref);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 9, __pyx_v_self->ref)) __PYX_ERR(2, 5, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_v_self->signature);
+  __Pyx_GIVEREF(__pyx_v_self->signature);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 10, __pyx_v_self->signature)) __PYX_ERR(2, 5, __pyx_L1_error);
   __pyx_t_1 = 0;
+  __pyx_t_2 = 0;
+  __pyx_v_state = ((PyObject*)__pyx_t_3);
+  __pyx_t_3 = 0;
 
   /* "(tree fragment)":6
  *     cdef bint use_setstate
- *     state = (self._ImmutableNamespaceDict__data,)
+ *     state = (self.__name__, self.__wrapped__, self._has_contracts, self._sig_errors, self.contract_functions, self.contracts, self.func, self.hub, self.implicit_hub, self.ref, self.signature)
  *     _dict = getattr(self, '__dict__', None)             # <<<<<<<<<<<<<<
  *     if _dict is not None:
  *         state += (_dict,)
  */
-  __pyx_t_1 = __Pyx_GetAttr3(((PyObject *)__pyx_v_self), __pyx_n_s_dict, Py_None); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_v__dict = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __pyx_t_3 = __Pyx_GetAttr3(((PyObject *)__pyx_v_self), __pyx_n_s_dict, Py_None); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_v__dict = __pyx_t_3;
+  __pyx_t_3 = 0;
 
   /* "(tree fragment)":7
- *     state = (self._ImmutableNamespaceDict__data,)
+ *     state = (self.__name__, self.__wrapped__, self._has_contracts, self._sig_errors, self.contract_functions, self.contracts, self.func, self.hub, self.implicit_hub, self.ref, self.signature)
  *     _dict = getattr(self, '__dict__', None)
  *     if _dict is not None:             # <<<<<<<<<<<<<<
  *         state += (_dict,)
  *         use_setstate = True
  */
-  __pyx_t_2 = (__pyx_v__dict != Py_None);
-  if (__pyx_t_2) {
+  __pyx_t_4 = (__pyx_v__dict != Py_None);
+  if (__pyx_t_4) {
 
     /* "(tree fragment)":8
  *     _dict = getattr(self, '__dict__', None)
  *     if _dict is not None:
  *         state += (_dict,)             # <<<<<<<<<<<<<<
  *         use_setstate = True
  *     else:
  */
-    __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 8, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 8, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
     __Pyx_INCREF(__pyx_v__dict);
     __Pyx_GIVEREF(__pyx_v__dict);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v__dict)) __PYX_ERR(2, 8, __pyx_L1_error);
-    __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_state, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 8, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __Pyx_DECREF_SET(__pyx_v_state, ((PyObject*)__pyx_t_3));
-    __pyx_t_3 = 0;
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v__dict)) __PYX_ERR(2, 8, __pyx_L1_error);
+    __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_state, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 8, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_DECREF_SET(__pyx_v_state, ((PyObject*)__pyx_t_2));
+    __pyx_t_2 = 0;
 
     /* "(tree fragment)":9
  *     if _dict is not None:
  *         state += (_dict,)
  *         use_setstate = True             # <<<<<<<<<<<<<<
  *     else:
- *         use_setstate = self._ImmutableNamespaceDict__data is not None
+ *         use_setstate = self.__name__ is not None or self.__wrapped__ is not None or self._sig_errors is not None or self.contract_functions is not None or self.contracts is not None or self.func is not None or self.hub is not None or self.ref is not None or self.signature is not None
  */
     __pyx_v_use_setstate = 1;
 
     /* "(tree fragment)":7
- *     state = (self._ImmutableNamespaceDict__data,)
+ *     state = (self.__name__, self.__wrapped__, self._has_contracts, self._sig_errors, self.contract_functions, self.contracts, self.func, self.hub, self.implicit_hub, self.ref, self.signature)
  *     _dict = getattr(self, '__dict__', None)
  *     if _dict is not None:             # <<<<<<<<<<<<<<
  *         state += (_dict,)
  *         use_setstate = True
  */
     goto __pyx_L3;
   }
 
   /* "(tree fragment)":11
  *         use_setstate = True
  *     else:
- *         use_setstate = self._ImmutableNamespaceDict__data is not None             # <<<<<<<<<<<<<<
+ *         use_setstate = self.__name__ is not None or self.__wrapped__ is not None or self._sig_errors is not None or self.contract_functions is not None or self.contracts is not None or self.func is not None or self.hub is not None or self.ref is not None or self.signature is not None             # <<<<<<<<<<<<<<
  *     if use_setstate:
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, None), state
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, None), state
  */
   /*else*/ {
-    __pyx_t_2 = (__pyx_v_self->_ImmutableNamespaceDict__data != ((PyObject*)Py_None));
-    __pyx_v_use_setstate = __pyx_t_2;
+    __pyx_t_5 = (__pyx_v_self->__name__ != ((PyObject*)Py_None));
+    if (!__pyx_t_5) {
+    } else {
+      __pyx_t_4 = __pyx_t_5;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_5 = (__pyx_v_self->__pyx___wrapped__ != Py_None);
+    if (!__pyx_t_5) {
+    } else {
+      __pyx_t_4 = __pyx_t_5;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_5 = (__pyx_v_self->_sig_errors != ((PyObject*)Py_None));
+    if (!__pyx_t_5) {
+    } else {
+      __pyx_t_4 = __pyx_t_5;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_5 = (__pyx_v_self->contract_functions != ((PyObject*)Py_None));
+    if (!__pyx_t_5) {
+    } else {
+      __pyx_t_4 = __pyx_t_5;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_5 = (__pyx_v_self->contracts != ((PyObject*)Py_None));
+    if (!__pyx_t_5) {
+    } else {
+      __pyx_t_4 = __pyx_t_5;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_5 = (__pyx_v_self->func != Py_None);
+    if (!__pyx_t_5) {
+    } else {
+      __pyx_t_4 = __pyx_t_5;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_5 = (__pyx_v_self->hub != Py_None);
+    if (!__pyx_t_5) {
+    } else {
+      __pyx_t_4 = __pyx_t_5;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_5 = (__pyx_v_self->ref != ((PyObject*)Py_None));
+    if (!__pyx_t_5) {
+    } else {
+      __pyx_t_4 = __pyx_t_5;
+      goto __pyx_L4_bool_binop_done;
+    }
+    __pyx_t_5 = (__pyx_v_self->signature != Py_None);
+    __pyx_t_4 = __pyx_t_5;
+    __pyx_L4_bool_binop_done:;
+    __pyx_v_use_setstate = __pyx_t_4;
   }
   __pyx_L3:;
 
   /* "(tree fragment)":12
  *     else:
- *         use_setstate = self._ImmutableNamespaceDict__data is not None
+ *         use_setstate = self.__name__ is not None or self.__wrapped__ is not None or self._sig_errors is not None or self.contract_functions is not None or self.contracts is not None or self.func is not None or self.hub is not None or self.ref is not None or self.signature is not None
  *     if use_setstate:             # <<<<<<<<<<<<<<
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, None), state
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, None), state
  *     else:
  */
   if (__pyx_v_use_setstate) {
 
     /* "(tree fragment)":13
- *         use_setstate = self._ImmutableNamespaceDict__data is not None
+ *         use_setstate = self.__name__ is not None or self.__wrapped__ is not None or self._sig_errors is not None or self.contract_functions is not None or self.contracts is not None or self.func is not None or self.hub is not None or self.ref is not None or self.signature is not None
  *     if use_setstate:
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, None), state             # <<<<<<<<<<<<<<
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, None), state             # <<<<<<<<<<<<<<
  *     else:
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, state)
  */
     __Pyx_XDECREF(__pyx_r);
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_pyx_unpickle_ImmutableNamespac); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_pyx_unpickle_Contracted); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_3 = PyTuple_New(3); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
     __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
     __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))))) __PYX_ERR(2, 13, __pyx_L1_error);
-    __Pyx_INCREF(__pyx_int_151484788);
-    __Pyx_GIVEREF(__pyx_int_151484788);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_151484788)) __PYX_ERR(2, 13, __pyx_L1_error);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))))) __PYX_ERR(2, 13, __pyx_L1_error);
+    __Pyx_INCREF(__pyx_int_171011501);
+    __Pyx_GIVEREF(__pyx_int_171011501);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_int_171011501)) __PYX_ERR(2, 13, __pyx_L1_error);
     __Pyx_INCREF(Py_None);
     __Pyx_GIVEREF(Py_None);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, Py_None)) __PYX_ERR(2, 13, __pyx_L1_error);
-    __pyx_t_4 = PyTuple_New(3); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 13, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_4);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 2, Py_None)) __PYX_ERR(2, 13, __pyx_L1_error);
+    __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_GIVEREF(__pyx_t_2);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_2)) __PYX_ERR(2, 13, __pyx_L1_error);
     __Pyx_GIVEREF(__pyx_t_3);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error);
-    __Pyx_GIVEREF(__pyx_t_1);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error);
     __Pyx_INCREF(__pyx_v_state);
     __Pyx_GIVEREF(__pyx_v_state);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_4, 2, __pyx_v_state)) __PYX_ERR(2, 13, __pyx_L1_error);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_state)) __PYX_ERR(2, 13, __pyx_L1_error);
+    __pyx_t_2 = 0;
     __pyx_t_3 = 0;
+    __pyx_r = __pyx_t_1;
     __pyx_t_1 = 0;
-    __pyx_r = __pyx_t_4;
-    __pyx_t_4 = 0;
     goto __pyx_L0;
 
     /* "(tree fragment)":12
  *     else:
- *         use_setstate = self._ImmutableNamespaceDict__data is not None
+ *         use_setstate = self.__name__ is not None or self.__wrapped__ is not None or self._sig_errors is not None or self.contract_functions is not None or self.contracts is not None or self.func is not None or self.hub is not None or self.ref is not None or self.signature is not None
  *     if use_setstate:             # <<<<<<<<<<<<<<
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, None), state
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, None), state
  *     else:
  */
   }
 
   /* "(tree fragment)":15
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, None), state
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, None), state
  *     else:
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)             # <<<<<<<<<<<<<<
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, state)             # <<<<<<<<<<<<<<
  * def __setstate_cython__(self, __pyx_state):
- *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)
+ *     __pyx_unpickle_Contracted__set_state(self, __pyx_state)
  */
   /*else*/ {
     __Pyx_XDECREF(__pyx_r);
-    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_pyx_unpickle_ImmutableNamespac); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 15, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_4);
-    __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_pyx_unpickle_Contracted); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_3 = PyTuple_New(3); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 15, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
     __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
     __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))))) __PYX_ERR(2, 15, __pyx_L1_error);
-    __Pyx_INCREF(__pyx_int_151484788);
-    __Pyx_GIVEREF(__pyx_int_151484788);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_151484788)) __PYX_ERR(2, 15, __pyx_L1_error);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))))) __PYX_ERR(2, 15, __pyx_L1_error);
+    __Pyx_INCREF(__pyx_int_171011501);
+    __Pyx_GIVEREF(__pyx_int_171011501);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_int_171011501)) __PYX_ERR(2, 15, __pyx_L1_error);
     __Pyx_INCREF(__pyx_v_state);
     __Pyx_GIVEREF(__pyx_v_state);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_state)) __PYX_ERR(2, 15, __pyx_L1_error);
-    __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 15, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_GIVEREF(__pyx_t_4);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_4)) __PYX_ERR(2, 15, __pyx_L1_error);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_v_state)) __PYX_ERR(2, 15, __pyx_L1_error);
+    __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 15, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
     __Pyx_GIVEREF(__pyx_t_1);
-    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error);
-    __pyx_t_4 = 0;
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error);
+    __Pyx_GIVEREF(__pyx_t_3);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_3)) __PYX_ERR(2, 15, __pyx_L1_error);
     __pyx_t_1 = 0;
-    __pyx_r = __pyx_t_3;
     __pyx_t_3 = 0;
+    __pyx_r = __pyx_t_2;
+    __pyx_t_2 = 0;
     goto __pyx_L0;
   }
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_state);
   __Pyx_XDECREF(__pyx_v__dict);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":16
  *     else:
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)
+ *     __pyx_unpickle_Contracted__set_state(self, __pyx_state)
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__(PyObject *__pyx_v_self, 
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_12__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__(PyObject *__pyx_v_self, 
+static PyMethodDef __pyx_mdef_3pop_8contract_10Contracted_12__setstate_cython__ = {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_10Contracted_12__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_8contract_10Contracted_12__setstate_cython__(PyObject *__pyx_v_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_state = 0;
@@ -9082,2483 +10018,1577 @@
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_22ImmutableNamespaceDict_38__setstate_cython__(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v_self), __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_8contract_10Contracted_11__setstate_cython__(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v_self), __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_22ImmutableNamespaceDict_38__setstate_cython__(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_8contract_10Contracted_11__setstate_cython__(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__setstate_cython__", 1);
 
   /* "(tree fragment)":17
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, state)
  * def __setstate_cython__(self, __pyx_state):
- *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
+ *     __pyx_unpickle_Contracted__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
  */
   if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 17, __pyx_L1_error)
-  __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_3pop_8contract___pyx_unpickle_Contracted__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 17, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
   /* "(tree fragment)":16
  *     else:
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)
+ *     __pyx_unpickle_Contracted__set_state(self, __pyx_state)
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.ImmutableNamespaceDict.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.Contracted.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
+static PyObject *__pyx_gb_3pop_8contract_18ContractedAsyncGen_2generator1(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
 
-/* "pop/pop.data.pyx":143
+/* "pop/pop.contract.pyx":216
  * 
- * 
- * def freeze(data):             # <<<<<<<<<<<<<<
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return data
+ * class ContractedAsyncGen(Contracted):
+ *     async def __call__(self, *args, **kwargs):             # <<<<<<<<<<<<<<
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_1freeze(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_8contract_18ContractedAsyncGen_1__call__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_1freeze = {"freeze", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_1freeze, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_1freeze(PyObject *__pyx_self, 
+static PyMethodDef __pyx_mdef_3pop_8contract_18ContractedAsyncGen_1__call__ = {"__call__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_18ContractedAsyncGen_1__call__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_8contract_18ContractedAsyncGen_1__call__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v_data = 0;
+  PyObject *__pyx_v_self = 0;
+  PyObject *__pyx_v_args = 0;
+  PyObject *__pyx_v_kwargs = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED Py_ssize_t __pyx_nargs;
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject* values[1] = {0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("freeze (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__call__ (wrapper)", 0);
   #if !CYTHON_METH_FASTCALL
   #if CYTHON_ASSUME_SAFE_MACROS
   __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #else
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  __pyx_v_kwargs = PyDict_New(); if (unlikely(!__pyx_v_kwargs)) return NULL;
+  __Pyx_GOTREF(__pyx_v_kwargs);
+  __pyx_v_args = __Pyx_ArgsSlice_FASTCALL(__pyx_args, 1, __pyx_nargs);
+  if (unlikely(!__pyx_v_args)) {
+    __Pyx_CLEAR(__pyx_v_kwargs);
+    __Pyx_RefNannyFinishContext();
+    return NULL;
+  }
+  __Pyx_GOTREF(__pyx_v_args);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_data,0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
+        default:
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
-        default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 143, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 216, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "freeze") < 0)) __PYX_ERR(0, 143, __pyx_L3_error)
+        const Py_ssize_t used_pos_args = (kwd_pos_args < 1) ? kwd_pos_args : 1;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, __pyx_v_kwargs, values + 0, used_pos_args, "__call__") < 0)) __PYX_ERR(0, 216, __pyx_L3_error)
       }
-    } else if (unlikely(__pyx_nargs != 1)) {
+    } else if (unlikely(__pyx_nargs < 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
-    __pyx_v_data = values[0];
+    __pyx_v_self = values[0];
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("freeze", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 143, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__call__", 0, 1, 1, __pyx_nargs); __PYX_ERR(0, 216, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("pop.data.freeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_CLEAR(__pyx_v_args);
+  __Pyx_CLEAR(__pyx_v_kwargs);
+  __Pyx_AddTraceback("pop.contract.ContractedAsyncGen.__call__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_freeze(__pyx_self, __pyx_v_data);
+  __pyx_r = __pyx_pf_3pop_8contract_18ContractedAsyncGen___call__(__pyx_self, __pyx_v_self, __pyx_v_args, __pyx_v_kwargs);
 
   /* function exit code */
+  __Pyx_DECREF(__pyx_v_args);
+  __Pyx_DECREF(__pyx_v_kwargs);
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
-static PyObject *__pyx_gb_3pop_4data_6freeze_2generator1(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
-
-/* "pop/pop.data.pyx":149
- *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
- *     elif isinstance(data, list):
- *         return tuple(freeze(value) for value in data)             # <<<<<<<<<<<<<<
- *     elif isinstance(data, set):
- *         return frozenset(freeze(value) for value in data)
- */
 
-static PyObject *__pyx_pf_3pop_4data_6freeze_genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *__pyx_cur_scope;
+static PyObject *__pyx_pf_3pop_8contract_18ContractedAsyncGen___call__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_args, PyObject *__pyx_v_kwargs) {
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *__pyx_cur_scope;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("genexpr", 0);
-  __pyx_cur_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)__pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr(__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr, __pyx_empty_tuple, NULL);
+  __Pyx_RefNannySetupContext("__call__", 0);
+  __pyx_cur_scope = (struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *)__pyx_tp_new_3pop_8contract___pyx_scope_struct_2___call__(__pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__, __pyx_empty_tuple, NULL);
   if (unlikely(!__pyx_cur_scope)) {
-    __pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)Py_None);
+    __pyx_cur_scope = ((struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *)Py_None);
     __Pyx_INCREF(Py_None);
-    __PYX_ERR(0, 149, __pyx_L1_error)
+    __PYX_ERR(0, 216, __pyx_L1_error)
   } else {
     __Pyx_GOTREF((PyObject *)__pyx_cur_scope);
   }
-  __pyx_cur_scope->__pyx_genexpr_arg_0 = __pyx_genexpr_arg_0;
-  __Pyx_INCREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
-  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
+  __pyx_cur_scope->__pyx_v_self = __pyx_v_self;
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_self);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_self);
+  __pyx_cur_scope->__pyx_v_args = __pyx_v_args;
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_args);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_args);
+  __pyx_cur_scope->__pyx_v_kwargs = __pyx_v_kwargs;
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_kwargs);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_kwargs);
   {
-    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_3pop_4data_6freeze_2generator1, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_freeze_locals_genexpr, __pyx_n_s_pop_data); if (unlikely(!gen)) __PYX_ERR(0, 149, __pyx_L1_error)
+    __pyx_CoroutineObject *gen = __Pyx_AsyncGen_New((__pyx_coroutine_body_t) __pyx_gb_3pop_8contract_18ContractedAsyncGen_2generator1, __pyx_codeobj__3, (PyObject *) __pyx_cur_scope, __pyx_n_s_call_2, __pyx_n_s_ContractedAsyncGen___call, __pyx_n_s_pop_contract); if (unlikely(!gen)) __PYX_ERR(0, 216, __pyx_L1_error)
     __Pyx_DECREF(__pyx_cur_scope);
     __Pyx_RefNannyFinishContext();
     return (PyObject *) gen;
   }
 
   /* function exit code */
   __pyx_L1_error:;
-  __Pyx_AddTraceback("pop.data.freeze.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.ContractedAsyncGen.__call__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __Pyx_DECREF((PyObject *)__pyx_cur_scope);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_gb_3pop_4data_6freeze_2generator1(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
+static PyObject *__pyx_gb_3pop_8contract_18ContractedAsyncGen_2generator1(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
 {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *__pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)__pyx_generator->closure);
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *__pyx_cur_scope = ((struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *)__pyx_generator->closure);
   PyObject *__pyx_r = NULL;
   PyObject *__pyx_t_1 = NULL;
-  Py_ssize_t __pyx_t_2;
-  PyObject *(*__pyx_t_3)(PyObject *);
-  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_2;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
   PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
-  int __pyx_t_7;
+  PyObject *__pyx_t_7 = NULL;
+  Py_ssize_t __pyx_t_8;
+  PyObject *(*__pyx_t_9)(PyObject *);
+  int __pyx_t_10;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("genexpr", 0);
+  __Pyx_RefNannySetupContext("__call__", 0);
   switch (__pyx_generator->resume_label) {
     case 0: goto __pyx_L3_first_run;
-    case 1: goto __pyx_L6_resume_from_yield;
+    case 1: goto __pyx_L8_resume_from_await;
+    case 2: goto __pyx_L9_resume_from_yield;
+    case 3: goto __pyx_L13_resume_from_await;
+    case 4: goto __pyx_L14_resume_from_await;
+    case 5: goto __pyx_L19_resume_from_await;
+    case 6: goto __pyx_L20_resume_from_yield;
+    case 7: goto __pyx_L24_resume_from_await;
+    case 8: goto __pyx_L25_resume_from_yield;
+    case 9: goto __pyx_L29_resume_from_await;
     default: /* CPython raises the right error here */
     __Pyx_RefNannyFinishContext();
     return NULL;
   }
   __pyx_L3_first_run:;
-  if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 149, __pyx_L1_error)
-  if (unlikely(!__pyx_cur_scope->__pyx_genexpr_arg_0)) { __Pyx_RaiseUnboundLocalError(".0"); __PYX_ERR(0, 149, __pyx_L1_error) }
-  if (likely(PyList_CheckExact(__pyx_cur_scope->__pyx_genexpr_arg_0)) || PyTuple_CheckExact(__pyx_cur_scope->__pyx_genexpr_arg_0)) {
-    __pyx_t_1 = __pyx_cur_scope->__pyx_genexpr_arg_0; __Pyx_INCREF(__pyx_t_1);
-    __pyx_t_2 = 0;
-    __pyx_t_3 = NULL;
-  } else {
-    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_cur_scope->__pyx_genexpr_arg_0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 149, __pyx_L1_error)
+  if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 216, __pyx_L1_error)
+
+  /* "pop/pop.contract.pyx":217
+ * class ContractedAsyncGen(Contracted):
+ *     async def __call__(self, *args, **kwargs):
+ *         if self.implicit_hub:             # <<<<<<<<<<<<<<
+ *             args = (self.hub,) + args
+ * 
+ */
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_implicit_hub); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 217, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 217, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (__pyx_t_2) {
+
+    /* "pop/pop.contract.pyx":218
+ *     async def __call__(self, *args, **kwargs):
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args             # <<<<<<<<<<<<<<
+ * 
+ *         if not self._has_contracts:
+ */
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_hub); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 218, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 218, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_GIVEREF(__pyx_t_1);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1)) __PYX_ERR(0, 218, __pyx_L1_error);
+    __pyx_t_1 = 0;
+    __pyx_t_1 = PyNumber_Add(__pyx_t_3, __pyx_cur_scope->__pyx_v_args); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 218, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_3 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 149, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_GOTREF(__pyx_cur_scope->__pyx_v_args);
+    __Pyx_DECREF_SET(__pyx_cur_scope->__pyx_v_args, ((PyObject*)__pyx_t_1));
+    __Pyx_GIVEREF(__pyx_t_1);
+    __pyx_t_1 = 0;
+
+    /* "pop/pop.contract.pyx":217
+ * class ContractedAsyncGen(Contracted):
+ *     async def __call__(self, *args, **kwargs):
+ *         if self.implicit_hub:             # <<<<<<<<<<<<<<
+ *             args = (self.hub,) + args
+ * 
+ */
   }
-  for (;;) {
-    if (likely(!__pyx_t_3)) {
-      if (likely(PyList_CheckExact(__pyx_t_1))) {
-        {
-          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_1);
-          #if !CYTHON_ASSUME_SAFE_MACROS
-          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 149, __pyx_L1_error)
-          #endif
-          if (__pyx_t_2 >= __pyx_temp) break;
-        }
-        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely((0 < 0))) __PYX_ERR(0, 149, __pyx_L1_error)
-        #else
-        __pyx_t_4 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 149, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_4);
-        #endif
-      } else {
-        {
-          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_1);
-          #if !CYTHON_ASSUME_SAFE_MACROS
-          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 149, __pyx_L1_error)
-          #endif
-          if (__pyx_t_2 >= __pyx_temp) break;
-        }
-        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely((0 < 0))) __PYX_ERR(0, 149, __pyx_L1_error)
-        #else
-        __pyx_t_4 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 149, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_4);
-        #endif
-      }
-    } else {
-      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
-      if (unlikely(!__pyx_t_4)) {
-        PyObject* exc_type = PyErr_Occurred();
-        if (exc_type) {
-          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 149, __pyx_L1_error)
-        }
-        break;
-      }
-      __Pyx_GOTREF(__pyx_t_4);
-    }
-    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_value);
-    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_value, __pyx_t_4);
-    __Pyx_GIVEREF(__pyx_t_4);
-    __pyx_t_4 = 0;
-    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_freeze); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 149, __pyx_L1_error)
+
+  /* "pop/pop.contract.pyx":220
+ *             args = (self.hub,) + args
+ * 
+ *         if not self._has_contracts:             # <<<<<<<<<<<<<<
+ *             async for chunk in self.func(*args, **kwargs):
+ *                 yield chunk
+ */
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_has_contracts); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 220, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 220, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_4 = (!__pyx_t_2);
+  if (__pyx_t_4) {
+
+    /* "pop/pop.contract.pyx":221
+ * 
+ *         if not self._has_contracts:
+ *             async for chunk in self.func(*args, **kwargs):             # <<<<<<<<<<<<<<
+ *                 yield chunk
+ *             return
+ */
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_func); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 221, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_3 = PyDict_Copy(__pyx_cur_scope->__pyx_v_kwargs); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 221, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_cur_scope->__pyx_v_args, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 221, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_6 = NULL;
-    __pyx_t_7 = 0;
-    #if CYTHON_UNPACK_METHODS
-    if (unlikely(PyMethod_Check(__pyx_t_5))) {
-      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
-      if (likely(__pyx_t_6)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
-        __Pyx_INCREF(__pyx_t_6);
-        __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_5, function);
-        __pyx_t_7 = 1;
-      }
-    }
-    #endif
-    {
-      PyObject *__pyx_callargs[2] = {__pyx_t_6, __pyx_cur_scope->__pyx_v_value};
-      __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_7, 1+__pyx_t_7);
-      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
-      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 149, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_Coroutine_GetAsyncIter(__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 221, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    for (;;) {
+      __pyx_t_5 = __Pyx_Coroutine_AsyncIterNext(__pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 221, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_5);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-    }
-    __pyx_r = __pyx_t_4;
-    __pyx_t_4 = 0;
-    __Pyx_XGIVEREF(__pyx_t_1);
-    __pyx_cur_scope->__pyx_t_0 = __pyx_t_1;
-    __pyx_cur_scope->__pyx_t_1 = __pyx_t_2;
-    __pyx_cur_scope->__pyx_t_2 = __pyx_t_3;
-    __Pyx_XGIVEREF(__pyx_r);
-    __Pyx_RefNannyFinishContext();
-    __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
-    /* return from generator, yielding value */
-    __pyx_generator->resume_label = 1;
-    return __pyx_r;
-    __pyx_L6_resume_from_yield:;
-    __pyx_t_1 = __pyx_cur_scope->__pyx_t_0;
-    __pyx_cur_scope->__pyx_t_0 = 0;
-    __Pyx_XGOTREF(__pyx_t_1);
-    __pyx_t_2 = __pyx_cur_scope->__pyx_t_1;
-    __pyx_t_3 = __pyx_cur_scope->__pyx_t_2;
-    if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 149, __pyx_L1_error)
-  }
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  CYTHON_MAYBE_UNUSED_VAR(__pyx_cur_scope);
+      __Pyx_XGOTREF(__pyx_r);
+      if (likely(__pyx_r)) {
+        __Pyx_XGIVEREF(__pyx_t_3);
+        __pyx_cur_scope->__pyx_t_0 = __pyx_t_3;
+        __Pyx_XGIVEREF(__pyx_r);
+        __Pyx_RefNannyFinishContext();
+        __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+        /* return from async generator, awaiting value */
+        __pyx_generator->resume_label = 1;
+        return __pyx_r;
+        __pyx_L8_resume_from_await:;
+        __pyx_t_3 = __pyx_cur_scope->__pyx_t_0;
+        __pyx_cur_scope->__pyx_t_0 = 0;
+        __Pyx_XGOTREF(__pyx_t_3);
+        if (unlikely(!__pyx_sent_value)) {
+          PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+          if (unlikely(exc_type && (exc_type == __Pyx_PyExc_StopAsyncIteration || ( exc_type != PyExc_StopIteration && exc_type != PyExc_GeneratorExit && __Pyx_PyErr_GivenExceptionMatches(exc_type, __Pyx_PyExc_StopAsyncIteration))))) {
+            PyErr_Clear();
+            break;
+          }
+          __PYX_ERR(0, 221, __pyx_L1_error)
+        }
+        __pyx_t_5 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_5);
+      } else {
+        PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+        if (unlikely(exc_type && (exc_type == __Pyx_PyExc_StopAsyncIteration || ( exc_type != PyExc_StopIteration && exc_type != PyExc_GeneratorExit && __Pyx_PyErr_GivenExceptionMatches(exc_type, __Pyx_PyExc_StopAsyncIteration))))) {
+          PyErr_Clear();
+          break;
+        }
+        __pyx_t_5 = NULL;
+        if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_5) < 0) __PYX_ERR(0, 221, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_5);
+      }
+      __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_chunk);
+      __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_chunk, __pyx_t_5);
+      __Pyx_GIVEREF(__pyx_t_5);
+      __pyx_t_5 = 0;
+
+      /* "pop/pop.contract.pyx":222
+ *         if not self._has_contracts:
+ *             async for chunk in self.func(*args, **kwargs):
+ *                 yield chunk             # <<<<<<<<<<<<<<
+ *             return
+ *         contract_context = ContractedContext(
+ */
+      __Pyx_INCREF(__pyx_cur_scope->__pyx_v_chunk);
+      __pyx_r = __pyx_cur_scope->__pyx_v_chunk;
+      __Pyx_XGIVEREF(__pyx_t_3);
+      __pyx_cur_scope->__pyx_t_0 = __pyx_t_3;
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from async generator, yielding value */
+      __pyx_generator->resume_label = 2;
+      return __Pyx__PyAsyncGenValueWrapperNew(__pyx_r);
+      __pyx_L9_resume_from_yield:;
+      __pyx_t_3 = __pyx_cur_scope->__pyx_t_0;
+      __pyx_cur_scope->__pyx_t_0 = 0;
+      __Pyx_XGOTREF(__pyx_t_3);
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 222, __pyx_L1_error)
 
-  /* function exit code */
-  PyErr_SetNone(PyExc_StopIteration);
-  goto __pyx_L0;
-  __pyx_L1_error:;
-  __Pyx_Generator_Replace_StopIteration(0);
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_AddTraceback("genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_L0:;
-  __Pyx_XDECREF(__pyx_r); __pyx_r = 0;
-  #if !CYTHON_USE_EXC_INFO_STACK
-  __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
-  #endif
-  __pyx_generator->resume_label = -1;
-  __Pyx_Coroutine_clear((PyObject*)__pyx_generator);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-static PyObject *__pyx_gb_3pop_4data_6freeze_5generator2(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value); /* proto */
+      /* "pop/pop.contract.pyx":221
+ * 
+ *         if not self._has_contracts:
+ *             async for chunk in self.func(*args, **kwargs):             # <<<<<<<<<<<<<<
+ *                 yield chunk
+ *             return
+ */
+    }
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-/* "pop/pop.data.pyx":151
- *         return tuple(freeze(value) for value in data)
- *     elif isinstance(data, set):
- *         return frozenset(freeze(value) for value in data)             # <<<<<<<<<<<<<<
- *     else:
- *         return data
+    /* "pop/pop.contract.pyx":223
+ *             async for chunk in self.func(*args, **kwargs):
+ *                 yield chunk
+ *             return             # <<<<<<<<<<<<<<
+ *         contract_context = ContractedContext(
+ *             self.func, args, kwargs, self.signature, self.ref, self.__name__
  */
+    __Pyx_XDECREF(__pyx_r);
+    PyErr_SetNone(__Pyx_PyExc_StopAsyncIteration); __pyx_r = NULL;
+    goto __pyx_L0;
 
-static PyObject *__pyx_pf_3pop_4data_6freeze_3genexpr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_genexpr_arg_0) {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *__pyx_cur_scope;
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("genexpr", 0);
-  __pyx_cur_scope = (struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)__pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr(__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr, __pyx_empty_tuple, NULL);
-  if (unlikely(!__pyx_cur_scope)) {
-    __pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)Py_None);
-    __Pyx_INCREF(Py_None);
-    __PYX_ERR(0, 151, __pyx_L1_error)
-  } else {
-    __Pyx_GOTREF((PyObject *)__pyx_cur_scope);
-  }
-  __pyx_cur_scope->__pyx_genexpr_arg_0 = __pyx_genexpr_arg_0;
-  __Pyx_INCREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
-  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_genexpr_arg_0);
-  {
-    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_3pop_4data_6freeze_5generator2, NULL, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_freeze_locals_genexpr, __pyx_n_s_pop_data); if (unlikely(!gen)) __PYX_ERR(0, 151, __pyx_L1_error)
-    __Pyx_DECREF(__pyx_cur_scope);
-    __Pyx_RefNannyFinishContext();
-    return (PyObject *) gen;
+    /* "pop/pop.contract.pyx":220
+ *             args = (self.hub,) + args
+ * 
+ *         if not self._has_contracts:             # <<<<<<<<<<<<<<
+ *             async for chunk in self.func(*args, **kwargs):
+ *                 yield chunk
+ */
   }
 
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_AddTraceback("pop.data.freeze.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __Pyx_DECREF((PyObject *)__pyx_cur_scope);
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
+  /* "pop/pop.contract.pyx":225
+ *             return
+ *         contract_context = ContractedContext(
+ *             self.func, args, kwargs, self.signature, self.ref, self.__name__             # <<<<<<<<<<<<<<
+ *         )
+ * 
+ */
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_func); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 225, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_signature); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 225, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_ref); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 225, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_name_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 225, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
 
-static PyObject *__pyx_gb_3pop_4data_6freeze_5generator2(__pyx_CoroutineObject *__pyx_generator, CYTHON_UNUSED PyThreadState *__pyx_tstate, PyObject *__pyx_sent_value) /* generator body */
-{
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *__pyx_cur_scope = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)__pyx_generator->closure);
-  PyObject *__pyx_r = NULL;
-  PyObject *__pyx_t_1 = NULL;
-  Py_ssize_t __pyx_t_2;
-  PyObject *(*__pyx_t_3)(PyObject *);
-  PyObject *__pyx_t_4 = NULL;
-  PyObject *__pyx_t_5 = NULL;
-  PyObject *__pyx_t_6 = NULL;
-  int __pyx_t_7;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("genexpr", 0);
-  switch (__pyx_generator->resume_label) {
-    case 0: goto __pyx_L3_first_run;
-    case 1: goto __pyx_L6_resume_from_yield;
-    default: /* CPython raises the right error here */
-    __Pyx_RefNannyFinishContext();
-    return NULL;
-  }
-  __pyx_L3_first_run:;
-  if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 151, __pyx_L1_error)
-  if (unlikely(!__pyx_cur_scope->__pyx_genexpr_arg_0)) { __Pyx_RaiseUnboundLocalError(".0"); __PYX_ERR(0, 151, __pyx_L1_error) }
-  if (likely(PyList_CheckExact(__pyx_cur_scope->__pyx_genexpr_arg_0)) || PyTuple_CheckExact(__pyx_cur_scope->__pyx_genexpr_arg_0)) {
-    __pyx_t_1 = __pyx_cur_scope->__pyx_genexpr_arg_0; __Pyx_INCREF(__pyx_t_1);
-    __pyx_t_2 = 0;
-    __pyx_t_3 = NULL;
+  /* "pop/pop.contract.pyx":224
+ *                 yield chunk
+ *             return
+ *         contract_context = ContractedContext(             # <<<<<<<<<<<<<<
+ *             self.func, args, kwargs, self.signature, self.ref, self.__name__
+ *         )
+ */
+  __pyx_t_7 = PyTuple_New(6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 224, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_GIVEREF(__pyx_t_3);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_3)) __PYX_ERR(0, 224, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_args);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_args);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_cur_scope->__pyx_v_args)) __PYX_ERR(0, 224, __pyx_L1_error);
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_kwargs);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_kwargs);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_7, 2, __pyx_cur_scope->__pyx_v_kwargs)) __PYX_ERR(0, 224, __pyx_L1_error);
+  __Pyx_GIVEREF(__pyx_t_5);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_7, 3, __pyx_t_5)) __PYX_ERR(0, 224, __pyx_L1_error);
+  __Pyx_GIVEREF(__pyx_t_1);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_7, 4, __pyx_t_1)) __PYX_ERR(0, 224, __pyx_L1_error);
+  __Pyx_GIVEREF(__pyx_t_6);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_7, 5, __pyx_t_6)) __PYX_ERR(0, 224, __pyx_L1_error);
+  __pyx_t_3 = 0;
+  __pyx_t_5 = 0;
+  __pyx_t_1 = 0;
+  __pyx_t_6 = 0;
+  __pyx_t_6 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_3pop_8contract_ContractedContext), __pyx_t_7, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 224, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __Pyx_GIVEREF(__pyx_t_6);
+  __pyx_cur_scope->__pyx_v_contract_context = ((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_t_6);
+  __pyx_t_6 = 0;
+
+  /* "pop/pop.contract.pyx":228
+ *         )
+ * 
+ *         for fn in self.contract_functions["pre"]:             # <<<<<<<<<<<<<<
+ *             pre_ret = await fn(contract_context)
+ * 
+ */
+  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_contract_functions); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 228, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __pyx_t_7 = __Pyx_PyObject_Dict_GetItem(__pyx_t_6, __pyx_n_u_pre); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 228, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (likely(PyList_CheckExact(__pyx_t_7)) || PyTuple_CheckExact(__pyx_t_7)) {
+    __pyx_t_6 = __pyx_t_7; __Pyx_INCREF(__pyx_t_6);
+    __pyx_t_8 = 0;
+    __pyx_t_9 = NULL;
   } else {
-    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_cur_scope->__pyx_genexpr_arg_0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 151, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_3 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 151, __pyx_L1_error)
+    __pyx_t_8 = -1; __pyx_t_6 = PyObject_GetIter(__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 228, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_6); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 228, __pyx_L1_error)
   }
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
   for (;;) {
-    if (likely(!__pyx_t_3)) {
-      if (likely(PyList_CheckExact(__pyx_t_1))) {
+    if (likely(!__pyx_t_9)) {
+      if (likely(PyList_CheckExact(__pyx_t_6))) {
         {
-          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_1);
+          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_6);
           #if !CYTHON_ASSUME_SAFE_MACROS
-          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 151, __pyx_L1_error)
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 228, __pyx_L1_error)
           #endif
-          if (__pyx_t_2 >= __pyx_temp) break;
+          if (__pyx_t_8 >= __pyx_temp) break;
         }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely((0 < 0))) __PYX_ERR(0, 151, __pyx_L1_error)
+        __pyx_t_7 = PyList_GET_ITEM(__pyx_t_6, __pyx_t_8); __Pyx_INCREF(__pyx_t_7); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 228, __pyx_L1_error)
         #else
-        __pyx_t_4 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 151, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_4);
+        __pyx_t_7 = __Pyx_PySequence_ITEM(__pyx_t_6, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 228, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_7);
         #endif
       } else {
         {
-          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_1);
+          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_6);
           #if !CYTHON_ASSUME_SAFE_MACROS
-          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 151, __pyx_L1_error)
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 228, __pyx_L1_error)
           #endif
-          if (__pyx_t_2 >= __pyx_temp) break;
+          if (__pyx_t_8 >= __pyx_temp) break;
         }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely((0 < 0))) __PYX_ERR(0, 151, __pyx_L1_error)
+        __pyx_t_7 = PyTuple_GET_ITEM(__pyx_t_6, __pyx_t_8); __Pyx_INCREF(__pyx_t_7); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 228, __pyx_L1_error)
         #else
-        __pyx_t_4 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 151, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_4);
+        __pyx_t_7 = __Pyx_PySequence_ITEM(__pyx_t_6, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 228, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_7);
         #endif
       }
     } else {
-      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
-      if (unlikely(!__pyx_t_4)) {
+      __pyx_t_7 = __pyx_t_9(__pyx_t_6);
+      if (unlikely(!__pyx_t_7)) {
         PyObject* exc_type = PyErr_Occurred();
         if (exc_type) {
           if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 151, __pyx_L1_error)
+          else __PYX_ERR(0, 228, __pyx_L1_error)
         }
         break;
       }
-      __Pyx_GOTREF(__pyx_t_4);
+      __Pyx_GOTREF(__pyx_t_7);
     }
-    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_value);
-    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_value, __pyx_t_4);
-    __Pyx_GIVEREF(__pyx_t_4);
-    __pyx_t_4 = 0;
-    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_freeze); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 151, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_6 = NULL;
+    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_fn);
+    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_fn, __pyx_t_7);
+    __Pyx_GIVEREF(__pyx_t_7);
     __pyx_t_7 = 0;
+
+    /* "pop/pop.contract.pyx":229
+ * 
+ *         for fn in self.contract_functions["pre"]:
+ *             pre_ret = await fn(contract_context)             # <<<<<<<<<<<<<<
+ * 
+ *             await self.hub.pop.contract.process_pre_result(pre_ret, fn, self)
+ */
+    __Pyx_INCREF(__pyx_cur_scope->__pyx_v_fn);
+    __pyx_t_1 = __pyx_cur_scope->__pyx_v_fn; __pyx_t_5 = NULL;
+    __pyx_t_10 = 0;
     #if CYTHON_UNPACK_METHODS
-    if (unlikely(PyMethod_Check(__pyx_t_5))) {
-      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
-      if (likely(__pyx_t_6)) {
+    if (unlikely(PyMethod_Check(__pyx_t_1))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
+        __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_1, function);
+        __pyx_t_10 = 1;
+      }
+    }
+    #endif
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_5, ((PyObject *)__pyx_cur_scope->__pyx_v_contract_context)};
+      __pyx_t_7 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_10, 1+__pyx_t_10);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 229, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_7);
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    }
+    __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_7);
+    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __Pyx_XGOTREF(__pyx_r);
+    if (likely(__pyx_r)) {
+      __Pyx_XGIVEREF(__pyx_t_6);
+      __pyx_cur_scope->__pyx_t_0 = __pyx_t_6;
+      __pyx_cur_scope->__pyx_t_1 = __pyx_t_8;
+      __pyx_cur_scope->__pyx_t_2 = __pyx_t_9;
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from async generator, awaiting value */
+      __pyx_generator->resume_label = 3;
+      return __pyx_r;
+      __pyx_L13_resume_from_await:;
+      __pyx_t_6 = __pyx_cur_scope->__pyx_t_0;
+      __pyx_cur_scope->__pyx_t_0 = 0;
+      __Pyx_XGOTREF(__pyx_t_6);
+      __pyx_t_8 = __pyx_cur_scope->__pyx_t_1;
+      __pyx_t_9 = __pyx_cur_scope->__pyx_t_2;
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 229, __pyx_L1_error)
+      __pyx_t_7 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_7);
+    } else {
+      __pyx_t_7 = NULL;
+      if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_7) < 0) __PYX_ERR(0, 229, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_7);
+    }
+    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_pre_ret);
+    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_pre_ret, __pyx_t_7);
+    __Pyx_GIVEREF(__pyx_t_7);
+    __pyx_t_7 = 0;
+
+    /* "pop/pop.contract.pyx":231
+ *             pre_ret = await fn(contract_context)
+ * 
+ *             await self.hub.pop.contract.process_pre_result(pre_ret, fn, self)             # <<<<<<<<<<<<<<
+ *         chunk = None
+ *         if self.contract_functions["call"]:
+ */
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_hub); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 231, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_pop); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 231, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_contract); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 231, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_process_pre_result); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 231, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_t_1 = NULL;
+    __pyx_t_10 = 0;
+    #if CYTHON_UNPACK_METHODS
+    if (likely(PyMethod_Check(__pyx_t_5))) {
+      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_5);
+      if (likely(__pyx_t_1)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
-        __Pyx_INCREF(__pyx_t_6);
+        __Pyx_INCREF(__pyx_t_1);
         __Pyx_INCREF(function);
         __Pyx_DECREF_SET(__pyx_t_5, function);
-        __pyx_t_7 = 1;
+        __pyx_t_10 = 1;
       }
     }
     #endif
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_6, __pyx_cur_scope->__pyx_v_value};
-      __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_7, 1+__pyx_t_7);
-      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
-      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 151, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_4);
+      PyObject *__pyx_callargs[4] = {__pyx_t_1, __pyx_cur_scope->__pyx_v_pre_ret, __pyx_cur_scope->__pyx_v_fn, __pyx_cur_scope->__pyx_v_self};
+      __pyx_t_7 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_10, 3+__pyx_t_10);
+      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+      if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 231, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_7);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     }
-    __pyx_r = __pyx_t_4;
-    __pyx_t_4 = 0;
-    __Pyx_XGIVEREF(__pyx_t_1);
-    __pyx_cur_scope->__pyx_t_0 = __pyx_t_1;
-    __pyx_cur_scope->__pyx_t_1 = __pyx_t_2;
-    __pyx_cur_scope->__pyx_t_2 = __pyx_t_3;
-    __Pyx_XGIVEREF(__pyx_r);
-    __Pyx_RefNannyFinishContext();
-    __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
-    /* return from generator, yielding value */
-    __pyx_generator->resume_label = 1;
-    return __pyx_r;
-    __pyx_L6_resume_from_yield:;
-    __pyx_t_1 = __pyx_cur_scope->__pyx_t_0;
-    __pyx_cur_scope->__pyx_t_0 = 0;
-    __Pyx_XGOTREF(__pyx_t_1);
-    __pyx_t_2 = __pyx_cur_scope->__pyx_t_1;
-    __pyx_t_3 = __pyx_cur_scope->__pyx_t_2;
-    if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 151, __pyx_L1_error)
-  }
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  CYTHON_MAYBE_UNUSED_VAR(__pyx_cur_scope);
-
-  /* function exit code */
-  PyErr_SetNone(PyExc_StopIteration);
-  goto __pyx_L0;
-  __pyx_L1_error:;
-  __Pyx_Generator_Replace_StopIteration(0);
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_AddTraceback("genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_L0:;
-  __Pyx_XDECREF(__pyx_r); __pyx_r = 0;
-  #if !CYTHON_USE_EXC_INFO_STACK
-  __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
-  #endif
-  __pyx_generator->resume_label = -1;
-  __Pyx_Coroutine_clear((PyObject*)__pyx_generator);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
+    __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_7);
+    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __Pyx_XGOTREF(__pyx_r);
+    if (likely(__pyx_r)) {
+      __Pyx_XGIVEREF(__pyx_t_6);
+      __pyx_cur_scope->__pyx_t_0 = __pyx_t_6;
+      __pyx_cur_scope->__pyx_t_1 = __pyx_t_8;
+      __pyx_cur_scope->__pyx_t_2 = __pyx_t_9;
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from async generator, awaiting value */
+      __pyx_generator->resume_label = 4;
+      return __pyx_r;
+      __pyx_L14_resume_from_await:;
+      __pyx_t_6 = __pyx_cur_scope->__pyx_t_0;
+      __pyx_cur_scope->__pyx_t_0 = 0;
+      __Pyx_XGOTREF(__pyx_t_6);
+      __pyx_t_8 = __pyx_cur_scope->__pyx_t_1;
+      __pyx_t_9 = __pyx_cur_scope->__pyx_t_2;
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 231, __pyx_L1_error)
+    } else {
+      PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+      if (exc_type) {
+        if (likely(exc_type == PyExc_StopIteration || (exc_type != PyExc_GeneratorExit && __Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration)))) PyErr_Clear();
+        else __PYX_ERR(0, 231, __pyx_L1_error)
+      }
+    }
 
-/* "pop/pop.data.pyx":143
- * 
+    /* "pop/pop.contract.pyx":228
+ *         )
  * 
- * def freeze(data):             # <<<<<<<<<<<<<<
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return data
- */
-
-static PyObject *__pyx_pf_3pop_4data_freeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data) {
-  PyObject *__pyx_8genexpr3__pyx_v_key = NULL;
-  PyObject *__pyx_8genexpr3__pyx_v_value = NULL;
-  PyObject *__pyx_gb_3pop_4data_6freeze_2generator1 = 0;
-  PyObject *__pyx_gb_3pop_4data_6freeze_5generator2 = 0;
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  int __pyx_t_1;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  Py_ssize_t __pyx_t_4;
-  Py_ssize_t __pyx_t_5;
-  int __pyx_t_6;
-  PyObject *__pyx_t_7 = NULL;
-  PyObject *__pyx_t_8 = NULL;
-  int __pyx_t_9;
-  PyObject *__pyx_t_10 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("freeze", 1);
-
-  /* "pop/pop.data.pyx":144
+ *         for fn in self.contract_functions["pre"]:             # <<<<<<<<<<<<<<
+ *             pre_ret = await fn(contract_context)
  * 
- * def freeze(data):
- *     if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
- *         return data
- *     elif isinstance(data, dict):
- */
-  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_data, __pyx_ptype_3pop_4data_ImmutableNamespaceDict); 
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":145
- * def freeze(data):
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return data             # <<<<<<<<<<<<<<
- *     elif isinstance(data, dict):
- *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
- */
-    __Pyx_XDECREF(__pyx_r);
-    __Pyx_INCREF(__pyx_v_data);
-    __pyx_r = __pyx_v_data;
-    goto __pyx_L0;
-
-    /* "pop/pop.data.pyx":144
- * 
- * def freeze(data):
- *     if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
- *         return data
- *     elif isinstance(data, dict):
  */
   }
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
-  /* "pop/pop.data.pyx":146
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return data
- *     elif isinstance(data, dict):             # <<<<<<<<<<<<<<
- *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
- *     elif isinstance(data, list):
+  /* "pop/pop.contract.pyx":232
+ * 
+ *             await self.hub.pop.contract.process_pre_result(pre_ret, fn, self)
+ *         chunk = None             # <<<<<<<<<<<<<<
+ *         if self.contract_functions["call"]:
+ *             async for chunk in self.contract_functions["call"][0](contract_context):
+ */
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  __pyx_cur_scope->__pyx_v_chunk = Py_None;
+
+  /* "pop/pop.contract.pyx":233
+ *             await self.hub.pop.contract.process_pre_result(pre_ret, fn, self)
+ *         chunk = None
+ *         if self.contract_functions["call"]:             # <<<<<<<<<<<<<<
+ *             async for chunk in self.contract_functions["call"][0](contract_context):
+ *                 yield chunk
  */
-  __pyx_t_1 = PyDict_Check(__pyx_v_data); 
-  if (__pyx_t_1) {
+  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_contract_functions); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 233, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __pyx_t_7 = __Pyx_PyObject_Dict_GetItem(__pyx_t_6, __pyx_n_u_call); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 233, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely((__pyx_t_4 < 0))) __PYX_ERR(0, 233, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  if (__pyx_t_4) {
 
-    /* "pop/pop.data.pyx":147
- *         return data
- *     elif isinstance(data, dict):
- *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})             # <<<<<<<<<<<<<<
- *     elif isinstance(data, list):
- *         return tuple(freeze(value) for value in data)
+    /* "pop/pop.contract.pyx":234
+ *         chunk = None
+ *         if self.contract_functions["call"]:
+ *             async for chunk in self.contract_functions["call"][0](contract_context):             # <<<<<<<<<<<<<<
+ *                 yield chunk
+ *         else:
  */
-    __Pyx_XDECREF(__pyx_r);
-    { /* enter inner scope */
-      __pyx_t_2 = PyDict_New(); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 147, __pyx_L6_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_4 = 0;
-      if (unlikely(__pyx_v_data == Py_None)) {
-        PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "items");
-        __PYX_ERR(0, 147, __pyx_L6_error)
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_contract_functions); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 234, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __pyx_t_5 = __Pyx_PyObject_Dict_GetItem(__pyx_t_6, __pyx_n_u_call); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 234, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 234, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __pyx_t_5 = NULL;
+    __pyx_t_10 = 0;
+    #if CYTHON_UNPACK_METHODS
+    if (unlikely(PyMethod_Check(__pyx_t_6))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
+        __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_6, function);
+        __pyx_t_10 = 1;
       }
-      __pyx_t_7 = __Pyx_dict_iterator(__pyx_v_data, 0, __pyx_n_s_items, (&__pyx_t_5), (&__pyx_t_6)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 147, __pyx_L6_error)
+    }
+    #endif
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_5, ((PyObject *)__pyx_cur_scope->__pyx_v_contract_context)};
+      __pyx_t_7 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_10, 1+__pyx_t_10);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 234, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_7);
-      __Pyx_XDECREF(__pyx_t_3);
-      __pyx_t_3 = __pyx_t_7;
-      __pyx_t_7 = 0;
-      while (1) {
-        __pyx_t_9 = __Pyx_dict_iter_next(__pyx_t_3, __pyx_t_5, &__pyx_t_4, &__pyx_t_7, &__pyx_t_8, NULL, __pyx_t_6);
-        if (unlikely(__pyx_t_9 == 0)) break;
-        if (unlikely(__pyx_t_9 == -1)) __PYX_ERR(0, 147, __pyx_L6_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __Pyx_GOTREF(__pyx_t_8);
-        __Pyx_XDECREF_SET(__pyx_8genexpr3__pyx_v_key, __pyx_t_7);
-        __pyx_t_7 = 0;
-        __Pyx_XDECREF_SET(__pyx_8genexpr3__pyx_v_value, __pyx_t_8);
-        __pyx_t_8 = 0;
-        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_freeze); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 147, __pyx_L6_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __pyx_t_10 = NULL;
-        __pyx_t_9 = 0;
-        #if CYTHON_UNPACK_METHODS
-        if (unlikely(PyMethod_Check(__pyx_t_7))) {
-          __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
-          if (likely(__pyx_t_10)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
-            __Pyx_INCREF(__pyx_t_10);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_7, function);
-            __pyx_t_9 = 1;
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    }
+    __pyx_t_6 = __Pyx_Coroutine_GetAsyncIter(__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 234, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    for (;;) {
+      __pyx_t_7 = __Pyx_Coroutine_AsyncIterNext(__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 234, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_7);
+      __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_7);
+      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+      __Pyx_XGOTREF(__pyx_r);
+      if (likely(__pyx_r)) {
+        __Pyx_XGIVEREF(__pyx_t_6);
+        __pyx_cur_scope->__pyx_t_0 = __pyx_t_6;
+        __Pyx_XGIVEREF(__pyx_r);
+        __Pyx_RefNannyFinishContext();
+        __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+        /* return from async generator, awaiting value */
+        __pyx_generator->resume_label = 5;
+        return __pyx_r;
+        __pyx_L19_resume_from_await:;
+        __pyx_t_6 = __pyx_cur_scope->__pyx_t_0;
+        __pyx_cur_scope->__pyx_t_0 = 0;
+        __Pyx_XGOTREF(__pyx_t_6);
+        if (unlikely(!__pyx_sent_value)) {
+          PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+          if (unlikely(exc_type && (exc_type == __Pyx_PyExc_StopAsyncIteration || ( exc_type != PyExc_StopIteration && exc_type != PyExc_GeneratorExit && __Pyx_PyErr_GivenExceptionMatches(exc_type, __Pyx_PyExc_StopAsyncIteration))))) {
+            PyErr_Clear();
+            break;
           }
+          __PYX_ERR(0, 234, __pyx_L1_error)
         }
-        #endif
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_10, __pyx_8genexpr3__pyx_v_value};
-          __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
-          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-          if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 147, __pyx_L6_error)
-          __Pyx_GOTREF(__pyx_t_8);
-          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+        __pyx_t_7 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_7);
+      } else {
+        PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+        if (unlikely(exc_type && (exc_type == __Pyx_PyExc_StopAsyncIteration || ( exc_type != PyExc_StopIteration && exc_type != PyExc_GeneratorExit && __Pyx_PyErr_GivenExceptionMatches(exc_type, __Pyx_PyExc_StopAsyncIteration))))) {
+          PyErr_Clear();
+          break;
         }
-        if (unlikely(PyDict_SetItem(__pyx_t_2, (PyObject*)__pyx_8genexpr3__pyx_v_key, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 147, __pyx_L6_error)
-        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+        __pyx_t_7 = NULL;
+        if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_7) < 0) __PYX_ERR(0, 234, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_7);
       }
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_key); __pyx_8genexpr3__pyx_v_key = 0;
-      __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_value); __pyx_8genexpr3__pyx_v_value = 0;
-      goto __pyx_L9_exit_scope;
-      __pyx_L6_error:;
-      __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_key); __pyx_8genexpr3__pyx_v_key = 0;
-      __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_value); __pyx_8genexpr3__pyx_v_value = 0;
-      goto __pyx_L1_error;
-      __pyx_L9_exit_scope:;
-    } /* exit inner scope */
-    __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict), __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 147, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __pyx_r = __pyx_t_3;
-    __pyx_t_3 = 0;
-    goto __pyx_L0;
-
-    /* "pop/pop.data.pyx":146
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return data
- *     elif isinstance(data, dict):             # <<<<<<<<<<<<<<
- *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
- *     elif isinstance(data, list):
- */
-  }
-
-  /* "pop/pop.data.pyx":148
- *     elif isinstance(data, dict):
- *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
- *     elif isinstance(data, list):             # <<<<<<<<<<<<<<
- *         return tuple(freeze(value) for value in data)
- *     elif isinstance(data, set):
- */
-  __pyx_t_1 = PyList_Check(__pyx_v_data); 
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":149
- *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
- *     elif isinstance(data, list):
- *         return tuple(freeze(value) for value in data)             # <<<<<<<<<<<<<<
- *     elif isinstance(data, set):
- *         return frozenset(freeze(value) for value in data)
- */
-    __Pyx_XDECREF(__pyx_r);
-    __pyx_t_3 = __pyx_pf_3pop_4data_6freeze_genexpr(NULL, __pyx_v_data); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 149, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_2 = __Pyx_PySequence_Tuple(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 149, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_r = __pyx_t_2;
-    __pyx_t_2 = 0;
-    goto __pyx_L0;
-
-    /* "pop/pop.data.pyx":148
- *     elif isinstance(data, dict):
- *         return ImmutableNamespaceDict({key: freeze(value) for key, value in data.items()})
- *     elif isinstance(data, list):             # <<<<<<<<<<<<<<
- *         return tuple(freeze(value) for value in data)
- *     elif isinstance(data, set):
- */
-  }
+      __Pyx_GOTREF(__pyx_cur_scope->__pyx_v_chunk);
+      __Pyx_DECREF_SET(__pyx_cur_scope->__pyx_v_chunk, __pyx_t_7);
+      __Pyx_GIVEREF(__pyx_t_7);
+      __pyx_t_7 = 0;
 
-  /* "pop/pop.data.pyx":150
- *     elif isinstance(data, list):
- *         return tuple(freeze(value) for value in data)
- *     elif isinstance(data, set):             # <<<<<<<<<<<<<<
- *         return frozenset(freeze(value) for value in data)
- *     else:
+      /* "pop/pop.contract.pyx":235
+ *         if self.contract_functions["call"]:
+ *             async for chunk in self.contract_functions["call"][0](contract_context):
+ *                 yield chunk             # <<<<<<<<<<<<<<
+ *         else:
+ *             async for chunk in self.func(
  */
-  __pyx_t_1 = PySet_Check(__pyx_v_data); 
-  if (__pyx_t_1) {
+      __Pyx_INCREF(__pyx_cur_scope->__pyx_v_chunk);
+      __pyx_r = __pyx_cur_scope->__pyx_v_chunk;
+      __Pyx_XGIVEREF(__pyx_t_6);
+      __pyx_cur_scope->__pyx_t_0 = __pyx_t_6;
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from async generator, yielding value */
+      __pyx_generator->resume_label = 6;
+      return __Pyx__PyAsyncGenValueWrapperNew(__pyx_r);
+      __pyx_L20_resume_from_yield:;
+      __pyx_t_6 = __pyx_cur_scope->__pyx_t_0;
+      __pyx_cur_scope->__pyx_t_0 = 0;
+      __Pyx_XGOTREF(__pyx_t_6);
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 235, __pyx_L1_error)
 
-    /* "pop/pop.data.pyx":151
- *         return tuple(freeze(value) for value in data)
- *     elif isinstance(data, set):
- *         return frozenset(freeze(value) for value in data)             # <<<<<<<<<<<<<<
- *     else:
- *         return data
+      /* "pop/pop.contract.pyx":234
+ *         chunk = None
+ *         if self.contract_functions["call"]:
+ *             async for chunk in self.contract_functions["call"][0](contract_context):             # <<<<<<<<<<<<<<
+ *                 yield chunk
+ *         else:
  */
-    __Pyx_XDECREF(__pyx_r);
-    __pyx_t_2 = __pyx_pf_3pop_4data_6freeze_3genexpr(NULL, __pyx_v_data); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 151, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_3 = __Pyx_PyFrozenSet_New(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 151, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __pyx_r = __pyx_t_3;
-    __pyx_t_3 = 0;
-    goto __pyx_L0;
+    }
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
-    /* "pop/pop.data.pyx":150
- *     elif isinstance(data, list):
- *         return tuple(freeze(value) for value in data)
- *     elif isinstance(data, set):             # <<<<<<<<<<<<<<
- *         return frozenset(freeze(value) for value in data)
- *     else:
+    /* "pop/pop.contract.pyx":233
+ *             await self.hub.pop.contract.process_pre_result(pre_ret, fn, self)
+ *         chunk = None
+ *         if self.contract_functions["call"]:             # <<<<<<<<<<<<<<
+ *             async for chunk in self.contract_functions["call"][0](contract_context):
+ *                 yield chunk
  */
+    goto __pyx_L16;
   }
 
-  /* "pop/pop.data.pyx":153
- *         return frozenset(freeze(value) for value in data)
- *     else:
- *         return data             # <<<<<<<<<<<<<<
- * 
- * def unfreeze(data):
+  /* "pop/pop.contract.pyx":237
+ *                 yield chunk
+ *         else:
+ *             async for chunk in self.func(             # <<<<<<<<<<<<<<
+ *                 *contract_context.args, **contract_context.kwargs
+ *             ):
  */
   /*else*/ {
-    __Pyx_XDECREF(__pyx_r);
-    __Pyx_INCREF(__pyx_v_data);
-    __pyx_r = __pyx_v_data;
-    goto __pyx_L0;
-  }
-
-  /* "pop/pop.data.pyx":143
- * 
- * 
- * def freeze(data):             # <<<<<<<<<<<<<<
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return data
- */
-
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_XDECREF(__pyx_t_8);
-  __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("pop.data.freeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_key);
-  __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_value);
-  __Pyx_XDECREF(__pyx_gb_3pop_4data_6freeze_2generator1);
-  __Pyx_XDECREF(__pyx_gb_3pop_4data_6freeze_5generator2);
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_func); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 237, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
 
-/* "pop/pop.data.pyx":155
- *         return data
- * 
- * def unfreeze(data):             # <<<<<<<<<<<<<<
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return {key: unfreeze(value) for key, value in data.items()}
+    /* "pop/pop.contract.pyx":238
+ *         else:
+ *             async for chunk in self.func(
+ *                 *contract_context.args, **contract_context.kwargs             # <<<<<<<<<<<<<<
+ *             ):
+ *                 yield chunk
  */
+    __pyx_t_7 = PySequence_Tuple(__pyx_cur_scope->__pyx_v_contract_context->args); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 237, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
 
-/* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_3unfreeze(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_3unfreeze = {"unfreeze", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_3unfreeze, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_3unfreeze(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v_data = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
-  #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject* values[1] = {0};
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("unfreeze (wrapper)", 0);
-  #if !CYTHON_METH_FASTCALL
-  #if CYTHON_ASSUME_SAFE_MACROS
-  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
-  #endif
-  #endif
-  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_data,0};
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_data)) != 0)) {
-          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
-          kw_args--;
-        }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 155, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-      }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "unfreeze") < 0)) __PYX_ERR(0, 155, __pyx_L3_error)
-      }
-    } else if (unlikely(__pyx_nargs != 1)) {
-      goto __pyx_L5_argtuple_error;
-    } else {
-      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-    }
-    __pyx_v_data = values[0];
-  }
-  goto __pyx_L6_skip;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("unfreeze", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 155, __pyx_L3_error)
-  __pyx_L6_skip:;
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L3_error:;
-  {
-    Py_ssize_t __pyx_temp;
-    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
-    }
-  }
-  __Pyx_AddTraceback("pop.data.unfreeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_2unfreeze(__pyx_self, __pyx_v_data);
-
-  /* function exit code */
-  {
-    Py_ssize_t __pyx_temp;
-    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    /* "pop/pop.contract.pyx":237
+ *                 yield chunk
+ *         else:
+ *             async for chunk in self.func(             # <<<<<<<<<<<<<<
+ *                 *contract_context.args, **contract_context.kwargs
+ *             ):
+ */
+    if (unlikely(__pyx_cur_scope->__pyx_v_contract_context->kwargs == Py_None)) {
+      PyErr_SetString(PyExc_TypeError, "argument after ** must be a mapping, not NoneType");
+      __PYX_ERR(0, 238, __pyx_L1_error)
     }
-  }
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_pf_3pop_4data_2unfreeze(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_data) {
-  PyObject *__pyx_8genexpr6__pyx_v_key = NULL;
-  PyObject *__pyx_8genexpr6__pyx_v_value = NULL;
-  PyObject *__pyx_8genexpr7__pyx_v_value = NULL;
-  PyObject *__pyx_8genexpr8__pyx_v_value = NULL;
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  int __pyx_t_1;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  Py_ssize_t __pyx_t_4;
-  Py_ssize_t __pyx_t_5;
-  int __pyx_t_6;
-  PyObject *__pyx_t_7 = NULL;
-  PyObject *__pyx_t_8 = NULL;
-  int __pyx_t_9;
-  PyObject *__pyx_t_10 = NULL;
-  PyObject *(*__pyx_t_11)(PyObject *);
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("unfreeze", 1);
-
-  /* "pop/pop.data.pyx":156
- * 
- * def unfreeze(data):
- *     if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
- *         return {key: unfreeze(value) for key, value in data.items()}
- *     elif isinstance(data, frozenset):
- */
-  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_data, __pyx_ptype_3pop_4data_ImmutableNamespaceDict); 
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":157
- * def unfreeze(data):
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return {key: unfreeze(value) for key, value in data.items()}             # <<<<<<<<<<<<<<
- *     elif isinstance(data, frozenset):
- *         return {unfreeze(value) for value in data}
- */
-    __Pyx_XDECREF(__pyx_r);
-    { /* enter inner scope */
-      __pyx_t_2 = PyDict_New(); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 157, __pyx_L6_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_4 = 0;
-      if (unlikely(__pyx_v_data == Py_None)) {
-        PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "items");
-        __PYX_ERR(0, 157, __pyx_L6_error)
-      }
-      __pyx_t_7 = __Pyx_dict_iterator(__pyx_v_data, 0, __pyx_n_s_items, (&__pyx_t_5), (&__pyx_t_6)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 157, __pyx_L6_error)
-      __Pyx_GOTREF(__pyx_t_7);
-      __Pyx_XDECREF(__pyx_t_3);
-      __pyx_t_3 = __pyx_t_7;
-      __pyx_t_7 = 0;
-      while (1) {
-        __pyx_t_9 = __Pyx_dict_iter_next(__pyx_t_3, __pyx_t_5, &__pyx_t_4, &__pyx_t_7, &__pyx_t_8, NULL, __pyx_t_6);
-        if (unlikely(__pyx_t_9 == 0)) break;
-        if (unlikely(__pyx_t_9 == -1)) __PYX_ERR(0, 157, __pyx_L6_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __Pyx_GOTREF(__pyx_t_8);
-        __Pyx_XDECREF_SET(__pyx_8genexpr6__pyx_v_key, __pyx_t_7);
-        __pyx_t_7 = 0;
-        __Pyx_XDECREF_SET(__pyx_8genexpr6__pyx_v_value, __pyx_t_8);
-        __pyx_t_8 = 0;
-        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_unfreeze); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 157, __pyx_L6_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __pyx_t_10 = NULL;
-        __pyx_t_9 = 0;
-        #if CYTHON_UNPACK_METHODS
-        if (unlikely(PyMethod_Check(__pyx_t_7))) {
-          __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
-          if (likely(__pyx_t_10)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
-            __Pyx_INCREF(__pyx_t_10);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_7, function);
-            __pyx_t_9 = 1;
-          }
-        }
-        #endif
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_10, __pyx_8genexpr6__pyx_v_value};
-          __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
-          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-          if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 157, __pyx_L6_error)
-          __Pyx_GOTREF(__pyx_t_8);
-          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-        }
-        if (unlikely(PyDict_SetItem(__pyx_t_2, (PyObject*)__pyx_8genexpr6__pyx_v_key, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 157, __pyx_L6_error)
-        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-      }
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __Pyx_XDECREF(__pyx_8genexpr6__pyx_v_key); __pyx_8genexpr6__pyx_v_key = 0;
-      __Pyx_XDECREF(__pyx_8genexpr6__pyx_v_value); __pyx_8genexpr6__pyx_v_value = 0;
-      goto __pyx_L9_exit_scope;
-      __pyx_L6_error:;
-      __Pyx_XDECREF(__pyx_8genexpr6__pyx_v_key); __pyx_8genexpr6__pyx_v_key = 0;
-      __Pyx_XDECREF(__pyx_8genexpr6__pyx_v_value); __pyx_8genexpr6__pyx_v_value = 0;
-      goto __pyx_L1_error;
-      __pyx_L9_exit_scope:;
-    } /* exit inner scope */
-    __pyx_r = __pyx_t_2;
-    __pyx_t_2 = 0;
-    goto __pyx_L0;
-
-    /* "pop/pop.data.pyx":156
- * 
- * def unfreeze(data):
- *     if isinstance(data, ImmutableNamespaceDict):             # <<<<<<<<<<<<<<
- *         return {key: unfreeze(value) for key, value in data.items()}
- *     elif isinstance(data, frozenset):
- */
-  }
-
-  /* "pop/pop.data.pyx":158
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return {key: unfreeze(value) for key, value in data.items()}
- *     elif isinstance(data, frozenset):             # <<<<<<<<<<<<<<
- *         return {unfreeze(value) for value in data}
- *     elif isinstance(data, tuple):
- */
-  __pyx_t_1 = PyFrozenSet_Check(__pyx_v_data); 
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":159
- *         return {key: unfreeze(value) for key, value in data.items()}
- *     elif isinstance(data, frozenset):
- *         return {unfreeze(value) for value in data}             # <<<<<<<<<<<<<<
- *     elif isinstance(data, tuple):
- *         return [unfreeze(value) for value in data]
- */
-    __Pyx_XDECREF(__pyx_r);
-    { /* enter inner scope */
-      __pyx_t_2 = PySet_New(NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 159, __pyx_L12_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      if (likely(PyList_CheckExact(__pyx_v_data)) || PyTuple_CheckExact(__pyx_v_data)) {
-        __pyx_t_3 = __pyx_v_data; __Pyx_INCREF(__pyx_t_3);
-        __pyx_t_5 = 0;
-        __pyx_t_11 = NULL;
-      } else {
-        __pyx_t_5 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_data); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 159, __pyx_L12_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_11 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 159, __pyx_L12_error)
-      }
-      for (;;) {
-        if (likely(!__pyx_t_11)) {
-          if (likely(PyList_CheckExact(__pyx_t_3))) {
-            {
-              Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_3);
-              #if !CYTHON_ASSUME_SAFE_MACROS
-              if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 159, __pyx_L12_error)
-              #endif
-              if (__pyx_t_5 >= __pyx_temp) break;
-            }
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_8 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_8); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 159, __pyx_L12_error)
-            #else
-            __pyx_t_8 = __Pyx_PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 159, __pyx_L12_error)
-            __Pyx_GOTREF(__pyx_t_8);
-            #endif
-          } else {
-            {
-              Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_3);
-              #if !CYTHON_ASSUME_SAFE_MACROS
-              if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 159, __pyx_L12_error)
-              #endif
-              if (__pyx_t_5 >= __pyx_temp) break;
-            }
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_8 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_8); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 159, __pyx_L12_error)
-            #else
-            __pyx_t_8 = __Pyx_PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 159, __pyx_L12_error)
-            __Pyx_GOTREF(__pyx_t_8);
-            #endif
-          }
-        } else {
-          __pyx_t_8 = __pyx_t_11(__pyx_t_3);
-          if (unlikely(!__pyx_t_8)) {
-            PyObject* exc_type = PyErr_Occurred();
-            if (exc_type) {
-              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-              else __PYX_ERR(0, 159, __pyx_L12_error)
-            }
+    __pyx_t_5 = PyDict_Copy(__pyx_cur_scope->__pyx_v_contract_context->kwargs); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 238, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_7, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 237, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __pyx_t_5 = __Pyx_Coroutine_GetAsyncIter(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 237, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    for (;;) {
+      __pyx_t_1 = __Pyx_Coroutine_AsyncIterNext(__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 237, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_1);
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      __Pyx_XGOTREF(__pyx_r);
+      if (likely(__pyx_r)) {
+        __Pyx_XGIVEREF(__pyx_t_5);
+        __pyx_cur_scope->__pyx_t_0 = __pyx_t_5;
+        __Pyx_XGIVEREF(__pyx_r);
+        __Pyx_RefNannyFinishContext();
+        __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+        /* return from async generator, awaiting value */
+        __pyx_generator->resume_label = 7;
+        return __pyx_r;
+        __pyx_L24_resume_from_await:;
+        __pyx_t_5 = __pyx_cur_scope->__pyx_t_0;
+        __pyx_cur_scope->__pyx_t_0 = 0;
+        __Pyx_XGOTREF(__pyx_t_5);
+        if (unlikely(!__pyx_sent_value)) {
+          PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+          if (unlikely(exc_type && (exc_type == __Pyx_PyExc_StopAsyncIteration || ( exc_type != PyExc_StopIteration && exc_type != PyExc_GeneratorExit && __Pyx_PyErr_GivenExceptionMatches(exc_type, __Pyx_PyExc_StopAsyncIteration))))) {
+            PyErr_Clear();
             break;
           }
-          __Pyx_GOTREF(__pyx_t_8);
-        }
-        __Pyx_XDECREF_SET(__pyx_8genexpr7__pyx_v_value, __pyx_t_8);
-        __pyx_t_8 = 0;
-        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_unfreeze); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 159, __pyx_L12_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __pyx_t_10 = NULL;
-        __pyx_t_6 = 0;
-        #if CYTHON_UNPACK_METHODS
-        if (unlikely(PyMethod_Check(__pyx_t_7))) {
-          __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
-          if (likely(__pyx_t_10)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
-            __Pyx_INCREF(__pyx_t_10);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_7, function);
-            __pyx_t_6 = 1;
-          }
-        }
-        #endif
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_10, __pyx_8genexpr7__pyx_v_value};
-          __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
-          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-          if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 159, __pyx_L12_error)
-          __Pyx_GOTREF(__pyx_t_8);
-          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+          __PYX_ERR(0, 237, __pyx_L1_error)
         }
-        if (unlikely(PySet_Add(__pyx_t_2, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 159, __pyx_L12_error)
-        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-      }
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __Pyx_XDECREF(__pyx_8genexpr7__pyx_v_value); __pyx_8genexpr7__pyx_v_value = 0;
-      goto __pyx_L16_exit_scope;
-      __pyx_L12_error:;
-      __Pyx_XDECREF(__pyx_8genexpr7__pyx_v_value); __pyx_8genexpr7__pyx_v_value = 0;
-      goto __pyx_L1_error;
-      __pyx_L16_exit_scope:;
-    } /* exit inner scope */
-    __pyx_r = __pyx_t_2;
-    __pyx_t_2 = 0;
-    goto __pyx_L0;
-
-    /* "pop/pop.data.pyx":158
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return {key: unfreeze(value) for key, value in data.items()}
- *     elif isinstance(data, frozenset):             # <<<<<<<<<<<<<<
- *         return {unfreeze(value) for value in data}
- *     elif isinstance(data, tuple):
- */
-  }
-
-  /* "pop/pop.data.pyx":160
- *     elif isinstance(data, frozenset):
- *         return {unfreeze(value) for value in data}
- *     elif isinstance(data, tuple):             # <<<<<<<<<<<<<<
- *         return [unfreeze(value) for value in data]
- *     else:
- */
-  __pyx_t_1 = PyTuple_Check(__pyx_v_data); 
-  if (__pyx_t_1) {
-
-    /* "pop/pop.data.pyx":161
- *         return {unfreeze(value) for value in data}
- *     elif isinstance(data, tuple):
- *         return [unfreeze(value) for value in data]             # <<<<<<<<<<<<<<
- *     else:
- *         return data
- */
-    __Pyx_XDECREF(__pyx_r);
-    { /* enter inner scope */
-      __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 161, __pyx_L19_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      if (likely(PyList_CheckExact(__pyx_v_data)) || PyTuple_CheckExact(__pyx_v_data)) {
-        __pyx_t_3 = __pyx_v_data; __Pyx_INCREF(__pyx_t_3);
-        __pyx_t_5 = 0;
-        __pyx_t_11 = NULL;
+        __pyx_t_1 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_1);
       } else {
-        __pyx_t_5 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_data); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 161, __pyx_L19_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_11 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 161, __pyx_L19_error)
-      }
-      for (;;) {
-        if (likely(!__pyx_t_11)) {
-          if (likely(PyList_CheckExact(__pyx_t_3))) {
-            {
-              Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_3);
-              #if !CYTHON_ASSUME_SAFE_MACROS
-              if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 161, __pyx_L19_error)
-              #endif
-              if (__pyx_t_5 >= __pyx_temp) break;
-            }
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_8 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_8); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 161, __pyx_L19_error)
-            #else
-            __pyx_t_8 = __Pyx_PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 161, __pyx_L19_error)
-            __Pyx_GOTREF(__pyx_t_8);
-            #endif
-          } else {
-            {
-              Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_3);
-              #if !CYTHON_ASSUME_SAFE_MACROS
-              if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 161, __pyx_L19_error)
-              #endif
-              if (__pyx_t_5 >= __pyx_temp) break;
-            }
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_8 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_8); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 161, __pyx_L19_error)
-            #else
-            __pyx_t_8 = __Pyx_PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 161, __pyx_L19_error)
-            __Pyx_GOTREF(__pyx_t_8);
-            #endif
-          }
-        } else {
-          __pyx_t_8 = __pyx_t_11(__pyx_t_3);
-          if (unlikely(!__pyx_t_8)) {
-            PyObject* exc_type = PyErr_Occurred();
-            if (exc_type) {
-              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-              else __PYX_ERR(0, 161, __pyx_L19_error)
-            }
-            break;
-          }
-          __Pyx_GOTREF(__pyx_t_8);
-        }
-        __Pyx_XDECREF_SET(__pyx_8genexpr8__pyx_v_value, __pyx_t_8);
-        __pyx_t_8 = 0;
-        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_unfreeze); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 161, __pyx_L19_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __pyx_t_10 = NULL;
-        __pyx_t_6 = 0;
-        #if CYTHON_UNPACK_METHODS
-        if (unlikely(PyMethod_Check(__pyx_t_7))) {
-          __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
-          if (likely(__pyx_t_10)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
-            __Pyx_INCREF(__pyx_t_10);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_7, function);
-            __pyx_t_6 = 1;
-          }
-        }
-        #endif
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_10, __pyx_8genexpr8__pyx_v_value};
-          __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
-          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-          if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 161, __pyx_L19_error)
-          __Pyx_GOTREF(__pyx_t_8);
-          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+        PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+        if (unlikely(exc_type && (exc_type == __Pyx_PyExc_StopAsyncIteration || ( exc_type != PyExc_StopIteration && exc_type != PyExc_GeneratorExit && __Pyx_PyErr_GivenExceptionMatches(exc_type, __Pyx_PyExc_StopAsyncIteration))))) {
+          PyErr_Clear();
+          break;
         }
-        if (unlikely(__Pyx_ListComp_Append(__pyx_t_2, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 161, __pyx_L19_error)
-        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+        __pyx_t_1 = NULL;
+        if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_1) < 0) __PYX_ERR(0, 237, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_1);
       }
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __Pyx_XDECREF(__pyx_8genexpr8__pyx_v_value); __pyx_8genexpr8__pyx_v_value = 0;
-      goto __pyx_L23_exit_scope;
-      __pyx_L19_error:;
-      __Pyx_XDECREF(__pyx_8genexpr8__pyx_v_value); __pyx_8genexpr8__pyx_v_value = 0;
-      goto __pyx_L1_error;
-      __pyx_L23_exit_scope:;
-    } /* exit inner scope */
-    __pyx_r = __pyx_t_2;
-    __pyx_t_2 = 0;
-    goto __pyx_L0;
-
-    /* "pop/pop.data.pyx":160
- *     elif isinstance(data, frozenset):
- *         return {unfreeze(value) for value in data}
- *     elif isinstance(data, tuple):             # <<<<<<<<<<<<<<
- *         return [unfreeze(value) for value in data]
- *     else:
- */
-  }
-
-  /* "pop/pop.data.pyx":163
- *         return [unfreeze(value) for value in data]
- *     else:
- *         return data             # <<<<<<<<<<<<<<
- * 
- * 
- */
-  /*else*/ {
-    __Pyx_XDECREF(__pyx_r);
-    __Pyx_INCREF(__pyx_v_data);
-    __pyx_r = __pyx_v_data;
-    goto __pyx_L0;
-  }
+      __Pyx_GOTREF(__pyx_cur_scope->__pyx_v_chunk);
+      __Pyx_DECREF_SET(__pyx_cur_scope->__pyx_v_chunk, __pyx_t_1);
+      __Pyx_GIVEREF(__pyx_t_1);
+      __pyx_t_1 = 0;
 
-  /* "pop/pop.data.pyx":155
- *         return data
- * 
- * def unfreeze(data):             # <<<<<<<<<<<<<<
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return {key: unfreeze(value) for key, value in data.items()}
+      /* "pop/pop.contract.pyx":240
+ *                 *contract_context.args, **contract_context.kwargs
+ *             ):
+ *                 yield chunk             # <<<<<<<<<<<<<<
+ *         ret = chunk
+ *         for fn in self.contract_functions["post"]:
  */
+      __Pyx_INCREF(__pyx_cur_scope->__pyx_v_chunk);
+      __pyx_r = __pyx_cur_scope->__pyx_v_chunk;
+      __Pyx_XGIVEREF(__pyx_t_5);
+      __pyx_cur_scope->__pyx_t_0 = __pyx_t_5;
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from async generator, yielding value */
+      __pyx_generator->resume_label = 8;
+      return __Pyx__PyAsyncGenValueWrapperNew(__pyx_r);
+      __pyx_L25_resume_from_yield:;
+      __pyx_t_5 = __pyx_cur_scope->__pyx_t_0;
+      __pyx_cur_scope->__pyx_t_0 = 0;
+      __Pyx_XGOTREF(__pyx_t_5);
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 240, __pyx_L1_error)
 
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_XDECREF(__pyx_t_8);
-  __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("pop.data.unfreeze", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XDECREF(__pyx_8genexpr6__pyx_v_key);
-  __Pyx_XDECREF(__pyx_8genexpr6__pyx_v_value);
-  __Pyx_XDECREF(__pyx_8genexpr7__pyx_v_value);
-  __Pyx_XDECREF(__pyx_8genexpr8__pyx_v_value);
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-/* "pop/pop.data.pyx":166
- * 
- * 
- * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
- *     """
- *     Recursive version of the default dict.update
+      /* "pop/pop.contract.pyx":237
+ *                 yield chunk
+ *         else:
+ *             async for chunk in self.func(             # <<<<<<<<<<<<<<
+ *                 *contract_context.args, **contract_context.kwargs
+ *             ):
  */
-
-static PyObject *__pyx_pw_3pop_4data_5update(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyObject *__pyx_f_3pop_4data_update(PyObject *__pyx_v_dest, PyObject *__pyx_v_upd, CYTHON_UNUSED int __pyx_skip_dispatch, struct __pyx_opt_args_3pop_4data_update *__pyx_optional_args) {
-  int __pyx_v_recursive_update = ((int)1);
-  int __pyx_v_merge_lists = ((int)0);
-  PyObject *__pyx_v_keys = 0;
-  PyObject *__pyx_v_key = 0;
-  PyObject *__pyx_v_val = 0;
-  PyObject *__pyx_v_dest_subkey = 0;
-  PyObject *__pyx_v_ret = NULL;
-  PyObject *__pyx_v_merged = NULL;
-  PyObject *__pyx_8genexpr9__pyx_v_x = NULL;
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  Py_ssize_t __pyx_t_5;
-  PyObject *__pyx_t_6 = NULL;
-  int __pyx_t_7;
-  int __pyx_t_8;
-  PyObject *__pyx_t_9 = NULL;
-  Py_ssize_t __pyx_t_10;
-  PyObject *(*__pyx_t_11)(PyObject *);
-  PyObject *__pyx_t_12 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("update", 1);
-  if (__pyx_optional_args) {
-    if (__pyx_optional_args->__pyx_n > 0) {
-      __pyx_v_recursive_update = __pyx_optional_args->recursive_update;
-      if (__pyx_optional_args->__pyx_n > 1) {
-        __pyx_v_merge_lists = __pyx_optional_args->merge_lists;
-      }
     }
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   }
+  __pyx_L16:;
 
-  /* "pop/pop.data.pyx":181
- *     """
- *     cdef:
- *         list keys = list(upd.keys())             # <<<<<<<<<<<<<<
- *         object key, val, dest_subkey
- * 
+  /* "pop/pop.contract.pyx":241
+ *             ):
+ *                 yield chunk
+ *         ret = chunk             # <<<<<<<<<<<<<<
+ *         for fn in self.contract_functions["post"]:
+ *             contract_context.ret = ret
+ */
+  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_chunk);
+  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_chunk);
+  __pyx_cur_scope->__pyx_v_ret = __pyx_cur_scope->__pyx_v_chunk;
+
+  /* "pop/pop.contract.pyx":242
+ *                 yield chunk
+ *         ret = chunk
+ *         for fn in self.contract_functions["post"]:             # <<<<<<<<<<<<<<
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)
  */
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_upd, __pyx_n_s_keys); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 181, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
-  #if CYTHON_UNPACK_METHODS
-  if (likely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
-    }
-  }
-  #endif
-  {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, NULL};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 181, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_contract_functions); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 242, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_t_5, __pyx_n_u_post); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 242, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
+    __pyx_t_5 = __pyx_t_1; __Pyx_INCREF(__pyx_t_5);
+    __pyx_t_8 = 0;
+    __pyx_t_9 = NULL;
+  } else {
+    __pyx_t_8 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 242, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_5); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 242, __pyx_L1_error)
   }
-  __pyx_t_2 = __Pyx_PySequence_ListKeepNew(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 181, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_v_keys = ((PyObject*)__pyx_t_2);
-  __pyx_t_2 = 0;
-
-  /* "pop/pop.data.pyx":184
- *         object key, val, dest_subkey
- * 
- *     if recursive_update:             # <<<<<<<<<<<<<<
- *         for key in keys:
- *             val = upd[key]
- */
-  if (__pyx_v_recursive_update) {
-
-    /* "pop/pop.data.pyx":185
- * 
- *     if recursive_update:
- *         for key in keys:             # <<<<<<<<<<<<<<
- *             val = upd[key]
- *             dest_subkey = dest.get(key, None)
- */
-    __pyx_t_2 = __pyx_v_keys; __Pyx_INCREF(__pyx_t_2);
-    __pyx_t_5 = 0;
-    for (;;) {
-      {
-        Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_2);
-        #if !CYTHON_ASSUME_SAFE_MACROS
-        if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 185, __pyx_L1_error)
-        #endif
-        if (__pyx_t_5 >= __pyx_temp) break;
-      }
-      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-      __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_1); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 185, __pyx_L1_error)
-      #else
-      __pyx_t_1 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 185, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      #endif
-      __Pyx_XDECREF_SET(__pyx_v_key, __pyx_t_1);
-      __pyx_t_1 = 0;
-
-      /* "pop/pop.data.pyx":186
- *     if recursive_update:
- *         for key in keys:
- *             val = upd[key]             # <<<<<<<<<<<<<<
- *             dest_subkey = dest.get(key, None)
- *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):
- */
-      __pyx_t_1 = __Pyx_PyObject_GetItem(__pyx_v_upd, __pyx_v_key); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 186, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __Pyx_XDECREF_SET(__pyx_v_val, __pyx_t_1);
-      __pyx_t_1 = 0;
-
-      /* "pop/pop.data.pyx":187
- *         for key in keys:
- *             val = upd[key]
- *             dest_subkey = dest.get(key, None)             # <<<<<<<<<<<<<<
- *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):
- *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
- */
-      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_dest, __pyx_n_s_get); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 187, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_3);
-      __pyx_t_6 = NULL;
-      __pyx_t_4 = 0;
-      #if CYTHON_UNPACK_METHODS
-      if (likely(PyMethod_Check(__pyx_t_3))) {
-        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_3);
-        if (likely(__pyx_t_6)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-          __Pyx_INCREF(__pyx_t_6);
-          __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_3, function);
-          __pyx_t_4 = 1;
+  for (;;) {
+    if (likely(!__pyx_t_9)) {
+      if (likely(PyList_CheckExact(__pyx_t_5))) {
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_5);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 242, __pyx_L1_error)
+          #endif
+          if (__pyx_t_8 >= __pyx_temp) break;
         }
-      }
-      #endif
-      {
-        PyObject *__pyx_callargs[3] = {__pyx_t_6, __pyx_v_key, Py_None};
-        __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
-        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
-        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 187, __pyx_L1_error)
+        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_8); __Pyx_INCREF(__pyx_t_1); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 242, __pyx_L1_error)
+        #else
+        __pyx_t_1 = __Pyx_PySequence_ITEM(__pyx_t_5, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 242, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      }
-      __Pyx_XDECREF_SET(__pyx_v_dest_subkey, __pyx_t_1);
-      __pyx_t_1 = 0;
-
-      /* "pop/pop.data.pyx":188
- *             val = upd[key]
- *             dest_subkey = dest.get(key, None)
- *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):             # <<<<<<<<<<<<<<
- *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
- *                 dest[key] = ret
- */
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Mapping); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 188, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_8 = PyObject_IsInstance(__pyx_v_dest_subkey, __pyx_t_1); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 188, __pyx_L1_error)
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      if (__pyx_t_8) {
+        #endif
       } else {
-        __pyx_t_7 = __pyx_t_8;
-        goto __pyx_L7_bool_binop_done;
-      }
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Mapping); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 188, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_8 = PyObject_IsInstance(__pyx_v_val, __pyx_t_1); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 188, __pyx_L1_error)
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      __pyx_t_7 = __pyx_t_8;
-      __pyx_L7_bool_binop_done:;
-      if (__pyx_t_7) {
-
-        /* "pop/pop.data.pyx":189
- *             dest_subkey = dest.get(key, None)
- *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):
- *                 ret = update(dest_subkey, val, merge_lists=merge_lists)             # <<<<<<<<<<<<<<
- *                 dest[key] = ret
- *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
- */
-        __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_update); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 189, __pyx_L1_error)
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_5);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 242, __pyx_L1_error)
+          #endif
+          if (__pyx_t_8 >= __pyx_temp) break;
+        }
+        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_8); __Pyx_INCREF(__pyx_t_1); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 242, __pyx_L1_error)
+        #else
+        __pyx_t_1 = __Pyx_PySequence_ITEM(__pyx_t_5, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 242, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 189, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __Pyx_INCREF(__pyx_v_dest_subkey);
-        __Pyx_GIVEREF(__pyx_v_dest_subkey);
-        if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_dest_subkey)) __PYX_ERR(0, 189, __pyx_L1_error);
-        __Pyx_INCREF(__pyx_v_val);
-        __Pyx_GIVEREF(__pyx_v_val);
-        if (__Pyx_PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_val)) __PYX_ERR(0, 189, __pyx_L1_error);
-        __pyx_t_6 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 189, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_6);
-        __pyx_t_9 = __Pyx_PyBool_FromLong(__pyx_v_merge_lists); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 189, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_9);
-        if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_merge_lists, __pyx_t_9) < 0) __PYX_ERR(0, 189, __pyx_L1_error)
-        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
-        __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_3, __pyx_t_6); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 189, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_9);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-        __Pyx_XDECREF_SET(__pyx_v_ret, __pyx_t_9);
-        __pyx_t_9 = 0;
-
-        /* "pop/pop.data.pyx":190
- *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):
- *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
- *                 dest[key] = ret             # <<<<<<<<<<<<<<
- *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
- *                 merged = dest_subkey[:]
- */
-        if (unlikely((PyObject_SetItem(__pyx_v_dest, __pyx_v_key, __pyx_v_ret) < 0))) __PYX_ERR(0, 190, __pyx_L1_error)
-
-        /* "pop/pop.data.pyx":188
- *             val = upd[key]
- *             dest_subkey = dest.get(key, None)
- *             if isinstance(dest_subkey, Mapping) and isinstance(val, Mapping):             # <<<<<<<<<<<<<<
- *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
- *                 dest[key] = ret
- */
-        goto __pyx_L6;
-      }
-
-      /* "pop/pop.data.pyx":191
- *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
- *                 dest[key] = ret
- *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:             # <<<<<<<<<<<<<<
- *                 merged = dest_subkey[:]
- *                 merged.extend([x for x in val if x not in merged])
- */
-      __pyx_t_8 = PyList_Check(__pyx_v_dest_subkey); 
-      if (__pyx_t_8) {
-      } else {
-        __pyx_t_7 = __pyx_t_8;
-        goto __pyx_L9_bool_binop_done;
-      }
-      __pyx_t_8 = PyList_Check(__pyx_v_val); 
-      if (__pyx_t_8) {
-      } else {
-        __pyx_t_7 = __pyx_t_8;
-        goto __pyx_L9_bool_binop_done;
+        #endif
       }
-      __pyx_t_7 = __pyx_v_merge_lists;
-      __pyx_L9_bool_binop_done:;
-      if (__pyx_t_7) {
-
-        /* "pop/pop.data.pyx":192
- *                 dest[key] = ret
- *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
- *                 merged = dest_subkey[:]             # <<<<<<<<<<<<<<
- *                 merged.extend([x for x in val if x not in merged])
- *                 dest[key] = merged
- */
-        __pyx_t_9 = __Pyx_PyObject_GetSlice(__pyx_v_dest_subkey, 0, 0, NULL, NULL, &__pyx_slice__6, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 192, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_9);
-        __Pyx_XDECREF_SET(__pyx_v_merged, __pyx_t_9);
-        __pyx_t_9 = 0;
-
-        /* "pop/pop.data.pyx":193
- *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
- *                 merged = dest_subkey[:]
- *                 merged.extend([x for x in val if x not in merged])             # <<<<<<<<<<<<<<
- *                 dest[key] = merged
- *             else:
- */
-        __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_merged, __pyx_n_s_extend); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 193, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_6);
-        { /* enter inner scope */
-          __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 193, __pyx_L14_error)
-          __Pyx_GOTREF(__pyx_t_3);
-          if (likely(PyList_CheckExact(__pyx_v_val)) || PyTuple_CheckExact(__pyx_v_val)) {
-            __pyx_t_1 = __pyx_v_val; __Pyx_INCREF(__pyx_t_1);
-            __pyx_t_10 = 0;
-            __pyx_t_11 = NULL;
-          } else {
-            __pyx_t_10 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_val); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 193, __pyx_L14_error)
-            __Pyx_GOTREF(__pyx_t_1);
-            __pyx_t_11 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 193, __pyx_L14_error)
-          }
-          for (;;) {
-            if (likely(!__pyx_t_11)) {
-              if (likely(PyList_CheckExact(__pyx_t_1))) {
-                {
-                  Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_1);
-                  #if !CYTHON_ASSUME_SAFE_MACROS
-                  if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 193, __pyx_L14_error)
-                  #endif
-                  if (__pyx_t_10 >= __pyx_temp) break;
-                }
-                #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-                __pyx_t_12 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_10); __Pyx_INCREF(__pyx_t_12); __pyx_t_10++; if (unlikely((0 < 0))) __PYX_ERR(0, 193, __pyx_L14_error)
-                #else
-                __pyx_t_12 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 193, __pyx_L14_error)
-                __Pyx_GOTREF(__pyx_t_12);
-                #endif
-              } else {
-                {
-                  Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_1);
-                  #if !CYTHON_ASSUME_SAFE_MACROS
-                  if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 193, __pyx_L14_error)
-                  #endif
-                  if (__pyx_t_10 >= __pyx_temp) break;
-                }
-                #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-                __pyx_t_12 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_10); __Pyx_INCREF(__pyx_t_12); __pyx_t_10++; if (unlikely((0 < 0))) __PYX_ERR(0, 193, __pyx_L14_error)
-                #else
-                __pyx_t_12 = __Pyx_PySequence_ITEM(__pyx_t_1, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 193, __pyx_L14_error)
-                __Pyx_GOTREF(__pyx_t_12);
-                #endif
-              }
-            } else {
-              __pyx_t_12 = __pyx_t_11(__pyx_t_1);
-              if (unlikely(!__pyx_t_12)) {
-                PyObject* exc_type = PyErr_Occurred();
-                if (exc_type) {
-                  if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-                  else __PYX_ERR(0, 193, __pyx_L14_error)
-                }
-                break;
-              }
-              __Pyx_GOTREF(__pyx_t_12);
-            }
-            __Pyx_XDECREF_SET(__pyx_8genexpr9__pyx_v_x, __pyx_t_12);
-            __pyx_t_12 = 0;
-            __pyx_t_7 = (__Pyx_PySequence_ContainsTF(__pyx_8genexpr9__pyx_v_x, __pyx_v_merged, Py_NE)); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 193, __pyx_L14_error)
-            if (__pyx_t_7) {
-              if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_8genexpr9__pyx_v_x))) __PYX_ERR(0, 193, __pyx_L14_error)
-            }
-          }
-          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-          __Pyx_XDECREF(__pyx_8genexpr9__pyx_v_x); __pyx_8genexpr9__pyx_v_x = 0;
-          goto __pyx_L19_exit_scope;
-          __pyx_L14_error:;
-          __Pyx_XDECREF(__pyx_8genexpr9__pyx_v_x); __pyx_8genexpr9__pyx_v_x = 0;
-          goto __pyx_L1_error;
-          __pyx_L19_exit_scope:;
-        } /* exit inner scope */
-        __pyx_t_1 = NULL;
-        __pyx_t_4 = 0;
-        #if CYTHON_UNPACK_METHODS
-        if (likely(PyMethod_Check(__pyx_t_6))) {
-          __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_6);
-          if (likely(__pyx_t_1)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
-            __Pyx_INCREF(__pyx_t_1);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_6, function);
-            __pyx_t_4 = 1;
-          }
+    } else {
+      __pyx_t_1 = __pyx_t_9(__pyx_t_5);
+      if (unlikely(!__pyx_t_1)) {
+        PyObject* exc_type = PyErr_Occurred();
+        if (exc_type) {
+          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+          else __PYX_ERR(0, 242, __pyx_L1_error)
         }
-        #endif
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_t_3};
-          __pyx_t_9 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-          __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-          if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 193, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_9);
-          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-        }
-        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
-
-        /* "pop/pop.data.pyx":194
- *                 merged = dest_subkey[:]
- *                 merged.extend([x for x in val if x not in merged])
- *                 dest[key] = merged             # <<<<<<<<<<<<<<
- *             else:
- *                 dest[key] = upd[key]
- */
-        if (unlikely((PyObject_SetItem(__pyx_v_dest, __pyx_v_key, __pyx_v_merged) < 0))) __PYX_ERR(0, 194, __pyx_L1_error)
-
-        /* "pop/pop.data.pyx":191
- *                 ret = update(dest_subkey, val, merge_lists=merge_lists)
- *                 dest[key] = ret
- *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:             # <<<<<<<<<<<<<<
- *                 merged = dest_subkey[:]
- *                 merged.extend([x for x in val if x not in merged])
- */
-        goto __pyx_L6;
+        break;
       }
+      __Pyx_GOTREF(__pyx_t_1);
+    }
+    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_fn);
+    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_fn, __pyx_t_1);
+    __Pyx_GIVEREF(__pyx_t_1);
+    __pyx_t_1 = 0;
 
-      /* "pop/pop.data.pyx":196
- *                 dest[key] = merged
- *             else:
- *                 dest[key] = upd[key]             # <<<<<<<<<<<<<<
- *     else:
- *         for key in keys:
- */
-      /*else*/ {
-        __pyx_t_9 = __Pyx_PyObject_GetItem(__pyx_v_upd, __pyx_v_key); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 196, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_9);
-        if (unlikely((PyObject_SetItem(__pyx_v_dest, __pyx_v_key, __pyx_t_9) < 0))) __PYX_ERR(0, 196, __pyx_L1_error)
-        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
+    /* "pop/pop.contract.pyx":243
+ *         ret = chunk
+ *         for fn in self.contract_functions["post"]:
+ *             contract_context.ret = ret             # <<<<<<<<<<<<<<
+ *             post_ret = await fn(contract_context)
+ *             if post_ret is not None:
+ */
+    __Pyx_INCREF(__pyx_cur_scope->__pyx_v_ret);
+    __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_ret);
+    __Pyx_GOTREF(__pyx_cur_scope->__pyx_v_contract_context->ret);
+    __Pyx_DECREF(__pyx_cur_scope->__pyx_v_contract_context->ret);
+    __pyx_cur_scope->__pyx_v_contract_context->ret = __pyx_cur_scope->__pyx_v_ret;
+
+    /* "pop/pop.contract.pyx":244
+ *         for fn in self.contract_functions["post"]:
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)             # <<<<<<<<<<<<<<
+ *             if post_ret is not None:
+ *                 ret = post_ret
+ */
+    __Pyx_INCREF(__pyx_cur_scope->__pyx_v_fn);
+    __pyx_t_7 = __pyx_cur_scope->__pyx_v_fn; __pyx_t_6 = NULL;
+    __pyx_t_10 = 0;
+    #if CYTHON_UNPACK_METHODS
+    if (unlikely(PyMethod_Check(__pyx_t_7))) {
+      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_7);
+      if (likely(__pyx_t_6)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
+        __Pyx_INCREF(__pyx_t_6);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_7, function);
+        __pyx_t_10 = 1;
       }
-      __pyx_L6:;
-
-      /* "pop/pop.data.pyx":185
- * 
- *     if recursive_update:
- *         for key in keys:             # <<<<<<<<<<<<<<
- *             val = upd[key]
- *             dest_subkey = dest.get(key, None)
- */
     }
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    #endif
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_6, ((PyObject *)__pyx_cur_scope->__pyx_v_contract_context)};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_10, 1+__pyx_t_10);
+      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 244, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    }
+    __pyx_r = __Pyx_Coroutine_Yield_From(__pyx_generator, __pyx_t_1);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_XGOTREF(__pyx_r);
+    if (likely(__pyx_r)) {
+      __Pyx_XGIVEREF(__pyx_t_5);
+      __pyx_cur_scope->__pyx_t_0 = __pyx_t_5;
+      __pyx_cur_scope->__pyx_t_1 = __pyx_t_8;
+      __pyx_cur_scope->__pyx_t_2 = __pyx_t_9;
+      __Pyx_XGIVEREF(__pyx_r);
+      __Pyx_RefNannyFinishContext();
+      __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+      /* return from async generator, awaiting value */
+      __pyx_generator->resume_label = 9;
+      return __pyx_r;
+      __pyx_L29_resume_from_await:;
+      __pyx_t_5 = __pyx_cur_scope->__pyx_t_0;
+      __pyx_cur_scope->__pyx_t_0 = 0;
+      __Pyx_XGOTREF(__pyx_t_5);
+      __pyx_t_8 = __pyx_cur_scope->__pyx_t_1;
+      __pyx_t_9 = __pyx_cur_scope->__pyx_t_2;
+      if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 244, __pyx_L1_error)
+      __pyx_t_1 = __pyx_sent_value; __Pyx_INCREF(__pyx_t_1);
+    } else {
+      __pyx_t_1 = NULL;
+      if (__Pyx_PyGen_FetchStopIterationValue(&__pyx_t_1) < 0) __PYX_ERR(0, 244, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+    }
+    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_post_ret);
+    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_post_ret, __pyx_t_1);
+    __Pyx_GIVEREF(__pyx_t_1);
+    __pyx_t_1 = 0;
 
-    /* "pop/pop.data.pyx":184
- *         object key, val, dest_subkey
+    /* "pop/pop.contract.pyx":245
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)
+ *             if post_ret is not None:             # <<<<<<<<<<<<<<
+ *                 ret = post_ret
  * 
- *     if recursive_update:             # <<<<<<<<<<<<<<
- *         for key in keys:
- *             val = upd[key]
  */
-    goto __pyx_L3;
-  }
+    __pyx_t_4 = (__pyx_cur_scope->__pyx_v_post_ret != Py_None);
+    if (__pyx_t_4) {
 
-  /* "pop/pop.data.pyx":198
- *                 dest[key] = upd[key]
- *     else:
- *         for key in keys:             # <<<<<<<<<<<<<<
- *             dest[key] = upd[key]
- *     return dest
+      /* "pop/pop.contract.pyx":246
+ *             post_ret = await fn(contract_context)
+ *             if post_ret is not None:
+ *                 ret = post_ret             # <<<<<<<<<<<<<<
+ * 
+ * def create_contracted(
  */
-  /*else*/ {
-    __pyx_t_2 = __pyx_v_keys; __Pyx_INCREF(__pyx_t_2);
-    __pyx_t_5 = 0;
-    for (;;) {
-      {
-        Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_2);
-        #if !CYTHON_ASSUME_SAFE_MACROS
-        if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 198, __pyx_L1_error)
-        #endif
-        if (__pyx_t_5 >= __pyx_temp) break;
-      }
-      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-      __pyx_t_9 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_9); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 198, __pyx_L1_error)
-      #else
-      __pyx_t_9 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 198, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_9);
-      #endif
-      __Pyx_XDECREF_SET(__pyx_v_key, __pyx_t_9);
-      __pyx_t_9 = 0;
-
-      /* "pop/pop.data.pyx":199
- *     else:
- *         for key in keys:
- *             dest[key] = upd[key]             # <<<<<<<<<<<<<<
- *     return dest
- */
-      __pyx_t_9 = __Pyx_PyObject_GetItem(__pyx_v_upd, __pyx_v_key); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 199, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_9);
-      if (unlikely((PyObject_SetItem(__pyx_v_dest, __pyx_v_key, __pyx_t_9) < 0))) __PYX_ERR(0, 199, __pyx_L1_error)
-      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
+      __Pyx_INCREF(__pyx_cur_scope->__pyx_v_post_ret);
+      __Pyx_GOTREF(__pyx_cur_scope->__pyx_v_ret);
+      __Pyx_DECREF_SET(__pyx_cur_scope->__pyx_v_ret, __pyx_cur_scope->__pyx_v_post_ret);
+      __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_post_ret);
 
-      /* "pop/pop.data.pyx":198
- *                 dest[key] = upd[key]
- *     else:
- *         for key in keys:             # <<<<<<<<<<<<<<
- *             dest[key] = upd[key]
- *     return dest
+      /* "pop/pop.contract.pyx":245
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)
+ *             if post_ret is not None:             # <<<<<<<<<<<<<<
+ *                 ret = post_ret
+ * 
  */
     }
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  }
-  __pyx_L3:;
 
-  /* "pop/pop.data.pyx":200
- *         for key in keys:
- *             dest[key] = upd[key]
- *     return dest             # <<<<<<<<<<<<<<
+    /* "pop/pop.contract.pyx":242
+ *                 yield chunk
+ *         ret = chunk
+ *         for fn in self.contract_functions["post"]:             # <<<<<<<<<<<<<<
+ *             contract_context.ret = ret
+ *             post_ret = await fn(contract_context)
  */
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_INCREF(__pyx_v_dest);
-  __pyx_r = __pyx_v_dest;
-  goto __pyx_L0;
+  }
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  CYTHON_MAYBE_UNUSED_VAR(__pyx_cur_scope);
 
-  /* "pop/pop.data.pyx":166
- * 
+  /* "pop/pop.contract.pyx":216
  * 
- * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
- *     """
- *     Recursive version of the default dict.update
+ * class ContractedAsyncGen(Contracted):
+ *     async def __call__(self, *args, **kwargs):             # <<<<<<<<<<<<<<
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args
  */
 
   /* function exit code */
+  PyErr_SetNone(__Pyx_PyExc_StopAsyncIteration);
+  goto __pyx_L0;
   __pyx_L1_error:;
+  __Pyx_Generator_Replace_StopIteration(1);
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_XDECREF(__pyx_t_9);
-  __Pyx_XDECREF(__pyx_t_12);
-  __Pyx_AddTraceback("pop.data.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = 0;
+  __Pyx_XDECREF(__pyx_t_7);
+  __Pyx_AddTraceback("__call__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_keys);
-  __Pyx_XDECREF(__pyx_v_key);
-  __Pyx_XDECREF(__pyx_v_val);
-  __Pyx_XDECREF(__pyx_v_dest_subkey);
-  __Pyx_XDECREF(__pyx_v_ret);
-  __Pyx_XDECREF(__pyx_v_merged);
-  __Pyx_XDECREF(__pyx_8genexpr9__pyx_v_x);
-  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_XDECREF(__pyx_r); __pyx_r = 0;
+  #if !CYTHON_USE_EXC_INFO_STACK
+  __Pyx_Coroutine_ResetAndClearException(__pyx_generator);
+  #endif
+  __pyx_generator->resume_label = -1;
+  __Pyx_Coroutine_clear((PyObject*)__pyx_generator);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
+/* "pop/pop.contract.pyx":248
+ *                 ret = post_ret
+ * 
+ * def create_contracted(             # <<<<<<<<<<<<<<
+ *     hub: "pop.hub.Hub",
+ *     contracts: list["pop.loader.LoadedMod"],
+ */
+
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_5update(PyObject *__pyx_self, 
+static struct __pyx_obj_3pop_8contract_Contracted *__pyx_pw_3pop_8contract_3create_contracted(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_3pop_4data_4update, "\n    Recursive version of the default dict.update\n\n    Merges upd recursively into dest\n\n    If recursive_update=False, will use the classic dict.update, or fall back\n    on a manual merge (helpful for non-dict types like FunctionWrapper)\n\n    If merge_lists=True, will aggregate list object types instead of replace.\n    The list in ``upd`` is added to the list in ``dest``, so the resulting list\n    is ``dest[key] + upd[key]``. This behavior is only activated when\n    recursive_update=True. By default merge_lists=False.\n    ");
-static PyMethodDef __pyx_mdef_3pop_4data_5update = {"update", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_5update, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_3pop_4data_4update};
-static PyObject *__pyx_pw_3pop_4data_5update(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_3pop_8contract_2create_contracted, "\n    Dynamically create the correct Contracted type\n    :param hub: The redistributed pop central hub\n    :param contracts: Contracts functions to add to the sub\n    :param func: The contracted function to call\n    :param ref: The reference to the function on the hub\n    :param name: The name of the module to get from the loader\n    :param implicit_hub: True if a hub should be implicitly injected into the \"call\" method\n    ");
+static PyMethodDef __pyx_mdef_3pop_8contract_3create_contracted = {"create_contracted", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_3create_contracted, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_3pop_8contract_2create_contracted};
+static struct __pyx_obj_3pop_8contract_Contracted *__pyx_pw_3pop_8contract_3create_contracted(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v_dest = 0;
-  PyObject *__pyx_v_upd = 0;
-  int __pyx_v_recursive_update;
-  int __pyx_v_merge_lists;
+  PyObject *__pyx_v_hub = 0;
+  PyObject *__pyx_v_contracts = 0;
+  PyObject *__pyx_v_func = 0;
+  PyObject *__pyx_v_ref = 0;
+  PyObject *__pyx_v_name = 0;
+  PyObject *__pyx_v_implicit_hub = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED Py_ssize_t __pyx_nargs;
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject* values[4] = {0,0,0,0};
+  PyObject* values[6] = {0,0,0,0,0,0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
+  struct __pyx_obj_3pop_8contract_Contracted *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("update (wrapper)", 0);
+  __Pyx_RefNannySetupContext("create_contracted (wrapper)", 0);
   #if !CYTHON_METH_FASTCALL
   #if CYTHON_ASSUME_SAFE_MACROS
   __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #else
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
   __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_dest,&__pyx_n_s_upd,&__pyx_n_s_recursive_update,&__pyx_n_s_merge_lists,0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_hub,&__pyx_n_s_contracts,&__pyx_n_s_func,&__pyx_n_s_ref,&__pyx_n_s_name,&__pyx_n_s_implicit_hub,0};
+
+    /* "pop/pop.contract.pyx":254
+ *     ref: str,
+ *     name: str,
+ *     implicit_hub: bool = True,             # <<<<<<<<<<<<<<
+ * ) -> Contracted:
+ *     """
+ */
+    values[5] = __Pyx_Arg_NewRef_FASTCALL(((PyObject *)((PyObject *)Py_True)));
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
+        case  6: values[5] = __Pyx_Arg_FASTCALL(__pyx_args, 5);
+        CYTHON_FALLTHROUGH;
+        case  5: values[4] = __Pyx_Arg_FASTCALL(__pyx_args, 4);
+        CYTHON_FALLTHROUGH;
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_dest)) != 0)) {
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_hub)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 166, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 248, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
-        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_upd)) != 0)) {
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_contracts)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 166, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 248, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("update", 0, 2, 4, 1); __PYX_ERR(0, 166, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("create_contracted", 0, 5, 6, 1); __PYX_ERR(0, 248, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
-        if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_recursive_update);
-          if (value) { values[2] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 166, __pyx_L3_error)
+        if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_func)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[2]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 248, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("create_contracted", 0, 5, 6, 2); __PYX_ERR(0, 248, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  3:
+        if (likely((values[3] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_ref)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[3]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 248, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("create_contracted", 0, 5, 6, 3); __PYX_ERR(0, 248, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  4:
+        if (likely((values[4] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_name)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[4]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 248, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("create_contracted", 0, 5, 6, 4); __PYX_ERR(0, 248, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  5:
         if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_merge_lists);
-          if (value) { values[3] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 166, __pyx_L3_error)
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_implicit_hub);
+          if (value) { values[5] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 248, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "update") < 0)) __PYX_ERR(0, 166, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "create_contracted") < 0)) __PYX_ERR(0, 248, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
-        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
-        CYTHON_FALLTHROUGH;
-        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        case  6: values[5] = __Pyx_Arg_FASTCALL(__pyx_args, 5);
         CYTHON_FALLTHROUGH;
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        case  5: values[4] = __Pyx_Arg_FASTCALL(__pyx_args, 4);
+        values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         break;
         default: goto __pyx_L5_argtuple_error;
       }
     }
-    __pyx_v_dest = values[0];
-    __pyx_v_upd = values[1];
-    if (values[2]) {
-      __pyx_v_recursive_update = __Pyx_PyObject_IsTrue(values[2]); if (unlikely((__pyx_v_recursive_update == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 166, __pyx_L3_error)
-    } else {
-      __pyx_v_recursive_update = ((int)1);
-    }
-    if (values[3]) {
-      __pyx_v_merge_lists = __Pyx_PyObject_IsTrue(values[3]); if (unlikely((__pyx_v_merge_lists == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 166, __pyx_L3_error)
-    } else {
-      __pyx_v_merge_lists = ((int)0);
-    }
+    __pyx_v_hub = values[0];
+    __pyx_v_contracts = ((PyObject*)values[1]);
+    __pyx_v_func = values[2];
+    __pyx_v_ref = ((PyObject*)values[3]);
+    __pyx_v_name = ((PyObject*)values[4]);
+    __pyx_v_implicit_hub = values[5];
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("update", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 166, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("create_contracted", 0, 5, 6, __pyx_nargs); __PYX_ERR(0, 248, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("pop.data.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.create_contracted", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_4update(__pyx_self, __pyx_v_dest, __pyx_v_upd, __pyx_v_recursive_update, __pyx_v_merge_lists);
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_contracts), (&PyList_Type), 0, "contracts", 1))) __PYX_ERR(0, 250, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_ref), (&PyUnicode_Type), 0, "ref", 1))) __PYX_ERR(0, 252, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_name), (&PyUnicode_Type), 0, "name", 1))) __PYX_ERR(0, 253, __pyx_L1_error)
+  __pyx_r = __pyx_pf_3pop_8contract_2create_contracted(__pyx_self, __pyx_v_hub, __pyx_v_contracts, __pyx_v_func, __pyx_v_ref, __pyx_v_name, __pyx_v_implicit_hub);
+
+  /* "pop/pop.contract.pyx":248
+ *                 ret = post_ret
+ * 
+ * def create_contracted(             # <<<<<<<<<<<<<<
+ *     hub: "pop.hub.Hub",
+ *     contracts: list["pop.loader.LoadedMod"],
+ */
 
   /* function exit code */
-  {
-    Py_ssize_t __pyx_temp;
-    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
-    }
-  }
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_pf_3pop_4data_4update(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_dest, PyObject *__pyx_v_upd, int __pyx_v_recursive_update, int __pyx_v_merge_lists) {
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  struct __pyx_opt_args_3pop_4data_update __pyx_t_2;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("update", 1);
-  __Pyx_XDECREF(__pyx_r);
-  __pyx_t_2.__pyx_n = 2;
-  __pyx_t_2.recursive_update = __pyx_v_recursive_update;
-  __pyx_t_2.merge_lists = __pyx_v_merge_lists;
-  __pyx_t_1 = __pyx_f_3pop_4data_update(__pyx_v_dest, __pyx_v_upd, 0, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 166, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
   goto __pyx_L0;
-
-  /* function exit code */
   __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("pop.data.update", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-/* "(tree fragment)":1
- * def __pyx_unpickle_NamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
- *     cdef object __pyx_PickleError
- *     cdef object __pyx_result
- */
-
-/* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_7__pyx_unpickle_NamespaceDict(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_7__pyx_unpickle_NamespaceDict = {"__pyx_unpickle_NamespaceDict", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_7__pyx_unpickle_NamespaceDict, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_7__pyx_unpickle_NamespaceDict(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v___pyx_type = 0;
-  long __pyx_v___pyx_checksum;
-  PyObject *__pyx_v___pyx_state = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
-  #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
-  PyObject* values[3] = {0,0,0};
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__pyx_unpickle_NamespaceDict (wrapper)", 0);
-  #if !CYTHON_METH_FASTCALL
-  #if CYTHON_ASSUME_SAFE_MACROS
-  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #else
-  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
-  #endif
-  #endif
-  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_pyx_type,&__pyx_n_s_pyx_checksum,&__pyx_n_s_pyx_state,0};
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
-        CYTHON_FALLTHROUGH;
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pyx_type)) != 0)) {
-          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
-          kw_args--;
-        }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-        CYTHON_FALLTHROUGH;
-        case  1:
-        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pyx_checksum)) != 0)) {
-          (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
-          kw_args--;
-        }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
-        else {
-          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_NamespaceDict", 1, 3, 3, 1); __PYX_ERR(2, 1, __pyx_L3_error)
-        }
-        CYTHON_FALLTHROUGH;
-        case  2:
-        if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pyx_state)) != 0)) {
-          (void)__Pyx_Arg_NewRef_FASTCALL(values[2]);
-          kw_args--;
-        }
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
-        else {
-          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_NamespaceDict", 1, 3, 3, 2); __PYX_ERR(2, 1, __pyx_L3_error)
-        }
-      }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__pyx_unpickle_NamespaceDict") < 0)) __PYX_ERR(2, 1, __pyx_L3_error)
-      }
-    } else if (unlikely(__pyx_nargs != 3)) {
-      goto __pyx_L5_argtuple_error;
-    } else {
-      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-      values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
-    }
-    __pyx_v___pyx_type = values[0];
-    __pyx_v___pyx_checksum = __Pyx_PyInt_As_long(values[1]); if (unlikely((__pyx_v___pyx_checksum == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
-    __pyx_v___pyx_state = values[2];
-  }
-  goto __pyx_L6_skip;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_NamespaceDict", 1, 3, 3, __pyx_nargs); __PYX_ERR(2, 1, __pyx_L3_error)
-  __pyx_L6_skip:;
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L3_error:;
-  {
-    Py_ssize_t __pyx_temp;
-    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
-      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
-    }
-  }
-  __Pyx_AddTraceback("pop.data.__pyx_unpickle_NamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_6__pyx_unpickle_NamespaceDict(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
-
-  /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_6__pyx_unpickle_NamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
-  PyObject *__pyx_v___pyx_PickleError = 0;
-  PyObject *__pyx_v___pyx_result = 0;
-  PyObject *__pyx_r = NULL;
+static struct __pyx_obj_3pop_8contract_Contracted *__pyx_pf_3pop_8contract_2create_contracted(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_hub, PyObject *__pyx_v_contracts, PyObject *__pyx_v_func, PyObject *__pyx_v_ref, PyObject *__pyx_v_name, PyObject *__pyx_v_implicit_hub) {
+  struct __pyx_obj_3pop_8contract_Contracted *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
-  int __pyx_t_2;
+  PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_4;
   int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__pyx_unpickle_NamespaceDict", 1);
-
-  /* "(tree fragment)":4
- *     cdef object __pyx_PickleError
- *     cdef object __pyx_result
- *     if __pyx_checksum not in (0xe3b0c44, 0xda39a3e, 0xd41d8cd):             # <<<<<<<<<<<<<<
- *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum
- */
-  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 4, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = (__Pyx_PySequence_ContainsTF(__pyx_t_1, __pyx_tuple__7, Py_NE)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(2, 4, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  if (__pyx_t_2) {
-
-    /* "(tree fragment)":5
- *     cdef object __pyx_result
- *     if __pyx_checksum not in (0xe3b0c44, 0xda39a3e, 0xd41d8cd):
- *         from pickle import PickleError as __pyx_PickleError             # <<<<<<<<<<<<<<
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum
- *     __pyx_result = NamespaceDict.__new__(__pyx_type)
- */
-    __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 5, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_INCREF(__pyx_n_s_PickleError);
-    __Pyx_GIVEREF(__pyx_n_s_PickleError);
-    if (__Pyx_PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_PickleError)) __PYX_ERR(2, 5, __pyx_L1_error);
-    __pyx_t_3 = __Pyx_Import(__pyx_n_s_pickle, __pyx_t_1, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_PickleError); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 5, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_INCREF(__pyx_t_1);
-    __pyx_v___pyx_PickleError = __pyx_t_1;
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-
-    /* "(tree fragment)":6
- *     if __pyx_checksum not in (0xe3b0c44, 0xda39a3e, 0xd41d8cd):
- *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum             # <<<<<<<<<<<<<<
- *     __pyx_result = NamespaceDict.__new__(__pyx_type)
- *     if __pyx_state is not None:
- */
-    __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 6, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_Incompatible_checksums_0x_x_vs_0, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_Raise(__pyx_v___pyx_PickleError, __pyx_t_1, 0, 0);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __PYX_ERR(2, 6, __pyx_L1_error)
-
-    /* "(tree fragment)":4
- *     cdef object __pyx_PickleError
- *     cdef object __pyx_result
- *     if __pyx_checksum not in (0xe3b0c44, 0xda39a3e, 0xd41d8cd):             # <<<<<<<<<<<<<<
- *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum
- */
-  }
+  __Pyx_RefNannySetupContext("create_contracted", 1);
 
-  /* "(tree fragment)":7
- *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum
- *     __pyx_result = NamespaceDict.__new__(__pyx_type)             # <<<<<<<<<<<<<<
- *     if __pyx_state is not None:
- *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
+  /* "pop/pop.contract.pyx":265
+ *     :param implicit_hub: True if a hub should be implicitly injected into the "call" method
+ *     """
+ *     if inspect.isasyncgenfunction(func):             # <<<<<<<<<<<<<<
+ *         return ContractedAsyncGen(hub, contracts, func, ref, name, implicit_hub)
+ *     else:
  */
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_3pop_4data_NamespaceDict), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_inspect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 265, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_isasyncgenfunction); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 265, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_4 = NULL;
-  __pyx_t_5 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
   #if CYTHON_UNPACK_METHODS
-  if (likely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
-    if (likely(__pyx_t_4)) {
+  if (unlikely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_2)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-      __Pyx_INCREF(__pyx_t_4);
+      __Pyx_INCREF(__pyx_t_2);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_3, function);
-      __pyx_t_5 = 1;
+      __pyx_t_4 = 1;
     }
   }
   #endif
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_v___pyx_type};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
-    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 7, __pyx_L1_error)
+    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_func};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 265, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
-  __pyx_v___pyx_result = __pyx_t_1;
-  __pyx_t_1 = 0;
-
-  /* "(tree fragment)":8
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum
- *     __pyx_result = NamespaceDict.__new__(__pyx_type)
- *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
- *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
- *     return __pyx_result
- */
-  __pyx_t_2 = (__pyx_v___pyx_state != Py_None);
-  if (__pyx_t_2) {
-
-    /* "(tree fragment)":9
- *     __pyx_result = NamespaceDict.__new__(__pyx_type)
- *     if __pyx_state is not None:
- *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)             # <<<<<<<<<<<<<<
- *     return __pyx_result
- * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):
- */
-    if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 9, __pyx_L1_error)
-    __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_NamespaceDict__set_state(((struct __pyx_obj_3pop_4data_NamespaceDict *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-
-    /* "(tree fragment)":8
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum
- *     __pyx_result = NamespaceDict.__new__(__pyx_type)
- *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
- *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
- *     return __pyx_result
- */
-  }
-
-  /* "(tree fragment)":10
- *     if __pyx_state is not None:
- *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
- *     return __pyx_result             # <<<<<<<<<<<<<<
- * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):
- *     if len(__pyx_state) > 0 and hasattr(__pyx_result, '__dict__'):
- */
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_INCREF(__pyx_v___pyx_result);
-  __pyx_r = __pyx_v___pyx_result;
-  goto __pyx_L0;
-
-  /* "(tree fragment)":1
- * def __pyx_unpickle_NamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
- *     cdef object __pyx_PickleError
- *     cdef object __pyx_result
- */
-
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("pop.data.__pyx_unpickle_NamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v___pyx_PickleError);
-  __Pyx_XDECREF(__pyx_v___pyx_result);
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-/* "(tree fragment)":11
- *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
- *     return __pyx_result
- * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
- *     if len(__pyx_state) > 0 and hasattr(__pyx_result, '__dict__'):
- *         __pyx_result.__dict__.update(__pyx_state[0])
- */
-
-static PyObject *__pyx_f_3pop_4data___pyx_unpickle_NamespaceDict__set_state(struct __pyx_obj_3pop_4data_NamespaceDict *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  int __pyx_t_1;
-  Py_ssize_t __pyx_t_2;
-  int __pyx_t_3;
-  PyObject *__pyx_t_4 = NULL;
-  PyObject *__pyx_t_5 = NULL;
-  PyObject *__pyx_t_6 = NULL;
-  PyObject *__pyx_t_7 = NULL;
-  int __pyx_t_8;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__pyx_unpickle_NamespaceDict__set_state", 1);
-
-  /* "(tree fragment)":12
- *     return __pyx_result
- * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):
- *     if len(__pyx_state) > 0 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
- *         __pyx_result.__dict__.update(__pyx_state[0])
- */
-  if (unlikely(__pyx_v___pyx_state == Py_None)) {
-    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
-    __PYX_ERR(2, 12, __pyx_L1_error)
-  }
-  __pyx_t_2 = __Pyx_PyTuple_GET_SIZE(__pyx_v___pyx_state); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(2, 12, __pyx_L1_error)
-  __pyx_t_3 = (__pyx_t_2 > 0);
-  if (__pyx_t_3) {
-  } else {
-    __pyx_t_1 = __pyx_t_3;
-    goto __pyx_L4_bool_binop_done;
-  }
-  __pyx_t_3 = __Pyx_HasAttr(((PyObject *)__pyx_v___pyx_result), __pyx_n_s_dict); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(2, 12, __pyx_L1_error)
-  __pyx_t_1 = __pyx_t_3;
-  __pyx_L4_bool_binop_done:;
-  if (__pyx_t_1) {
+  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 265, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (__pyx_t_5) {
 
-    /* "(tree fragment)":13
- * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):
- *     if len(__pyx_state) > 0 and hasattr(__pyx_result, '__dict__'):
- *         __pyx_result.__dict__.update(__pyx_state[0])             # <<<<<<<<<<<<<<
+    /* "pop/pop.contract.pyx":266
+ *     """
+ *     if inspect.isasyncgenfunction(func):
+ *         return ContractedAsyncGen(hub, contracts, func, ref, name, implicit_hub)             # <<<<<<<<<<<<<<
+ *     else:
+ *         return Contracted(hub, contracts, func, ref, name, implicit_hub)
  */
-    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v___pyx_result), __pyx_n_s_dict); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 13, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_update); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 13, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_6);
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-    if (unlikely(__pyx_v___pyx_state == Py_None)) {
-      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-      __PYX_ERR(2, 13, __pyx_L1_error)
-    }
-    __pyx_t_5 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 13, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_7 = NULL;
-    __pyx_t_8 = 0;
+    __Pyx_XDECREF((PyObject *)__pyx_r);
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_ContractedAsyncGen); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 266, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_2 = NULL;
+    __pyx_t_4 = 0;
     #if CYTHON_UNPACK_METHODS
-    if (likely(PyMethod_Check(__pyx_t_6))) {
-      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
-      if (likely(__pyx_t_7)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
-        __Pyx_INCREF(__pyx_t_7);
+    if (unlikely(PyMethod_Check(__pyx_t_3))) {
+      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+      if (likely(__pyx_t_2)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+        __Pyx_INCREF(__pyx_t_2);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_6, function);
-        __pyx_t_8 = 1;
+        __Pyx_DECREF_SET(__pyx_t_3, function);
+        __pyx_t_4 = 1;
       }
     }
     #endif
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_5};
-      __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
-      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
-      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 13, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_4);
-      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+      PyObject *__pyx_callargs[7] = {__pyx_t_2, __pyx_v_hub, __pyx_v_contracts, __pyx_v_func, __pyx_v_ref, __pyx_v_name, __pyx_v_implicit_hub};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 6+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 266, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    if (!(likely(((__pyx_t_1) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_1, __pyx_ptype_3pop_8contract_Contracted))))) __PYX_ERR(0, 266, __pyx_L1_error)
+    __pyx_r = ((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_t_1);
+    __pyx_t_1 = 0;
+    goto __pyx_L0;
 
-    /* "(tree fragment)":12
- *     return __pyx_result
- * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):
- *     if len(__pyx_state) > 0 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
- *         __pyx_result.__dict__.update(__pyx_state[0])
+    /* "pop/pop.contract.pyx":265
+ *     :param implicit_hub: True if a hub should be implicitly injected into the "call" method
+ *     """
+ *     if inspect.isasyncgenfunction(func):             # <<<<<<<<<<<<<<
+ *         return ContractedAsyncGen(hub, contracts, func, ref, name, implicit_hub)
+ *     else:
  */
   }
 
-  /* "(tree fragment)":11
- *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
- *     return __pyx_result
- * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
- *     if len(__pyx_state) > 0 and hasattr(__pyx_result, '__dict__'):
- *         __pyx_result.__dict__.update(__pyx_state[0])
+  /* "pop/pop.contract.pyx":268
+ *         return ContractedAsyncGen(hub, contracts, func, ref, name, implicit_hub)
+ *     else:
+ *         return Contracted(hub, contracts, func, ref, name, implicit_hub)             # <<<<<<<<<<<<<<
+ */
+  /*else*/ {
+    __Pyx_XDECREF((PyObject *)__pyx_r);
+    __pyx_t_1 = PyTuple_New(6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 268, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_INCREF(__pyx_v_hub);
+    __Pyx_GIVEREF(__pyx_v_hub);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_hub)) __PYX_ERR(0, 268, __pyx_L1_error);
+    __Pyx_INCREF(__pyx_v_contracts);
+    __Pyx_GIVEREF(__pyx_v_contracts);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_contracts)) __PYX_ERR(0, 268, __pyx_L1_error);
+    __Pyx_INCREF(__pyx_v_func);
+    __Pyx_GIVEREF(__pyx_v_func);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_func)) __PYX_ERR(0, 268, __pyx_L1_error);
+    __Pyx_INCREF(__pyx_v_ref);
+    __Pyx_GIVEREF(__pyx_v_ref);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_v_ref)) __PYX_ERR(0, 268, __pyx_L1_error);
+    __Pyx_INCREF(__pyx_v_name);
+    __Pyx_GIVEREF(__pyx_v_name);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 4, __pyx_v_name)) __PYX_ERR(0, 268, __pyx_L1_error);
+    __Pyx_INCREF(__pyx_v_implicit_hub);
+    __Pyx_GIVEREF(__pyx_v_implicit_hub);
+    if (__Pyx_PyTuple_SET_ITEM(__pyx_t_1, 5, __pyx_v_implicit_hub)) __PYX_ERR(0, 268, __pyx_L1_error);
+    __pyx_t_3 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_3pop_8contract_Contracted), __pyx_t_1, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 268, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_r = ((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_t_3);
+    __pyx_t_3 = 0;
+    goto __pyx_L0;
+  }
+
+  /* "pop/pop.contract.pyx":248
+ *                 ret = post_ret
+ * 
+ * def create_contracted(             # <<<<<<<<<<<<<<
+ *     hub: "pop.hub.Hub",
+ *     contracts: list["pop.loader.LoadedMod"],
  */
 
   /* function exit code */
-  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
-  goto __pyx_L0;
   __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_AddTraceback("pop.data.__pyx_unpickle_NamespaceDict__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = 0;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_AddTraceback("pop.contract.create_contracted", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
   __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_XGIVEREF((PyObject *)__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":1
- * def __pyx_unpickle_MultidictCache(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
+ * def __pyx_unpickle_ContractedContext(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_9__pyx_unpickle_MultidictCache(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_8contract_5__pyx_unpickle_ContractedContext(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_9__pyx_unpickle_MultidictCache = {"__pyx_unpickle_MultidictCache", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_9__pyx_unpickle_MultidictCache, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_9__pyx_unpickle_MultidictCache(PyObject *__pyx_self, 
+static PyMethodDef __pyx_mdef_3pop_8contract_5__pyx_unpickle_ContractedContext = {"__pyx_unpickle_ContractedContext", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_5__pyx_unpickle_ContractedContext, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_8contract_5__pyx_unpickle_ContractedContext(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_type = 0;
@@ -11570,15 +11600,15 @@
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject* values[3] = {0,0,0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__pyx_unpickle_MultidictCache (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__pyx_unpickle_ContractedContext (wrapper)", 0);
   #if !CYTHON_METH_FASTCALL
   #if CYTHON_ASSUME_SAFE_MACROS
   __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #else
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
@@ -11610,105 +11640,105 @@
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pyx_checksum)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
         else if (unlikely(PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_MultidictCache", 1, 3, 3, 1); __PYX_ERR(2, 1, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_ContractedContext", 1, 3, 3, 1); __PYX_ERR(2, 1, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pyx_state)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[2]);
           kw_args--;
         }
         else if (unlikely(PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_MultidictCache", 1, 3, 3, 2); __PYX_ERR(2, 1, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_ContractedContext", 1, 3, 3, 2); __PYX_ERR(2, 1, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__pyx_unpickle_MultidictCache") < 0)) __PYX_ERR(2, 1, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__pyx_unpickle_ContractedContext") < 0)) __PYX_ERR(2, 1, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 3)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
       values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
     }
     __pyx_v___pyx_type = values[0];
     __pyx_v___pyx_checksum = __Pyx_PyInt_As_long(values[1]); if (unlikely((__pyx_v___pyx_checksum == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
     __pyx_v___pyx_state = values[2];
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_MultidictCache", 1, 3, 3, __pyx_nargs); __PYX_ERR(2, 1, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_ContractedContext", 1, 3, 3, __pyx_nargs); __PYX_ERR(2, 1, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("pop.data.__pyx_unpickle_MultidictCache", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.__pyx_unpickle_ContractedContext", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_8__pyx_unpickle_MultidictCache(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_8contract_4__pyx_unpickle_ContractedContext(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_8__pyx_unpickle_MultidictCache(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_8contract_4__pyx_unpickle_ContractedContext(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_v___pyx_PickleError = 0;
   PyObject *__pyx_v___pyx_result = 0;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__pyx_unpickle_MultidictCache", 1);
+  __Pyx_RefNannySetupContext("__pyx_unpickle_ContractedContext", 1);
 
   /* "(tree fragment)":4
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
- *     if __pyx_checksum not in (0x09e6f20, 0xf4b8e03, 0xd271b3e):             # <<<<<<<<<<<<<<
+ *     if __pyx_checksum not in (0xa0c99bc, 0x2f6671f, 0xf637459):             # <<<<<<<<<<<<<<
  *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))" % __pyx_checksum
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa0c99bc, 0x2f6671f, 0xf637459) = (_ContractedContext__cache, __name__, args, func, kwargs, ref, ret, signature))" % __pyx_checksum
  */
   __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = (__Pyx_PySequence_ContainsTF(__pyx_t_1, __pyx_tuple__8, Py_NE)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(2, 4, __pyx_L1_error)
+  __pyx_t_2 = (__Pyx_PySequence_ContainsTF(__pyx_t_1, __pyx_tuple__4, Py_NE)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(2, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   if (__pyx_t_2) {
 
     /* "(tree fragment)":5
  *     cdef object __pyx_result
- *     if __pyx_checksum not in (0x09e6f20, 0xf4b8e03, 0xd271b3e):
+ *     if __pyx_checksum not in (0xa0c99bc, 0x2f6671f, 0xf637459):
  *         from pickle import PickleError as __pyx_PickleError             # <<<<<<<<<<<<<<
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))" % __pyx_checksum
- *     __pyx_result = MultidictCache.__new__(__pyx_type)
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa0c99bc, 0x2f6671f, 0xf637459) = (_ContractedContext__cache, __name__, args, func, kwargs, ref, ret, signature))" % __pyx_checksum
+ *     __pyx_result = ContractedContext.__new__(__pyx_type)
  */
     __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 5, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_INCREF(__pyx_n_s_PickleError);
     __Pyx_GIVEREF(__pyx_n_s_PickleError);
     if (__Pyx_PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_PickleError)) __PYX_ERR(2, 5, __pyx_L1_error);
     __pyx_t_3 = __Pyx_Import(__pyx_n_s_pickle, __pyx_t_1, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
@@ -11718,46 +11748,46 @@
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_INCREF(__pyx_t_1);
     __pyx_v___pyx_PickleError = __pyx_t_1;
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
     /* "(tree fragment)":6
- *     if __pyx_checksum not in (0x09e6f20, 0xf4b8e03, 0xd271b3e):
+ *     if __pyx_checksum not in (0xa0c99bc, 0x2f6671f, 0xf637459):
  *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))" % __pyx_checksum             # <<<<<<<<<<<<<<
- *     __pyx_result = MultidictCache.__new__(__pyx_type)
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa0c99bc, 0x2f6671f, 0xf637459) = (_ContractedContext__cache, __name__, args, func, kwargs, ref, ret, signature))" % __pyx_checksum             # <<<<<<<<<<<<<<
+ *     __pyx_result = ContractedContext.__new__(__pyx_type)
  *     if __pyx_state is not None:
  */
     __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 6, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_Incompatible_checksums_0x_x_vs_0, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     __Pyx_Raise(__pyx_v___pyx_PickleError, __pyx_t_1, 0, 0);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     __PYX_ERR(2, 6, __pyx_L1_error)
 
     /* "(tree fragment)":4
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
- *     if __pyx_checksum not in (0x09e6f20, 0xf4b8e03, 0xd271b3e):             # <<<<<<<<<<<<<<
+ *     if __pyx_checksum not in (0xa0c99bc, 0x2f6671f, 0xf637459):             # <<<<<<<<<<<<<<
  *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))" % __pyx_checksum
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa0c99bc, 0x2f6671f, 0xf637459) = (_ContractedContext__cache, __name__, args, func, kwargs, ref, ret, signature))" % __pyx_checksum
  */
   }
 
   /* "(tree fragment)":7
  *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))" % __pyx_checksum
- *     __pyx_result = MultidictCache.__new__(__pyx_type)             # <<<<<<<<<<<<<<
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa0c99bc, 0x2f6671f, 0xf637459) = (_ContractedContext__cache, __name__, args, func, kwargs, ref, ret, signature))" % __pyx_checksum
+ *     __pyx_result = ContractedContext.__new__(__pyx_type)             # <<<<<<<<<<<<<<
  *     if __pyx_state is not None:
- *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_ContractedContext__set_state(<ContractedContext> __pyx_result, __pyx_state)
  */
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_3pop_4data_MultidictCache), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_3pop_8contract_ContractedContext), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_4 = NULL;
   __pyx_t_5 = 0;
   #if CYTHON_UNPACK_METHODS
   if (likely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_4)) {
@@ -11777,182 +11807,239 @@
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __pyx_v___pyx_result = __pyx_t_1;
   __pyx_t_1 = 0;
 
   /* "(tree fragment)":8
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))" % __pyx_checksum
- *     __pyx_result = MultidictCache.__new__(__pyx_type)
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa0c99bc, 0x2f6671f, 0xf637459) = (_ContractedContext__cache, __name__, args, func, kwargs, ref, ret, signature))" % __pyx_checksum
+ *     __pyx_result = ContractedContext.__new__(__pyx_type)
  *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
- *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_ContractedContext__set_state(<ContractedContext> __pyx_result, __pyx_state)
  *     return __pyx_result
  */
   __pyx_t_2 = (__pyx_v___pyx_state != Py_None);
   if (__pyx_t_2) {
 
     /* "(tree fragment)":9
- *     __pyx_result = MultidictCache.__new__(__pyx_type)
+ *     __pyx_result = ContractedContext.__new__(__pyx_type)
  *     if __pyx_state is not None:
- *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)             # <<<<<<<<<<<<<<
+ *         __pyx_unpickle_ContractedContext__set_state(<ContractedContext> __pyx_result, __pyx_state)             # <<<<<<<<<<<<<<
  *     return __pyx_result
- * cdef __pyx_unpickle_MultidictCache__set_state(MultidictCache __pyx_result, tuple __pyx_state):
+ * cdef __pyx_unpickle_ContractedContext__set_state(ContractedContext __pyx_result, tuple __pyx_state):
  */
     if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 9, __pyx_L1_error)
-    __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_MultidictCache__set_state(((struct __pyx_obj_3pop_4data_MultidictCache *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
+    __pyx_t_1 = __pyx_f_3pop_8contract___pyx_unpickle_ContractedContext__set_state(((struct __pyx_obj_3pop_8contract_ContractedContext *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
     /* "(tree fragment)":8
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x09e6f20, 0xf4b8e03, 0xd271b3e) = (_base_dicts, _cache, _split_cache))" % __pyx_checksum
- *     __pyx_result = MultidictCache.__new__(__pyx_type)
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa0c99bc, 0x2f6671f, 0xf637459) = (_ContractedContext__cache, __name__, args, func, kwargs, ref, ret, signature))" % __pyx_checksum
+ *     __pyx_result = ContractedContext.__new__(__pyx_type)
  *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
- *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_ContractedContext__set_state(<ContractedContext> __pyx_result, __pyx_state)
  *     return __pyx_result
  */
   }
 
   /* "(tree fragment)":10
  *     if __pyx_state is not None:
- *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_ContractedContext__set_state(<ContractedContext> __pyx_result, __pyx_state)
  *     return __pyx_result             # <<<<<<<<<<<<<<
- * cdef __pyx_unpickle_MultidictCache__set_state(MultidictCache __pyx_result, tuple __pyx_state):
- *     __pyx_result._base_dicts = __pyx_state[0]; __pyx_result._cache = __pyx_state[1]; __pyx_result._split_cache = __pyx_state[2]
+ * cdef __pyx_unpickle_ContractedContext__set_state(ContractedContext __pyx_result, tuple __pyx_state):
+ *     __pyx_result._ContractedContext__cache = __pyx_state[0]; __pyx_result.__name__ = __pyx_state[1]; __pyx_result.args = __pyx_state[2]; __pyx_result.func = __pyx_state[3]; __pyx_result.kwargs = __pyx_state[4]; __pyx_result.ref = __pyx_state[5]; __pyx_result.ret = __pyx_state[6]; __pyx_result.signature = __pyx_state[7]
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v___pyx_result);
   __pyx_r = __pyx_v___pyx_result;
   goto __pyx_L0;
 
   /* "(tree fragment)":1
- * def __pyx_unpickle_MultidictCache(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
+ * def __pyx_unpickle_ContractedContext(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("pop.data.__pyx_unpickle_MultidictCache", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.__pyx_unpickle_ContractedContext", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v___pyx_PickleError);
   __Pyx_XDECREF(__pyx_v___pyx_result);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":11
- *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_ContractedContext__set_state(<ContractedContext> __pyx_result, __pyx_state)
  *     return __pyx_result
- * cdef __pyx_unpickle_MultidictCache__set_state(MultidictCache __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_result._base_dicts = __pyx_state[0]; __pyx_result._cache = __pyx_state[1]; __pyx_result._split_cache = __pyx_state[2]
- *     if len(__pyx_state) > 3 and hasattr(__pyx_result, '__dict__'):
+ * cdef __pyx_unpickle_ContractedContext__set_state(ContractedContext __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
+ *     __pyx_result._ContractedContext__cache = __pyx_state[0]; __pyx_result.__name__ = __pyx_state[1]; __pyx_result.args = __pyx_state[2]; __pyx_result.func = __pyx_state[3]; __pyx_result.kwargs = __pyx_state[4]; __pyx_result.ref = __pyx_state[5]; __pyx_result.ret = __pyx_state[6]; __pyx_result.signature = __pyx_state[7]
+ *     if len(__pyx_state) > 8 and hasattr(__pyx_result, '__dict__'):
  */
 
-static PyObject *__pyx_f_3pop_4data___pyx_unpickle_MultidictCache__set_state(struct __pyx_obj_3pop_4data_MultidictCache *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_f_3pop_8contract___pyx_unpickle_ContractedContext__set_state(struct __pyx_obj_3pop_8contract_ContractedContext *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   Py_ssize_t __pyx_t_3;
   int __pyx_t_4;
   PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
   PyObject *__pyx_t_7 = NULL;
   int __pyx_t_8;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__pyx_unpickle_MultidictCache__set_state", 1);
+  __Pyx_RefNannySetupContext("__pyx_unpickle_ContractedContext__set_state", 1);
 
   /* "(tree fragment)":12
  *     return __pyx_result
- * cdef __pyx_unpickle_MultidictCache__set_state(MultidictCache __pyx_result, tuple __pyx_state):
- *     __pyx_result._base_dicts = __pyx_state[0]; __pyx_result._cache = __pyx_state[1]; __pyx_result._split_cache = __pyx_state[2]             # <<<<<<<<<<<<<<
- *     if len(__pyx_state) > 3 and hasattr(__pyx_result, '__dict__'):
- *         __pyx_result.__dict__.update(__pyx_state[3])
+ * cdef __pyx_unpickle_ContractedContext__set_state(ContractedContext __pyx_result, tuple __pyx_state):
+ *     __pyx_result._ContractedContext__cache = __pyx_state[0]; __pyx_result.__name__ = __pyx_state[1]; __pyx_result.args = __pyx_state[2]; __pyx_result.func = __pyx_state[3]; __pyx_result.kwargs = __pyx_state[4]; __pyx_result.ref = __pyx_state[5]; __pyx_result.ret = __pyx_state[6]; __pyx_result.signature = __pyx_state[7]             # <<<<<<<<<<<<<<
+ *     if len(__pyx_state) > 8 and hasattr(__pyx_result, '__dict__'):
+ *         __pyx_result.__dict__.update(__pyx_state[8])
  */
   if (unlikely(__pyx_v___pyx_state == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
     __PYX_ERR(2, 12, __pyx_L1_error)
   }
   __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  if (!(likely(PyList_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("list", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
+  if (!(likely(PyDict_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
   __Pyx_GIVEREF(__pyx_t_1);
-  __Pyx_GOTREF(__pyx_v___pyx_result->_base_dicts);
-  __Pyx_DECREF(__pyx_v___pyx_result->_base_dicts);
-  __pyx_v___pyx_result->_base_dicts = ((PyObject*)__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->_ContractedContext__cache);
+  __Pyx_DECREF(__pyx_v___pyx_result->_ContractedContext__cache);
+  __pyx_v___pyx_result->_ContractedContext__cache = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
   if (unlikely(__pyx_v___pyx_state == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
     __PYX_ERR(2, 12, __pyx_L1_error)
   }
   __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  if (!(likely(PyDict_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
+  if (!(likely(PyUnicode_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
   __Pyx_GIVEREF(__pyx_t_1);
-  __Pyx_GOTREF(__pyx_v___pyx_result->_cache);
-  __Pyx_DECREF(__pyx_v___pyx_result->_cache);
-  __pyx_v___pyx_result->_cache = ((PyObject*)__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->__name__);
+  __Pyx_DECREF(__pyx_v___pyx_result->__name__);
+  __pyx_v___pyx_result->__name__ = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
   if (unlikely(__pyx_v___pyx_state == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
     __PYX_ERR(2, 12, __pyx_L1_error)
   }
   __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
+  if (!(likely(PyList_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("list", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->args);
+  __Pyx_DECREF(__pyx_v___pyx_result->args);
+  __pyx_v___pyx_result->args = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->func);
+  __Pyx_DECREF(__pyx_v___pyx_result->func);
+  __pyx_v___pyx_result->func = __pyx_t_1;
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 4, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
   if (!(likely(PyDict_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
   __Pyx_GIVEREF(__pyx_t_1);
-  __Pyx_GOTREF(__pyx_v___pyx_result->_split_cache);
-  __Pyx_DECREF(__pyx_v___pyx_result->_split_cache);
-  __pyx_v___pyx_result->_split_cache = ((PyObject*)__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->kwargs);
+  __Pyx_DECREF(__pyx_v___pyx_result->kwargs);
+  __pyx_v___pyx_result->kwargs = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 5, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  if (!(likely(PyUnicode_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->ref);
+  __Pyx_DECREF(__pyx_v___pyx_result->ref);
+  __pyx_v___pyx_result->ref = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 6, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->ret);
+  __Pyx_DECREF(__pyx_v___pyx_result->ret);
+  __pyx_v___pyx_result->ret = __pyx_t_1;
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 7, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->signature);
+  __Pyx_DECREF(__pyx_v___pyx_result->signature);
+  __pyx_v___pyx_result->signature = __pyx_t_1;
   __pyx_t_1 = 0;
 
   /* "(tree fragment)":13
- * cdef __pyx_unpickle_MultidictCache__set_state(MultidictCache __pyx_result, tuple __pyx_state):
- *     __pyx_result._base_dicts = __pyx_state[0]; __pyx_result._cache = __pyx_state[1]; __pyx_result._split_cache = __pyx_state[2]
- *     if len(__pyx_state) > 3 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
- *         __pyx_result.__dict__.update(__pyx_state[3])
+ * cdef __pyx_unpickle_ContractedContext__set_state(ContractedContext __pyx_result, tuple __pyx_state):
+ *     __pyx_result._ContractedContext__cache = __pyx_state[0]; __pyx_result.__name__ = __pyx_state[1]; __pyx_result.args = __pyx_state[2]; __pyx_result.func = __pyx_state[3]; __pyx_result.kwargs = __pyx_state[4]; __pyx_result.ref = __pyx_state[5]; __pyx_result.ret = __pyx_state[6]; __pyx_result.signature = __pyx_state[7]
+ *     if len(__pyx_state) > 8 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
+ *         __pyx_result.__dict__.update(__pyx_state[8])
  */
   if (unlikely(__pyx_v___pyx_state == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
     __PYX_ERR(2, 13, __pyx_L1_error)
   }
   __pyx_t_3 = __Pyx_PyTuple_GET_SIZE(__pyx_v___pyx_state); if (unlikely(__pyx_t_3 == ((Py_ssize_t)-1))) __PYX_ERR(2, 13, __pyx_L1_error)
-  __pyx_t_4 = (__pyx_t_3 > 3);
+  __pyx_t_4 = (__pyx_t_3 > 8);
   if (__pyx_t_4) {
   } else {
     __pyx_t_2 = __pyx_t_4;
     goto __pyx_L4_bool_binop_done;
   }
   __pyx_t_4 = __Pyx_HasAttr(((PyObject *)__pyx_v___pyx_result), __pyx_n_s_dict); if (unlikely(__pyx_t_4 == ((int)-1))) __PYX_ERR(2, 13, __pyx_L1_error)
   __pyx_t_2 = __pyx_t_4;
   __pyx_L4_bool_binop_done:;
   if (__pyx_t_2) {
 
     /* "(tree fragment)":14
- *     __pyx_result._base_dicts = __pyx_state[0]; __pyx_result._cache = __pyx_state[1]; __pyx_result._split_cache = __pyx_state[2]
- *     if len(__pyx_state) > 3 and hasattr(__pyx_result, '__dict__'):
- *         __pyx_result.__dict__.update(__pyx_state[3])             # <<<<<<<<<<<<<<
+ *     __pyx_result._ContractedContext__cache = __pyx_state[0]; __pyx_result.__name__ = __pyx_state[1]; __pyx_result.args = __pyx_state[2]; __pyx_result.func = __pyx_state[3]; __pyx_result.kwargs = __pyx_state[4]; __pyx_result.ref = __pyx_state[5]; __pyx_result.ret = __pyx_state[6]; __pyx_result.signature = __pyx_state[7]
+ *     if len(__pyx_state) > 8 and hasattr(__pyx_result, '__dict__'):
+ *         __pyx_result.__dict__.update(__pyx_state[8])             # <<<<<<<<<<<<<<
  */
     __pyx_t_5 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v___pyx_result), __pyx_n_s_dict); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_update); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 14, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_6);
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     if (unlikely(__pyx_v___pyx_state == Py_None)) {
       PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
       __PYX_ERR(2, 14, __pyx_L1_error)
     }
-    __pyx_t_5 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 8, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __pyx_t_7 = NULL;
     __pyx_t_8 = 0;
     #if CYTHON_UNPACK_METHODS
     if (likely(PyMethod_Check(__pyx_t_6))) {
       __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
       if (likely(__pyx_t_7)) {
@@ -11972,61 +12059,61 @@
       if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 14, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
     }
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
     /* "(tree fragment)":13
- * cdef __pyx_unpickle_MultidictCache__set_state(MultidictCache __pyx_result, tuple __pyx_state):
- *     __pyx_result._base_dicts = __pyx_state[0]; __pyx_result._cache = __pyx_state[1]; __pyx_result._split_cache = __pyx_state[2]
- *     if len(__pyx_state) > 3 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
- *         __pyx_result.__dict__.update(__pyx_state[3])
+ * cdef __pyx_unpickle_ContractedContext__set_state(ContractedContext __pyx_result, tuple __pyx_state):
+ *     __pyx_result._ContractedContext__cache = __pyx_state[0]; __pyx_result.__name__ = __pyx_state[1]; __pyx_result.args = __pyx_state[2]; __pyx_result.func = __pyx_state[3]; __pyx_result.kwargs = __pyx_state[4]; __pyx_result.ref = __pyx_state[5]; __pyx_result.ret = __pyx_state[6]; __pyx_result.signature = __pyx_state[7]
+ *     if len(__pyx_state) > 8 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
+ *         __pyx_result.__dict__.update(__pyx_state[8])
  */
   }
 
   /* "(tree fragment)":11
- *         __pyx_unpickle_MultidictCache__set_state(<MultidictCache> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_ContractedContext__set_state(<ContractedContext> __pyx_result, __pyx_state)
  *     return __pyx_result
- * cdef __pyx_unpickle_MultidictCache__set_state(MultidictCache __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_result._base_dicts = __pyx_state[0]; __pyx_result._cache = __pyx_state[1]; __pyx_result._split_cache = __pyx_state[2]
- *     if len(__pyx_state) > 3 and hasattr(__pyx_result, '__dict__'):
+ * cdef __pyx_unpickle_ContractedContext__set_state(ContractedContext __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
+ *     __pyx_result._ContractedContext__cache = __pyx_state[0]; __pyx_result.__name__ = __pyx_state[1]; __pyx_result.args = __pyx_state[2]; __pyx_result.func = __pyx_state[3]; __pyx_result.kwargs = __pyx_state[4]; __pyx_result.ref = __pyx_state[5]; __pyx_result.ret = __pyx_state[6]; __pyx_result.signature = __pyx_state[7]
+ *     if len(__pyx_state) > 8 and hasattr(__pyx_result, '__dict__'):
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
   __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_AddTraceback("pop.data.__pyx_unpickle_MultidictCache__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.__pyx_unpickle_ContractedContext__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":1
- * def __pyx_unpickle_ImmutableNamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
+ * def __pyx_unpickle_Contracted(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_3pop_8contract_7__pyx_unpickle_Contracted(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict = {"__pyx_unpickle_ImmutableNamespaceDict", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict(PyObject *__pyx_self, 
+static PyMethodDef __pyx_mdef_3pop_8contract_7__pyx_unpickle_Contracted = {"__pyx_unpickle_Contracted", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_7__pyx_unpickle_Contracted, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_3pop_8contract_7__pyx_unpickle_Contracted(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v___pyx_type = 0;
@@ -12038,15 +12125,15 @@
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
   PyObject* values[3] = {0,0,0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("__pyx_unpickle_ImmutableNamespaceDict (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__pyx_unpickle_Contracted (wrapper)", 0);
   #if !CYTHON_METH_FASTCALL
   #if CYTHON_ASSUME_SAFE_MACROS
   __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #else
   __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
   #endif
   #endif
@@ -12078,105 +12165,105 @@
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pyx_checksum)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
           kw_args--;
         }
         else if (unlikely(PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_ImmutableNamespaceDict", 1, 3, 3, 1); __PYX_ERR(2, 1, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_Contracted", 1, 3, 3, 1); __PYX_ERR(2, 1, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pyx_state)) != 0)) {
           (void)__Pyx_Arg_NewRef_FASTCALL(values[2]);
           kw_args--;
         }
         else if (unlikely(PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_ImmutableNamespaceDict", 1, 3, 3, 2); __PYX_ERR(2, 1, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_Contracted", 1, 3, 3, 2); __PYX_ERR(2, 1, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__pyx_unpickle_ImmutableNamespaceDict") < 0)) __PYX_ERR(2, 1, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__pyx_unpickle_Contracted") < 0)) __PYX_ERR(2, 1, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 3)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
       values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
     }
     __pyx_v___pyx_type = values[0];
     __pyx_v___pyx_checksum = __Pyx_PyInt_As_long(values[1]); if (unlikely((__pyx_v___pyx_checksum == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
     __pyx_v___pyx_state = values[2];
   }
   goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_ImmutableNamespaceDict", 1, 3, 3, __pyx_nargs); __PYX_ERR(2, 1, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_Contracted", 1, 3, 3, __pyx_nargs); __PYX_ERR(2, 1, __pyx_L3_error)
   __pyx_L6_skip:;
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
-  __Pyx_AddTraceback("pop.data.__pyx_unpickle_ImmutableNamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.__pyx_unpickle_Contracted", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_3pop_4data_10__pyx_unpickle_ImmutableNamespaceDict(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
+  __pyx_r = __pyx_pf_3pop_8contract_6__pyx_unpickle_Contracted(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);
 
   /* function exit code */
   {
     Py_ssize_t __pyx_temp;
     for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
       __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
     }
   }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_3pop_4data_10__pyx_unpickle_ImmutableNamespaceDict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_pf_3pop_8contract_6__pyx_unpickle_Contracted(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_v___pyx_PickleError = 0;
   PyObject *__pyx_v___pyx_result = 0;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__pyx_unpickle_ImmutableNamespaceDict", 1);
+  __Pyx_RefNannySetupContext("__pyx_unpickle_Contracted", 1);
 
   /* "(tree fragment)":4
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
- *     if __pyx_checksum not in (0x9077974, 0xccb23f1, 0x45e2a8b):             # <<<<<<<<<<<<<<
+ *     if __pyx_checksum not in (0xa316dad, 0x35df901, 0x2d897cc):             # <<<<<<<<<<<<<<
  *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))" % __pyx_checksum
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa316dad, 0x35df901, 0x2d897cc) = (__name__, __wrapped__, _has_contracts, _sig_errors, contract_functions, contracts, func, hub, implicit_hub, ref, signature))" % __pyx_checksum
  */
   __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = (__Pyx_PySequence_ContainsTF(__pyx_t_1, __pyx_tuple__9, Py_NE)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(2, 4, __pyx_L1_error)
+  __pyx_t_2 = (__Pyx_PySequence_ContainsTF(__pyx_t_1, __pyx_tuple__6, Py_NE)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(2, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   if (__pyx_t_2) {
 
     /* "(tree fragment)":5
  *     cdef object __pyx_result
- *     if __pyx_checksum not in (0x9077974, 0xccb23f1, 0x45e2a8b):
+ *     if __pyx_checksum not in (0xa316dad, 0x35df901, 0x2d897cc):
  *         from pickle import PickleError as __pyx_PickleError             # <<<<<<<<<<<<<<
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))" % __pyx_checksum
- *     __pyx_result = ImmutableNamespaceDict.__new__(__pyx_type)
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa316dad, 0x35df901, 0x2d897cc) = (__name__, __wrapped__, _has_contracts, _sig_errors, contract_functions, contracts, func, hub, implicit_hub, ref, signature))" % __pyx_checksum
+ *     __pyx_result = Contracted.__new__(__pyx_type)
  */
     __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 5, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_INCREF(__pyx_n_s_PickleError);
     __Pyx_GIVEREF(__pyx_n_s_PickleError);
     if (__Pyx_PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_PickleError)) __PYX_ERR(2, 5, __pyx_L1_error);
     __pyx_t_3 = __Pyx_Import(__pyx_n_s_pickle, __pyx_t_1, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
@@ -12186,46 +12273,46 @@
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_INCREF(__pyx_t_1);
     __pyx_v___pyx_PickleError = __pyx_t_1;
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
     /* "(tree fragment)":6
- *     if __pyx_checksum not in (0x9077974, 0xccb23f1, 0x45e2a8b):
+ *     if __pyx_checksum not in (0xa316dad, 0x35df901, 0x2d897cc):
  *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))" % __pyx_checksum             # <<<<<<<<<<<<<<
- *     __pyx_result = ImmutableNamespaceDict.__new__(__pyx_type)
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa316dad, 0x35df901, 0x2d897cc) = (__name__, __wrapped__, _has_contracts, _sig_errors, contract_functions, contracts, func, hub, implicit_hub, ref, signature))" % __pyx_checksum             # <<<<<<<<<<<<<<
+ *     __pyx_result = Contracted.__new__(__pyx_type)
  *     if __pyx_state is not None:
  */
     __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 6, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_3, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     __Pyx_Raise(__pyx_v___pyx_PickleError, __pyx_t_1, 0, 0);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     __PYX_ERR(2, 6, __pyx_L1_error)
 
     /* "(tree fragment)":4
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
- *     if __pyx_checksum not in (0x9077974, 0xccb23f1, 0x45e2a8b):             # <<<<<<<<<<<<<<
+ *     if __pyx_checksum not in (0xa316dad, 0x35df901, 0x2d897cc):             # <<<<<<<<<<<<<<
  *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))" % __pyx_checksum
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa316dad, 0x35df901, 0x2d897cc) = (__name__, __wrapped__, _has_contracts, _sig_errors, contract_functions, contracts, func, hub, implicit_hub, ref, signature))" % __pyx_checksum
  */
   }
 
   /* "(tree fragment)":7
  *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))" % __pyx_checksum
- *     __pyx_result = ImmutableNamespaceDict.__new__(__pyx_type)             # <<<<<<<<<<<<<<
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa316dad, 0x35df901, 0x2d897cc) = (__name__, __wrapped__, _has_contracts, _sig_errors, contract_functions, contracts, func, hub, implicit_hub, ref, signature))" % __pyx_checksum
+ *     __pyx_result = Contracted.__new__(__pyx_type)             # <<<<<<<<<<<<<<
  *     if __pyx_state is not None:
- *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_Contracted__set_state(<Contracted> __pyx_result, __pyx_state)
  */
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_3pop_8contract_Contracted), __pyx_n_s_new); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_4 = NULL;
   __pyx_t_5 = 0;
   #if CYTHON_UNPACK_METHODS
   if (likely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_4)) {
@@ -12245,158 +12332,268 @@
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __pyx_v___pyx_result = __pyx_t_1;
   __pyx_t_1 = 0;
 
   /* "(tree fragment)":8
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))" % __pyx_checksum
- *     __pyx_result = ImmutableNamespaceDict.__new__(__pyx_type)
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa316dad, 0x35df901, 0x2d897cc) = (__name__, __wrapped__, _has_contracts, _sig_errors, contract_functions, contracts, func, hub, implicit_hub, ref, signature))" % __pyx_checksum
+ *     __pyx_result = Contracted.__new__(__pyx_type)
  *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
- *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_Contracted__set_state(<Contracted> __pyx_result, __pyx_state)
  *     return __pyx_result
  */
   __pyx_t_2 = (__pyx_v___pyx_state != Py_None);
   if (__pyx_t_2) {
 
     /* "(tree fragment)":9
- *     __pyx_result = ImmutableNamespaceDict.__new__(__pyx_type)
+ *     __pyx_result = Contracted.__new__(__pyx_type)
  *     if __pyx_state is not None:
- *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)             # <<<<<<<<<<<<<<
+ *         __pyx_unpickle_Contracted__set_state(<Contracted> __pyx_result, __pyx_state)             # <<<<<<<<<<<<<<
  *     return __pyx_result
- * cdef __pyx_unpickle_ImmutableNamespaceDict__set_state(ImmutableNamespaceDict __pyx_result, tuple __pyx_state):
+ * cdef __pyx_unpickle_Contracted__set_state(Contracted __pyx_result, tuple __pyx_state):
  */
     if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None) || __Pyx_RaiseUnexpectedTypeError("tuple", __pyx_v___pyx_state))) __PYX_ERR(2, 9, __pyx_L1_error)
-    __pyx_t_1 = __pyx_f_3pop_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
+    __pyx_t_1 = __pyx_f_3pop_8contract___pyx_unpickle_Contracted__set_state(((struct __pyx_obj_3pop_8contract_Contracted *)__pyx_v___pyx_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
     /* "(tree fragment)":8
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0x9077974, 0xccb23f1, 0x45e2a8b) = (_ImmutableNamespaceDict__data))" % __pyx_checksum
- *     __pyx_result = ImmutableNamespaceDict.__new__(__pyx_type)
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa316dad, 0x35df901, 0x2d897cc) = (__name__, __wrapped__, _has_contracts, _sig_errors, contract_functions, contracts, func, hub, implicit_hub, ref, signature))" % __pyx_checksum
+ *     __pyx_result = Contracted.__new__(__pyx_type)
  *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
- *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_Contracted__set_state(<Contracted> __pyx_result, __pyx_state)
  *     return __pyx_result
  */
   }
 
   /* "(tree fragment)":10
  *     if __pyx_state is not None:
- *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_Contracted__set_state(<Contracted> __pyx_result, __pyx_state)
  *     return __pyx_result             # <<<<<<<<<<<<<<
- * cdef __pyx_unpickle_ImmutableNamespaceDict__set_state(ImmutableNamespaceDict __pyx_result, tuple __pyx_state):
- *     __pyx_result._ImmutableNamespaceDict__data = __pyx_state[0]
+ * cdef __pyx_unpickle_Contracted__set_state(Contracted __pyx_result, tuple __pyx_state):
+ *     __pyx_result.__name__ = __pyx_state[0]; __pyx_result.__wrapped__ = __pyx_state[1]; __pyx_result._has_contracts = __pyx_state[2]; __pyx_result._sig_errors = __pyx_state[3]; __pyx_result.contract_functions = __pyx_state[4]; __pyx_result.contracts = __pyx_state[5]; __pyx_result.func = __pyx_state[6]; __pyx_result.hub = __pyx_state[7]; __pyx_result.implicit_hub = __pyx_state[8]; __pyx_result.ref = __pyx_state[9]; __pyx_result.signature = __pyx_state[10]
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v___pyx_result);
   __pyx_r = __pyx_v___pyx_result;
   goto __pyx_L0;
 
   /* "(tree fragment)":1
- * def __pyx_unpickle_ImmutableNamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
+ * def __pyx_unpickle_Contracted(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_AddTraceback("pop.data.__pyx_unpickle_ImmutableNamespaceDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.__pyx_unpickle_Contracted", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v___pyx_PickleError);
   __Pyx_XDECREF(__pyx_v___pyx_result);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "(tree fragment)":11
- *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_Contracted__set_state(<Contracted> __pyx_result, __pyx_state)
  *     return __pyx_result
- * cdef __pyx_unpickle_ImmutableNamespaceDict__set_state(ImmutableNamespaceDict __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_result._ImmutableNamespaceDict__data = __pyx_state[0]
- *     if len(__pyx_state) > 1 and hasattr(__pyx_result, '__dict__'):
+ * cdef __pyx_unpickle_Contracted__set_state(Contracted __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
+ *     __pyx_result.__name__ = __pyx_state[0]; __pyx_result.__wrapped__ = __pyx_state[1]; __pyx_result._has_contracts = __pyx_state[2]; __pyx_result._sig_errors = __pyx_state[3]; __pyx_result.contract_functions = __pyx_state[4]; __pyx_result.contracts = __pyx_state[5]; __pyx_result.func = __pyx_state[6]; __pyx_result.hub = __pyx_state[7]; __pyx_result.implicit_hub = __pyx_state[8]; __pyx_result.ref = __pyx_state[9]; __pyx_result.signature = __pyx_state[10]
+ *     if len(__pyx_state) > 11 and hasattr(__pyx_result, '__dict__'):
  */
 
-static PyObject *__pyx_f_3pop_4data___pyx_unpickle_ImmutableNamespaceDict__set_state(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
+static PyObject *__pyx_f_3pop_8contract___pyx_unpickle_Contracted__set_state(struct __pyx_obj_3pop_8contract_Contracted *__pyx_v___pyx_result, PyObject *__pyx_v___pyx_state) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   int __pyx_t_2;
   Py_ssize_t __pyx_t_3;
   int __pyx_t_4;
   PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
   PyObject *__pyx_t_7 = NULL;
   int __pyx_t_8;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("__pyx_unpickle_ImmutableNamespaceDict__set_state", 1);
+  __Pyx_RefNannySetupContext("__pyx_unpickle_Contracted__set_state", 1);
 
   /* "(tree fragment)":12
  *     return __pyx_result
- * cdef __pyx_unpickle_ImmutableNamespaceDict__set_state(ImmutableNamespaceDict __pyx_result, tuple __pyx_state):
- *     __pyx_result._ImmutableNamespaceDict__data = __pyx_state[0]             # <<<<<<<<<<<<<<
- *     if len(__pyx_state) > 1 and hasattr(__pyx_result, '__dict__'):
- *         __pyx_result.__dict__.update(__pyx_state[1])
+ * cdef __pyx_unpickle_Contracted__set_state(Contracted __pyx_result, tuple __pyx_state):
+ *     __pyx_result.__name__ = __pyx_state[0]; __pyx_result.__wrapped__ = __pyx_state[1]; __pyx_result._has_contracts = __pyx_state[2]; __pyx_result._sig_errors = __pyx_state[3]; __pyx_result.contract_functions = __pyx_state[4]; __pyx_result.contracts = __pyx_state[5]; __pyx_result.func = __pyx_state[6]; __pyx_result.hub = __pyx_state[7]; __pyx_result.implicit_hub = __pyx_state[8]; __pyx_result.ref = __pyx_state[9]; __pyx_result.signature = __pyx_state[10]             # <<<<<<<<<<<<<<
+ *     if len(__pyx_state) > 11 and hasattr(__pyx_result, '__dict__'):
+ *         __pyx_result.__dict__.update(__pyx_state[11])
  */
   if (unlikely(__pyx_v___pyx_state == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
     __PYX_ERR(2, 12, __pyx_L1_error)
   }
   __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
+  if (!(likely(PyUnicode_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->__name__);
+  __Pyx_DECREF(__pyx_v___pyx_result->__name__);
+  __pyx_v___pyx_result->__name__ = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->__pyx___wrapped__);
+  __Pyx_DECREF(__pyx_v___pyx_result->__pyx___wrapped__);
+  __pyx_v___pyx_result->__pyx___wrapped__ = __pyx_t_1;
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) && PyErr_Occurred())) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_v___pyx_result->_has_contracts = __pyx_t_2;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  if (!(likely(PyList_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("list", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->_sig_errors);
+  __Pyx_DECREF(__pyx_v___pyx_result->_sig_errors);
+  __pyx_v___pyx_result->_sig_errors = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 4, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
   if (!(likely(PyDict_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("dict", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
   __Pyx_GIVEREF(__pyx_t_1);
-  __Pyx_GOTREF(__pyx_v___pyx_result->_ImmutableNamespaceDict__data);
-  __Pyx_DECREF(__pyx_v___pyx_result->_ImmutableNamespaceDict__data);
-  __pyx_v___pyx_result->_ImmutableNamespaceDict__data = ((PyObject*)__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->contract_functions);
+  __Pyx_DECREF(__pyx_v___pyx_result->contract_functions);
+  __pyx_v___pyx_result->contract_functions = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 5, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  if (!(likely(PyList_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("list", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->contracts);
+  __Pyx_DECREF(__pyx_v___pyx_result->contracts);
+  __pyx_v___pyx_result->contracts = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 6, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->func);
+  __Pyx_DECREF(__pyx_v___pyx_result->func);
+  __pyx_v___pyx_result->func = __pyx_t_1;
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 7, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->hub);
+  __Pyx_DECREF(__pyx_v___pyx_result->hub);
+  __pyx_v___pyx_result->hub = __pyx_t_1;
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 8, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) && PyErr_Occurred())) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_v___pyx_result->implicit_hub = __pyx_t_2;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 9, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  if (!(likely(PyUnicode_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_t_1))) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->ref);
+  __Pyx_DECREF(__pyx_v___pyx_result->ref);
+  __pyx_v___pyx_result->ref = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+  if (unlikely(__pyx_v___pyx_state == Py_None)) {
+    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
+    __PYX_ERR(2, 12, __pyx_L1_error)
+  }
+  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 10, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_GIVEREF(__pyx_t_1);
+  __Pyx_GOTREF(__pyx_v___pyx_result->signature);
+  __Pyx_DECREF(__pyx_v___pyx_result->signature);
+  __pyx_v___pyx_result->signature = __pyx_t_1;
   __pyx_t_1 = 0;
 
   /* "(tree fragment)":13
- * cdef __pyx_unpickle_ImmutableNamespaceDict__set_state(ImmutableNamespaceDict __pyx_result, tuple __pyx_state):
- *     __pyx_result._ImmutableNamespaceDict__data = __pyx_state[0]
- *     if len(__pyx_state) > 1 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
- *         __pyx_result.__dict__.update(__pyx_state[1])
+ * cdef __pyx_unpickle_Contracted__set_state(Contracted __pyx_result, tuple __pyx_state):
+ *     __pyx_result.__name__ = __pyx_state[0]; __pyx_result.__wrapped__ = __pyx_state[1]; __pyx_result._has_contracts = __pyx_state[2]; __pyx_result._sig_errors = __pyx_state[3]; __pyx_result.contract_functions = __pyx_state[4]; __pyx_result.contracts = __pyx_state[5]; __pyx_result.func = __pyx_state[6]; __pyx_result.hub = __pyx_state[7]; __pyx_result.implicit_hub = __pyx_state[8]; __pyx_result.ref = __pyx_state[9]; __pyx_result.signature = __pyx_state[10]
+ *     if len(__pyx_state) > 11 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
+ *         __pyx_result.__dict__.update(__pyx_state[11])
  */
   if (unlikely(__pyx_v___pyx_state == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
     __PYX_ERR(2, 13, __pyx_L1_error)
   }
   __pyx_t_3 = __Pyx_PyTuple_GET_SIZE(__pyx_v___pyx_state); if (unlikely(__pyx_t_3 == ((Py_ssize_t)-1))) __PYX_ERR(2, 13, __pyx_L1_error)
-  __pyx_t_4 = (__pyx_t_3 > 1);
+  __pyx_t_4 = (__pyx_t_3 > 11);
   if (__pyx_t_4) {
   } else {
     __pyx_t_2 = __pyx_t_4;
     goto __pyx_L4_bool_binop_done;
   }
   __pyx_t_4 = __Pyx_HasAttr(((PyObject *)__pyx_v___pyx_result), __pyx_n_s_dict); if (unlikely(__pyx_t_4 == ((int)-1))) __PYX_ERR(2, 13, __pyx_L1_error)
   __pyx_t_2 = __pyx_t_4;
   __pyx_L4_bool_binop_done:;
   if (__pyx_t_2) {
 
     /* "(tree fragment)":14
- *     __pyx_result._ImmutableNamespaceDict__data = __pyx_state[0]
- *     if len(__pyx_state) > 1 and hasattr(__pyx_result, '__dict__'):
- *         __pyx_result.__dict__.update(__pyx_state[1])             # <<<<<<<<<<<<<<
+ *     __pyx_result.__name__ = __pyx_state[0]; __pyx_result.__wrapped__ = __pyx_state[1]; __pyx_result._has_contracts = __pyx_state[2]; __pyx_result._sig_errors = __pyx_state[3]; __pyx_result.contract_functions = __pyx_state[4]; __pyx_result.contracts = __pyx_state[5]; __pyx_result.func = __pyx_state[6]; __pyx_result.hub = __pyx_state[7]; __pyx_result.implicit_hub = __pyx_state[8]; __pyx_result.ref = __pyx_state[9]; __pyx_result.signature = __pyx_state[10]
+ *     if len(__pyx_state) > 11 and hasattr(__pyx_result, '__dict__'):
+ *         __pyx_result.__dict__.update(__pyx_state[11])             # <<<<<<<<<<<<<<
  */
     __pyx_t_5 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v___pyx_result), __pyx_n_s_dict); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_update); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 14, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_6);
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     if (unlikely(__pyx_v___pyx_state == Py_None)) {
       PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
       __PYX_ERR(2, 14, __pyx_L1_error)
     }
-    __pyx_t_5 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 11, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __pyx_t_7 = NULL;
     __pyx_t_8 = 0;
     #if CYTHON_UNPACK_METHODS
     if (likely(PyMethod_Check(__pyx_t_6))) {
       __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
       if (likely(__pyx_t_7)) {
@@ -12416,318 +12613,278 @@
       if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 14, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
     }
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
     /* "(tree fragment)":13
- * cdef __pyx_unpickle_ImmutableNamespaceDict__set_state(ImmutableNamespaceDict __pyx_result, tuple __pyx_state):
- *     __pyx_result._ImmutableNamespaceDict__data = __pyx_state[0]
- *     if len(__pyx_state) > 1 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
- *         __pyx_result.__dict__.update(__pyx_state[1])
+ * cdef __pyx_unpickle_Contracted__set_state(Contracted __pyx_result, tuple __pyx_state):
+ *     __pyx_result.__name__ = __pyx_state[0]; __pyx_result.__wrapped__ = __pyx_state[1]; __pyx_result._has_contracts = __pyx_state[2]; __pyx_result._sig_errors = __pyx_state[3]; __pyx_result.contract_functions = __pyx_state[4]; __pyx_result.contracts = __pyx_state[5]; __pyx_result.func = __pyx_state[6]; __pyx_result.hub = __pyx_state[7]; __pyx_result.implicit_hub = __pyx_state[8]; __pyx_result.ref = __pyx_state[9]; __pyx_result.signature = __pyx_state[10]
+ *     if len(__pyx_state) > 11 and hasattr(__pyx_result, '__dict__'):             # <<<<<<<<<<<<<<
+ *         __pyx_result.__dict__.update(__pyx_state[11])
  */
   }
 
   /* "(tree fragment)":11
- *         __pyx_unpickle_ImmutableNamespaceDict__set_state(<ImmutableNamespaceDict> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_Contracted__set_state(<Contracted> __pyx_result, __pyx_state)
  *     return __pyx_result
- * cdef __pyx_unpickle_ImmutableNamespaceDict__set_state(ImmutableNamespaceDict __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_result._ImmutableNamespaceDict__data = __pyx_state[0]
- *     if len(__pyx_state) > 1 and hasattr(__pyx_result, '__dict__'):
+ * cdef __pyx_unpickle_Contracted__set_state(Contracted __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
+ *     __pyx_result.__name__ = __pyx_state[0]; __pyx_result.__wrapped__ = __pyx_state[1]; __pyx_result._has_contracts = __pyx_state[2]; __pyx_result._sig_errors = __pyx_state[3]; __pyx_result.contract_functions = __pyx_state[4]; __pyx_result.contracts = __pyx_state[5]; __pyx_result.func = __pyx_state[6]; __pyx_result.hub = __pyx_state[7]; __pyx_result.implicit_hub = __pyx_state[8]; __pyx_result.ref = __pyx_state[9]; __pyx_result.signature = __pyx_state[10]
+ *     if len(__pyx_state) > 11 and hasattr(__pyx_result, '__dict__'):
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
   __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_AddTraceback("pop.data.__pyx_unpickle_ImmutableNamespaceDict__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("pop.contract.__pyx_unpickle_Contracted__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = 0;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static int __pyx_tp_traverse_3pop_4data_NamespaceDict(PyObject *o, visitproc v, void *a) {
-  int e;
-  if (!(&PyDict_Type)->tp_traverse); else { e = (&PyDict_Type)->tp_traverse(o,v,a); if (e) return e; }
-  return 0;
-}
-
-static int __pyx_tp_clear_3pop_4data_NamespaceDict(PyObject *o) {
-  if (!(&PyDict_Type)->tp_clear); else (&PyDict_Type)->tp_clear(o);
-  return 0;
-}
-
-static PyObject *__pyx_tp_getattro_3pop_4data_NamespaceDict(PyObject *o, PyObject *n) {
-  PyObject *v = __Pyx_PyObject_GenericGetAttr(o, n);
-  if (!v && PyErr_ExceptionMatches(PyExc_AttributeError)) {
-    PyErr_Clear();
-    v = __pyx_pw_3pop_4data_13NamespaceDict_1__getattr__(o, n);
-  }
-  return v;
-}
-
-static int __pyx_tp_setattro_3pop_4data_NamespaceDict(PyObject *o, PyObject *n, PyObject *v) {
-  if (v) {
-    return __pyx_pw_3pop_4data_13NamespaceDict_3__setattr__(o, n, v);
-  }
-  else {
-    if ((&PyDict_Type)->tp_setattro)
-      return (&PyDict_Type)->tp_setattro(o, n, v);
-    return PyObject_GenericSetAttr(o, n, 0);
-  }
-}
-
-static PyMethodDef __pyx_methods_3pop_4data_NamespaceDict[] = {
-  {"__getattr__", (PyCFunction)__pyx_pw_3pop_4data_13NamespaceDict_1__getattr__, METH_O|METH_COEXIST, 0},
-  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_13NamespaceDict_5__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_13NamespaceDict_7__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {0, 0, 0, 0}
-};
-#if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_3pop_4data_NamespaceDict_slots[] = {
-  {Py_tp_getattro, (void *)__pyx_tp_getattro_3pop_4data_NamespaceDict},
-  {Py_tp_setattro, (void *)__pyx_tp_setattro_3pop_4data_NamespaceDict},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data_NamespaceDict},
-  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_4data_NamespaceDict},
-  {Py_tp_methods, (void *)__pyx_methods_3pop_4data_NamespaceDict},
-  {0, 0},
-};
-static PyType_Spec __pyx_type_3pop_4data_NamespaceDict_spec = {
-  "pop.data.NamespaceDict",
-  sizeof(struct __pyx_obj_3pop_4data_NamespaceDict),
-  0,
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_3pop_4data_NamespaceDict_slots,
-};
-#else
-
-static PyTypeObject __pyx_type_3pop_4data_NamespaceDict = {
-  PyVarObject_HEAD_INIT(0, 0)
-  "pop.data.""NamespaceDict", /*tp_name*/
-  sizeof(struct __pyx_obj_3pop_4data_NamespaceDict), /*tp_basicsize*/
-  0, /*tp_itemsize*/
-  0, /*tp_dealloc*/
-  #if PY_VERSION_HEX < 0x030800b4
-  0, /*tp_print*/
-  #endif
-  #if PY_VERSION_HEX >= 0x030800b4
-  0, /*tp_vectorcall_offset*/
-  #endif
-  0, /*tp_getattr*/
-  0, /*tp_setattr*/
-  #if PY_MAJOR_VERSION < 3
-  0, /*tp_compare*/
-  #endif
-  #if PY_MAJOR_VERSION >= 3
-  0, /*tp_as_async*/
-  #endif
-  0, /*tp_repr*/
-  0, /*tp_as_number*/
-  0, /*tp_as_sequence*/
-  0, /*tp_as_mapping*/
-  0, /*tp_hash*/
-  0, /*tp_call*/
-  0, /*tp_str*/
-  __pyx_tp_getattro_3pop_4data_NamespaceDict, /*tp_getattro*/
-  __pyx_tp_setattro_3pop_4data_NamespaceDict, /*tp_setattro*/
-  0, /*tp_as_buffer*/
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
-  0, /*tp_doc*/
-  __pyx_tp_traverse_3pop_4data_NamespaceDict, /*tp_traverse*/
-  __pyx_tp_clear_3pop_4data_NamespaceDict, /*tp_clear*/
-  0, /*tp_richcompare*/
-  0, /*tp_weaklistoffset*/
-  0, /*tp_iter*/
-  0, /*tp_iternext*/
-  __pyx_methods_3pop_4data_NamespaceDict, /*tp_methods*/
-  0, /*tp_members*/
-  0, /*tp_getset*/
-  0, /*tp_base*/
-  0, /*tp_dict*/
-  0, /*tp_descr_get*/
-  0, /*tp_descr_set*/
-  #if !CYTHON_USE_TYPE_SPECS
-  0, /*tp_dictoffset*/
-  #endif
-  0, /*tp_init*/
-  0, /*tp_alloc*/
-  0, /*tp_new*/
-  0, /*tp_free*/
-  0, /*tp_is_gc*/
-  0, /*tp_bases*/
-  0, /*tp_mro*/
-  0, /*tp_cache*/
-  0, /*tp_subclasses*/
-  0, /*tp_weaklist*/
-  0, /*tp_del*/
-  0, /*tp_version_tag*/
-  #if PY_VERSION_HEX >= 0x030400a1
-  #if CYTHON_USE_TP_FINALIZE
-  0, /*tp_finalize*/
-  #else
-  NULL, /*tp_finalize*/
-  #endif
-  #endif
-  #if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
-  0, /*tp_vectorcall*/
-  #endif
-  #if __PYX_NEED_TP_PRINT_SLOT == 1
-  0, /*tp_print*/
-  #endif
-  #if PY_VERSION_HEX >= 0x030C0000
-  0, /*tp_watched*/
-  #endif
-  #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
-  0, /*tp_pypy_flags*/
-  #endif
-};
-#endif
-static struct __pyx_vtabstruct_3pop_4data_MultidictCache __pyx_vtable_3pop_4data_MultidictCache;
-
-static PyObject *__pyx_tp_new_3pop_4data_MultidictCache(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
-  struct __pyx_obj_3pop_4data_MultidictCache *p;
+static PyObject *__pyx_tp_new_3pop_8contract_ContractedContext(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+  struct __pyx_obj_3pop_8contract_ContractedContext *p;
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   if (likely(!__Pyx_PyType_HasFeature(t, Py_TPFLAGS_IS_ABSTRACT))) {
     o = (*t->tp_alloc)(t, 0);
   } else {
     o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
   }
   if (unlikely(!o)) return 0;
   #endif
-  p = ((struct __pyx_obj_3pop_4data_MultidictCache *)o);
-  p->__pyx_vtab = __pyx_vtabptr_3pop_4data_MultidictCache;
-  p->_cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
-  p->_base_dicts = ((PyObject*)Py_None); Py_INCREF(Py_None);
-  p->_split_cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p = ((struct __pyx_obj_3pop_8contract_ContractedContext *)o);
+  p->func = Py_None; Py_INCREF(Py_None);
+  p->args = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p->kwargs = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p->ref = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p->__name__ = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p->ret = Py_None; Py_INCREF(Py_None);
+  p->signature = Py_None; Py_INCREF(Py_None);
+  p->_ContractedContext__cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
   return o;
 }
 
-static void __pyx_tp_dealloc_3pop_4data_MultidictCache(PyObject *o) {
-  struct __pyx_obj_3pop_4data_MultidictCache *p = (struct __pyx_obj_3pop_4data_MultidictCache *)o;
+static void __pyx_tp_dealloc_3pop_8contract_ContractedContext(PyObject *o) {
+  struct __pyx_obj_3pop_8contract_ContractedContext *p = (struct __pyx_obj_3pop_8contract_ContractedContext *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data_MultidictCache) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_8contract_ContractedContext) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
-  Py_CLEAR(p->_cache);
-  Py_CLEAR(p->_base_dicts);
-  Py_CLEAR(p->_split_cache);
+  Py_CLEAR(p->func);
+  Py_CLEAR(p->args);
+  Py_CLEAR(p->kwargs);
+  Py_CLEAR(p->ref);
+  Py_CLEAR(p->__name__);
+  Py_CLEAR(p->ret);
+  Py_CLEAR(p->signature);
+  Py_CLEAR(p->_ContractedContext__cache);
   #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
   (*Py_TYPE(o)->tp_free)(o);
   #else
   {
     freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
     if (tp_free) tp_free(o);
   }
   #endif
 }
 
-static int __pyx_tp_traverse_3pop_4data_MultidictCache(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_8contract_ContractedContext(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_3pop_4data_MultidictCache *p = (struct __pyx_obj_3pop_4data_MultidictCache *)o;
-  if (p->_cache) {
-    e = (*v)(p->_cache, a); if (e) return e;
+  struct __pyx_obj_3pop_8contract_ContractedContext *p = (struct __pyx_obj_3pop_8contract_ContractedContext *)o;
+  if (p->func) {
+    e = (*v)(p->func, a); if (e) return e;
+  }
+  if (p->args) {
+    e = (*v)(p->args, a); if (e) return e;
   }
-  if (p->_base_dicts) {
-    e = (*v)(p->_base_dicts, a); if (e) return e;
+  if (p->kwargs) {
+    e = (*v)(p->kwargs, a); if (e) return e;
   }
-  if (p->_split_cache) {
-    e = (*v)(p->_split_cache, a); if (e) return e;
+  if (p->ret) {
+    e = (*v)(p->ret, a); if (e) return e;
+  }
+  if (p->signature) {
+    e = (*v)(p->signature, a); if (e) return e;
+  }
+  if (p->_ContractedContext__cache) {
+    e = (*v)(p->_ContractedContext__cache, a); if (e) return e;
   }
   return 0;
 }
 
-static int __pyx_tp_clear_3pop_4data_MultidictCache(PyObject *o) {
+static int __pyx_tp_clear_3pop_8contract_ContractedContext(PyObject *o) {
   PyObject* tmp;
-  struct __pyx_obj_3pop_4data_MultidictCache *p = (struct __pyx_obj_3pop_4data_MultidictCache *)o;
-  tmp = ((PyObject*)p->_cache);
-  p->_cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  struct __pyx_obj_3pop_8contract_ContractedContext *p = (struct __pyx_obj_3pop_8contract_ContractedContext *)o;
+  tmp = ((PyObject*)p->func);
+  p->func = Py_None; Py_INCREF(Py_None);
+  Py_XDECREF(tmp);
+  tmp = ((PyObject*)p->args);
+  p->args = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  Py_XDECREF(tmp);
+  tmp = ((PyObject*)p->kwargs);
+  p->kwargs = ((PyObject*)Py_None); Py_INCREF(Py_None);
   Py_XDECREF(tmp);
-  tmp = ((PyObject*)p->_base_dicts);
-  p->_base_dicts = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  tmp = ((PyObject*)p->ret);
+  p->ret = Py_None; Py_INCREF(Py_None);
   Py_XDECREF(tmp);
-  tmp = ((PyObject*)p->_split_cache);
-  p->_split_cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  tmp = ((PyObject*)p->signature);
+  p->signature = Py_None; Py_INCREF(Py_None);
+  Py_XDECREF(tmp);
+  tmp = ((PyObject*)p->_ContractedContext__cache);
+  p->_ContractedContext__cache = ((PyObject*)Py_None); Py_INCREF(Py_None);
   Py_XDECREF(tmp);
   return 0;
 }
-static PyObject *__pyx_sq_item_3pop_4data_MultidictCache(PyObject *o, Py_ssize_t i) {
-  PyObject *r;
-  PyObject *x = PyInt_FromSsize_t(i); if(!x) return 0;
-  r = Py_TYPE(o)->tp_as_mapping->mp_subscript(o, x);
-  Py_DECREF(x);
-  return r;
+
+static PyObject *__pyx_getprop_3pop_8contract_17ContractedContext___signature__(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_17ContractedContext_13__signature___1__get__(o);
+}
+
+static PyObject *__pyx_getprop_3pop_8contract_17ContractedContext_cache(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_17ContractedContext_5cache_1__get__(o);
+}
+
+static PyObject *__pyx_getprop_3pop_8contract_17ContractedContext_func(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_17ContractedContext_4func_1__get__(o);
+}
+
+static int __pyx_setprop_3pop_8contract_17ContractedContext_func(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_17ContractedContext_4func_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_17ContractedContext_4func_5__del__(o);
+  }
+}
+
+static PyObject *__pyx_getprop_3pop_8contract_17ContractedContext_args(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_17ContractedContext_4args_1__get__(o);
+}
+
+static int __pyx_setprop_3pop_8contract_17ContractedContext_args(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_17ContractedContext_4args_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_17ContractedContext_4args_5__del__(o);
+  }
+}
+
+static PyObject *__pyx_getprop_3pop_8contract_17ContractedContext_kwargs(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_17ContractedContext_6kwargs_1__get__(o);
+}
+
+static int __pyx_setprop_3pop_8contract_17ContractedContext_kwargs(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_17ContractedContext_6kwargs_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_17ContractedContext_6kwargs_5__del__(o);
+  }
+}
+
+static PyObject *__pyx_getprop_3pop_8contract_17ContractedContext_ref(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_17ContractedContext_3ref_1__get__(o);
+}
+
+static int __pyx_setprop_3pop_8contract_17ContractedContext_ref(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_17ContractedContext_3ref_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_17ContractedContext_3ref_5__del__(o);
+  }
+}
+
+static PyObject *__pyx_getprop_3pop_8contract_17ContractedContext___name__(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_17ContractedContext_8__name___1__get__(o);
+}
+
+static int __pyx_setprop_3pop_8contract_17ContractedContext___name__(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_17ContractedContext_8__name___3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_17ContractedContext_8__name___5__del__(o);
+  }
+}
+
+static PyObject *__pyx_getprop_3pop_8contract_17ContractedContext_ret(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_17ContractedContext_3ret_1__get__(o);
+}
+
+static int __pyx_setprop_3pop_8contract_17ContractedContext_ret(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_17ContractedContext_3ret_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_17ContractedContext_3ret_5__del__(o);
+  }
 }
 
-static PyMethodDef __pyx_methods_3pop_4data_MultidictCache[] = {
-  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_11__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_14MultidictCache_13__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+static PyMethodDef __pyx_methods_3pop_8contract_ContractedContext[] = {
+  {"get_arguments", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_17ContractedContext_3get_arguments, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_3pop_8contract_17ContractedContext_2get_arguments},
+  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_17ContractedContext_5__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_17ContractedContext_7__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
   {0, 0, 0, 0}
 };
+
+static struct PyGetSetDef __pyx_getsets_3pop_8contract_ContractedContext[] = {
+  {(char *)"__signature__", __pyx_getprop_3pop_8contract_17ContractedContext___signature__, 0, (char *)0, 0},
+  {(char *)"cache", __pyx_getprop_3pop_8contract_17ContractedContext_cache, 0, (char *)0, 0},
+  {(char *)"func", __pyx_getprop_3pop_8contract_17ContractedContext_func, __pyx_setprop_3pop_8contract_17ContractedContext_func, (char *)0, 0},
+  {(char *)"args", __pyx_getprop_3pop_8contract_17ContractedContext_args, __pyx_setprop_3pop_8contract_17ContractedContext_args, (char *)0, 0},
+  {(char *)"kwargs", __pyx_getprop_3pop_8contract_17ContractedContext_kwargs, __pyx_setprop_3pop_8contract_17ContractedContext_kwargs, (char *)0, 0},
+  {(char *)"ref", __pyx_getprop_3pop_8contract_17ContractedContext_ref, __pyx_setprop_3pop_8contract_17ContractedContext_ref, (char *)0, 0},
+  {(char *)"__name__", __pyx_getprop_3pop_8contract_17ContractedContext___name__, __pyx_setprop_3pop_8contract_17ContractedContext___name__, (char *)0, 0},
+  {(char *)"ret", __pyx_getprop_3pop_8contract_17ContractedContext_ret, __pyx_setprop_3pop_8contract_17ContractedContext_ret, (char *)0, 0},
+  {0, 0, 0, 0, 0}
+};
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_3pop_4data_MultidictCache_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data_MultidictCache},
-  {Py_sq_item, (void *)__pyx_sq_item_3pop_4data_MultidictCache},
-  {Py_sq_contains, (void *)__pyx_pw_3pop_4data_14MultidictCache_9__contains__},
-  {Py_mp_subscript, (void *)__pyx_pw_3pop_4data_14MultidictCache_5__getitem__},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data_MultidictCache},
-  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_4data_MultidictCache},
-  {Py_tp_iter, (void *)__pyx_pw_3pop_4data_14MultidictCache_7__iter__},
-  {Py_tp_methods, (void *)__pyx_methods_3pop_4data_MultidictCache},
-  {Py_tp_init, (void *)__pyx_pw_3pop_4data_14MultidictCache_1__init__},
-  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data_MultidictCache},
+static PyType_Slot __pyx_type_3pop_8contract_ContractedContext_slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_8contract_ContractedContext},
+  {Py_tp_doc, (void *)PyDoc_STR("\n    Contracted function calling context\n    ")},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_8contract_ContractedContext},
+  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_8contract_ContractedContext},
+  {Py_tp_methods, (void *)__pyx_methods_3pop_8contract_ContractedContext},
+  {Py_tp_getset, (void *)__pyx_getsets_3pop_8contract_ContractedContext},
+  {Py_tp_init, (void *)__pyx_pw_3pop_8contract_17ContractedContext_1__init__},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_8contract_ContractedContext},
   {0, 0},
 };
-static PyType_Spec __pyx_type_3pop_4data_MultidictCache_spec = {
-  "pop.data.MultidictCache",
-  sizeof(struct __pyx_obj_3pop_4data_MultidictCache),
+static PyType_Spec __pyx_type_3pop_8contract_ContractedContext_spec = {
+  "pop.contract.ContractedContext",
+  sizeof(struct __pyx_obj_3pop_8contract_ContractedContext),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC,
-  __pyx_type_3pop_4data_MultidictCache_slots,
+  __pyx_type_3pop_8contract_ContractedContext_slots,
 };
 #else
 
-static PySequenceMethods __pyx_tp_as_sequence_MultidictCache = {
-  0, /*sq_length*/
-  0, /*sq_concat*/
-  0, /*sq_repeat*/
-  __pyx_sq_item_3pop_4data_MultidictCache, /*sq_item*/
-  0, /*sq_slice*/
-  0, /*sq_ass_item*/
-  0, /*sq_ass_slice*/
-  __pyx_pw_3pop_4data_14MultidictCache_9__contains__, /*sq_contains*/
-  0, /*sq_inplace_concat*/
-  0, /*sq_inplace_repeat*/
-};
-
-static PyMappingMethods __pyx_tp_as_mapping_MultidictCache = {
-  0, /*mp_length*/
-  __pyx_pw_3pop_4data_14MultidictCache_5__getitem__, /*mp_subscript*/
-  0, /*mp_ass_subscript*/
-};
-
-static PyTypeObject __pyx_type_3pop_4data_MultidictCache = {
+static PyTypeObject __pyx_type_3pop_8contract_ContractedContext = {
   PyVarObject_HEAD_INIT(0, 0)
-  "pop.data.""MultidictCache", /*tp_name*/
-  sizeof(struct __pyx_obj_3pop_4data_MultidictCache), /*tp_basicsize*/
+  "pop.contract.""ContractedContext", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_8contract_ContractedContext), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_3pop_4data_MultidictCache, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_8contract_ContractedContext, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -12736,43 +12893,43 @@
   0, /*tp_compare*/
   #endif
   #if PY_MAJOR_VERSION >= 3
   0, /*tp_as_async*/
   #endif
   0, /*tp_repr*/
   0, /*tp_as_number*/
-  &__pyx_tp_as_sequence_MultidictCache, /*tp_as_sequence*/
-  &__pyx_tp_as_mapping_MultidictCache, /*tp_as_mapping*/
+  0, /*tp_as_sequence*/
+  0, /*tp_as_mapping*/
   0, /*tp_hash*/
   0, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
-  0, /*tp_doc*/
-  __pyx_tp_traverse_3pop_4data_MultidictCache, /*tp_traverse*/
-  __pyx_tp_clear_3pop_4data_MultidictCache, /*tp_clear*/
+  PyDoc_STR("\n    Contracted function calling context\n    "), /*tp_doc*/
+  __pyx_tp_traverse_3pop_8contract_ContractedContext, /*tp_traverse*/
+  __pyx_tp_clear_3pop_8contract_ContractedContext, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
-  __pyx_pw_3pop_4data_14MultidictCache_7__iter__, /*tp_iter*/
+  0, /*tp_iter*/
   0, /*tp_iternext*/
-  __pyx_methods_3pop_4data_MultidictCache, /*tp_methods*/
+  __pyx_methods_3pop_8contract_ContractedContext, /*tp_methods*/
   0, /*tp_members*/
-  0, /*tp_getset*/
+  __pyx_getsets_3pop_8contract_ContractedContext, /*tp_getset*/
   0, /*tp_base*/
   0, /*tp_dict*/
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
-  __pyx_pw_3pop_4data_14MultidictCache_1__init__, /*tp_init*/
+  __pyx_pw_3pop_8contract_17ContractedContext_1__init__, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_3pop_4data_MultidictCache, /*tp_new*/
+  __pyx_tp_new_3pop_8contract_ContractedContext, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -12795,442 +12952,290 @@
   0, /*tp_watched*/
   #endif
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
+static struct __pyx_vtabstruct_3pop_8contract_Contracted __pyx_vtable_3pop_8contract_Contracted;
 
-static PyObject *__pyx_tp_new_3pop_4data_ImmutableNamespaceDict(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
-  struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *p;
+static PyObject *__pyx_tp_new_3pop_8contract_Contracted(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+  struct __pyx_obj_3pop_8contract_Contracted *p;
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   if (likely(!__Pyx_PyType_HasFeature(t, Py_TPFLAGS_IS_ABSTRACT))) {
     o = (*t->tp_alloc)(t, 0);
   } else {
     o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
   }
   if (unlikely(!o)) return 0;
   #endif
-  p = ((struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)o);
-  p->_ImmutableNamespaceDict__data = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p = ((struct __pyx_obj_3pop_8contract_Contracted *)o);
+  p->__pyx_vtab = __pyx_vtabptr_3pop_8contract_Contracted;
+  p->contract_functions = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p->hub = Py_None; Py_INCREF(Py_None);
+  p->func = Py_None; Py_INCREF(Py_None);
+  p->signature = Py_None; Py_INCREF(Py_None);
+  p->__name__ = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p->ref = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p->_sig_errors = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p->contracts = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  p->__pyx___wrapped__ = Py_None; Py_INCREF(Py_None);
   return o;
 }
 
-static void __pyx_tp_dealloc_3pop_4data_ImmutableNamespaceDict(PyObject *o) {
-  struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *p = (struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)o;
+static void __pyx_tp_dealloc_3pop_8contract_Contracted(PyObject *o) {
+  struct __pyx_obj_3pop_8contract_Contracted *p = (struct __pyx_obj_3pop_8contract_Contracted *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data_ImmutableNamespaceDict) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_8contract_Contracted) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
-  Py_CLEAR(p->_ImmutableNamespaceDict__data);
+  Py_CLEAR(p->contract_functions);
+  Py_CLEAR(p->hub);
+  Py_CLEAR(p->func);
+  Py_CLEAR(p->signature);
+  Py_CLEAR(p->__name__);
+  Py_CLEAR(p->ref);
+  Py_CLEAR(p->_sig_errors);
+  Py_CLEAR(p->contracts);
+  Py_CLEAR(p->__pyx___wrapped__);
   #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
   (*Py_TYPE(o)->tp_free)(o);
   #else
   {
     freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
     if (tp_free) tp_free(o);
   }
   #endif
 }
 
-static int __pyx_tp_traverse_3pop_4data_ImmutableNamespaceDict(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_8contract_Contracted(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *p = (struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)o;
-  if (p->_ImmutableNamespaceDict__data) {
-    e = (*v)(p->_ImmutableNamespaceDict__data, a); if (e) return e;
+  struct __pyx_obj_3pop_8contract_Contracted *p = (struct __pyx_obj_3pop_8contract_Contracted *)o;
+  if (p->contract_functions) {
+    e = (*v)(p->contract_functions, a); if (e) return e;
+  }
+  if (p->hub) {
+    e = (*v)(p->hub, a); if (e) return e;
+  }
+  if (p->func) {
+    e = (*v)(p->func, a); if (e) return e;
+  }
+  if (p->signature) {
+    e = (*v)(p->signature, a); if (e) return e;
+  }
+  if (p->_sig_errors) {
+    e = (*v)(p->_sig_errors, a); if (e) return e;
+  }
+  if (p->contracts) {
+    e = (*v)(p->contracts, a); if (e) return e;
+  }
+  if (p->__pyx___wrapped__) {
+    e = (*v)(p->__pyx___wrapped__, a); if (e) return e;
   }
   return 0;
 }
 
-static int __pyx_tp_clear_3pop_4data_ImmutableNamespaceDict(PyObject *o) {
+static int __pyx_tp_clear_3pop_8contract_Contracted(PyObject *o) {
   PyObject* tmp;
-  struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *p = (struct __pyx_obj_3pop_4data_ImmutableNamespaceDict *)o;
-  tmp = ((PyObject*)p->_ImmutableNamespaceDict__data);
-  p->_ImmutableNamespaceDict__data = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  struct __pyx_obj_3pop_8contract_Contracted *p = (struct __pyx_obj_3pop_8contract_Contracted *)o;
+  tmp = ((PyObject*)p->contract_functions);
+  p->contract_functions = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  Py_XDECREF(tmp);
+  tmp = ((PyObject*)p->hub);
+  p->hub = Py_None; Py_INCREF(Py_None);
+  Py_XDECREF(tmp);
+  tmp = ((PyObject*)p->func);
+  p->func = Py_None; Py_INCREF(Py_None);
+  Py_XDECREF(tmp);
+  tmp = ((PyObject*)p->signature);
+  p->signature = Py_None; Py_INCREF(Py_None);
+  Py_XDECREF(tmp);
+  tmp = ((PyObject*)p->_sig_errors);
+  p->_sig_errors = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  Py_XDECREF(tmp);
+  tmp = ((PyObject*)p->contracts);
+  p->contracts = ((PyObject*)Py_None); Py_INCREF(Py_None);
+  Py_XDECREF(tmp);
+  tmp = ((PyObject*)p->__pyx___wrapped__);
+  p->__pyx___wrapped__ = Py_None; Py_INCREF(Py_None);
   Py_XDECREF(tmp);
   return 0;
 }
-static PyObject *__pyx_sq_item_3pop_4data_ImmutableNamespaceDict(PyObject *o, Py_ssize_t i) {
-  PyObject *r;
-  PyObject *x = PyInt_FromSsize_t(i); if(!x) return 0;
-  r = Py_TYPE(o)->tp_as_mapping->mp_subscript(o, x);
-  Py_DECREF(x);
-  return r;
+
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted___signature__(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_13__signature___1__get__(o);
+}
+
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted___dict__(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_8__dict___1__get__(o);
+}
+
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted__has_contracts(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_14_has_contracts_1__get__(o);
 }
 
-static int __pyx_mp_ass_subscript_3pop_4data_ImmutableNamespaceDict(PyObject *o, PyObject *i, PyObject *v) {
+static int __pyx_setprop_3pop_8contract_10Contracted__has_contracts(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
   if (v) {
-    return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_9__setitem__(o, i, v);
+    return __pyx_pw_3pop_8contract_10Contracted_14_has_contracts_3__set__(o, v);
   }
   else {
-    __Pyx_TypeName o_type_name;
-    o_type_name = __Pyx_PyType_GetName(Py_TYPE(o));
-    PyErr_Format(PyExc_NotImplementedError,
-      "Subscript deletion not supported by " __Pyx_FMT_TYPENAME, o_type_name);
-    __Pyx_DECREF_TypeName(o_type_name);
+    PyErr_SetString(PyExc_NotImplementedError, "__del__");
     return -1;
   }
 }
 
-static PyObject *__pyx_tp_getattro_3pop_4data_ImmutableNamespaceDict(PyObject *o, PyObject *n) {
-  PyObject *v = __Pyx_PyObject_GenericGetAttr(o, n);
-  if (!v && PyErr_ExceptionMatches(PyExc_AttributeError)) {
-    PyErr_Clear();
-    v = __pyx_pw_3pop_4data_22ImmutableNamespaceDict_5__getattr__(o, n);
-  }
-  return v;
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted_implicit_hub(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_12implicit_hub_1__get__(o);
 }
 
-static int __pyx_tp_setattro_3pop_4data_ImmutableNamespaceDict(PyObject *o, PyObject *n, PyObject *v) {
+static int __pyx_setprop_3pop_8contract_10Contracted_implicit_hub(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
   if (v) {
-    return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_7__setattr__(o, n, v);
+    return __pyx_pw_3pop_8contract_10Contracted_12implicit_hub_3__set__(o, v);
   }
   else {
-    return PyObject_GenericSetAttr(o, n, 0);
+    PyErr_SetString(PyExc_NotImplementedError, "__del__");
+    return -1;
   }
 }
 
-static PyObject *__pyx_tp_richcompare_3pop_4data_ImmutableNamespaceDict(PyObject *o1, PyObject *o2, int op) {
-  switch (op) {
-    case Py_EQ: {
-      return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_23__eq__(o1, o2);
-    }
-    case Py_NE: {
-      return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_25__ne__(o1, o2);
-    }
-    default: {
-      return __Pyx_NewRef(Py_NotImplemented);
-    }
-  }
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted_contract_functions(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_18contract_functions_1__get__(o);
 }
 
-static PyObject *__pyx_getprop_3pop_4data_22ImmutableNamespaceDict__ImmutableNamespaceDict__data(PyObject *o, CYTHON_UNUSED void *x) {
-  return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_29_ImmutableNamespaceDict__data_1__get__(o);
+static int __pyx_setprop_3pop_8contract_10Contracted_contract_functions(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_10Contracted_18contract_functions_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_10Contracted_18contract_functions_5__del__(o);
+  }
 }
 
-static PyObject *__pyx_specialmethod___pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__(PyObject *self, CYTHON_UNUSED PyObject *arg) {
-  return __pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__(self);
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted_hub(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_3hub_1__get__(o);
 }
 
-static PyMethodDef __pyx_methods_3pop_4data_ImmutableNamespaceDict[] = {
-  {"__getattr__", (PyCFunction)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_5__getattr__, METH_O|METH_COEXIST, 0},
-  {"__repr__", (PyCFunction)__pyx_specialmethod___pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__, METH_NOARGS|METH_COEXIST, 0},
-  {"keys", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_27keys, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"values", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_29values, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"items", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_31items, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"get", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_33get, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"copy", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_35copy, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
-  {0, 0, 0, 0}
-};
-
-static struct PyGetSetDef __pyx_getsets_3pop_4data_ImmutableNamespaceDict[] = {
-  {(char *)"_ImmutableNamespaceDict__data", __pyx_getprop_3pop_4data_22ImmutableNamespaceDict__ImmutableNamespaceDict__data, 0, (char *)0, 0},
-  {0, 0, 0, 0, 0}
-};
-#if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_3pop_4data_ImmutableNamespaceDict_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data_ImmutableNamespaceDict},
-  {Py_tp_repr, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__},
-  {Py_nb_bool, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_17__bool__},
-  {Py_sq_length, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__},
-  {Py_sq_item, (void *)__pyx_sq_item_3pop_4data_ImmutableNamespaceDict},
-  {Py_sq_contains, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_19__contains__},
-  {Py_mp_length, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__},
-  {Py_mp_subscript, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_3__getitem__},
-  {Py_mp_ass_subscript, (void *)__pyx_mp_ass_subscript_3pop_4data_ImmutableNamespaceDict},
-  {Py_tp_call, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_11__call__},
-  {Py_tp_getattro, (void *)__pyx_tp_getattro_3pop_4data_ImmutableNamespaceDict},
-  {Py_tp_setattro, (void *)__pyx_tp_setattro_3pop_4data_ImmutableNamespaceDict},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data_ImmutableNamespaceDict},
-  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_4data_ImmutableNamespaceDict},
-  {Py_tp_richcompare, (void *)__pyx_tp_richcompare_3pop_4data_ImmutableNamespaceDict},
-  {Py_tp_iter, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_15__iter__},
-  {Py_tp_methods, (void *)__pyx_methods_3pop_4data_ImmutableNamespaceDict},
-  {Py_tp_getset, (void *)__pyx_getsets_3pop_4data_ImmutableNamespaceDict},
-  {Py_tp_init, (void *)__pyx_pw_3pop_4data_22ImmutableNamespaceDict_1__init__},
-  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data_ImmutableNamespaceDict},
-  {0, 0},
-};
-static PyType_Spec __pyx_type_3pop_4data_ImmutableNamespaceDict_spec = {
-  "pop.data.ImmutableNamespaceDict",
-  sizeof(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict),
-  0,
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC,
-  __pyx_type_3pop_4data_ImmutableNamespaceDict_slots,
-};
-#else
-
-static PyNumberMethods __pyx_tp_as_number_ImmutableNamespaceDict = {
-  0, /*nb_add*/
-  0, /*nb_subtract*/
-  0, /*nb_multiply*/
-  #if PY_MAJOR_VERSION < 3 || (CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX < 0x03050000)
-  0, /*nb_divide*/
-  #endif
-  0, /*nb_remainder*/
-  0, /*nb_divmod*/
-  0, /*nb_power*/
-  0, /*nb_negative*/
-  0, /*nb_positive*/
-  0, /*nb_absolute*/
-  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_17__bool__, /*nb_bool*/
-  0, /*nb_invert*/
-  0, /*nb_lshift*/
-  0, /*nb_rshift*/
-  0, /*nb_and*/
-  0, /*nb_xor*/
-  0, /*nb_or*/
-  #if PY_MAJOR_VERSION < 3 || (CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX < 0x03050000)
-  0, /*nb_coerce*/
-  #endif
-  0, /*nb_int*/
-  #if PY_MAJOR_VERSION < 3
-  0, /*nb_long*/
-  #else
-  0, /*reserved*/
-  #endif
-  0, /*nb_float*/
-  #if PY_MAJOR_VERSION < 3 || (CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX < 0x03050000)
-  0, /*nb_oct*/
-  #endif
-  #if PY_MAJOR_VERSION < 3 || (CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX < 0x03050000)
-  0, /*nb_hex*/
-  #endif
-  0, /*nb_inplace_add*/
-  0, /*nb_inplace_subtract*/
-  0, /*nb_inplace_multiply*/
-  #if PY_MAJOR_VERSION < 3 || (CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX < 0x03050000)
-  0, /*nb_inplace_divide*/
-  #endif
-  0, /*nb_inplace_remainder*/
-  0, /*nb_inplace_power*/
-  0, /*nb_inplace_lshift*/
-  0, /*nb_inplace_rshift*/
-  0, /*nb_inplace_and*/
-  0, /*nb_inplace_xor*/
-  0, /*nb_inplace_or*/
-  0, /*nb_floor_divide*/
-  0, /*nb_true_divide*/
-  0, /*nb_inplace_floor_divide*/
-  0, /*nb_inplace_true_divide*/
-  0, /*nb_index*/
-  #if PY_VERSION_HEX >= 0x03050000
-  0, /*nb_matrix_multiply*/
-  #endif
-  #if PY_VERSION_HEX >= 0x03050000
-  0, /*nb_inplace_matrix_multiply*/
-  #endif
-};
-
-static PySequenceMethods __pyx_tp_as_sequence_ImmutableNamespaceDict = {
-  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__, /*sq_length*/
-  0, /*sq_concat*/
-  0, /*sq_repeat*/
-  __pyx_sq_item_3pop_4data_ImmutableNamespaceDict, /*sq_item*/
-  0, /*sq_slice*/
-  0, /*sq_ass_item*/
-  0, /*sq_ass_slice*/
-  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_19__contains__, /*sq_contains*/
-  0, /*sq_inplace_concat*/
-  0, /*sq_inplace_repeat*/
-};
+static int __pyx_setprop_3pop_8contract_10Contracted_hub(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_10Contracted_3hub_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_10Contracted_3hub_5__del__(o);
+  }
+}
 
-static PyMappingMethods __pyx_tp_as_mapping_ImmutableNamespaceDict = {
-  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_13__len__, /*mp_length*/
-  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_3__getitem__, /*mp_subscript*/
-  __pyx_mp_ass_subscript_3pop_4data_ImmutableNamespaceDict, /*mp_ass_subscript*/
-};
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted_func(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_4func_1__get__(o);
+}
 
-static PyTypeObject __pyx_type_3pop_4data_ImmutableNamespaceDict = {
-  PyVarObject_HEAD_INIT(0, 0)
-  "pop.data.""ImmutableNamespaceDict", /*tp_name*/
-  sizeof(struct __pyx_obj_3pop_4data_ImmutableNamespaceDict), /*tp_basicsize*/
-  0, /*tp_itemsize*/
-  __pyx_tp_dealloc_3pop_4data_ImmutableNamespaceDict, /*tp_dealloc*/
-  #if PY_VERSION_HEX < 0x030800b4
-  0, /*tp_print*/
-  #endif
-  #if PY_VERSION_HEX >= 0x030800b4
-  0, /*tp_vectorcall_offset*/
-  #endif
-  0, /*tp_getattr*/
-  0, /*tp_setattr*/
-  #if PY_MAJOR_VERSION < 3
-  0, /*tp_compare*/
-  #endif
-  #if PY_MAJOR_VERSION >= 3
-  0, /*tp_as_async*/
-  #endif
-  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_21__repr__, /*tp_repr*/
-  &__pyx_tp_as_number_ImmutableNamespaceDict, /*tp_as_number*/
-  &__pyx_tp_as_sequence_ImmutableNamespaceDict, /*tp_as_sequence*/
-  &__pyx_tp_as_mapping_ImmutableNamespaceDict, /*tp_as_mapping*/
-  0, /*tp_hash*/
-  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_11__call__, /*tp_call*/
-  0, /*tp_str*/
-  __pyx_tp_getattro_3pop_4data_ImmutableNamespaceDict, /*tp_getattro*/
-  __pyx_tp_setattro_3pop_4data_ImmutableNamespaceDict, /*tp_setattro*/
-  0, /*tp_as_buffer*/
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
-  0, /*tp_doc*/
-  __pyx_tp_traverse_3pop_4data_ImmutableNamespaceDict, /*tp_traverse*/
-  __pyx_tp_clear_3pop_4data_ImmutableNamespaceDict, /*tp_clear*/
-  __pyx_tp_richcompare_3pop_4data_ImmutableNamespaceDict, /*tp_richcompare*/
-  0, /*tp_weaklistoffset*/
-  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_15__iter__, /*tp_iter*/
-  0, /*tp_iternext*/
-  __pyx_methods_3pop_4data_ImmutableNamespaceDict, /*tp_methods*/
-  0, /*tp_members*/
-  __pyx_getsets_3pop_4data_ImmutableNamespaceDict, /*tp_getset*/
-  0, /*tp_base*/
-  0, /*tp_dict*/
-  0, /*tp_descr_get*/
-  0, /*tp_descr_set*/
-  #if !CYTHON_USE_TYPE_SPECS
-  0, /*tp_dictoffset*/
-  #endif
-  __pyx_pw_3pop_4data_22ImmutableNamespaceDict_1__init__, /*tp_init*/
-  0, /*tp_alloc*/
-  __pyx_tp_new_3pop_4data_ImmutableNamespaceDict, /*tp_new*/
-  0, /*tp_free*/
-  0, /*tp_is_gc*/
-  0, /*tp_bases*/
-  0, /*tp_mro*/
-  0, /*tp_cache*/
-  0, /*tp_subclasses*/
-  0, /*tp_weaklist*/
-  0, /*tp_del*/
-  0, /*tp_version_tag*/
-  #if PY_VERSION_HEX >= 0x030400a1
-  #if CYTHON_USE_TP_FINALIZE
-  0, /*tp_finalize*/
-  #else
-  NULL, /*tp_finalize*/
-  #endif
-  #endif
-  #if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
-  0, /*tp_vectorcall*/
-  #endif
-  #if __PYX_NEED_TP_PRINT_SLOT == 1
-  0, /*tp_print*/
-  #endif
-  #if PY_VERSION_HEX >= 0x030C0000
-  0, /*tp_watched*/
-  #endif
-  #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
-  0, /*tp_pypy_flags*/
-  #endif
-};
-#endif
+static int __pyx_setprop_3pop_8contract_10Contracted_func(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_10Contracted_4func_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_10Contracted_4func_5__del__(o);
+  }
+}
 
-#if CYTHON_USE_FREELISTS
-static struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *__pyx_freelist_3pop_4data___pyx_scope_struct____contains__[8];
-static int __pyx_freecount_3pop_4data___pyx_scope_struct____contains__ = 0;
-#endif
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted_signature(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_9signature_1__get__(o);
+}
 
-static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct____contains__(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
-  PyObject *o;
-  #if CYTHON_COMPILING_IN_LIMITED_API
-  allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
-  o = alloc_func(t, 0);
-  #else
-  #if CYTHON_USE_FREELISTS
-  if (likely((int)(__pyx_freecount_3pop_4data___pyx_scope_struct____contains__ > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__)))) {
-    o = (PyObject*)__pyx_freelist_3pop_4data___pyx_scope_struct____contains__[--__pyx_freecount_3pop_4data___pyx_scope_struct____contains__];
-    memset(o, 0, sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__));
-    (void) PyObject_INIT(o, t);
-    PyObject_GC_Track(o);
-  } else
-  #endif
-  {
-    o = (*t->tp_alloc)(t, 0);
-    if (unlikely(!o)) return 0;
+static int __pyx_setprop_3pop_8contract_10Contracted_signature(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_10Contracted_9signature_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_10Contracted_9signature_5__del__(o);
   }
-  #endif
-  return o;
 }
 
-static void __pyx_tp_dealloc_3pop_4data___pyx_scope_struct____contains__(PyObject *o) {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)o;
-  #if CYTHON_USE_TP_FINALIZE
-  if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data___pyx_scope_struct____contains__) {
-      if (PyObject_CallFinalizerFromDealloc(o)) return;
-    }
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted___name__(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_8__name___1__get__(o);
+}
+
+static int __pyx_setprop_3pop_8contract_10Contracted___name__(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_10Contracted_8__name___3__set__(o, v);
   }
-  #endif
-  PyObject_GC_UnTrack(o);
-  Py_CLEAR(p->__pyx_v_item);
-  #if CYTHON_USE_FREELISTS
-  if (((int)(__pyx_freecount_3pop_4data___pyx_scope_struct____contains__ < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__)))) {
-    __pyx_freelist_3pop_4data___pyx_scope_struct____contains__[__pyx_freecount_3pop_4data___pyx_scope_struct____contains__++] = ((struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)o);
-  } else
-  #endif
-  {
-    #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
-    (*Py_TYPE(o)->tp_free)(o);
-    #else
-    {
-      freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
-      if (tp_free) tp_free(o);
-    }
-    #endif
+  else {
+    return __pyx_pw_3pop_8contract_10Contracted_8__name___5__del__(o);
   }
 }
 
-static int __pyx_tp_traverse_3pop_4data___pyx_scope_struct____contains__(PyObject *o, visitproc v, void *a) {
-  int e;
-  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)o;
-  if (p->__pyx_v_item) {
-    e = (*v)(p->__pyx_v_item, a); if (e) return e;
-  }
-  return 0;
+static PyObject *__pyx_getprop_3pop_8contract_10Contracted_ref(PyObject *o, CYTHON_UNUSED void *x) {
+  return __pyx_pw_3pop_8contract_10Contracted_3ref_1__get__(o);
 }
 
-static int __pyx_tp_clear_3pop_4data___pyx_scope_struct____contains__(PyObject *o) {
-  PyObject* tmp;
-  struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__ *)o;
-  tmp = ((PyObject*)p->__pyx_v_item);
-  p->__pyx_v_item = Py_None; Py_INCREF(Py_None);
-  Py_XDECREF(tmp);
-  return 0;
+static int __pyx_setprop_3pop_8contract_10Contracted_ref(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
+  if (v) {
+    return __pyx_pw_3pop_8contract_10Contracted_3ref_3__set__(o, v);
+  }
+  else {
+    return __pyx_pw_3pop_8contract_10Contracted_3ref_5__del__(o);
+  }
 }
+
+static PyMethodDef __pyx_methods_3pop_8contract_Contracted[] = {
+  {"__getstate__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_10Contracted_6__getstate__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"__setstate__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_10Contracted_8__setstate__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"__reduce_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_10Contracted_10__reduce_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {"__setstate_cython__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_3pop_8contract_10Contracted_12__setstate_cython__, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0},
+  {0, 0, 0, 0}
+};
+
+static struct PyGetSetDef __pyx_getsets_3pop_8contract_Contracted[] = {
+  {(char *)"__signature__", __pyx_getprop_3pop_8contract_10Contracted___signature__, 0, (char *)0, 0},
+  {(char *)"__dict__", __pyx_getprop_3pop_8contract_10Contracted___dict__, 0, (char *)0, 0},
+  {(char *)"_has_contracts", __pyx_getprop_3pop_8contract_10Contracted__has_contracts, __pyx_setprop_3pop_8contract_10Contracted__has_contracts, (char *)0, 0},
+  {(char *)"implicit_hub", __pyx_getprop_3pop_8contract_10Contracted_implicit_hub, __pyx_setprop_3pop_8contract_10Contracted_implicit_hub, (char *)0, 0},
+  {(char *)"contract_functions", __pyx_getprop_3pop_8contract_10Contracted_contract_functions, __pyx_setprop_3pop_8contract_10Contracted_contract_functions, (char *)0, 0},
+  {(char *)"hub", __pyx_getprop_3pop_8contract_10Contracted_hub, __pyx_setprop_3pop_8contract_10Contracted_hub, (char *)0, 0},
+  {(char *)"func", __pyx_getprop_3pop_8contract_10Contracted_func, __pyx_setprop_3pop_8contract_10Contracted_func, (char *)0, 0},
+  {(char *)"signature", __pyx_getprop_3pop_8contract_10Contracted_signature, __pyx_setprop_3pop_8contract_10Contracted_signature, (char *)0, 0},
+  {(char *)"__name__", __pyx_getprop_3pop_8contract_10Contracted___name__, __pyx_setprop_3pop_8contract_10Contracted___name__, (char *)0, 0},
+  {(char *)"ref", __pyx_getprop_3pop_8contract_10Contracted_ref, __pyx_setprop_3pop_8contract_10Contracted_ref, (char *)0, 0},
+  {0, 0, 0, 0, 0}
+};
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_3pop_4data___pyx_scope_struct____contains___slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data___pyx_scope_struct____contains__},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data___pyx_scope_struct____contains__},
-  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_4data___pyx_scope_struct____contains__},
-  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data___pyx_scope_struct____contains__},
+static PyType_Slot __pyx_type_3pop_8contract_Contracted_slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_8contract_Contracted},
+  {Py_tp_call, (void *)__pyx_pw_3pop_8contract_10Contracted_3__call__},
+  {Py_tp_doc, (void *)PyDoc_STR("\n    This class wraps functions that have a contract associated with them\n    and executes the contract routines\n    ")},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_8contract_Contracted},
+  {Py_tp_clear, (void *)__pyx_tp_clear_3pop_8contract_Contracted},
+  {Py_tp_methods, (void *)__pyx_methods_3pop_8contract_Contracted},
+  {Py_tp_getset, (void *)__pyx_getsets_3pop_8contract_Contracted},
+  {Py_tp_init, (void *)__pyx_pw_3pop_8contract_10Contracted_1__init__},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_8contract_Contracted},
   {0, 0},
 };
-static PyType_Spec __pyx_type_3pop_4data___pyx_scope_struct____contains___spec = {
-  "pop.data.__pyx_scope_struct____contains__",
-  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__),
+static PyType_Spec __pyx_type_3pop_8contract_Contracted_spec = {
+  "pop.contract.Contracted",
+  sizeof(struct __pyx_obj_3pop_8contract_Contracted),
   0,
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_3pop_4data___pyx_scope_struct____contains___slots,
+  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC,
+  __pyx_type_3pop_8contract_Contracted_slots,
 };
 #else
 
-static PyTypeObject __pyx_type_3pop_4data___pyx_scope_struct____contains__ = {
+static PyTypeObject __pyx_type_3pop_8contract_Contracted = {
   PyVarObject_HEAD_INIT(0, 0)
-  "pop.data.""__pyx_scope_struct____contains__", /*tp_name*/
-  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct____contains__), /*tp_basicsize*/
+  "pop.contract.""Contracted", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_8contract_Contracted), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_3pop_4data___pyx_scope_struct____contains__, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_8contract_Contracted, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -13242,40 +13247,40 @@
   0, /*tp_as_async*/
   #endif
   0, /*tp_repr*/
   0, /*tp_as_number*/
   0, /*tp_as_sequence*/
   0, /*tp_as_mapping*/
   0, /*tp_hash*/
-  0, /*tp_call*/
+  __pyx_pw_3pop_8contract_10Contracted_3__call__, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
-  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
-  0, /*tp_doc*/
-  __pyx_tp_traverse_3pop_4data___pyx_scope_struct____contains__, /*tp_traverse*/
-  __pyx_tp_clear_3pop_4data___pyx_scope_struct____contains__, /*tp_clear*/
+  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
+  PyDoc_STR("\n    This class wraps functions that have a contract associated with them\n    and executes the contract routines\n    "), /*tp_doc*/
+  __pyx_tp_traverse_3pop_8contract_Contracted, /*tp_traverse*/
+  __pyx_tp_clear_3pop_8contract_Contracted, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
   0, /*tp_iter*/
   0, /*tp_iternext*/
-  0, /*tp_methods*/
+  __pyx_methods_3pop_8contract_Contracted, /*tp_methods*/
   0, /*tp_members*/
-  0, /*tp_getset*/
+  __pyx_getsets_3pop_8contract_Contracted, /*tp_getset*/
   0, /*tp_base*/
   0, /*tp_dict*/
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
-  0, /*tp_init*/
+  __pyx_pw_3pop_8contract_10Contracted_1__init__, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_3pop_4data___pyx_scope_struct____contains__, /*tp_new*/
+  __pyx_tp_new_3pop_8contract_Contracted, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -13300,106 +13305,106 @@
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
 
 #if CYTHON_USE_FREELISTS
-static struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *__pyx_freelist_3pop_4data___pyx_scope_struct_1_genexpr[8];
-static int __pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr = 0;
+static struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *__pyx_freelist_3pop_8contract___pyx_scope_struct__genexpr[8];
+static int __pyx_freecount_3pop_8contract___pyx_scope_struct__genexpr = 0;
 #endif
 
-static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+static PyObject *__pyx_tp_new_3pop_8contract___pyx_scope_struct__genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   #if CYTHON_USE_FREELISTS
-  if (likely((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr)))) {
-    o = (PyObject*)__pyx_freelist_3pop_4data___pyx_scope_struct_1_genexpr[--__pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr];
-    memset(o, 0, sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr));
+  if (likely((int)(__pyx_freecount_3pop_8contract___pyx_scope_struct__genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr)))) {
+    o = (PyObject*)__pyx_freelist_3pop_8contract___pyx_scope_struct__genexpr[--__pyx_freecount_3pop_8contract___pyx_scope_struct__genexpr];
+    memset(o, 0, sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr));
     (void) PyObject_INIT(o, t);
     PyObject_GC_Track(o);
   } else
   #endif
   {
     o = (*t->tp_alloc)(t, 0);
     if (unlikely(!o)) return 0;
   }
   #endif
   return o;
 }
 
-static void __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_1_genexpr(PyObject *o) {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)o;
+static void __pyx_tp_dealloc_3pop_8contract___pyx_scope_struct__genexpr(PyObject *o) {
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *p = (struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_1_genexpr) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_8contract___pyx_scope_struct__genexpr) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
-  Py_CLEAR(p->__pyx_outer_scope);
   Py_CLEAR(p->__pyx_genexpr_arg_0);
-  Py_CLEAR(p->__pyx_v_base_dict);
+  Py_CLEAR(p->__pyx_v_l);
+  Py_CLEAR(p->__pyx_t_0);
   #if CYTHON_USE_FREELISTS
-  if (((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr)))) {
-    __pyx_freelist_3pop_4data___pyx_scope_struct_1_genexpr[__pyx_freecount_3pop_4data___pyx_scope_struct_1_genexpr++] = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)o);
+  if (((int)(__pyx_freecount_3pop_8contract___pyx_scope_struct__genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr)))) {
+    __pyx_freelist_3pop_8contract___pyx_scope_struct__genexpr[__pyx_freecount_3pop_8contract___pyx_scope_struct__genexpr++] = ((struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *)o);
   } else
   #endif
   {
     #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
     (*Py_TYPE(o)->tp_free)(o);
     #else
     {
       freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
       if (tp_free) tp_free(o);
     }
     #endif
   }
 }
 
-static int __pyx_tp_traverse_3pop_4data___pyx_scope_struct_1_genexpr(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_8contract___pyx_scope_struct__genexpr(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr *)o;
-  if (p->__pyx_outer_scope) {
-    e = (*v)(((PyObject *)p->__pyx_outer_scope), a); if (e) return e;
-  }
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *p = (struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr *)o;
   if (p->__pyx_genexpr_arg_0) {
     e = (*v)(p->__pyx_genexpr_arg_0, a); if (e) return e;
   }
-  if (p->__pyx_v_base_dict) {
-    e = (*v)(p->__pyx_v_base_dict, a); if (e) return e;
+  if (p->__pyx_v_l) {
+    e = (*v)(p->__pyx_v_l, a); if (e) return e;
+  }
+  if (p->__pyx_t_0) {
+    e = (*v)(p->__pyx_t_0, a); if (e) return e;
   }
   return 0;
 }
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data___pyx_scope_struct_1_genexpr},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data___pyx_scope_struct_1_genexpr},
-  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr},
+static PyType_Slot __pyx_type_3pop_8contract___pyx_scope_struct__genexpr_slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_8contract___pyx_scope_struct__genexpr},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_8contract___pyx_scope_struct__genexpr},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_8contract___pyx_scope_struct__genexpr},
   {0, 0},
 };
-static PyType_Spec __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_spec = {
-  "pop.data.__pyx_scope_struct_1_genexpr",
-  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr),
+static PyType_Spec __pyx_type_3pop_8contract___pyx_scope_struct__genexpr_spec = {
+  "pop.contract.__pyx_scope_struct__genexpr",
+  sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_slots,
+  __pyx_type_3pop_8contract___pyx_scope_struct__genexpr_slots,
 };
 #else
 
-static PyTypeObject __pyx_type_3pop_4data___pyx_scope_struct_1_genexpr = {
+static PyTypeObject __pyx_type_3pop_8contract___pyx_scope_struct__genexpr = {
   PyVarObject_HEAD_INIT(0, 0)
-  "pop.data.""__pyx_scope_struct_1_genexpr", /*tp_name*/
-  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_1_genexpr), /*tp_basicsize*/
+  "pop.contract.""__pyx_scope_struct__genexpr", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct__genexpr), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_1_genexpr, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_8contract___pyx_scope_struct__genexpr, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -13418,15 +13423,15 @@
   0, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_3pop_4data___pyx_scope_struct_1_genexpr, /*tp_traverse*/
+  __pyx_tp_traverse_3pop_8contract___pyx_scope_struct__genexpr, /*tp_traverse*/
   0, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
   0, /*tp_iter*/
   0, /*tp_iternext*/
   0, /*tp_methods*/
   0, /*tp_members*/
@@ -13436,15 +13441,15 @@
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
   0, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_3pop_4data___pyx_scope_struct_1_genexpr, /*tp_new*/
+  __pyx_tp_new_3pop_8contract___pyx_scope_struct__genexpr, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -13469,106 +13474,130 @@
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
 
 #if CYTHON_USE_FREELISTS
-static struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *__pyx_freelist_3pop_4data___pyx_scope_struct_2_genexpr[8];
-static int __pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr = 0;
+static struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *__pyx_freelist_3pop_8contract___pyx_scope_struct_1___call__[8];
+static int __pyx_freecount_3pop_8contract___pyx_scope_struct_1___call__ = 0;
 #endif
 
-static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+static PyObject *__pyx_tp_new_3pop_8contract___pyx_scope_struct_1___call__(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   #if CYTHON_USE_FREELISTS
-  if (likely((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr)))) {
-    o = (PyObject*)__pyx_freelist_3pop_4data___pyx_scope_struct_2_genexpr[--__pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr];
-    memset(o, 0, sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr));
+  if (likely((int)(__pyx_freecount_3pop_8contract___pyx_scope_struct_1___call__ > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__)))) {
+    o = (PyObject*)__pyx_freelist_3pop_8contract___pyx_scope_struct_1___call__[--__pyx_freecount_3pop_8contract___pyx_scope_struct_1___call__];
+    memset(o, 0, sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__));
     (void) PyObject_INIT(o, t);
     PyObject_GC_Track(o);
   } else
   #endif
   {
     o = (*t->tp_alloc)(t, 0);
     if (unlikely(!o)) return 0;
   }
   #endif
   return o;
 }
 
-static void __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_2_genexpr(PyObject *o) {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)o;
+static void __pyx_tp_dealloc_3pop_8contract___pyx_scope_struct_1___call__(PyObject *o) {
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *p = (struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_2_genexpr) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_8contract___pyx_scope_struct_1___call__) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
-  Py_CLEAR(p->__pyx_genexpr_arg_0);
-  Py_CLEAR(p->__pyx_v_value);
+  Py_CLEAR(p->__pyx_v_args);
+  Py_CLEAR(p->__pyx_v_contract_context);
+  Py_CLEAR(p->__pyx_v_fn);
+  Py_CLEAR(p->__pyx_v_kwargs);
+  Py_CLEAR(p->__pyx_v_post_ret);
+  Py_CLEAR(p->__pyx_v_pre_ret);
+  Py_CLEAR(p->__pyx_v_ret);
+  Py_CLEAR(p->__pyx_v_self);
   Py_CLEAR(p->__pyx_t_0);
   #if CYTHON_USE_FREELISTS
-  if (((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr)))) {
-    __pyx_freelist_3pop_4data___pyx_scope_struct_2_genexpr[__pyx_freecount_3pop_4data___pyx_scope_struct_2_genexpr++] = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)o);
+  if (((int)(__pyx_freecount_3pop_8contract___pyx_scope_struct_1___call__ < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__)))) {
+    __pyx_freelist_3pop_8contract___pyx_scope_struct_1___call__[__pyx_freecount_3pop_8contract___pyx_scope_struct_1___call__++] = ((struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *)o);
   } else
   #endif
   {
     #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
     (*Py_TYPE(o)->tp_free)(o);
     #else
     {
       freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
       if (tp_free) tp_free(o);
     }
     #endif
   }
 }
 
-static int __pyx_tp_traverse_3pop_4data___pyx_scope_struct_2_genexpr(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_8contract___pyx_scope_struct_1___call__(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr *)o;
-  if (p->__pyx_genexpr_arg_0) {
-    e = (*v)(p->__pyx_genexpr_arg_0, a); if (e) return e;
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *p = (struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__ *)o;
+  if (p->__pyx_v_args) {
+    e = (*v)(p->__pyx_v_args, a); if (e) return e;
+  }
+  if (p->__pyx_v_contract_context) {
+    e = (*v)(((PyObject *)p->__pyx_v_contract_context), a); if (e) return e;
+  }
+  if (p->__pyx_v_fn) {
+    e = (*v)(p->__pyx_v_fn, a); if (e) return e;
+  }
+  if (p->__pyx_v_kwargs) {
+    e = (*v)(p->__pyx_v_kwargs, a); if (e) return e;
+  }
+  if (p->__pyx_v_post_ret) {
+    e = (*v)(p->__pyx_v_post_ret, a); if (e) return e;
+  }
+  if (p->__pyx_v_pre_ret) {
+    e = (*v)(p->__pyx_v_pre_ret, a); if (e) return e;
   }
-  if (p->__pyx_v_value) {
-    e = (*v)(p->__pyx_v_value, a); if (e) return e;
+  if (p->__pyx_v_ret) {
+    e = (*v)(p->__pyx_v_ret, a); if (e) return e;
+  }
+  if (p->__pyx_v_self) {
+    e = (*v)(((PyObject *)p->__pyx_v_self), a); if (e) return e;
   }
   if (p->__pyx_t_0) {
     e = (*v)(p->__pyx_t_0, a); if (e) return e;
   }
   return 0;
 }
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data___pyx_scope_struct_2_genexpr},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data___pyx_scope_struct_2_genexpr},
-  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr},
+static PyType_Slot __pyx_type_3pop_8contract___pyx_scope_struct_1___call___slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_8contract___pyx_scope_struct_1___call__},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_8contract___pyx_scope_struct_1___call__},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_8contract___pyx_scope_struct_1___call__},
   {0, 0},
 };
-static PyType_Spec __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_spec = {
-  "pop.data.__pyx_scope_struct_2_genexpr",
-  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr),
+static PyType_Spec __pyx_type_3pop_8contract___pyx_scope_struct_1___call___spec = {
+  "pop.contract.__pyx_scope_struct_1___call__",
+  sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_slots,
+  __pyx_type_3pop_8contract___pyx_scope_struct_1___call___slots,
 };
 #else
 
-static PyTypeObject __pyx_type_3pop_4data___pyx_scope_struct_2_genexpr = {
+static PyTypeObject __pyx_type_3pop_8contract___pyx_scope_struct_1___call__ = {
   PyVarObject_HEAD_INIT(0, 0)
-  "pop.data.""__pyx_scope_struct_2_genexpr", /*tp_name*/
-  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_2_genexpr), /*tp_basicsize*/
+  "pop.contract.""__pyx_scope_struct_1___call__", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_1___call__), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_2_genexpr, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_8contract___pyx_scope_struct_1___call__, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -13587,15 +13616,15 @@
   0, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_3pop_4data___pyx_scope_struct_2_genexpr, /*tp_traverse*/
+  __pyx_tp_traverse_3pop_8contract___pyx_scope_struct_1___call__, /*tp_traverse*/
   0, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
   0, /*tp_iter*/
   0, /*tp_iternext*/
   0, /*tp_methods*/
   0, /*tp_members*/
@@ -13605,15 +13634,15 @@
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
   0, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_3pop_4data___pyx_scope_struct_2_genexpr, /*tp_new*/
+  __pyx_tp_new_3pop_8contract___pyx_scope_struct_1___call__, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -13638,106 +13667,134 @@
   #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
   0, /*tp_pypy_flags*/
   #endif
 };
 #endif
 
 #if CYTHON_USE_FREELISTS
-static struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *__pyx_freelist_3pop_4data___pyx_scope_struct_3_genexpr[8];
-static int __pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr = 0;
+static struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *__pyx_freelist_3pop_8contract___pyx_scope_struct_2___call__[8];
+static int __pyx_freecount_3pop_8contract___pyx_scope_struct_2___call__ = 0;
 #endif
 
-static PyObject *__pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
+static PyObject *__pyx_tp_new_3pop_8contract___pyx_scope_struct_2___call__(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
   PyObject *o;
   #if CYTHON_COMPILING_IN_LIMITED_API
   allocfunc alloc_func = (allocfunc)PyType_GetSlot(t, Py_tp_alloc);
   o = alloc_func(t, 0);
   #else
   #if CYTHON_USE_FREELISTS
-  if (likely((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr)))) {
-    o = (PyObject*)__pyx_freelist_3pop_4data___pyx_scope_struct_3_genexpr[--__pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr];
-    memset(o, 0, sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr));
+  if (likely((int)(__pyx_freecount_3pop_8contract___pyx_scope_struct_2___call__ > 0) & (int)(t->tp_basicsize == sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__)))) {
+    o = (PyObject*)__pyx_freelist_3pop_8contract___pyx_scope_struct_2___call__[--__pyx_freecount_3pop_8contract___pyx_scope_struct_2___call__];
+    memset(o, 0, sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__));
     (void) PyObject_INIT(o, t);
     PyObject_GC_Track(o);
   } else
   #endif
   {
     o = (*t->tp_alloc)(t, 0);
     if (unlikely(!o)) return 0;
   }
   #endif
   return o;
 }
 
-static void __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_3_genexpr(PyObject *o) {
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)o;
+static void __pyx_tp_dealloc_3pop_8contract___pyx_scope_struct_2___call__(PyObject *o) {
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *p = (struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *)o;
   #if CYTHON_USE_TP_FINALIZE
   if (unlikely((PY_VERSION_HEX >= 0x03080000 || __Pyx_PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE)) && __Pyx_PyObject_GetSlot(o, tp_finalize, destructor)) && !__Pyx_PyObject_GC_IsFinalized(o)) {
-    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_3_genexpr) {
+    if (__Pyx_PyObject_GetSlot(o, tp_dealloc, destructor) == __pyx_tp_dealloc_3pop_8contract___pyx_scope_struct_2___call__) {
       if (PyObject_CallFinalizerFromDealloc(o)) return;
     }
   }
   #endif
   PyObject_GC_UnTrack(o);
-  Py_CLEAR(p->__pyx_genexpr_arg_0);
-  Py_CLEAR(p->__pyx_v_value);
+  Py_CLEAR(p->__pyx_v_args);
+  Py_CLEAR(p->__pyx_v_chunk);
+  Py_CLEAR(p->__pyx_v_contract_context);
+  Py_CLEAR(p->__pyx_v_fn);
+  Py_CLEAR(p->__pyx_v_kwargs);
+  Py_CLEAR(p->__pyx_v_post_ret);
+  Py_CLEAR(p->__pyx_v_pre_ret);
+  Py_CLEAR(p->__pyx_v_ret);
+  Py_CLEAR(p->__pyx_v_self);
   Py_CLEAR(p->__pyx_t_0);
   #if CYTHON_USE_FREELISTS
-  if (((int)(__pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr)))) {
-    __pyx_freelist_3pop_4data___pyx_scope_struct_3_genexpr[__pyx_freecount_3pop_4data___pyx_scope_struct_3_genexpr++] = ((struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)o);
+  if (((int)(__pyx_freecount_3pop_8contract___pyx_scope_struct_2___call__ < 8) & (int)(Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__)))) {
+    __pyx_freelist_3pop_8contract___pyx_scope_struct_2___call__[__pyx_freecount_3pop_8contract___pyx_scope_struct_2___call__++] = ((struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *)o);
   } else
   #endif
   {
     #if CYTHON_USE_TYPE_SLOTS || CYTHON_COMPILING_IN_PYPY
     (*Py_TYPE(o)->tp_free)(o);
     #else
     {
       freefunc tp_free = (freefunc)PyType_GetSlot(Py_TYPE(o), Py_tp_free);
       if (tp_free) tp_free(o);
     }
     #endif
   }
 }
 
-static int __pyx_tp_traverse_3pop_4data___pyx_scope_struct_3_genexpr(PyObject *o, visitproc v, void *a) {
+static int __pyx_tp_traverse_3pop_8contract___pyx_scope_struct_2___call__(PyObject *o, visitproc v, void *a) {
   int e;
-  struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *p = (struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr *)o;
-  if (p->__pyx_genexpr_arg_0) {
-    e = (*v)(p->__pyx_genexpr_arg_0, a); if (e) return e;
+  struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *p = (struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__ *)o;
+  if (p->__pyx_v_args) {
+    e = (*v)(p->__pyx_v_args, a); if (e) return e;
+  }
+  if (p->__pyx_v_chunk) {
+    e = (*v)(p->__pyx_v_chunk, a); if (e) return e;
+  }
+  if (p->__pyx_v_contract_context) {
+    e = (*v)(((PyObject *)p->__pyx_v_contract_context), a); if (e) return e;
+  }
+  if (p->__pyx_v_fn) {
+    e = (*v)(p->__pyx_v_fn, a); if (e) return e;
   }
-  if (p->__pyx_v_value) {
-    e = (*v)(p->__pyx_v_value, a); if (e) return e;
+  if (p->__pyx_v_kwargs) {
+    e = (*v)(p->__pyx_v_kwargs, a); if (e) return e;
+  }
+  if (p->__pyx_v_post_ret) {
+    e = (*v)(p->__pyx_v_post_ret, a); if (e) return e;
+  }
+  if (p->__pyx_v_pre_ret) {
+    e = (*v)(p->__pyx_v_pre_ret, a); if (e) return e;
+  }
+  if (p->__pyx_v_ret) {
+    e = (*v)(p->__pyx_v_ret, a); if (e) return e;
+  }
+  if (p->__pyx_v_self) {
+    e = (*v)(p->__pyx_v_self, a); if (e) return e;
   }
   if (p->__pyx_t_0) {
     e = (*v)(p->__pyx_t_0, a); if (e) return e;
   }
   return 0;
 }
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_slots[] = {
-  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_4data___pyx_scope_struct_3_genexpr},
-  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_4data___pyx_scope_struct_3_genexpr},
-  {Py_tp_new, (void *)__pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr},
+static PyType_Slot __pyx_type_3pop_8contract___pyx_scope_struct_2___call___slots[] = {
+  {Py_tp_dealloc, (void *)__pyx_tp_dealloc_3pop_8contract___pyx_scope_struct_2___call__},
+  {Py_tp_traverse, (void *)__pyx_tp_traverse_3pop_8contract___pyx_scope_struct_2___call__},
+  {Py_tp_new, (void *)__pyx_tp_new_3pop_8contract___pyx_scope_struct_2___call__},
   {0, 0},
 };
-static PyType_Spec __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_spec = {
-  "pop.data.__pyx_scope_struct_3_genexpr",
-  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr),
+static PyType_Spec __pyx_type_3pop_8contract___pyx_scope_struct_2___call___spec = {
+  "pop.contract.__pyx_scope_struct_2___call__",
+  sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__),
   0,
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE,
-  __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_slots,
+  __pyx_type_3pop_8contract___pyx_scope_struct_2___call___slots,
 };
 #else
 
-static PyTypeObject __pyx_type_3pop_4data___pyx_scope_struct_3_genexpr = {
+static PyTypeObject __pyx_type_3pop_8contract___pyx_scope_struct_2___call__ = {
   PyVarObject_HEAD_INIT(0, 0)
-  "pop.data.""__pyx_scope_struct_3_genexpr", /*tp_name*/
-  sizeof(struct __pyx_obj_3pop_4data___pyx_scope_struct_3_genexpr), /*tp_basicsize*/
+  "pop.contract.""__pyx_scope_struct_2___call__", /*tp_name*/
+  sizeof(struct __pyx_obj_3pop_8contract___pyx_scope_struct_2___call__), /*tp_basicsize*/
   0, /*tp_itemsize*/
-  __pyx_tp_dealloc_3pop_4data___pyx_scope_struct_3_genexpr, /*tp_dealloc*/
+  __pyx_tp_dealloc_3pop_8contract___pyx_scope_struct_2___call__, /*tp_dealloc*/
   #if PY_VERSION_HEX < 0x030800b4
   0, /*tp_print*/
   #endif
   #if PY_VERSION_HEX >= 0x030800b4
   0, /*tp_vectorcall_offset*/
   #endif
   0, /*tp_getattr*/
@@ -13756,15 +13813,15 @@
   0, /*tp_call*/
   0, /*tp_str*/
   0, /*tp_getattro*/
   0, /*tp_setattro*/
   0, /*tp_as_buffer*/
   Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC|Py_TPFLAGS_HAVE_FINALIZE, /*tp_flags*/
   0, /*tp_doc*/
-  __pyx_tp_traverse_3pop_4data___pyx_scope_struct_3_genexpr, /*tp_traverse*/
+  __pyx_tp_traverse_3pop_8contract___pyx_scope_struct_2___call__, /*tp_traverse*/
   0, /*tp_clear*/
   0, /*tp_richcompare*/
   0, /*tp_weaklistoffset*/
   0, /*tp_iter*/
   0, /*tp_iternext*/
   0, /*tp_methods*/
   0, /*tp_members*/
@@ -13774,15 +13831,15 @@
   0, /*tp_descr_get*/
   0, /*tp_descr_set*/
   #if !CYTHON_USE_TYPE_SPECS
   0, /*tp_dictoffset*/
   #endif
   0, /*tp_init*/
   0, /*tp_alloc*/
-  __pyx_tp_new_3pop_4data___pyx_scope_struct_3_genexpr, /*tp_new*/
+  __pyx_tp_new_3pop_8contract___pyx_scope_struct_2___call__, /*tp_new*/
   0, /*tp_free*/
   0, /*tp_is_gc*/
   0, /*tp_bases*/
   0, /*tp_mro*/
   0, /*tp_cache*/
   0, /*tp_subclasses*/
   0, /*tp_weaklist*/
@@ -13823,376 +13880,328 @@
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
     {&__pyx_n_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 1},
-    {&__pyx_n_s_AttributeError, __pyx_k_AttributeError, sizeof(__pyx_k_AttributeError), 0, 0, 1, 1},
-    {&__pyx_n_s_ImmutableNamespaceDict, __pyx_k_ImmutableNamespaceDict, sizeof(__pyx_k_ImmutableNamespaceDict), 0, 0, 1, 1},
-    {&__pyx_n_s_ImmutableNamespaceDict___reduce, __pyx_k_ImmutableNamespaceDict___reduce, sizeof(__pyx_k_ImmutableNamespaceDict___reduce), 0, 0, 1, 1},
-    {&__pyx_n_s_ImmutableNamespaceDict___setstat, __pyx_k_ImmutableNamespaceDict___setstat, sizeof(__pyx_k_ImmutableNamespaceDict___setstat), 0, 0, 1, 1},
-    {&__pyx_n_s_ImmutableNamespaceDict__data, __pyx_k_ImmutableNamespaceDict__data, sizeof(__pyx_k_ImmutableNamespaceDict__data), 0, 0, 1, 1},
-    {&__pyx_n_u_ImmutableNamespaceDict__data, __pyx_k_ImmutableNamespaceDict__data, sizeof(__pyx_k_ImmutableNamespaceDict__data), 0, 1, 0, 1},
-    {&__pyx_n_s_ImmutableNamespaceDict_copy, __pyx_k_ImmutableNamespaceDict_copy, sizeof(__pyx_k_ImmutableNamespaceDict_copy), 0, 0, 1, 1},
-    {&__pyx_kp_u_ImmutableNamespaceDict_does_not, __pyx_k_ImmutableNamespaceDict_does_not, sizeof(__pyx_k_ImmutableNamespaceDict_does_not), 0, 1, 0, 0},
-    {&__pyx_kp_u_ImmutableNamespaceDict_does_not_2, __pyx_k_ImmutableNamespaceDict_does_not_2, sizeof(__pyx_k_ImmutableNamespaceDict_does_not_2), 0, 1, 0, 0},
-    {&__pyx_n_s_ImmutableNamespaceDict_get, __pyx_k_ImmutableNamespaceDict_get, sizeof(__pyx_k_ImmutableNamespaceDict_get), 0, 0, 1, 1},
-    {&__pyx_n_s_ImmutableNamespaceDict_items, __pyx_k_ImmutableNamespaceDict_items, sizeof(__pyx_k_ImmutableNamespaceDict_items), 0, 0, 1, 1},
-    {&__pyx_n_s_ImmutableNamespaceDict_keys, __pyx_k_ImmutableNamespaceDict_keys, sizeof(__pyx_k_ImmutableNamespaceDict_keys), 0, 0, 1, 1},
-    {&__pyx_n_s_ImmutableNamespaceDict_values, __pyx_k_ImmutableNamespaceDict_values, sizeof(__pyx_k_ImmutableNamespaceDict_values), 0, 0, 1, 1},
+    {&__pyx_n_s_Contracted, __pyx_k_Contracted, sizeof(__pyx_k_Contracted), 0, 0, 1, 1},
+    {&__pyx_n_s_ContractedAsyncGen, __pyx_k_ContractedAsyncGen, sizeof(__pyx_k_ContractedAsyncGen), 0, 0, 1, 1},
+    {&__pyx_n_s_ContractedAsyncGen___call, __pyx_k_ContractedAsyncGen___call, sizeof(__pyx_k_ContractedAsyncGen___call), 0, 0, 1, 1},
+    {&__pyx_n_s_ContractedContext, __pyx_k_ContractedContext, sizeof(__pyx_k_ContractedContext), 0, 0, 1, 1},
+    {&__pyx_n_s_ContractedContext___reduce_cytho, __pyx_k_ContractedContext___reduce_cytho, sizeof(__pyx_k_ContractedContext___reduce_cytho), 0, 0, 1, 1},
+    {&__pyx_n_s_ContractedContext___setstate_cyt, __pyx_k_ContractedContext___setstate_cyt, sizeof(__pyx_k_ContractedContext___setstate_cyt), 0, 0, 1, 1},
+    {&__pyx_n_s_ContractedContext_get_arguments, __pyx_k_ContractedContext_get_arguments, sizeof(__pyx_k_ContractedContext_get_arguments), 0, 0, 1, 1},
+    {&__pyx_n_s_Contracted___call, __pyx_k_Contracted___call, sizeof(__pyx_k_Contracted___call), 0, 0, 1, 1},
+    {&__pyx_n_s_Contracted___getstate, __pyx_k_Contracted___getstate, sizeof(__pyx_k_Contracted___getstate), 0, 0, 1, 1},
+    {&__pyx_n_s_Contracted___reduce_cython, __pyx_k_Contracted___reduce_cython, sizeof(__pyx_k_Contracted___reduce_cython), 0, 0, 1, 1},
+    {&__pyx_n_s_Contracted___setstate, __pyx_k_Contracted___setstate, sizeof(__pyx_k_Contracted___setstate), 0, 0, 1, 1},
+    {&__pyx_n_s_Contracted___setstate_cython, __pyx_k_Contracted___setstate_cython, sizeof(__pyx_k_Contracted___setstate_cython), 0, 0, 1, 1},
+    {&__pyx_n_s_Contracted__load_contracts_local, __pyx_k_Contracted__load_contracts_local, sizeof(__pyx_k_Contracted__load_contracts_local), 0, 0, 1, 1},
     {&__pyx_kp_s_Incompatible_checksums_0x_x_vs_0, __pyx_k_Incompatible_checksums_0x_x_vs_0, sizeof(__pyx_k_Incompatible_checksums_0x_x_vs_0), 0, 0, 1, 0},
     {&__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_2, __pyx_k_Incompatible_checksums_0x_x_vs_0_2, sizeof(__pyx_k_Incompatible_checksums_0x_x_vs_0_2), 0, 0, 1, 0},
-    {&__pyx_kp_s_Incompatible_checksums_0x_x_vs_0_3, __pyx_k_Incompatible_checksums_0x_x_vs_0_3, sizeof(__pyx_k_Incompatible_checksums_0x_x_vs_0_3), 0, 0, 1, 0},
-    {&__pyx_kp_u_Item, __pyx_k_Item, sizeof(__pyx_k_Item), 0, 1, 0, 0},
-    {&__pyx_n_s_KeyError, __pyx_k_KeyError, sizeof(__pyx_k_KeyError), 0, 0, 1, 1},
+    {&__pyx_n_s_Iterable, __pyx_k_Iterable, sizeof(__pyx_k_Iterable), 0, 0, 1, 1},
+    {&__pyx_kp_s_Iterable_str, __pyx_k_Iterable_str, sizeof(__pyx_k_Iterable_str), 0, 0, 1, 0},
     {&__pyx_n_s_Mapping, __pyx_k_Mapping, sizeof(__pyx_k_Mapping), 0, 0, 1, 1},
-    {&__pyx_n_s_MultidictCache, __pyx_k_MultidictCache, sizeof(__pyx_k_MultidictCache), 0, 0, 1, 1},
-    {&__pyx_n_s_MultidictCache___reduce_cython, __pyx_k_MultidictCache___reduce_cython, sizeof(__pyx_k_MultidictCache___reduce_cython), 0, 0, 1, 1},
-    {&__pyx_n_s_MultidictCache___setstate_cython, __pyx_k_MultidictCache___setstate_cython, sizeof(__pyx_k_MultidictCache___setstate_cython), 0, 0, 1, 1},
-    {&__pyx_n_s_MultidictCache__clear, __pyx_k_MultidictCache__clear, sizeof(__pyx_k_MultidictCache__clear), 0, 0, 1, 1},
-    {&__pyx_n_s_NamespaceDict, __pyx_k_NamespaceDict, sizeof(__pyx_k_NamespaceDict), 0, 0, 1, 1},
-    {&__pyx_n_s_NamespaceDict___reduce_cython, __pyx_k_NamespaceDict___reduce_cython, sizeof(__pyx_k_NamespaceDict___reduce_cython), 0, 0, 1, 1},
-    {&__pyx_n_s_NamespaceDict___setstate_cython, __pyx_k_NamespaceDict___setstate_cython, sizeof(__pyx_k_NamespaceDict___setstate_cython), 0, 0, 1, 1},
+    {&__pyx_kp_u_None, __pyx_k_None, sizeof(__pyx_k_None), 0, 1, 0, 0},
     {&__pyx_n_s_PickleError, __pyx_k_PickleError, sizeof(__pyx_k_PickleError), 0, 0, 1, 1},
-    {&__pyx_n_s_TypeError, __pyx_k_TypeError, sizeof(__pyx_k_TypeError), 0, 0, 1, 1},
-    {&__pyx_n_s__10, __pyx_k__10, sizeof(__pyx_k__10), 0, 0, 1, 1},
-    {&__pyx_kp_u__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 1, 0, 0},
-    {&__pyx_kp_u__3, __pyx_k__3, sizeof(__pyx_k__3), 0, 1, 0, 0},
+    {&__pyx_n_s__28, __pyx_k__28, sizeof(__pyx_k__28), 0, 0, 1, 1},
+    {&__pyx_kp_u__5, __pyx_k__5, sizeof(__pyx_k__5), 0, 1, 0, 0},
+    {&__pyx_n_s__7, __pyx_k__7, sizeof(__pyx_k__7), 0, 0, 1, 1},
+    {&__pyx_n_s_aiter, __pyx_k_aiter, sizeof(__pyx_k_aiter), 0, 0, 1, 1},
+    {&__pyx_n_s_anext, __pyx_k_anext, sizeof(__pyx_k_anext), 0, 0, 1, 1},
+    {&__pyx_n_s_apply_defaults, __pyx_k_apply_defaults, sizeof(__pyx_k_apply_defaults), 0, 0, 1, 1},
     {&__pyx_n_s_args, __pyx_k_args, sizeof(__pyx_k_args), 0, 0, 1, 1},
+    {&__pyx_n_s_arguments, __pyx_k_arguments, sizeof(__pyx_k_arguments), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
-    {&__pyx_n_s_base_dicts, __pyx_k_base_dicts, sizeof(__pyx_k_base_dicts), 0, 0, 1, 1},
-    {&__pyx_n_s_class_getitem, __pyx_k_class_getitem, sizeof(__pyx_k_class_getitem), 0, 0, 1, 1},
-    {&__pyx_n_s_clear, __pyx_k_clear, sizeof(__pyx_k_clear), 0, 0, 1, 1},
+    {&__pyx_n_s_await, __pyx_k_await, sizeof(__pyx_k_await), 0, 0, 1, 1},
+    {&__pyx_n_s_bind, __pyx_k_bind, sizeof(__pyx_k_bind), 0, 0, 1, 1},
+    {&__pyx_n_s_bool, __pyx_k_bool, sizeof(__pyx_k_bool), 0, 0, 1, 1},
+    {&__pyx_n_u_bound_signature, __pyx_k_bound_signature, sizeof(__pyx_k_bound_signature), 0, 1, 0, 1},
+    {&__pyx_n_s_cache, __pyx_k_cache, sizeof(__pyx_k_cache), 0, 0, 1, 1},
+    {&__pyx_n_u_call, __pyx_k_call, sizeof(__pyx_k_call), 0, 1, 0, 1},
+    {&__pyx_n_s_call_2, __pyx_k_call_2, sizeof(__pyx_k_call_2), 0, 0, 1, 1},
+    {&__pyx_n_s_chunk, __pyx_k_chunk, sizeof(__pyx_k_chunk), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
     {&__pyx_n_s_close, __pyx_k_close, sizeof(__pyx_k_close), 0, 0, 1, 1},
+    {&__pyx_n_s_cname, __pyx_k_cname, sizeof(__pyx_k_cname), 0, 0, 1, 1},
+    {&__pyx_n_s_cnames, __pyx_k_cnames, sizeof(__pyx_k_cnames), 0, 0, 1, 1},
     {&__pyx_n_s_collections_abc, __pyx_k_collections_abc, sizeof(__pyx_k_collections_abc), 0, 0, 1, 1},
-    {&__pyx_n_s_contains___locals_genexpr, __pyx_k_contains___locals_genexpr, sizeof(__pyx_k_contains___locals_genexpr), 0, 0, 1, 1},
-    {&__pyx_n_s_copy, __pyx_k_copy, sizeof(__pyx_k_copy), 0, 0, 1, 1},
-    {&__pyx_n_s_data, __pyx_k_data, sizeof(__pyx_k_data), 0, 0, 1, 1},
-    {&__pyx_n_s_default, __pyx_k_default, sizeof(__pyx_k_default), 0, 0, 1, 1},
-    {&__pyx_n_s_dest, __pyx_k_dest, sizeof(__pyx_k_dest), 0, 0, 1, 1},
+    {&__pyx_n_s_contract, __pyx_k_contract, sizeof(__pyx_k_contract), 0, 0, 1, 1},
+    {&__pyx_n_s_contract_context, __pyx_k_contract_context, sizeof(__pyx_k_contract_context), 0, 0, 1, 1},
+    {&__pyx_n_s_contract_functions, __pyx_k_contract_functions, sizeof(__pyx_k_contract_functions), 0, 0, 1, 1},
+    {&__pyx_n_s_contracts, __pyx_k_contracts, sizeof(__pyx_k_contracts), 0, 0, 1, 1},
+    {&__pyx_n_u_contracts, __pyx_k_contracts, sizeof(__pyx_k_contracts), 0, 1, 0, 1},
+    {&__pyx_n_u_contracts_2, __pyx_k_contracts_2, sizeof(__pyx_k_contracts_2), 0, 1, 0, 1},
+    {&__pyx_n_s_create_contracted, __pyx_k_create_contracted, sizeof(__pyx_k_create_contracted), 0, 0, 1, 1},
+    {&__pyx_n_s_default_contracts, __pyx_k_default_contracts, sizeof(__pyx_k_default_contracts), 0, 0, 1, 1},
     {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
     {&__pyx_n_s_dict_2, __pyx_k_dict_2, sizeof(__pyx_k_dict_2), 0, 0, 1, 1},
+    {&__pyx_kp_s_dict_str_object, __pyx_k_dict_str_object, sizeof(__pyx_k_dict_str_object), 0, 0, 1, 0},
     {&__pyx_kp_u_disable, __pyx_k_disable, sizeof(__pyx_k_disable), 0, 1, 0, 0},
+    {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
     {&__pyx_kp_u_enable, __pyx_k_enable, sizeof(__pyx_k_enable), 0, 1, 0, 0},
-    {&__pyx_n_s_eq, __pyx_k_eq, sizeof(__pyx_k_eq), 0, 0, 1, 1},
-    {&__pyx_n_s_extend, __pyx_k_extend, sizeof(__pyx_k_extend), 0, 0, 1, 1},
-    {&__pyx_n_s_freeze, __pyx_k_freeze, sizeof(__pyx_k_freeze), 0, 0, 1, 1},
-    {&__pyx_n_s_freeze_locals_genexpr, __pyx_k_freeze_locals_genexpr, sizeof(__pyx_k_freeze_locals_genexpr), 0, 0, 1, 1},
+    {&__pyx_n_s_fn, __pyx_k_fn, sizeof(__pyx_k_fn), 0, 0, 1, 1},
+    {&__pyx_n_s_func, __pyx_k_func, sizeof(__pyx_k_func), 0, 0, 1, 1},
+    {&__pyx_kp_s_functools_partial, __pyx_k_functools_partial, sizeof(__pyx_k_functools_partial), 0, 0, 1, 0},
     {&__pyx_kp_u_gc, __pyx_k_gc, sizeof(__pyx_k_gc), 0, 1, 0, 0},
     {&__pyx_n_s_genexpr, __pyx_k_genexpr, sizeof(__pyx_k_genexpr), 0, 0, 1, 1},
-    {&__pyx_n_s_get, __pyx_k_get, sizeof(__pyx_k_get), 0, 0, 1, 1},
-    {&__pyx_n_s_getattribute, __pyx_k_getattribute, sizeof(__pyx_k_getattribute), 0, 0, 1, 1},
+    {&__pyx_n_s_get_arguments, __pyx_k_get_arguments, sizeof(__pyx_k_get_arguments), 0, 0, 1, 1},
     {&__pyx_n_s_getstate, __pyx_k_getstate, sizeof(__pyx_k_getstate), 0, 0, 1, 1},
+    {&__pyx_n_s_has_contracts, __pyx_k_has_contracts, sizeof(__pyx_k_has_contracts), 0, 0, 1, 1},
+    {&__pyx_n_s_hub, __pyx_k_hub, sizeof(__pyx_k_hub), 0, 0, 1, 1},
+    {&__pyx_n_s_implicit_hub, __pyx_k_implicit_hub, sizeof(__pyx_k_implicit_hub), 0, 0, 1, 1},
+    {&__pyx_n_u_implicit_hub, __pyx_k_implicit_hub, sizeof(__pyx_k_implicit_hub), 0, 1, 0, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
+    {&__pyx_n_u_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 1, 0, 1},
+    {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
+    {&__pyx_n_s_initializing, __pyx_k_initializing, sizeof(__pyx_k_initializing), 0, 0, 1, 1},
+    {&__pyx_n_s_inspect, __pyx_k_inspect, sizeof(__pyx_k_inspect), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
+    {&__pyx_n_s_isasyncgenfunction, __pyx_k_isasyncgenfunction, sizeof(__pyx_k_isasyncgenfunction), 0, 0, 1, 1},
     {&__pyx_kp_u_isenabled, __pyx_k_isenabled, sizeof(__pyx_k_isenabled), 0, 1, 0, 0},
-    {&__pyx_n_s_items, __pyx_k_items, sizeof(__pyx_k_items), 0, 0, 1, 1},
-    {&__pyx_n_s_key, __pyx_k_key, sizeof(__pyx_k_key), 0, 0, 1, 1},
-    {&__pyx_n_s_keys, __pyx_k_keys, sizeof(__pyx_k_keys), 0, 0, 1, 1},
+    {&__pyx_n_s_kwargs, __pyx_k_kwargs, sizeof(__pyx_k_kwargs), 0, 0, 1, 1},
+    {&__pyx_kp_s_list_object, __pyx_k_list_object, sizeof(__pyx_k_list_object), 0, 0, 1, 0},
+    {&__pyx_kp_s_list_pop_loader_LoadedMod, __pyx_k_list_pop_loader_LoadedMod, sizeof(__pyx_k_list_pop_loader_LoadedMod), 0, 0, 1, 0},
+    {&__pyx_n_s_load_contract, __pyx_k_load_contract, sizeof(__pyx_k_load_contract), 0, 0, 1, 1},
+    {&__pyx_n_s_loaded_contracts, __pyx_k_loaded_contracts, sizeof(__pyx_k_loaded_contracts), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
-    {&__pyx_n_s_merge_lists, __pyx_k_merge_lists, sizeof(__pyx_k_merge_lists), 0, 0, 1, 1},
+    {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
+    {&__pyx_n_s_mod, __pyx_k_mod, sizeof(__pyx_k_mod), 0, 0, 1, 1},
+    {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
+    {&__pyx_n_s_mro_entries, __pyx_k_mro_entries, sizeof(__pyx_k_mro_entries), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
+    {&__pyx_n_u_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 1, 0, 1},
+    {&__pyx_n_s_name_2, __pyx_k_name_2, sizeof(__pyx_k_name_2), 0, 0, 1, 1},
     {&__pyx_n_s_new, __pyx_k_new, sizeof(__pyx_k_new), 0, 0, 1, 1},
-    {&__pyx_kp_u_not_found_in_any_base_dictionar, __pyx_k_not_found_in_any_base_dictionar, sizeof(__pyx_k_not_found_in_any_base_dictionar), 0, 1, 0, 0},
     {&__pyx_n_s_object, __pyx_k_object, sizeof(__pyx_k_object), 0, 0, 1, 1},
-    {&__pyx_kp_u_object_has_no_attribute, __pyx_k_object_has_no_attribute, sizeof(__pyx_k_object_has_no_attribute), 0, 1, 0, 0},
     {&__pyx_n_s_pickle, __pyx_k_pickle, sizeof(__pyx_k_pickle), 0, 0, 1, 1},
-    {&__pyx_n_s_pop_data, __pyx_k_pop_data, sizeof(__pyx_k_pop_data), 0, 0, 1, 1},
-    {&__pyx_kp_s_pop_pop_data_pyx, __pyx_k_pop_pop_data_pyx, sizeof(__pyx_k_pop_pop_data_pyx), 0, 0, 1, 0},
+    {&__pyx_n_s_pop, __pyx_k_pop, sizeof(__pyx_k_pop), 0, 0, 1, 1},
+    {&__pyx_n_s_pop_contract, __pyx_k_pop_contract, sizeof(__pyx_k_pop_contract), 0, 0, 1, 1},
+    {&__pyx_kp_s_pop_hub_Hub, __pyx_k_pop_hub_Hub, sizeof(__pyx_k_pop_hub_Hub), 0, 0, 1, 0},
+    {&__pyx_kp_s_pop_hub_Sub, __pyx_k_pop_hub_Sub, sizeof(__pyx_k_pop_hub_Sub), 0, 0, 1, 0},
+    {&__pyx_kp_s_pop_pop_contract_pyx, __pyx_k_pop_pop_contract_pyx, sizeof(__pyx_k_pop_pop_contract_pyx), 0, 0, 1, 0},
+    {&__pyx_n_u_post, __pyx_k_post, sizeof(__pyx_k_post), 0, 1, 0, 1},
+    {&__pyx_n_s_post_ret, __pyx_k_post_ret, sizeof(__pyx_k_post_ret), 0, 0, 1, 1},
+    {&__pyx_n_u_pre, __pyx_k_pre, sizeof(__pyx_k_pre), 0, 1, 0, 1},
+    {&__pyx_n_s_pre_ret, __pyx_k_pre_ret, sizeof(__pyx_k_pre_ret), 0, 0, 1, 1},
+    {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
+    {&__pyx_n_s_process_pre_result, __pyx_k_process_pre_result, sizeof(__pyx_k_process_pre_result), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_PickleError, __pyx_k_pyx_PickleError, sizeof(__pyx_k_pyx_PickleError), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_checksum, __pyx_k_pyx_checksum, sizeof(__pyx_k_pyx_checksum), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_result, __pyx_k_pyx_result, sizeof(__pyx_k_pyx_result), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_state, __pyx_k_pyx_state, sizeof(__pyx_k_pyx_state), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_type, __pyx_k_pyx_type, sizeof(__pyx_k_pyx_type), 0, 0, 1, 1},
-    {&__pyx_n_s_pyx_unpickle_ImmutableNamespac, __pyx_k_pyx_unpickle_ImmutableNamespac, sizeof(__pyx_k_pyx_unpickle_ImmutableNamespac), 0, 0, 1, 1},
-    {&__pyx_n_s_pyx_unpickle_MultidictCache, __pyx_k_pyx_unpickle_MultidictCache, sizeof(__pyx_k_pyx_unpickle_MultidictCache), 0, 0, 1, 1},
-    {&__pyx_n_s_pyx_unpickle_NamespaceDict, __pyx_k_pyx_unpickle_NamespaceDict, sizeof(__pyx_k_pyx_unpickle_NamespaceDict), 0, 0, 1, 1},
+    {&__pyx_n_s_pyx_unpickle_Contracted, __pyx_k_pyx_unpickle_Contracted, sizeof(__pyx_k_pyx_unpickle_Contracted), 0, 0, 1, 1},
+    {&__pyx_n_s_pyx_unpickle_ContractedContext, __pyx_k_pyx_unpickle_ContractedContext, sizeof(__pyx_k_pyx_unpickle_ContractedContext), 0, 0, 1, 1},
     {&__pyx_n_s_pyx_vtable, __pyx_k_pyx_vtable, sizeof(__pyx_k_pyx_vtable), 0, 0, 1, 1},
-    {&__pyx_n_s_recursive_update, __pyx_k_recursive_update, sizeof(__pyx_k_recursive_update), 0, 0, 1, 1},
+    {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
+    {&__pyx_n_s_raws, __pyx_k_raws, sizeof(__pyx_k_raws), 0, 0, 1, 1},
     {&__pyx_n_s_reduce, __pyx_k_reduce, sizeof(__pyx_k_reduce), 0, 0, 1, 1},
     {&__pyx_n_s_reduce_cython, __pyx_k_reduce_cython, sizeof(__pyx_k_reduce_cython), 0, 0, 1, 1},
     {&__pyx_n_s_reduce_ex, __pyx_k_reduce_ex, sizeof(__pyx_k_reduce_ex), 0, 0, 1, 1},
+    {&__pyx_n_s_ref, __pyx_k_ref, sizeof(__pyx_k_ref), 0, 0, 1, 1},
+    {&__pyx_n_u_ref, __pyx_k_ref, sizeof(__pyx_k_ref), 0, 1, 0, 1},
+    {&__pyx_n_s_ret, __pyx_k_ret, sizeof(__pyx_k_ret), 0, 0, 1, 1},
+    {&__pyx_n_s_return, __pyx_k_return, sizeof(__pyx_k_return), 0, 0, 1, 1},
     {&__pyx_n_s_self, __pyx_k_self, sizeof(__pyx_k_self), 0, 0, 1, 1},
     {&__pyx_n_s_send, __pyx_k_send, sizeof(__pyx_k_send), 0, 0, 1, 1},
-    {&__pyx_n_s_setattr, __pyx_k_setattr, sizeof(__pyx_k_setattr), 0, 0, 1, 1},
+    {&__pyx_n_s_set_name, __pyx_k_set_name, sizeof(__pyx_k_set_name), 0, 0, 1, 1},
     {&__pyx_n_s_setstate, __pyx_k_setstate, sizeof(__pyx_k_setstate), 0, 0, 1, 1},
     {&__pyx_n_s_setstate_cython, __pyx_k_setstate_cython, sizeof(__pyx_k_setstate_cython), 0, 0, 1, 1},
+    {&__pyx_n_s_signature, __pyx_k_signature, sizeof(__pyx_k_signature), 0, 0, 1, 1},
+    {&__pyx_n_s_spec, __pyx_k_spec, sizeof(__pyx_k_spec), 0, 0, 1, 1},
     {&__pyx_n_s_state, __pyx_k_state, sizeof(__pyx_k_state), 0, 0, 1, 1},
+    {&__pyx_n_s_str, __pyx_k_str, sizeof(__pyx_k_str), 0, 0, 1, 1},
     {&__pyx_kp_s_stringsource, __pyx_k_stringsource, sizeof(__pyx_k_stringsource), 0, 0, 1, 0},
+    {&__pyx_n_s_sum, __pyx_k_sum, sizeof(__pyx_k_sum), 0, 0, 1, 1},
+    {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
     {&__pyx_n_s_throw, __pyx_k_throw, sizeof(__pyx_k_throw), 0, 0, 1, 1},
-    {&__pyx_n_s_unfreeze, __pyx_k_unfreeze, sizeof(__pyx_k_unfreeze), 0, 0, 1, 1},
-    {&__pyx_n_s_upd, __pyx_k_upd, sizeof(__pyx_k_upd), 0, 0, 1, 1},
     {&__pyx_n_s_update, __pyx_k_update, sizeof(__pyx_k_update), 0, 0, 1, 1},
     {&__pyx_n_s_use_setstate, __pyx_k_use_setstate, sizeof(__pyx_k_use_setstate), 0, 0, 1, 1},
-    {&__pyx_n_s_value, __pyx_k_value, sizeof(__pyx_k_value), 0, 0, 1, 1},
     {&__pyx_n_s_values, __pyx_k_values, sizeof(__pyx_k_values), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_KeyError = __Pyx_GetBuiltinName(__pyx_n_s_KeyError); if (!__pyx_builtin_KeyError) __PYX_ERR(0, 17, __pyx_L1_error)
-  __pyx_builtin_AttributeError = __Pyx_GetBuiltinName(__pyx_n_s_AttributeError); if (!__pyx_builtin_AttributeError) __PYX_ERR(0, 18, __pyx_L1_error)
-  __pyx_builtin_object = __Pyx_GetBuiltinName(__pyx_n_s_object); if (!__pyx_builtin_object) __PYX_ERR(0, 35, __pyx_L1_error)
-  __pyx_builtin_TypeError = __Pyx_GetBuiltinName(__pyx_n_s_TypeError); if (!__pyx_builtin_TypeError) __PYX_ERR(0, 94, __pyx_L1_error)
+  __pyx_builtin_sum = __Pyx_GetBuiltinName(__pyx_n_s_sum); if (!__pyx_builtin_sum) __PYX_ERR(0, 164, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "pop/pop.data.pyx":94
- *             object.__setattr__(self, key, value)
- *         else:
- *             raise TypeError("ImmutableNamespaceDict does not support attribute assignment")             # <<<<<<<<<<<<<<
- * 
- *     def __setitem__(self, key, value):
- */
-  __pyx_tuple__4 = PyTuple_Pack(1, __pyx_kp_u_ImmutableNamespaceDict_does_not); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 94, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__4);
-  __Pyx_GIVEREF(__pyx_tuple__4);
-
-  /* "pop/pop.data.pyx":97
- * 
- *     def __setitem__(self, key, value):
- *         raise TypeError("ImmutableNamespaceDict does not support item assignment")             # <<<<<<<<<<<<<<
- * 
- *     def __call__(self):
- */
-  __pyx_tuple__5 = PyTuple_Pack(1, __pyx_kp_u_ImmutableNamespaceDict_does_not_2); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 97, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__5);
-  __Pyx_GIVEREF(__pyx_tuple__5);
-
-  /* "pop/pop.data.pyx":192
- *                 dest[key] = ret
- *             elif isinstance(dest_subkey, list) and isinstance(val, list) and merge_lists:
- *                 merged = dest_subkey[:]             # <<<<<<<<<<<<<<
- *                 merged.extend([x for x in val if x not in merged])
- *                 dest[key] = merged
- */
-  __pyx_slice__6 = PySlice_New(Py_None, Py_None, Py_None); if (unlikely(!__pyx_slice__6)) __PYX_ERR(0, 192, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_slice__6);
-  __Pyx_GIVEREF(__pyx_slice__6);
+  /* "pop/pop.contract.pyx":161
+ *         self.contract_functions = {
+ *             "pre": self._get_contracts_by_type("pre"),
+ *             "call": self._get_contracts_by_type("call")[:1],             # <<<<<<<<<<<<<<
+ *             "post": self._get_contracts_by_type("post"),
+ *         }
+ */
+  __pyx_slice__2 = PySlice_New(Py_None, __pyx_int_1, Py_None); if (unlikely(!__pyx_slice__2)) __PYX_ERR(0, 161, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_slice__2);
+  __Pyx_GIVEREF(__pyx_slice__2);
 
   /* "(tree fragment)":4
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
- *     if __pyx_checksum not in (0xe3b0c44, 0xda39a3e, 0xd41d8cd):             # <<<<<<<<<<<<<<
+ *     if __pyx_checksum not in (0xa0c99bc, 0x2f6671f, 0xf637459):             # <<<<<<<<<<<<<<
  *         from pickle import PickleError as __pyx_PickleError
- *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xe3b0c44, 0xda39a3e, 0xd41d8cd) = ())" % __pyx_checksum
+ *         raise __pyx_PickleError, "Incompatible checksums (0x%x vs (0xa0c99bc, 0x2f6671f, 0xf637459) = (_ContractedContext__cache, __name__, args, func, kwargs, ref, ret, signature))" % __pyx_checksum
+ */
+  __pyx_tuple__4 = PyTuple_Pack(3, __pyx_int_168597948, __pyx_int_49702687, __pyx_int_258176089); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(2, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__4);
+  __Pyx_GIVEREF(__pyx_tuple__4);
+  __pyx_tuple__6 = PyTuple_Pack(3, __pyx_int_171011501, __pyx_int_56490241, __pyx_int_47749068); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(2, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__6);
+  __Pyx_GIVEREF(__pyx_tuple__6);
+
+  /* "pop/pop.contract.pyx":55
+ *         return self.__cache
+ * 
+ *     def get_arguments(self):             # <<<<<<<<<<<<<<
+ *         """
+ *         Return a dictionary of all arguments that will be passed to the function and their
  */
-  __pyx_tuple__7 = PyTuple_Pack(3, __pyx_int_238750788, __pyx_int_228825662, __pyx_int_222419149); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(2, 4, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__7);
-  __Pyx_GIVEREF(__pyx_tuple__7);
-  __pyx_tuple__8 = PyTuple_Pack(3, __pyx_int_10383136, __pyx_int_256609795, __pyx_int_220666686); if (unlikely(!__pyx_tuple__8)) __PYX_ERR(2, 4, __pyx_L1_error)
+  __pyx_tuple__8 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__8)) __PYX_ERR(0, 55, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__8);
   __Pyx_GIVEREF(__pyx_tuple__8);
-  __pyx_tuple__9 = PyTuple_Pack(3, __pyx_int_151484788, __pyx_int_214639601, __pyx_int_73280139); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(2, 4, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__9);
-  __Pyx_GIVEREF(__pyx_tuple__9);
-
-  /* "(tree fragment)":1
- * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
- *     cdef tuple state
- *     cdef object _dict
- */
-  __pyx_tuple__11 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_state, __pyx_n_s_dict_2, __pyx_n_s_use_setstate); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__11);
-  __Pyx_GIVEREF(__pyx_tuple__11);
-  __pyx_codeobj__12 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__11, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__12)) __PYX_ERR(2, 1, __pyx_L1_error)
-
-  /* "(tree fragment)":16
- *     else:
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
- * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)
- */
-  __pyx_tuple__13 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_pyx_state); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(2, 16, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__13);
-  __Pyx_GIVEREF(__pyx_tuple__13);
-  __pyx_codeobj__14 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__13, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 16, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__14)) __PYX_ERR(2, 16, __pyx_L1_error)
-
-  /* "pop/pop.data.pyx":38
- *         self._split_cache = dict[str, list[str]]()
- * 
- *     cpdef _clear(self):             # <<<<<<<<<<<<<<
- *         self._cache.clear()
- *         self._split_cache.clear()
- */
-  __pyx_tuple__15 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 38, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__15);
-  __Pyx_GIVEREF(__pyx_tuple__15);
-  __pyx_codeobj__16 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_clear, 38, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__16)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_codeobj__9 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__8, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_contract_pyx, __pyx_n_s_get_arguments, 55, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__9)) __PYX_ERR(0, 55, __pyx_L1_error)
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
-  __pyx_codeobj__17 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__11, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__17)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_tuple__10 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_state, __pyx_n_s_dict_2, __pyx_n_s_use_setstate); if (unlikely(!__pyx_tuple__10)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__10);
+  __Pyx_GIVEREF(__pyx_tuple__10);
+  __pyx_codeobj__11 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__10, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__11)) __PYX_ERR(2, 1, __pyx_L1_error)
 
   /* "(tree fragment)":16
  *     else:
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)
- */
-  __pyx_codeobj__18 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__13, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 16, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__18)) __PYX_ERR(2, 16, __pyx_L1_error)
-
-  /* "pop/pop.data.pyx":127
- *         return not self.__eq__(other)
- * 
- *     def keys(self):             # <<<<<<<<<<<<<<
- *         return self.__data.keys()
- * 
- */
-  __pyx_codeobj__19 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_keys, 127, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__19)) __PYX_ERR(0, 127, __pyx_L1_error)
-
-  /* "pop/pop.data.pyx":130
- *         return self.__data.keys()
- * 
- *     def values(self):             # <<<<<<<<<<<<<<
- *         return self.__data.values()
- * 
+ *     __pyx_unpickle_ContractedContext__set_state(self, __pyx_state)
  */
-  __pyx_codeobj__20 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_values, 130, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__20)) __PYX_ERR(0, 130, __pyx_L1_error)
+  __pyx_tuple__12 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_pyx_state); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(2, 16, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__12);
+  __Pyx_GIVEREF(__pyx_tuple__12);
+  __pyx_codeobj__13 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__12, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 16, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__13)) __PYX_ERR(2, 16, __pyx_L1_error)
 
-  /* "pop/pop.data.pyx":133
- *         return self.__data.values()
+  /* "pop/pop.contract.pyx":69
  * 
- *     def items(self):             # <<<<<<<<<<<<<<
- *         return self.__data.items()
  * 
+ * def load_contract(             # <<<<<<<<<<<<<<
+ *     contracts: "pop.hub.Sub",
+ *     default_contracts: Iterable[str],
  */
-  __pyx_codeobj__21 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_items, 133, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__21)) __PYX_ERR(0, 133, __pyx_L1_error)
+  __pyx_tuple__14 = PyTuple_Pack(8, __pyx_n_s_contracts, __pyx_n_s_default_contracts, __pyx_n_s_mod, __pyx_n_s_name, __pyx_n_s_raws, __pyx_n_s_loaded_contracts, __pyx_n_s_cnames, __pyx_n_s_cname); if (unlikely(!__pyx_tuple__14)) __PYX_ERR(0, 69, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__14);
+  __Pyx_GIVEREF(__pyx_tuple__14);
+  __pyx_codeobj__15 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__14, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_contract_pyx, __pyx_n_s_load_contract, 69, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__15)) __PYX_ERR(0, 69, __pyx_L1_error)
 
-  /* "pop/pop.data.pyx":136
- *         return self.__data.items()
- * 
- *     def get(self, key, default=None):             # <<<<<<<<<<<<<<
- *         return self.__data.get(key, default)
+  /* "pop/pop.contract.pyx":198
+ *         return ret
  * 
+ *     def __getstate__(self):             # <<<<<<<<<<<<<<
+ *         return {
+ *             "ref": self.ref,
  */
-  __pyx_tuple__22 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_key, __pyx_n_s_default); if (unlikely(!__pyx_tuple__22)) __PYX_ERR(0, 136, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__22);
-  __Pyx_GIVEREF(__pyx_tuple__22);
-  __pyx_codeobj__23 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__22, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_get, 136, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__23)) __PYX_ERR(0, 136, __pyx_L1_error)
-  __pyx_tuple__24 = PyTuple_Pack(1, Py_None); if (unlikely(!__pyx_tuple__24)) __PYX_ERR(0, 136, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__24);
-  __Pyx_GIVEREF(__pyx_tuple__24);
+  __pyx_codeobj__16 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__8, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_contract_pyx, __pyx_n_s_getstate, 198, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__16)) __PYX_ERR(0, 198, __pyx_L1_error)
 
-  /* "pop/pop.data.pyx":139
- *         return self.__data.get(key, default)
- * 
- *     def copy(self):             # <<<<<<<<<<<<<<
- *         return unfreeze(self.__data)
+  /* "pop/pop.contract.pyx":206
+ *         }
  * 
+ *     def __setstate__(self, state:dict[str, object]):             # <<<<<<<<<<<<<<
+ *         self.ref = state["ref"]
+ *         self.__name__ = state["name"]
  */
-  __pyx_codeobj__25 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_copy, 139, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__25)) __PYX_ERR(0, 139, __pyx_L1_error)
+  __pyx_tuple__17 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_state); if (unlikely(!__pyx_tuple__17)) __PYX_ERR(0, 206, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__17);
+  __Pyx_GIVEREF(__pyx_tuple__17);
+  __pyx_codeobj__18 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__17, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_contract_pyx, __pyx_n_s_setstate, 206, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__18)) __PYX_ERR(0, 206, __pyx_L1_error)
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
-  __pyx_codeobj__26 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__11, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__26)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_codeobj__19 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__10, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__19)) __PYX_ERR(2, 1, __pyx_L1_error)
 
   /* "(tree fragment)":16
  *     else:
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)
- */
-  __pyx_codeobj__27 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__13, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 16, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__27)) __PYX_ERR(2, 16, __pyx_L1_error)
-
-  /* "pop/pop.data.pyx":143
- * 
- * 
- * def freeze(data):             # <<<<<<<<<<<<<<
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return data
+ *     __pyx_unpickle_Contracted__set_state(self, __pyx_state)
  */
-  __pyx_tuple__28 = PyTuple_Pack(6, __pyx_n_s_data, __pyx_n_s_key, __pyx_n_s_value, __pyx_n_s_genexpr, __pyx_n_s_genexpr, __pyx_n_s_genexpr); if (unlikely(!__pyx_tuple__28)) __PYX_ERR(0, 143, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__28);
-  __Pyx_GIVEREF(__pyx_tuple__28);
-  __pyx_codeobj__29 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__28, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_freeze, 143, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__29)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __pyx_codeobj__20 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__12, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 16, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__20)) __PYX_ERR(2, 16, __pyx_L1_error)
 
-  /* "pop/pop.data.pyx":155
- *         return data
+  /* "pop/pop.contract.pyx":216
  * 
- * def unfreeze(data):             # <<<<<<<<<<<<<<
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return {key: unfreeze(value) for key, value in data.items()}
+ * class ContractedAsyncGen(Contracted):
+ *     async def __call__(self, *args, **kwargs):             # <<<<<<<<<<<<<<
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args
  */
-  __pyx_tuple__30 = PyTuple_Pack(5, __pyx_n_s_data, __pyx_n_s_key, __pyx_n_s_value, __pyx_n_s_value, __pyx_n_s_value); if (unlikely(!__pyx_tuple__30)) __PYX_ERR(0, 155, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__30);
-  __Pyx_GIVEREF(__pyx_tuple__30);
-  __pyx_codeobj__31 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__30, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_unfreeze, 155, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__31)) __PYX_ERR(0, 155, __pyx_L1_error)
+  __pyx_tuple__21 = PyTuple_Pack(9, __pyx_n_s_self, __pyx_n_s_args, __pyx_n_s_kwargs, __pyx_n_s_chunk, __pyx_n_s_contract_context, __pyx_n_s_fn, __pyx_n_s_pre_ret, __pyx_n_s_ret, __pyx_n_s_post_ret); if (unlikely(!__pyx_tuple__21)) __PYX_ERR(0, 216, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__21);
+  __Pyx_GIVEREF(__pyx_tuple__21);
+  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS|CO_VARARGS|CO_VARKEYWORDS|CO_ASYNC_GENERATOR, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__21, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_contract_pyx, __pyx_n_s_call_2, 216, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 216, __pyx_L1_error)
 
-  /* "pop/pop.data.pyx":166
- * 
+  /* "pop/pop.contract.pyx":248
+ *                 ret = post_ret
  * 
- * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
- *     """
- *     Recursive version of the default dict.update
+ * def create_contracted(             # <<<<<<<<<<<<<<
+ *     hub: "pop.hub.Hub",
+ *     contracts: list["pop.loader.LoadedMod"],
  */
-  __pyx_tuple__32 = PyTuple_Pack(4, __pyx_n_s_dest, __pyx_n_s_upd, __pyx_n_s_recursive_update, __pyx_n_s_merge_lists); if (unlikely(!__pyx_tuple__32)) __PYX_ERR(0, 166, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__32);
-  __Pyx_GIVEREF(__pyx_tuple__32);
-  __pyx_codeobj__33 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__32, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_data_pyx, __pyx_n_s_update, 166, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__33)) __PYX_ERR(0, 166, __pyx_L1_error)
-  __pyx_tuple__34 = PyTuple_Pack(2, Py_True, Py_False); if (unlikely(!__pyx_tuple__34)) __PYX_ERR(0, 166, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__34);
-  __Pyx_GIVEREF(__pyx_tuple__34);
+  __pyx_tuple__22 = PyTuple_Pack(6, __pyx_n_s_hub, __pyx_n_s_contracts, __pyx_n_s_func, __pyx_n_s_ref, __pyx_n_s_name, __pyx_n_s_implicit_hub); if (unlikely(!__pyx_tuple__22)) __PYX_ERR(0, 248, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__22);
+  __Pyx_GIVEREF(__pyx_tuple__22);
+  __pyx_codeobj__23 = (PyObject*)__Pyx_PyCode_New(6, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__22, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_pop_pop_contract_pyx, __pyx_n_s_create_contracted, 248, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__23)) __PYX_ERR(0, 248, __pyx_L1_error)
+  __pyx_tuple__24 = PyTuple_Pack(1, ((PyObject *)Py_True)); if (unlikely(!__pyx_tuple__24)) __PYX_ERR(0, 248, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__24);
+  __Pyx_GIVEREF(__pyx_tuple__24);
 
   /* "(tree fragment)":1
- * def __pyx_unpickle_NamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
+ * def __pyx_unpickle_ContractedContext(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
-  __pyx_tuple__35 = PyTuple_Pack(5, __pyx_n_s_pyx_type, __pyx_n_s_pyx_checksum, __pyx_n_s_pyx_state, __pyx_n_s_pyx_PickleError, __pyx_n_s_pyx_result); if (unlikely(!__pyx_tuple__35)) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__35);
-  __Pyx_GIVEREF(__pyx_tuple__35);
-  __pyx_codeobj__36 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__35, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_NamespaceDict, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__36)) __PYX_ERR(2, 1, __pyx_L1_error)
-  __pyx_codeobj__37 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__35, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_MultidictCache, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__37)) __PYX_ERR(2, 1, __pyx_L1_error)
-  __pyx_codeobj__38 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__35, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_ImmutableNamespac, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__38)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_tuple__25 = PyTuple_Pack(5, __pyx_n_s_pyx_type, __pyx_n_s_pyx_checksum, __pyx_n_s_pyx_state, __pyx_n_s_pyx_PickleError, __pyx_n_s_pyx_result); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__25);
+  __Pyx_GIVEREF(__pyx_tuple__25);
+  __pyx_codeobj__26 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__25, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_ContractedContext, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__26)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_codeobj__27 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__25, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_Contracted, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__27)) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitConstants(void) {
-  __pyx_umethod_PyDict_Type_get.type = (PyObject*)&PyDict_Type;
-  __pyx_umethod_PyDict_Type_get.method_name = &__pyx_n_s_get;
-  __pyx_umethod_PyDict_Type_items.type = (PyObject*)&PyDict_Type;
-  __pyx_umethod_PyDict_Type_items.method_name = &__pyx_n_s_items;
-  __pyx_umethod_PyDict_Type_keys.type = (PyObject*)&PyDict_Type;
-  __pyx_umethod_PyDict_Type_keys.method_name = &__pyx_n_s_keys;
-  __pyx_umethod_PyDict_Type_values.type = (PyObject*)&PyDict_Type;
-  __pyx_umethod_PyDict_Type_values.method_name = &__pyx_n_s_values;
   if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 1, __pyx_L1_error);
-  __pyx_int_10383136 = PyInt_FromLong(10383136L); if (unlikely(!__pyx_int_10383136)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_73280139 = PyInt_FromLong(73280139L); if (unlikely(!__pyx_int_73280139)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_151484788 = PyInt_FromLong(151484788L); if (unlikely(!__pyx_int_151484788)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_214639601 = PyInt_FromLong(214639601L); if (unlikely(!__pyx_int_214639601)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_220666686 = PyInt_FromLong(220666686L); if (unlikely(!__pyx_int_220666686)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_222419149 = PyInt_FromLong(222419149L); if (unlikely(!__pyx_int_222419149)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_228825662 = PyInt_FromLong(228825662L); if (unlikely(!__pyx_int_228825662)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_238750788 = PyInt_FromLong(238750788L); if (unlikely(!__pyx_int_238750788)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_256609795 = PyInt_FromLong(256609795L); if (unlikely(!__pyx_int_256609795)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_0 = PyInt_FromLong(0); if (unlikely(!__pyx_int_0)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_1 = PyInt_FromLong(1); if (unlikely(!__pyx_int_1)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_47749068 = PyInt_FromLong(47749068L); if (unlikely(!__pyx_int_47749068)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_49702687 = PyInt_FromLong(49702687L); if (unlikely(!__pyx_int_49702687)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_56490241 = PyInt_FromLong(56490241L); if (unlikely(!__pyx_int_56490241)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_168597948 = PyInt_FromLong(168597948L); if (unlikely(!__pyx_int_168597948)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_171011501 = PyInt_FromLong(171011501L); if (unlikely(!__pyx_int_171011501)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_258176089 = PyInt_FromLong(258176089L); if (unlikely(!__pyx_int_258176089)) __PYX_ERR(0, 1, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: init_globals ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitGlobals(void) {
@@ -14208,15 +14217,14 @@
 static CYTHON_SMALL_CODE int __Pyx_modinit_variable_import_code(void); /*proto*/
 static CYTHON_SMALL_CODE int __Pyx_modinit_function_import_code(void); /*proto*/
 
 static int __Pyx_modinit_global_init_code(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_modinit_global_init_code", 0);
   /*--- Global init code ---*/
-  __pyx_v_3pop_4data_DICT_ATTRS = ((PyObject*)Py_None); Py_INCREF(Py_None);
   __Pyx_RefNannyFinishContext();
   return 0;
 }
 
 static int __Pyx_modinit_variable_export_code(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_modinit_variable_export_code", 0);
@@ -14231,175 +14239,132 @@
   /*--- Function export code ---*/
   __Pyx_RefNannyFinishContext();
   return 0;
 }
 
 static int __Pyx_modinit_type_init_code(void) {
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__Pyx_modinit_type_init_code", 0);
   /*--- Type init code ---*/
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_t_1 = PyTuple_Pack(1, (PyObject *)(&PyDict_Type)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 11, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_ptype_3pop_4data_NamespaceDict = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data_NamespaceDict_spec, __pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-  if (unlikely(!__pyx_ptype_3pop_4data_NamespaceDict)) __PYX_ERR(0, 11, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data_NamespaceDict_spec, __pyx_ptype_3pop_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
-  #else
-  __pyx_ptype_3pop_4data_NamespaceDict = &__pyx_type_3pop_4data_NamespaceDict;
-  #endif
-  if (sizeof(struct __pyx_obj_3pop_4data_NamespaceDict) != sizeof(PyDictObject)) {
-    if (__Pyx_validate_extern_base((&PyDict_Type)) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
-  }
-  #if !CYTHON_COMPILING_IN_LIMITED_API
-  __pyx_ptype_3pop_4data_NamespaceDict->tp_dealloc = (&PyDict_Type)->tp_dealloc;
-  __pyx_ptype_3pop_4data_NamespaceDict->tp_base = (&PyDict_Type);
-  __pyx_ptype_3pop_4data_NamespaceDict->tp_new = (&PyDict_Type)->tp_new;
-  #endif
-  #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
-  #endif
-  #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_3pop_4data_NamespaceDict->tp_print = 0;
-  #endif
-  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_NamespaceDict, (PyObject *) __pyx_ptype_3pop_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
-  #if !CYTHON_COMPILING_IN_LIMITED_API
-  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_3pop_4data_NamespaceDict) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
-  #endif
-  __pyx_vtabptr_3pop_4data_MultidictCache = &__pyx_vtable_3pop_4data_MultidictCache;
-  __pyx_vtable_3pop_4data_MultidictCache._clear = (PyObject *(*)(struct __pyx_obj_3pop_4data_MultidictCache *, int __pyx_skip_dispatch))__pyx_f_3pop_4data_14MultidictCache__clear;
-  #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_3pop_4data_MultidictCache = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data_MultidictCache_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data_MultidictCache)) __PYX_ERR(0, 26, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data_MultidictCache_spec, __pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_ptype_3pop_8contract_ContractedContext = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_8contract_ContractedContext_spec, NULL); if (unlikely(!__pyx_ptype_3pop_8contract_ContractedContext)) __PYX_ERR(0, 10, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_8contract_ContractedContext_spec, __pyx_ptype_3pop_8contract_ContractedContext) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
   #else
-  __pyx_ptype_3pop_4data_MultidictCache = &__pyx_type_3pop_4data_MultidictCache;
+  __pyx_ptype_3pop_8contract_ContractedContext = &__pyx_type_3pop_8contract_ContractedContext;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_8contract_ContractedContext) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_3pop_4data_MultidictCache->tp_print = 0;
+  __pyx_ptype_3pop_8contract_ContractedContext->tp_print = 0;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data_MultidictCache->tp_dictoffset && __pyx_ptype_3pop_4data_MultidictCache->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_3pop_4data_MultidictCache->tp_getattro = __Pyx_PyObject_GenericGetAttr;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_8contract_ContractedContext->tp_dictoffset && __pyx_ptype_3pop_8contract_ContractedContext->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_8contract_ContractedContext->tp_getattro = __Pyx_PyObject_GenericGetAttr;
   }
   #endif
-  if (__Pyx_SetVtable(__pyx_ptype_3pop_4data_MultidictCache, __pyx_vtabptr_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
-  #if !CYTHON_COMPILING_IN_LIMITED_API
-  if (__Pyx_MergeVtables(__pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
-  #endif
-  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_MultidictCache, (PyObject *) __pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_ContractedContext, (PyObject *) __pyx_ptype_3pop_8contract_ContractedContext) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_3pop_4data_MultidictCache) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_3pop_8contract_ContractedContext) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
   #endif
+  __pyx_vtabptr_3pop_8contract_Contracted = &__pyx_vtable_3pop_8contract_Contracted;
+  __pyx_vtable_3pop_8contract_Contracted._get_contracts_by_type = (PyObject *(*)(struct __pyx_obj_3pop_8contract_Contracted *, PyObject *))__pyx_f_3pop_8contract_10Contracted__get_contracts_by_type;
+  __pyx_vtable_3pop_8contract_Contracted._load_contracts = (PyObject *(*)(struct __pyx_obj_3pop_8contract_Contracted *))__pyx_f_3pop_8contract_10Contracted__load_contracts;
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_3pop_4data_ImmutableNamespaceDict = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data_ImmutableNamespaceDict_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data_ImmutableNamespaceDict)) __PYX_ERR(0, 68, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data_ImmutableNamespaceDict_spec, __pyx_ptype_3pop_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
+  __pyx_ptype_3pop_8contract_Contracted = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_8contract_Contracted_spec, NULL); if (unlikely(!__pyx_ptype_3pop_8contract_Contracted)) __PYX_ERR(0, 100, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_8contract_Contracted_spec, __pyx_ptype_3pop_8contract_Contracted) < 0) __PYX_ERR(0, 100, __pyx_L1_error)
   #else
-  __pyx_ptype_3pop_4data_ImmutableNamespaceDict = &__pyx_type_3pop_4data_ImmutableNamespaceDict;
+  __pyx_ptype_3pop_8contract_Contracted = &__pyx_type_3pop_8contract_Contracted;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_8contract_Contracted) < 0) __PYX_ERR(0, 100, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_3pop_4data_ImmutableNamespaceDict->tp_print = 0;
+  __pyx_ptype_3pop_8contract_Contracted->tp_print = 0;
   #endif
-  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_ImmutableNamespaceDict, (PyObject *) __pyx_ptype_3pop_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_3pop_4data_ImmutableNamespaceDict) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
-  #endif
-  #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_3pop_4data___pyx_scope_struct____contains__ = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data___pyx_scope_struct____contains___spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data___pyx_scope_struct____contains__)) __PYX_ERR(0, 65, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data___pyx_scope_struct____contains___spec, __pyx_ptype_3pop_4data___pyx_scope_struct____contains__) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
-  #else
-  __pyx_ptype_3pop_4data___pyx_scope_struct____contains__ = &__pyx_type_3pop_4data___pyx_scope_struct____contains__;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_8contract_Contracted->tp_dictoffset && __pyx_ptype_3pop_8contract_Contracted->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_8contract_Contracted->tp_getattro = __Pyx_PyObject_GenericGetAttr;
+  }
   #endif
+  if (__Pyx_SetVtable(__pyx_ptype_3pop_8contract_Contracted, __pyx_vtabptr_3pop_8contract_Contracted) < 0) __PYX_ERR(0, 100, __pyx_L1_error)
   #if !CYTHON_COMPILING_IN_LIMITED_API
+  if (__Pyx_MergeVtables(__pyx_ptype_3pop_8contract_Contracted) < 0) __PYX_ERR(0, 100, __pyx_L1_error)
   #endif
-  #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data___pyx_scope_struct____contains__) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
-  #endif
-  #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_3pop_4data___pyx_scope_struct____contains__->tp_print = 0;
-  #endif
+  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_Contracted, (PyObject *) __pyx_ptype_3pop_8contract_Contracted) < 0) __PYX_ERR(0, 100, __pyx_L1_error)
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data___pyx_scope_struct____contains__->tp_dictoffset && __pyx_ptype_3pop_4data___pyx_scope_struct____contains__->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_3pop_4data___pyx_scope_struct____contains__->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
-  }
+  if (__Pyx_setup_reduce((PyObject *) __pyx_ptype_3pop_8contract_Contracted) < 0) __PYX_ERR(0, 100, __pyx_L1_error)
   #endif
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr)) __PYX_ERR(0, 66, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr_spec, __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr) < 0) __PYX_ERR(0, 66, __pyx_L1_error)
+  __pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_8contract___pyx_scope_struct__genexpr_spec, NULL); if (unlikely(!__pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr)) __PYX_ERR(0, 164, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_8contract___pyx_scope_struct__genexpr_spec, __pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr) < 0) __PYX_ERR(0, 164, __pyx_L1_error)
   #else
-  __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr = &__pyx_type_3pop_4data___pyx_scope_struct_1_genexpr;
+  __pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr = &__pyx_type_3pop_8contract___pyx_scope_struct__genexpr;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr) < 0) __PYX_ERR(0, 66, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr) < 0) __PYX_ERR(0, 164, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr->tp_print = 0;
+  __pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr->tp_print = 0;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr->tp_dictoffset && __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_3pop_4data___pyx_scope_struct_1_genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr->tp_dictoffset && __pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_8contract___pyx_scope_struct__genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
   }
   #endif
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr)) __PYX_ERR(0, 149, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr_spec, __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr) < 0) __PYX_ERR(0, 149, __pyx_L1_error)
+  __pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__ = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_8contract___pyx_scope_struct_1___call___spec, NULL); if (unlikely(!__pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__)) __PYX_ERR(0, 166, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_8contract___pyx_scope_struct_1___call___spec, __pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__) < 0) __PYX_ERR(0, 166, __pyx_L1_error)
   #else
-  __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr = &__pyx_type_3pop_4data___pyx_scope_struct_2_genexpr;
+  __pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__ = &__pyx_type_3pop_8contract___pyx_scope_struct_1___call__;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr) < 0) __PYX_ERR(0, 149, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__) < 0) __PYX_ERR(0, 166, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr->tp_print = 0;
+  __pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__->tp_print = 0;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr->tp_dictoffset && __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_3pop_4data___pyx_scope_struct_2_genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__->tp_dictoffset && __pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_8contract___pyx_scope_struct_1___call__->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
   }
   #endif
   #if CYTHON_USE_TYPE_SPECS
-  __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_spec, NULL); if (unlikely(!__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr)) __PYX_ERR(0, 151, __pyx_L1_error)
-  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr_spec, __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr) < 0) __PYX_ERR(0, 151, __pyx_L1_error)
+  __pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__ = (PyTypeObject *) __Pyx_PyType_FromModuleAndSpec(__pyx_m, &__pyx_type_3pop_8contract___pyx_scope_struct_2___call___spec, NULL); if (unlikely(!__pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__)) __PYX_ERR(0, 216, __pyx_L1_error)
+  if (__Pyx_fix_up_extension_type_from_spec(&__pyx_type_3pop_8contract___pyx_scope_struct_2___call___spec, __pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__) < 0) __PYX_ERR(0, 216, __pyx_L1_error)
   #else
-  __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr = &__pyx_type_3pop_4data___pyx_scope_struct_3_genexpr;
+  __pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__ = &__pyx_type_3pop_8contract___pyx_scope_struct_2___call__;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
   #endif
   #if !CYTHON_USE_TYPE_SPECS
-  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr) < 0) __PYX_ERR(0, 151, __pyx_L1_error)
+  if (__Pyx_PyType_Ready(__pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__) < 0) __PYX_ERR(0, 216, __pyx_L1_error)
   #endif
   #if PY_MAJOR_VERSION < 3
-  __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr->tp_print = 0;
+  __pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__->tp_print = 0;
   #endif
   #if !CYTHON_COMPILING_IN_LIMITED_API
-  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr->tp_dictoffset && __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr->tp_getattro == PyObject_GenericGetAttr)) {
-    __pyx_ptype_3pop_4data___pyx_scope_struct_3_genexpr->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__->tp_dictoffset && __pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__->tp_getattro == PyObject_GenericGetAttr)) {
+    __pyx_ptype_3pop_8contract___pyx_scope_struct_2___call__->tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
   }
   #endif
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 
 static int __Pyx_modinit_type_import_code(void) {
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
@@ -14452,31 +14417,31 @@
   return 0;
 }
 
 
 #if PY_MAJOR_VERSION >= 3
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
-static int __pyx_pymod_exec_data(PyObject* module); /*proto*/
+static int __pyx_pymod_exec_contract(PyObject* module); /*proto*/
 static PyModuleDef_Slot __pyx_moduledef_slots[] = {
   {Py_mod_create, (void*)__pyx_pymod_create},
-  {Py_mod_exec, (void*)__pyx_pymod_exec_data},
+  {Py_mod_exec, (void*)__pyx_pymod_exec_contract},
   {0, NULL}
 };
 #endif
 
 #ifdef __cplusplus
 namespace {
   struct PyModuleDef __pyx_moduledef =
   #else
   static struct PyModuleDef __pyx_moduledef =
   #endif
   {
       PyModuleDef_HEAD_INIT,
-      "data",
+      "contract",
       0, /* m_doc */
     #if CYTHON_PEP489_MULTI_PHASE_INIT
       0, /* m_size */
     #elif CYTHON_USE_MODULE_STATE
       sizeof(__pyx_mstate), /* m_size */
     #else
       -1, /* m_size */
@@ -14516,19 +14481,19 @@
 #else
 #define __Pyx_PyMODINIT_FUNC PyObject *
 #endif
 #endif
 
 
 #if PY_MAJOR_VERSION < 3
-__Pyx_PyMODINIT_FUNC initdata(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC initdata(void)
+__Pyx_PyMODINIT_FUNC initcontract(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC initcontract(void)
 #else
-__Pyx_PyMODINIT_FUNC PyInit_data(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC PyInit_data(void)
+__Pyx_PyMODINIT_FUNC PyInit_contract(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC PyInit_contract(void)
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 {
   return PyModuleDef_Init(&__pyx_moduledef);
 }
 static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
     #if PY_VERSION_HEX >= 0x030700A1
     static PY_INT64_T main_interpreter_id = -1;
@@ -14601,51 +14566,53 @@
     return module;
 bad:
     Py_XDECREF(module);
     return NULL;
 }
 
 
-static CYTHON_SMALL_CODE int __pyx_pymod_exec_data(PyObject *__pyx_pyinit_module)
+static CYTHON_SMALL_CODE int __pyx_pymod_exec_contract(PyObject *__pyx_pyinit_module)
 #endif
 #endif
 {
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
-    PyErr_SetString(PyExc_RuntimeError, "Module 'data' has already been imported. Re-initialisation is not supported.");
+    PyErr_SetString(PyExc_RuntimeError, "Module 'contract' has already been imported. Re-initialisation is not supported.");
     return -1;
   }
   #elif PY_MAJOR_VERSION >= 3
   if (__pyx_m) return __Pyx_NewRef(__pyx_m);
   #endif
   /*--- Module creation code ---*/
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   __pyx_m = __pyx_pyinit_module;
   Py_INCREF(__pyx_m);
   #else
   #if PY_MAJOR_VERSION < 3
-  __pyx_m = Py_InitModule4("data", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
+  __pyx_m = Py_InitModule4("contract", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #elif CYTHON_USE_MODULE_STATE
   __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
   {
     int add_module_result = PyState_AddModule(__pyx_t_1, &__pyx_moduledef);
-    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to "data" pseudovariable */
+    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to "contract" pseudovariable */
     if (unlikely((add_module_result < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     pystate_addmodule_run = 1;
   }
   #else
   __pyx_m = PyModule_Create(&__pyx_moduledef);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
@@ -14661,15 +14628,15 @@
 if (!__Pyx_RefNanny) {
   PyErr_Clear();
   __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
   if (!__Pyx_RefNanny)
       Py_FatalError("failed to import 'refnanny' module");
 }
 #endif
-  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_data(void)", 0);
+  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_contract(void)", 0);
   if (__Pyx_check_binary_version(__PYX_LIMITED_VERSION_HEX, __Pyx_get_runtime_version(), CYTHON_COMPILING_IN_LIMITED_API) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pxy_PyFrame_Initialize_Offsets
   __Pxy_PyFrame_Initialize_Offsets();
   #endif
   __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -14699,22 +14666,22 @@
   /*--- Initialize various global constants etc. ---*/
   if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   stringtab_initialized = 1;
   if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
   if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
-  if (__pyx_module_is_main_pop__data) {
-    if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__pyx_module_is_main_pop__contract) {
+    if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name_2, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   }
   #if PY_MAJOR_VERSION >= 3
   {
     PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
-    if (!PyDict_GetItemString(modules, "pop.data")) {
-      if (unlikely((PyDict_SetItemString(modules, "pop.data", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
+    if (!PyDict_GetItemString(modules, "pop.contract")) {
+      if (unlikely((PyDict_SetItemString(modules, "pop.contract", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     }
   }
   #endif
   /*--- Builtin init code ---*/
   if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   /*--- Constants init code ---*/
   if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -14727,302 +14694,310 @@
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
-  /* "pop/pop.data.pyx":3
+  /* "pop/pop.contract.pyx":3
  * # cython: language_level=3
  * 
- * from collections.abc import Mapping             # <<<<<<<<<<<<<<
+ * import inspect             # <<<<<<<<<<<<<<
+ * from collections.abc import Iterable
+ * from collections.abc import Mapping
+ */
+  __pyx_t_2 = __Pyx_patch_inspect(__Pyx_ImportDottedModule(__pyx_n_s_inspect, NULL)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_inspect, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "pop/pop.contract.pyx":4
+ * 
+ * import inspect
+ * from collections.abc import Iterable             # <<<<<<<<<<<<<<
+ * from collections.abc import Mapping
  * from cpython cimport dict
- * from cython cimport pint
  */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_Mapping);
-  __Pyx_GIVEREF(__pyx_n_s_Mapping);
-  if (__Pyx_PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_Mapping)) __PYX_ERR(0, 3, __pyx_L1_error);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_collections_abc, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_Iterable);
+  __Pyx_GIVEREF(__pyx_n_s_Iterable);
+  if (__Pyx_PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_Iterable)) __PYX_ERR(0, 4, __pyx_L1_error);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_collections_abc, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_Mapping); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_Iterable); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Mapping, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Iterable, __pyx_t_2) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "pop/pop.data.pyx":9
- * 
- * 
- * cdef frozenset DICT_ATTRS = frozenset(dir(dict))             # <<<<<<<<<<<<<<
- * 
- * cdef class NamespaceDict(dict[str, object]):
+  /* "pop/pop.contract.pyx":5
+ * import inspect
+ * from collections.abc import Iterable
+ * from collections.abc import Mapping             # <<<<<<<<<<<<<<
+ * from cpython cimport dict
+ * from cython cimport pint
  */
-  __pyx_t_3 = PyObject_Dir(((PyObject *)(&PyDict_Type))); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_2 = __Pyx_PyFrozenSet_New(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_Mapping);
+  __Pyx_GIVEREF(__pyx_n_s_Mapping);
+  if (__Pyx_PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_Mapping)) __PYX_ERR(0, 5, __pyx_L1_error);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_collections_abc, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __Pyx_XGOTREF(__pyx_v_3pop_4data_DICT_ATTRS);
-  __Pyx_DECREF_SET(__pyx_v_3pop_4data_DICT_ATTRS, ((PyObject*)__pyx_t_2));
-  __Pyx_GIVEREF(__pyx_t_2);
-  __pyx_t_2 = 0;
-
-  /* "(tree fragment)":1
- * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
- *     cdef tuple state
- *     cdef object _dict
- */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_13NamespaceDict_5__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_NamespaceDict___reduce_cython, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__12)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_NamespaceDict, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_NamespaceDict);
-
-  /* "(tree fragment)":16
- *     else:
- *         return __pyx_unpickle_NamespaceDict, (type(self), 0xe3b0c44, state)
- * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_NamespaceDict__set_state(self, __pyx_state)
- */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_13NamespaceDict_7__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_NamespaceDict___setstate_cython, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__14)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_NamespaceDict, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Mapping); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Mapping, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_NamespaceDict);
 
-  /* "pop/pop.data.pyx":38
- *         self._split_cache = dict[str, list[str]]()
+  /* "pop/pop.contract.pyx":55
+ *         return self.__cache
  * 
- *     cpdef _clear(self):             # <<<<<<<<<<<<<<
- *         self._cache.clear()
- *         self._split_cache.clear()
+ *     def get_arguments(self):             # <<<<<<<<<<<<<<
+ *         """
+ *         Return a dictionary of all arguments that will be passed to the function and their
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_14MultidictCache_3_clear, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_MultidictCache__clear, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__16)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_17ContractedContext_3get_arguments, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ContractedContext_get_arguments, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__9)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 55, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_MultidictCache, __pyx_n_s_clear, __pyx_t_2) < 0) __PYX_ERR(0, 38, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_8contract_ContractedContext, __pyx_n_s_get_arguments, __pyx_t_2) < 0) __PYX_ERR(0, 55, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_MultidictCache);
+  PyType_Modified(__pyx_ptype_3pop_8contract_ContractedContext);
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_14MultidictCache_11__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_MultidictCache___reduce_cython, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__17)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_17ContractedContext_5__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ContractedContext___reduce_cytho, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__11)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_MultidictCache, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_8contract_ContractedContext, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_MultidictCache);
+  PyType_Modified(__pyx_ptype_3pop_8contract_ContractedContext);
 
   /* "(tree fragment)":16
  *     else:
- *         return __pyx_unpickle_MultidictCache, (type(self), 0x09e6f20, state)
+ *         return __pyx_unpickle_ContractedContext, (type(self), 0xa0c99bc, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_MultidictCache__set_state(self, __pyx_state)
- */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_14MultidictCache_13__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_MultidictCache___setstate_cython, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__18)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_MultidictCache, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_MultidictCache);
-
-  /* "pop/pop.data.pyx":127
- *         return not self.__eq__(other)
- * 
- *     def keys(self):             # <<<<<<<<<<<<<<
- *         return self.__data.keys()
- * 
- */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_27keys, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_keys, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__19)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 127, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_keys, __pyx_t_2) < 0) __PYX_ERR(0, 127, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
-
-  /* "pop/pop.data.pyx":130
- *         return self.__data.keys()
- * 
- *     def values(self):             # <<<<<<<<<<<<<<
- *         return self.__data.values()
- * 
+ *     __pyx_unpickle_ContractedContext__set_state(self, __pyx_state)
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_29values, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_values, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__20)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 130, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_17ContractedContext_7__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ContractedContext___setstate_cyt, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__13)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_values, __pyx_t_2) < 0) __PYX_ERR(0, 130, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_8contract_ContractedContext, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_8contract_ContractedContext);
 
-  /* "pop/pop.data.pyx":133
- *         return self.__data.values()
+  /* "pop/pop.contract.pyx":69
  * 
- *     def items(self):             # <<<<<<<<<<<<<<
- *         return self.__data.items()
  * 
+ * def load_contract(             # <<<<<<<<<<<<<<
+ *     contracts: "pop.hub.Sub",
+ *     default_contracts: Iterable[str],
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_31items, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_items, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__21)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 133, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 69, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_items, __pyx_t_2) < 0) __PYX_ERR(0, 133, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_contracts, __pyx_kp_s_pop_hub_Sub) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_default_contracts, __pyx_kp_s_Iterable_str) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_mod, __pyx_n_s_object) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_name, __pyx_n_s_str) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_return, __pyx_kp_s_list_object) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_1load_contract, 0, __pyx_n_s_load_contract, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__15)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 69, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_3, __pyx_t_2);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_load_contract, __pyx_t_3) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "pop/pop.data.pyx":136
- *         return self.__data.items()
- * 
- *     def get(self, key, default=None):             # <<<<<<<<<<<<<<
- *         return self.__data.get(key, default)
+  /* "pop/pop.contract.pyx":198
+ *         return ret
  * 
+ *     def __getstate__(self):             # <<<<<<<<<<<<<<
+ *         return {
+ *             "ref": self.ref,
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_33get, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_get, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__23)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 136, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_2, __pyx_tuple__24);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_get, __pyx_t_2) < 0) __PYX_ERR(0, 136, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_10Contracted_6__getstate__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Contracted___getstate, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__16)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 198, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_8contract_Contracted, __pyx_n_s_getstate, __pyx_t_3) < 0) __PYX_ERR(0, 198, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  PyType_Modified(__pyx_ptype_3pop_8contract_Contracted);
 
-  /* "pop/pop.data.pyx":139
- *         return self.__data.get(key, default)
- * 
- *     def copy(self):             # <<<<<<<<<<<<<<
- *         return unfreeze(self.__data)
+  /* "pop/pop.contract.pyx":206
+ *         }
  * 
+ *     def __setstate__(self, state:dict[str, object]):             # <<<<<<<<<<<<<<
+ *         self.ref = state["ref"]
+ *         self.__name__ = state["name"]
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_35copy, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict_copy, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__25)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 139, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 206, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_state, __pyx_kp_s_dict_str_object) < 0) __PYX_ERR(0, 206, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_10Contracted_8__setstate__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Contracted___setstate, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__18)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 206, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_copy, __pyx_t_2) < 0) __PYX_ERR(0, 139, __pyx_L1_error)
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_2, __pyx_t_3);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_8contract_Contracted, __pyx_n_s_setstate, __pyx_t_2) < 0) __PYX_ERR(0, 206, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_8contract_Contracted);
 
   /* "(tree fragment)":1
  * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
  *     cdef tuple state
  *     cdef object _dict
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_37__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict___reduce, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_10Contracted_10__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Contracted___reduce_cython, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__19)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_8contract_Contracted, __pyx_n_s_reduce_cython, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_8contract_Contracted);
 
   /* "(tree fragment)":16
  *     else:
- *         return __pyx_unpickle_ImmutableNamespaceDict, (type(self), 0x9077974, state)
+ *         return __pyx_unpickle_Contracted, (type(self), 0xa316dad, state)
  * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
- *     __pyx_unpickle_ImmutableNamespaceDict__set_state(self, __pyx_state)
+ *     __pyx_unpickle_Contracted__set_state(self, __pyx_state)
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_22ImmutableNamespaceDict_39__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_ImmutableNamespaceDict___setstat, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__27)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_10Contracted_12__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Contracted___setstate_cython, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__20)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_4data_ImmutableNamespaceDict, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
+  if (__Pyx_SetItemOnTypeDict((PyObject *)__pyx_ptype_3pop_8contract_Contracted, __pyx_n_s_setstate_cython, __pyx_t_2) < 0) __PYX_ERR(2, 16, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  PyType_Modified(__pyx_ptype_3pop_4data_ImmutableNamespaceDict);
+  PyType_Modified(__pyx_ptype_3pop_8contract_Contracted);
 
-  /* "pop/pop.data.pyx":143
+  /* "pop/pop.contract.pyx":215
  * 
  * 
- * def freeze(data):             # <<<<<<<<<<<<<<
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return data
+ * class ContractedAsyncGen(Contracted):             # <<<<<<<<<<<<<<
+ *     async def __call__(self, *args, **kwargs):
+ *         if self.implicit_hub:
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_1freeze, 0, __pyx_n_s_freeze, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__29)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 215, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_freeze, __pyx_t_2) < 0) __PYX_ERR(0, 143, __pyx_L1_error)
+  __Pyx_INCREF((PyObject *)__pyx_ptype_3pop_8contract_Contracted);
+  __Pyx_GIVEREF((PyObject *)__pyx_ptype_3pop_8contract_Contracted);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_2, 0, ((PyObject *)__pyx_ptype_3pop_8contract_Contracted))) __PYX_ERR(0, 215, __pyx_L1_error);
+  __pyx_t_3 = __Pyx_PEP560_update_bases(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 215, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_4 = __Pyx_CalculateMetaclass(NULL, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 215, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_5 = __Pyx_Py3MetaclassPrepare(__pyx_t_4, __pyx_t_3, __pyx_n_s_ContractedAsyncGen, __pyx_n_s_ContractedAsyncGen, (PyObject *) NULL, __pyx_n_s_pop_contract, (PyObject *) NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 215, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (__pyx_t_3 != __pyx_t_2) {
+    if (unlikely((PyDict_SetItemString(__pyx_t_5, "__orig_bases__", __pyx_t_2) < 0))) __PYX_ERR(0, 215, __pyx_L1_error)
+  }
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "pop/pop.data.pyx":155
- *         return data
+  /* "pop/pop.contract.pyx":216
  * 
- * def unfreeze(data):             # <<<<<<<<<<<<<<
- *     if isinstance(data, ImmutableNamespaceDict):
- *         return {key: unfreeze(value) for key, value in data.items()}
+ * class ContractedAsyncGen(Contracted):
+ *     async def __call__(self, *args, **kwargs):             # <<<<<<<<<<<<<<
+ *         if self.implicit_hub:
+ *             args = (self.hub,) + args
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_3unfreeze, 0, __pyx_n_s_unfreeze, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__31)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 155, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_18ContractedAsyncGen_1__call__, __Pyx_CYFUNCTION_COROUTINE, __pyx_n_s_ContractedAsyncGen___call, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 216, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_unfreeze, __pyx_t_2) < 0) __PYX_ERR(0, 155, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_call_2, __pyx_t_2) < 0) __PYX_ERR(0, 216, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "pop/pop.data.pyx":166
+  /* "pop/pop.contract.pyx":215
  * 
  * 
- * cpdef update(dest, upd, bint recursive_update=True, bint merge_lists=False):             # <<<<<<<<<<<<<<
- *     """
- *     Recursive version of the default dict.update
+ * class ContractedAsyncGen(Contracted):             # <<<<<<<<<<<<<<
+ *     async def __call__(self, *args, **kwargs):
+ *         if self.implicit_hub:
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_5update, 0, __pyx_n_s_update, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__33)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 166, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_ContractedAsyncGen, __pyx_t_3, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 215, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_2, __pyx_tuple__34);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_update, __pyx_t_2) < 0) __PYX_ERR(0, 166, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_ContractedAsyncGen, __pyx_t_2) < 0) __PYX_ERR(0, 215, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "pop/pop.contract.pyx":248
+ *                 ret = post_ret
+ * 
+ * def create_contracted(             # <<<<<<<<<<<<<<
+ *     hub: "pop.hub.Hub",
+ *     contracts: list["pop.loader.LoadedMod"],
+ */
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 248, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_hub, __pyx_kp_s_pop_hub_Hub) < 0) __PYX_ERR(0, 248, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_contracts, __pyx_kp_s_list_pop_loader_LoadedMod) < 0) __PYX_ERR(0, 248, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_func, __pyx_kp_s_functools_partial) < 0) __PYX_ERR(0, 248, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_ref, __pyx_n_s_str) < 0) __PYX_ERR(0, 248, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_name, __pyx_n_s_str) < 0) __PYX_ERR(0, 248, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_implicit_hub, __pyx_n_s_bool) < 0) __PYX_ERR(0, 248, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_return, __pyx_n_s_Contracted) < 0) __PYX_ERR(0, 248, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_3create_contracted, 0, __pyx_n_s_create_contracted, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__23)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 248, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__24);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_4, __pyx_t_3);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_create_contracted, __pyx_t_4) < 0) __PYX_ERR(0, 248, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
   /* "(tree fragment)":1
- * def __pyx_unpickle_NamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
+ * def __pyx_unpickle_ContractedContext(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
  *     cdef object __pyx_PickleError
  *     cdef object __pyx_result
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_7__pyx_unpickle_NamespaceDict, 0, __pyx_n_s_pyx_unpickle_NamespaceDict, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__36)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_NamespaceDict, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_5__pyx_unpickle_ContractedContext, 0, __pyx_n_s_pyx_unpickle_ContractedContext, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_ContractedContext, __pyx_t_4) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
   /* "(tree fragment)":11
- *         __pyx_unpickle_NamespaceDict__set_state(<NamespaceDict> __pyx_result, __pyx_state)
+ *         __pyx_unpickle_ContractedContext__set_state(<ContractedContext> __pyx_result, __pyx_state)
  *     return __pyx_result
- * cdef __pyx_unpickle_NamespaceDict__set_state(NamespaceDict __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
- *     if len(__pyx_state) > 0 and hasattr(__pyx_result, '__dict__'):
- *         __pyx_result.__dict__.update(__pyx_state[0])
+ * cdef __pyx_unpickle_ContractedContext__set_state(ContractedContext __pyx_result, tuple __pyx_state):             # <<<<<<<<<<<<<<
+ *     __pyx_result._ContractedContext__cache = __pyx_state[0]; __pyx_result.__name__ = __pyx_state[1]; __pyx_result.args = __pyx_state[2]; __pyx_result.func = __pyx_state[3]; __pyx_result.kwargs = __pyx_state[4]; __pyx_result.ref = __pyx_state[5]; __pyx_result.ret = __pyx_state[6]; __pyx_result.signature = __pyx_state[7]
+ *     if len(__pyx_state) > 8 and hasattr(__pyx_result, '__dict__'):
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_9__pyx_unpickle_MultidictCache, 0, __pyx_n_s_pyx_unpickle_MultidictCache, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__37)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_MultidictCache, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-  /* "(tree fragment)":1
- * def __pyx_unpickle_ImmutableNamespaceDict(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
- *     cdef object __pyx_PickleError
- *     cdef object __pyx_result
- */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_4data_11__pyx_unpickle_ImmutableNamespaceDict, 0, __pyx_n_s_pyx_unpickle_ImmutableNamespac, NULL, __pyx_n_s_pop_data, __pyx_d, ((PyObject *)__pyx_codeobj__38)); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_ImmutableNamespac, __pyx_t_2) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_3pop_8contract_7__pyx_unpickle_Contracted, 0, __pyx_n_s_pyx_unpickle_Contracted, NULL, __pyx_n_s_pop_contract, __pyx_d, ((PyObject *)__pyx_codeobj__27)); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_Contracted, __pyx_t_4) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "pop/pop.data.pyx":1
+  /* "pop/pop.contract.pyx":1
  * # cython: language_level=3             # <<<<<<<<<<<<<<
  * 
- * from collections.abc import Mapping
+ * import inspect
  */
-  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_4 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_4) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
-      __Pyx_AddTraceback("init pop.data", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("init pop.contract", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
     Py_DECREF(__pyx_m);
     if (pystate_addmodule_run) {
       PyObject *tp, *value, *tb;
       PyErr_Fetch(&tp, &value, &tb);
       PyState_RemoveModule(&__pyx_moduledef);
       PyErr_Restore(tp, value, tb);
     }
     #endif
   } else if (!PyErr_Occurred()) {
-    PyErr_SetString(PyExc_ImportError, "init pop.data");
+    PyErr_SetString(PyExc_ImportError, "init pop.contract");
   }
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   return (__pyx_m != NULL) ? 0 : -1;
   #elif PY_MAJOR_VERSION >= 3
   return __pyx_m;
@@ -15445,14 +15420,210 @@
 bad:
     Py_DECREF(dict);
     return NULL;
 }
 #endif
 #endif
 
+/* RaiseArgTupleInvalid */
+static void __Pyx_RaiseArgtupleInvalid(
+    const char* func_name,
+    int exact,
+    Py_ssize_t num_min,
+    Py_ssize_t num_max,
+    Py_ssize_t num_found)
+{
+    Py_ssize_t num_expected;
+    const char *more_or_less;
+    if (num_found < num_min) {
+        num_expected = num_min;
+        more_or_less = "at least";
+    } else {
+        num_expected = num_max;
+        more_or_less = "at most";
+    }
+    if (exact) {
+        more_or_less = "exactly";
+    }
+    PyErr_Format(PyExc_TypeError,
+                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
+                 func_name, more_or_less, num_expected,
+                 (num_expected == 1) ? "" : "s", num_found);
+}
+
+/* RaiseDoubleKeywords */
+static void __Pyx_RaiseDoubleKeywordsError(
+    const char* func_name,
+    PyObject* kw_name)
+{
+    PyErr_Format(PyExc_TypeError,
+        #if PY_MAJOR_VERSION >= 3
+        "%s() got multiple values for keyword argument '%U'", func_name, kw_name);
+        #else
+        "%s() got multiple values for keyword argument '%s'", func_name,
+        PyString_AsString(kw_name));
+        #endif
+}
+
+/* ParseKeywords */
+static int __Pyx_ParseOptionalKeywords(
+    PyObject *kwds,
+    PyObject *const *kwvalues,
+    PyObject **argnames[],
+    PyObject *kwds2,
+    PyObject *values[],
+    Py_ssize_t num_pos_args,
+    const char* function_name)
+{
+    PyObject *key = 0, *value = 0;
+    Py_ssize_t pos = 0;
+    PyObject*** name;
+    PyObject*** first_kw_arg = argnames + num_pos_args;
+    int kwds_is_tuple = CYTHON_METH_FASTCALL && likely(PyTuple_Check(kwds));
+    while (1) {
+        Py_XDECREF(key); key = NULL;
+        Py_XDECREF(value); value = NULL;
+        if (kwds_is_tuple) {
+            Py_ssize_t size;
+#if CYTHON_ASSUME_SAFE_MACROS
+            size = PyTuple_GET_SIZE(kwds);
+#else
+            size = PyTuple_Size(kwds);
+            if (size < 0) goto bad;
+#endif
+            if (pos >= size) break;
+#if CYTHON_AVOID_BORROWED_REFS
+            key = __Pyx_PySequence_ITEM(kwds, pos);
+            if (!key) goto bad;
+#elif CYTHON_ASSUME_SAFE_MACROS
+            key = PyTuple_GET_ITEM(kwds, pos);
+#else
+            key = PyTuple_GetItem(kwds, pos);
+            if (!key) goto bad;
+#endif
+            value = kwvalues[pos];
+            pos++;
+        }
+        else
+        {
+            if (!PyDict_Next(kwds, &pos, &key, &value)) break;
+#if CYTHON_AVOID_BORROWED_REFS
+            Py_INCREF(key);
+#endif
+        }
+        name = first_kw_arg;
+        while (*name && (**name != key)) name++;
+        if (*name) {
+            values[name-argnames] = value;
+#if CYTHON_AVOID_BORROWED_REFS
+            Py_INCREF(value);
+            Py_DECREF(key);
+#endif
+            key = NULL;
+            value = NULL;
+            continue;
+        }
+#if !CYTHON_AVOID_BORROWED_REFS
+        Py_INCREF(key);
+#endif
+        Py_INCREF(value);
+        name = first_kw_arg;
+        #if PY_MAJOR_VERSION < 3
+        if (likely(PyString_Check(key))) {
+            while (*name) {
+                if ((CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**name) == PyString_GET_SIZE(key))
+                        && _PyString_Eq(**name, key)) {
+                    values[name-argnames] = value;
+#if CYTHON_AVOID_BORROWED_REFS
+                    value = NULL;
+#endif
+                    break;
+                }
+                name++;
+            }
+            if (*name) continue;
+            else {
+                PyObject*** argname = argnames;
+                while (argname != first_kw_arg) {
+                    if ((**argname == key) || (
+                            (CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**argname) == PyString_GET_SIZE(key))
+                             && _PyString_Eq(**argname, key))) {
+                        goto arg_passed_twice;
+                    }
+                    argname++;
+                }
+            }
+        } else
+        #endif
+        if (likely(PyUnicode_Check(key))) {
+            while (*name) {
+                int cmp = (
+                #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
+                    (__Pyx_PyUnicode_GET_LENGTH(**name) != __Pyx_PyUnicode_GET_LENGTH(key)) ? 1 :
+                #endif
+                    PyUnicode_Compare(**name, key)
+                );
+                if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
+                if (cmp == 0) {
+                    values[name-argnames] = value;
+#if CYTHON_AVOID_BORROWED_REFS
+                    value = NULL;
+#endif
+                    break;
+                }
+                name++;
+            }
+            if (*name) continue;
+            else {
+                PyObject*** argname = argnames;
+                while (argname != first_kw_arg) {
+                    int cmp = (**argname == key) ? 0 :
+                    #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
+                        (__Pyx_PyUnicode_GET_LENGTH(**argname) != __Pyx_PyUnicode_GET_LENGTH(key)) ? 1 :
+                    #endif
+                        PyUnicode_Compare(**argname, key);
+                    if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
+                    if (cmp == 0) goto arg_passed_twice;
+                    argname++;
+                }
+            }
+        } else
+            goto invalid_keyword_type;
+        if (kwds2) {
+            if (unlikely(PyDict_SetItem(kwds2, key, value))) goto bad;
+        } else {
+            goto invalid_keyword;
+        }
+    }
+    Py_XDECREF(key);
+    Py_XDECREF(value);
+    return 0;
+arg_passed_twice:
+    __Pyx_RaiseDoubleKeywordsError(function_name, key);
+    goto bad;
+invalid_keyword_type:
+    PyErr_Format(PyExc_TypeError,
+        "%.200s() keywords must be strings", function_name);
+    goto bad;
+invalid_keyword:
+    #if PY_MAJOR_VERSION < 3
+    PyErr_Format(PyExc_TypeError,
+        "%.200s() got an unexpected keyword argument '%.200s'",
+        function_name, PyString_AsString(key));
+    #else
+    PyErr_Format(PyExc_TypeError,
+        "%s() got an unexpected keyword argument '%U'",
+        function_name, key);
+    #endif
+bad:
+    Py_XDECREF(key);
+    Py_XDECREF(value);
+    return -1;
+}
+
 /* ArgTypeTest */
 static int __Pyx__ArgTypeTest(PyObject *obj, PyTypeObject *type, const char *name, int exact)
 {
     __Pyx_TypeName type_name;
     __Pyx_TypeName obj_type_name;
     if (unlikely(!type)) {
         PyErr_SetString(PyExc_SystemError, "Missing type object");
@@ -15472,42 +15643,147 @@
         "Argument '%.200s' has incorrect type (expected " __Pyx_FMT_TYPENAME
         ", got " __Pyx_FMT_TYPENAME ")", name, type_name, obj_type_name);
     __Pyx_DECREF_TypeName(type_name);
     __Pyx_DECREF_TypeName(obj_type_name);
     return 0;
 }
 
-/* unicode_tailmatch */
-static int __Pyx_PyUnicode_TailmatchTuple(PyObject* s, PyObject* substrings,
-                                          Py_ssize_t start, Py_ssize_t end, int direction) {
-    Py_ssize_t i, count = PyTuple_GET_SIZE(substrings);
-    for (i = 0; i < count; i++) {
-        Py_ssize_t result;
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        result = PyUnicode_Tailmatch(s, PyTuple_GET_ITEM(substrings, i),
-                                     start, end, direction);
+/* RaiseUnexpectedTypeError */
+static int
+__Pyx_RaiseUnexpectedTypeError(const char *expected, PyObject *obj)
+{
+    __Pyx_TypeName obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
+    PyErr_Format(PyExc_TypeError, "Expected %s, got " __Pyx_FMT_TYPENAME,
+                 expected, obj_type_name);
+    __Pyx_DECREF_TypeName(obj_type_name);
+    return 0;
+}
+
+/* KeywordStringCheck */
+static int __Pyx_CheckKeywordStrings(
+    PyObject *kw,
+    const char* function_name,
+    int kw_allowed)
+{
+    PyObject* key = 0;
+    Py_ssize_t pos = 0;
+#if CYTHON_COMPILING_IN_PYPY
+    if (!kw_allowed && PyDict_Next(kw, &pos, &key, 0))
+        goto invalid_keyword;
+    return 1;
+#else
+    if (CYTHON_METH_FASTCALL && likely(PyTuple_Check(kw))) {
+        Py_ssize_t kwsize;
+#if CYTHON_ASSUME_SAFE_MACROS
+        kwsize = PyTuple_GET_SIZE(kw);
+#else
+        kwsize = PyTuple_Size(kw);
+        if (kwsize < 0) return 0;
+#endif
+        if (unlikely(kwsize == 0))
+            return 1;
+        if (!kw_allowed) {
+#if CYTHON_ASSUME_SAFE_MACROS
+            key = PyTuple_GET_ITEM(kw, 0);
+#else
+            key = PyTuple_GetItem(kw, pos);
+            if (!key) return 0;
+#endif
+            goto invalid_keyword;
+        }
+#if PY_VERSION_HEX < 0x03090000
+        for (pos = 0; pos < kwsize; pos++) {
+#if CYTHON_ASSUME_SAFE_MACROS
+            key = PyTuple_GET_ITEM(kw, pos);
 #else
-        PyObject* sub = PySequence_ITEM(substrings, i);
-        if (unlikely(!sub)) return -1;
-        result = PyUnicode_Tailmatch(s, sub, start, end, direction);
-        Py_DECREF(sub);
+            key = PyTuple_GetItem(kw, pos);
+            if (!key) return 0;
 #endif
-        if (result) {
-            return (int) result;
+            if (unlikely(!PyUnicode_Check(key)))
+                goto invalid_keyword_type;
         }
+#endif
+        return 1;
     }
+    while (PyDict_Next(kw, &pos, &key, 0)) {
+        #if PY_MAJOR_VERSION < 3
+        if (unlikely(!PyString_Check(key)))
+        #endif
+            if (unlikely(!PyUnicode_Check(key)))
+                goto invalid_keyword_type;
+    }
+    if (!kw_allowed && unlikely(key))
+        goto invalid_keyword;
+    return 1;
+invalid_keyword_type:
+    PyErr_Format(PyExc_TypeError,
+        "%.200s() keywords must be strings", function_name);
+    return 0;
+#endif
+invalid_keyword:
+    #if PY_MAJOR_VERSION < 3
+    PyErr_Format(PyExc_TypeError,
+        "%.200s() got an unexpected keyword argument '%.200s'",
+        function_name, PyString_AsString(key));
+    #else
+    PyErr_Format(PyExc_TypeError,
+        "%s() got an unexpected keyword argument '%U'",
+        function_name, key);
+    #endif
     return 0;
 }
-static int __Pyx_PyUnicode_Tailmatch(PyObject* s, PyObject* substr,
-                                     Py_ssize_t start, Py_ssize_t end, int direction) {
-    if (unlikely(PyTuple_Check(substr))) {
-        return __Pyx_PyUnicode_TailmatchTuple(s, substr, start, end, direction);
+
+/* PyObjectCall */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
+    PyObject *result;
+    ternaryfunc call = Py_TYPE(func)->tp_call;
+    if (unlikely(!call))
+        return PyObject_Call(func, arg, kw);
+    #if PY_MAJOR_VERSION < 3
+    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
+        return NULL;
+    #else
+    if (unlikely(Py_EnterRecursiveCall(" while calling a Python object")))
+        return NULL;
+    #endif
+    result = (*call)(func, arg, kw);
+    Py_LeaveRecursiveCall();
+    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
+        PyErr_SetString(
+            PyExc_SystemError,
+            "NULL result without error in PyObject_Call");
+    }
+    return result;
+}
+#endif
+
+/* DictGetItem */
+#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
+static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key) {
+    PyObject *value;
+    value = PyDict_GetItemWithError(d, key);
+    if (unlikely(!value)) {
+        if (!PyErr_Occurred()) {
+            if (unlikely(PyTuple_Check(key))) {
+                PyObject* args = PyTuple_Pack(1, key);
+                if (likely(args)) {
+                    PyErr_SetObject(PyExc_KeyError, args);
+                    Py_DECREF(args);
+                }
+            } else {
+                PyErr_SetObject(PyExc_KeyError, key);
+            }
+        }
+        return NULL;
     }
-    return (int) PyUnicode_Tailmatch(s, substr, start, end, direction);
+    Py_INCREF(value);
+    return value;
 }
+#endif
 
 /* PyFunctionFastCall */
 #if CYTHON_FAST_PYCALL && !CYTHON_VECTORCALL
 static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                                PyObject *globals) {
     PyFrameObject *f;
     PyThreadState *tstate = __Pyx_PyThreadState_Current;
@@ -15624,39 +15900,14 @@
     Py_XDECREF(kwtuple);
 done:
     Py_LeaveRecursiveCall();
     return result;
 }
 #endif
 
-/* PyObjectCall */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
-    PyObject *result;
-    ternaryfunc call = Py_TYPE(func)->tp_call;
-    if (unlikely(!call))
-        return PyObject_Call(func, arg, kw);
-    #if PY_MAJOR_VERSION < 3
-    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
-        return NULL;
-    #else
-    if (unlikely(Py_EnterRecursiveCall(" while calling a Python object")))
-        return NULL;
-    #endif
-    result = (*call)(func, arg, kw);
-    Py_LeaveRecursiveCall();
-    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
-        PyErr_SetString(
-            PyExc_SystemError,
-            "NULL result without error in PyObject_Call");
-    }
-    return result;
-}
-#endif
-
 /* PyObjectCallMethO */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg) {
     PyObject *self, *result;
     PyCFunction cfunc;
     cfunc = __Pyx_CyOrPyCFunction_GET_FUNCTION(func);
     self = __Pyx_CyOrPyCFunction_GET_SELF(func);
@@ -15752,657 +16003,14 @@
     #if PY_VERSION_HEX >= 0x03090000 && !CYTHON_COMPILING_IN_LIMITED_API
     return PyObject_VectorcallDict(func, args, (size_t)nargs, kwargs);
     #else
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
     #endif
 }
 
-/* GetItemInt */
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
-    PyObject *r;
-    if (unlikely(!j)) return NULL;
-    r = PyObject_GetItem(o, j);
-    Py_DECREF(j);
-    return r;
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyList_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
-        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyTuple_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
-        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
-                                                     CYTHON_NCP_UNUSED int wraparound,
-                                                     CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
-    if (is_list || PyList_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
-        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
-            PyObject *r = PyList_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
-        }
-    }
-    else if (PyTuple_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
-        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
-            PyObject *r = PyTuple_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
-        }
-    } else {
-        PyMappingMethods *mm = Py_TYPE(o)->tp_as_mapping;
-        PySequenceMethods *sm = Py_TYPE(o)->tp_as_sequence;
-        if (mm && mm->mp_subscript) {
-            PyObject *r, *key = PyInt_FromSsize_t(i);
-            if (unlikely(!key)) return NULL;
-            r = mm->mp_subscript(o, key);
-            Py_DECREF(key);
-            return r;
-        }
-        if (likely(sm && sm->sq_item)) {
-            if (wraparound && unlikely(i < 0) && likely(sm->sq_length)) {
-                Py_ssize_t l = sm->sq_length(o);
-                if (likely(l >= 0)) {
-                    i += l;
-                } else {
-                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
-                        return NULL;
-                    PyErr_Clear();
-                }
-            }
-            return sm->sq_item(o, i);
-        }
-    }
-#else
-    if (is_list || !PyMapping_Check(o)) {
-        return PySequence_GetItem(o, i);
-    }
-#endif
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-}
-
-/* PyObjectCallOneArg */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
-    PyObject *args[2] = {NULL, arg};
-    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
-}
-
-/* ObjectGetItem */
-#if CYTHON_USE_TYPE_SLOTS
-static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject *index) {
-    PyObject *runerr = NULL;
-    Py_ssize_t key_value;
-    key_value = __Pyx_PyIndex_AsSsize_t(index);
-    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {
-        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);
-    }
-    if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {
-        __Pyx_TypeName index_type_name = __Pyx_PyType_GetName(Py_TYPE(index));
-        PyErr_Clear();
-        PyErr_Format(PyExc_IndexError,
-            "cannot fit '" __Pyx_FMT_TYPENAME "' into an index-sized integer", index_type_name);
-        __Pyx_DECREF_TypeName(index_type_name);
-    }
-    return NULL;
-}
-static PyObject *__Pyx_PyObject_GetItem_Slow(PyObject *obj, PyObject *key) {
-    __Pyx_TypeName obj_type_name;
-    if (likely(PyType_Check(obj))) {
-        PyObject *meth = __Pyx_PyObject_GetAttrStrNoError(obj, __pyx_n_s_class_getitem);
-        if (!meth) {
-            PyErr_Clear();
-        } else {
-            PyObject *result = __Pyx_PyObject_CallOneArg(meth, key);
-            Py_DECREF(meth);
-            return result;
-        }
-    }
-    obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
-    PyErr_Format(PyExc_TypeError,
-        "'" __Pyx_FMT_TYPENAME "' object is not subscriptable", obj_type_name);
-    __Pyx_DECREF_TypeName(obj_type_name);
-    return NULL;
-}
-static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject *key) {
-    PyTypeObject *tp = Py_TYPE(obj);
-    PyMappingMethods *mm = tp->tp_as_mapping;
-    PySequenceMethods *sm = tp->tp_as_sequence;
-    if (likely(mm && mm->mp_subscript)) {
-        return mm->mp_subscript(obj, key);
-    }
-    if (likely(sm && sm->sq_item)) {
-        return __Pyx_PyObject_GetIndex(obj, key);
-    }
-    return __Pyx_PyObject_GetItem_Slow(obj, key);
-}
-#endif
-
-/* GetTopmostException */
-#if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
-static _PyErr_StackItem *
-__Pyx_PyErr_GetTopmostException(PyThreadState *tstate)
-{
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    while ((exc_info->exc_value == NULL || exc_info->exc_value == Py_None) &&
-           exc_info->previous_item != NULL)
-    {
-        exc_info = exc_info->previous_item;
-    }
-    return exc_info;
-}
-#endif
-
-/* SaveResetException */
-#if CYTHON_FAST_THREAD_STATE
-static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
-  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
-    _PyErr_StackItem *exc_info = __Pyx_PyErr_GetTopmostException(tstate);
-    PyObject *exc_value = exc_info->exc_value;
-    if (exc_value == NULL || exc_value == Py_None) {
-        *value = NULL;
-        *type = NULL;
-        *tb = NULL;
-    } else {
-        *value = exc_value;
-        Py_INCREF(*value);
-        *type = (PyObject*) Py_TYPE(exc_value);
-        Py_INCREF(*type);
-        *tb = PyException_GetTraceback(exc_value);
-    }
-  #elif CYTHON_USE_EXC_INFO_STACK
-    _PyErr_StackItem *exc_info = __Pyx_PyErr_GetTopmostException(tstate);
-    *type = exc_info->exc_type;
-    *value = exc_info->exc_value;
-    *tb = exc_info->exc_traceback;
-    Py_XINCREF(*type);
-    Py_XINCREF(*value);
-    Py_XINCREF(*tb);
-  #else
-    *type = tstate->exc_type;
-    *value = tstate->exc_value;
-    *tb = tstate->exc_traceback;
-    Py_XINCREF(*type);
-    Py_XINCREF(*value);
-    Py_XINCREF(*tb);
-  #endif
-}
-static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
-  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    PyObject *tmp_value = exc_info->exc_value;
-    exc_info->exc_value = value;
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(type);
-    Py_XDECREF(tb);
-  #else
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-    #if CYTHON_USE_EXC_INFO_STACK
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    tmp_type = exc_info->exc_type;
-    tmp_value = exc_info->exc_value;
-    tmp_tb = exc_info->exc_traceback;
-    exc_info->exc_type = type;
-    exc_info->exc_value = value;
-    exc_info->exc_traceback = tb;
-    #else
-    tmp_type = tstate->exc_type;
-    tmp_value = tstate->exc_value;
-    tmp_tb = tstate->exc_traceback;
-    tstate->exc_type = type;
-    tstate->exc_value = value;
-    tstate->exc_traceback = tb;
-    #endif
-    Py_XDECREF(tmp_type);
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(tmp_tb);
-  #endif
-}
-#endif
-
-/* GetException */
-#if CYTHON_FAST_THREAD_STATE
-static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb)
-#else
-static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb)
-#endif
-{
-    PyObject *local_type = NULL, *local_value, *local_tb = NULL;
-#if CYTHON_FAST_THREAD_STATE
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-  #if PY_VERSION_HEX >= 0x030C00A6
-    local_value = tstate->current_exception;
-    tstate->current_exception = 0;
-    if (likely(local_value)) {
-        local_type = (PyObject*) Py_TYPE(local_value);
-        Py_INCREF(local_type);
-        local_tb = PyException_GetTraceback(local_value);
-    }
-  #else
-    local_type = tstate->curexc_type;
-    local_value = tstate->curexc_value;
-    local_tb = tstate->curexc_traceback;
-    tstate->curexc_type = 0;
-    tstate->curexc_value = 0;
-    tstate->curexc_traceback = 0;
-  #endif
-#else
-    PyErr_Fetch(&local_type, &local_value, &local_tb);
-#endif
-    PyErr_NormalizeException(&local_type, &local_value, &local_tb);
-#if CYTHON_FAST_THREAD_STATE && PY_VERSION_HEX >= 0x030C00A6
-    if (unlikely(tstate->current_exception))
-#elif CYTHON_FAST_THREAD_STATE
-    if (unlikely(tstate->curexc_type))
-#else
-    if (unlikely(PyErr_Occurred()))
-#endif
-        goto bad;
-    #if PY_MAJOR_VERSION >= 3
-    if (local_tb) {
-        if (unlikely(PyException_SetTraceback(local_value, local_tb) < 0))
-            goto bad;
-    }
-    #endif
-    Py_XINCREF(local_tb);
-    Py_XINCREF(local_type);
-    Py_XINCREF(local_value);
-    *type = local_type;
-    *value = local_value;
-    *tb = local_tb;
-#if CYTHON_FAST_THREAD_STATE
-    #if CYTHON_USE_EXC_INFO_STACK
-    {
-        _PyErr_StackItem *exc_info = tstate->exc_info;
-      #if PY_VERSION_HEX >= 0x030B00a4
-        tmp_value = exc_info->exc_value;
-        exc_info->exc_value = local_value;
-        tmp_type = NULL;
-        tmp_tb = NULL;
-        Py_XDECREF(local_type);
-        Py_XDECREF(local_tb);
-      #else
-        tmp_type = exc_info->exc_type;
-        tmp_value = exc_info->exc_value;
-        tmp_tb = exc_info->exc_traceback;
-        exc_info->exc_type = local_type;
-        exc_info->exc_value = local_value;
-        exc_info->exc_traceback = local_tb;
-      #endif
-    }
-    #else
-    tmp_type = tstate->exc_type;
-    tmp_value = tstate->exc_value;
-    tmp_tb = tstate->exc_traceback;
-    tstate->exc_type = local_type;
-    tstate->exc_value = local_value;
-    tstate->exc_traceback = local_tb;
-    #endif
-    Py_XDECREF(tmp_type);
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(tmp_tb);
-#else
-    PyErr_SetExcInfo(local_type, local_value, local_tb);
-#endif
-    return 0;
-bad:
-    *type = 0;
-    *value = 0;
-    *tb = 0;
-    Py_XDECREF(local_type);
-    Py_XDECREF(local_value);
-    Py_XDECREF(local_tb);
-    return -1;
-}
-
-/* RaiseException */
-#if PY_MAJOR_VERSION < 3
-static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
-    __Pyx_PyThreadState_declare
-    CYTHON_UNUSED_VAR(cause);
-    Py_XINCREF(type);
-    if (!value || value == Py_None)
-        value = NULL;
-    else
-        Py_INCREF(value);
-    if (!tb || tb == Py_None)
-        tb = NULL;
-    else {
-        Py_INCREF(tb);
-        if (!PyTraceBack_Check(tb)) {
-            PyErr_SetString(PyExc_TypeError,
-                "raise: arg 3 must be a traceback or None");
-            goto raise_error;
-        }
-    }
-    if (PyType_Check(type)) {
-#if CYTHON_COMPILING_IN_PYPY
-        if (!value) {
-            Py_INCREF(Py_None);
-            value = Py_None;
-        }
-#endif
-        PyErr_NormalizeException(&type, &value, &tb);
-    } else {
-        if (value) {
-            PyErr_SetString(PyExc_TypeError,
-                "instance exception may not have a separate value");
-            goto raise_error;
-        }
-        value = type;
-        type = (PyObject*) Py_TYPE(type);
-        Py_INCREF(type);
-        if (!PyType_IsSubtype((PyTypeObject *)type, (PyTypeObject *)PyExc_BaseException)) {
-            PyErr_SetString(PyExc_TypeError,
-                "raise: exception class must be a subclass of BaseException");
-            goto raise_error;
-        }
-    }
-    __Pyx_PyThreadState_assign
-    __Pyx_ErrRestore(type, value, tb);
-    return;
-raise_error:
-    Py_XDECREF(value);
-    Py_XDECREF(type);
-    Py_XDECREF(tb);
-    return;
-}
-#else
-static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
-    PyObject* owned_instance = NULL;
-    if (tb == Py_None) {
-        tb = 0;
-    } else if (tb && !PyTraceBack_Check(tb)) {
-        PyErr_SetString(PyExc_TypeError,
-            "raise: arg 3 must be a traceback or None");
-        goto bad;
-    }
-    if (value == Py_None)
-        value = 0;
-    if (PyExceptionInstance_Check(type)) {
-        if (value) {
-            PyErr_SetString(PyExc_TypeError,
-                "instance exception may not have a separate value");
-            goto bad;
-        }
-        value = type;
-        type = (PyObject*) Py_TYPE(value);
-    } else if (PyExceptionClass_Check(type)) {
-        PyObject *instance_class = NULL;
-        if (value && PyExceptionInstance_Check(value)) {
-            instance_class = (PyObject*) Py_TYPE(value);
-            if (instance_class != type) {
-                int is_subclass = PyObject_IsSubclass(instance_class, type);
-                if (!is_subclass) {
-                    instance_class = NULL;
-                } else if (unlikely(is_subclass == -1)) {
-                    goto bad;
-                } else {
-                    type = instance_class;
-                }
-            }
-        }
-        if (!instance_class) {
-            PyObject *args;
-            if (!value)
-                args = PyTuple_New(0);
-            else if (PyTuple_Check(value)) {
-                Py_INCREF(value);
-                args = value;
-            } else
-                args = PyTuple_Pack(1, value);
-            if (!args)
-                goto bad;
-            owned_instance = PyObject_Call(type, args, NULL);
-            Py_DECREF(args);
-            if (!owned_instance)
-                goto bad;
-            value = owned_instance;
-            if (!PyExceptionInstance_Check(value)) {
-                PyErr_Format(PyExc_TypeError,
-                             "calling %R should have returned an instance of "
-                             "BaseException, not %R",
-                             type, Py_TYPE(value));
-                goto bad;
-            }
-        }
-    } else {
-        PyErr_SetString(PyExc_TypeError,
-            "raise: exception class must be a subclass of BaseException");
-        goto bad;
-    }
-    if (cause) {
-        PyObject *fixed_cause;
-        if (cause == Py_None) {
-            fixed_cause = NULL;
-        } else if (PyExceptionClass_Check(cause)) {
-            fixed_cause = PyObject_CallObject(cause, NULL);
-            if (fixed_cause == NULL)
-                goto bad;
-        } else if (PyExceptionInstance_Check(cause)) {
-            fixed_cause = cause;
-            Py_INCREF(fixed_cause);
-        } else {
-            PyErr_SetString(PyExc_TypeError,
-                            "exception causes must derive from "
-                            "BaseException");
-            goto bad;
-        }
-        PyException_SetCause(value, fixed_cause);
-    }
-    PyErr_SetObject(type, value);
-    if (tb) {
-      #if PY_VERSION_HEX >= 0x030C00A6
-        PyException_SetTraceback(value, tb);
-      #elif CYTHON_FAST_THREAD_STATE
-        PyThreadState *tstate = __Pyx_PyThreadState_Current;
-        PyObject* tmp_tb = tstate->curexc_traceback;
-        if (tb != tmp_tb) {
-            Py_INCREF(tb);
-            tstate->curexc_traceback = tb;
-            Py_XDECREF(tmp_tb);
-        }
-#else
-        PyObject *tmp_type, *tmp_value, *tmp_tb;
-        PyErr_Fetch(&tmp_type, &tmp_value, &tmp_tb);
-        Py_INCREF(tb);
-        PyErr_Restore(tmp_type, tmp_value, tb);
-        Py_XDECREF(tmp_tb);
-#endif
-    }
-bad:
-    Py_XDECREF(owned_instance);
-    return;
-}
-#endif
-
-/* SwapException */
-#if CYTHON_FAST_THREAD_STATE
-static CYTHON_INLINE void __Pyx__ExceptionSwap(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    tmp_value = exc_info->exc_value;
-    exc_info->exc_value = *value;
-    if (tmp_value == NULL || tmp_value == Py_None) {
-        Py_XDECREF(tmp_value);
-        tmp_value = NULL;
-        tmp_type = NULL;
-        tmp_tb = NULL;
-    } else {
-        tmp_type = (PyObject*) Py_TYPE(tmp_value);
-        Py_INCREF(tmp_type);
-        #if CYTHON_COMPILING_IN_CPYTHON
-        tmp_tb = ((PyBaseExceptionObject*) tmp_value)->traceback;
-        Py_XINCREF(tmp_tb);
-        #else
-        tmp_tb = PyException_GetTraceback(tmp_value);
-        #endif
-    }
-  #elif CYTHON_USE_EXC_INFO_STACK
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    tmp_type = exc_info->exc_type;
-    tmp_value = exc_info->exc_value;
-    tmp_tb = exc_info->exc_traceback;
-    exc_info->exc_type = *type;
-    exc_info->exc_value = *value;
-    exc_info->exc_traceback = *tb;
-  #else
-    tmp_type = tstate->exc_type;
-    tmp_value = tstate->exc_value;
-    tmp_tb = tstate->exc_traceback;
-    tstate->exc_type = *type;
-    tstate->exc_value = *value;
-    tstate->exc_traceback = *tb;
-  #endif
-    *type = tmp_type;
-    *value = tmp_value;
-    *tb = tmp_tb;
-}
-#else
-static CYTHON_INLINE void __Pyx_ExceptionSwap(PyObject **type, PyObject **value, PyObject **tb) {
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-    PyErr_GetExcInfo(&tmp_type, &tmp_value, &tmp_tb);
-    PyErr_SetExcInfo(*type, *value, *tb);
-    *type = tmp_type;
-    *value = tmp_value;
-    *tb = tmp_tb;
-}
-#endif
-
-/* RaiseArgTupleInvalid */
-static void __Pyx_RaiseArgtupleInvalid(
-    const char* func_name,
-    int exact,
-    Py_ssize_t num_min,
-    Py_ssize_t num_max,
-    Py_ssize_t num_found)
-{
-    Py_ssize_t num_expected;
-    const char *more_or_less;
-    if (num_found < num_min) {
-        num_expected = num_min;
-        more_or_less = "at least";
-    } else {
-        num_expected = num_max;
-        more_or_less = "at most";
-    }
-    if (exact) {
-        more_or_less = "exactly";
-    }
-    PyErr_Format(PyExc_TypeError,
-                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
-                 func_name, more_or_less, num_expected,
-                 (num_expected == 1) ? "" : "s", num_found);
-}
-
-/* KeywordStringCheck */
-static int __Pyx_CheckKeywordStrings(
-    PyObject *kw,
-    const char* function_name,
-    int kw_allowed)
-{
-    PyObject* key = 0;
-    Py_ssize_t pos = 0;
-#if CYTHON_COMPILING_IN_PYPY
-    if (!kw_allowed && PyDict_Next(kw, &pos, &key, 0))
-        goto invalid_keyword;
-    return 1;
-#else
-    if (CYTHON_METH_FASTCALL && likely(PyTuple_Check(kw))) {
-        Py_ssize_t kwsize;
-#if CYTHON_ASSUME_SAFE_MACROS
-        kwsize = PyTuple_GET_SIZE(kw);
-#else
-        kwsize = PyTuple_Size(kw);
-        if (kwsize < 0) return 0;
-#endif
-        if (unlikely(kwsize == 0))
-            return 1;
-        if (!kw_allowed) {
-#if CYTHON_ASSUME_SAFE_MACROS
-            key = PyTuple_GET_ITEM(kw, 0);
-#else
-            key = PyTuple_GetItem(kw, pos);
-            if (!key) return 0;
-#endif
-            goto invalid_keyword;
-        }
-#if PY_VERSION_HEX < 0x03090000
-        for (pos = 0; pos < kwsize; pos++) {
-#if CYTHON_ASSUME_SAFE_MACROS
-            key = PyTuple_GET_ITEM(kw, pos);
-#else
-            key = PyTuple_GetItem(kw, pos);
-            if (!key) return 0;
-#endif
-            if (unlikely(!PyUnicode_Check(key)))
-                goto invalid_keyword_type;
-        }
-#endif
-        return 1;
-    }
-    while (PyDict_Next(kw, &pos, &key, 0)) {
-        #if PY_MAJOR_VERSION < 3
-        if (unlikely(!PyString_Check(key)))
-        #endif
-            if (unlikely(!PyUnicode_Check(key)))
-                goto invalid_keyword_type;
-    }
-    if (!kw_allowed && unlikely(key))
-        goto invalid_keyword;
-    return 1;
-invalid_keyword_type:
-    PyErr_Format(PyExc_TypeError,
-        "%.200s() keywords must be strings", function_name);
-    return 0;
-#endif
-invalid_keyword:
-    #if PY_MAJOR_VERSION < 3
-    PyErr_Format(PyExc_TypeError,
-        "%.200s() got an unexpected keyword argument '%.200s'",
-        function_name, PyString_AsString(key));
-    #else
-    PyErr_Format(PyExc_TypeError,
-        "%s() got an unexpected keyword argument '%U'",
-        function_name, key);
-    #endif
-    return 0;
-}
-
 /* GetAttr3 */
 #if __PYX_LIMITED_VERSION_HEX < 0x030d00A1
 static PyObject *__Pyx_GetAttr3Default(PyObject *d) {
     __Pyx_PyThreadState_declare
     __Pyx_PyThreadState_assign
     if (unlikely(!__Pyx_PyErr_ExceptionMatches(PyExc_AttributeError)))
         return NULL;
@@ -16496,219 +16104,54 @@
         return __Pyx_NewRef(result);
     }
     PyErr_Clear();
 #endif
     return __Pyx_GetBuiltinName(name);
 }
 
-/* RaiseDoubleKeywords */
-static void __Pyx_RaiseDoubleKeywordsError(
-    const char* func_name,
-    PyObject* kw_name)
-{
-    PyErr_Format(PyExc_TypeError,
-        #if PY_MAJOR_VERSION >= 3
-        "%s() got multiple values for keyword argument '%U'", func_name, kw_name);
-        #else
-        "%s() got multiple values for keyword argument '%s'", func_name,
-        PyString_AsString(kw_name));
-        #endif
-}
-
-/* ParseKeywords */
-static int __Pyx_ParseOptionalKeywords(
-    PyObject *kwds,
-    PyObject *const *kwvalues,
-    PyObject **argnames[],
-    PyObject *kwds2,
-    PyObject *values[],
-    Py_ssize_t num_pos_args,
-    const char* function_name)
-{
-    PyObject *key = 0, *value = 0;
-    Py_ssize_t pos = 0;
-    PyObject*** name;
-    PyObject*** first_kw_arg = argnames + num_pos_args;
-    int kwds_is_tuple = CYTHON_METH_FASTCALL && likely(PyTuple_Check(kwds));
-    while (1) {
-        Py_XDECREF(key); key = NULL;
-        Py_XDECREF(value); value = NULL;
-        if (kwds_is_tuple) {
-            Py_ssize_t size;
-#if CYTHON_ASSUME_SAFE_MACROS
-            size = PyTuple_GET_SIZE(kwds);
-#else
-            size = PyTuple_Size(kwds);
-            if (size < 0) goto bad;
-#endif
-            if (pos >= size) break;
-#if CYTHON_AVOID_BORROWED_REFS
-            key = __Pyx_PySequence_ITEM(kwds, pos);
-            if (!key) goto bad;
-#elif CYTHON_ASSUME_SAFE_MACROS
-            key = PyTuple_GET_ITEM(kwds, pos);
+/* GetAttr */
+static CYTHON_INLINE PyObject *__Pyx_GetAttr(PyObject *o, PyObject *n) {
+#if CYTHON_USE_TYPE_SLOTS
+#if PY_MAJOR_VERSION >= 3
+    if (likely(PyUnicode_Check(n)))
 #else
-            key = PyTuple_GetItem(kwds, pos);
-            if (!key) goto bad;
-#endif
-            value = kwvalues[pos];
-            pos++;
-        }
-        else
-        {
-            if (!PyDict_Next(kwds, &pos, &key, &value)) break;
-#if CYTHON_AVOID_BORROWED_REFS
-            Py_INCREF(key);
-#endif
-        }
-        name = first_kw_arg;
-        while (*name && (**name != key)) name++;
-        if (*name) {
-            values[name-argnames] = value;
-#if CYTHON_AVOID_BORROWED_REFS
-            Py_INCREF(value);
-            Py_DECREF(key);
-#endif
-            key = NULL;
-            value = NULL;
-            continue;
-        }
-#if !CYTHON_AVOID_BORROWED_REFS
-        Py_INCREF(key);
-#endif
-        Py_INCREF(value);
-        name = first_kw_arg;
-        #if PY_MAJOR_VERSION < 3
-        if (likely(PyString_Check(key))) {
-            while (*name) {
-                if ((CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**name) == PyString_GET_SIZE(key))
-                        && _PyString_Eq(**name, key)) {
-                    values[name-argnames] = value;
-#if CYTHON_AVOID_BORROWED_REFS
-                    value = NULL;
+    if (likely(PyString_Check(n)))
 #endif
-                    break;
-                }
-                name++;
-            }
-            if (*name) continue;
-            else {
-                PyObject*** argname = argnames;
-                while (argname != first_kw_arg) {
-                    if ((**argname == key) || (
-                            (CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**argname) == PyString_GET_SIZE(key))
-                             && _PyString_Eq(**argname, key))) {
-                        goto arg_passed_twice;
-                    }
-                    argname++;
-                }
-            }
-        } else
-        #endif
-        if (likely(PyUnicode_Check(key))) {
-            while (*name) {
-                int cmp = (
-                #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
-                    (__Pyx_PyUnicode_GET_LENGTH(**name) != __Pyx_PyUnicode_GET_LENGTH(key)) ? 1 :
-                #endif
-                    PyUnicode_Compare(**name, key)
-                );
-                if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
-                if (cmp == 0) {
-                    values[name-argnames] = value;
-#if CYTHON_AVOID_BORROWED_REFS
-                    value = NULL;
+        return __Pyx_PyObject_GetAttrStr(o, n);
 #endif
-                    break;
-                }
-                name++;
-            }
-            if (*name) continue;
-            else {
-                PyObject*** argname = argnames;
-                while (argname != first_kw_arg) {
-                    int cmp = (**argname == key) ? 0 :
-                    #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
-                        (__Pyx_PyUnicode_GET_LENGTH(**argname) != __Pyx_PyUnicode_GET_LENGTH(key)) ? 1 :
-                    #endif
-                        PyUnicode_Compare(**argname, key);
-                    if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
-                    if (cmp == 0) goto arg_passed_twice;
-                    argname++;
-                }
-            }
-        } else
-            goto invalid_keyword_type;
-        if (kwds2) {
-            if (unlikely(PyDict_SetItem(kwds2, key, value))) goto bad;
-        } else {
-            goto invalid_keyword;
-        }
-    }
-    Py_XDECREF(key);
-    Py_XDECREF(value);
-    return 0;
-arg_passed_twice:
-    __Pyx_RaiseDoubleKeywordsError(function_name, key);
-    goto bad;
-invalid_keyword_type:
-    PyErr_Format(PyExc_TypeError,
-        "%.200s() keywords must be strings", function_name);
-    goto bad;
-invalid_keyword:
-    #if PY_MAJOR_VERSION < 3
-    PyErr_Format(PyExc_TypeError,
-        "%.200s() got an unexpected keyword argument '%.200s'",
-        function_name, PyString_AsString(key));
-    #else
-    PyErr_Format(PyExc_TypeError,
-        "%s() got an unexpected keyword argument '%U'",
-        function_name, key);
-    #endif
-bad:
-    Py_XDECREF(key);
-    Py_XDECREF(value);
-    return -1;
-}
-
-/* RaiseUnexpectedTypeError */
-static int
-__Pyx_RaiseUnexpectedTypeError(const char *expected, PyObject *obj)
-{
-    __Pyx_TypeName obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
-    PyErr_Format(PyExc_TypeError, "Expected %s, got " __Pyx_FMT_TYPENAME,
-                 expected, obj_type_name);
-    __Pyx_DECREF_TypeName(obj_type_name);
-    return 0;
+    return PyObject_GetAttr(o, n);
 }
 
-/* DictGetItem */
-#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
-static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key) {
-    PyObject *value;
-    value = PyDict_GetItemWithError(d, key);
-    if (unlikely(!value)) {
-        if (!PyErr_Occurred()) {
-            if (unlikely(PyTuple_Check(key))) {
-                PyObject* args = PyTuple_Pack(1, key);
-                if (likely(args)) {
-                    PyErr_SetObject(PyExc_KeyError, args);
-                    Py_DECREF(args);
-                }
-            } else {
-                PyErr_SetObject(PyExc_KeyError, key);
-            }
-        }
-        return NULL;
+/* HasAttr */
+#if __PYX_LIMITED_VERSION_HEX < 0x030d00A1
+static CYTHON_INLINE int __Pyx_HasAttr(PyObject *o, PyObject *n) {
+    PyObject *r;
+    if (unlikely(!__Pyx_PyBaseString_Check(n))) {
+        PyErr_SetString(PyExc_TypeError,
+                        "hasattr(): attribute name must be string");
+        return -1;
+    }
+    r = __Pyx_GetAttr(o, n);
+    if (!r) {
+        PyErr_Clear();
+        return 0;
+    } else {
+        Py_DECREF(r);
+        return 1;
     }
-    Py_INCREF(value);
-    return value;
 }
 #endif
 
+/* PyUnicode_Unicode */
+static CYTHON_INLINE PyObject* __Pyx_PyUnicode_Unicode(PyObject *obj) {
+    if (unlikely(obj == Py_None))
+        obj = __pyx_kp_u_None;
+    return __Pyx_NewRef(obj);
+}
+
 /* JoinPyUnicode */
 static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
                                       Py_UCS4 max_char) {
 #if CYTHON_USE_UNICODE_INTERNALS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
     PyObject *result_uval;
     int result_ukind, kind_shift;
     Py_ssize_t i, char_pos;
@@ -16770,54 +16213,14 @@
     CYTHON_UNUSED_VAR(max_char);
     CYTHON_UNUSED_VAR(result_ulength);
     CYTHON_UNUSED_VAR(value_count);
     return PyUnicode_Join(__pyx_empty_unicode, value_tuple);
 #endif
 }
 
-/* RaiseUnboundLocalError */
-static CYTHON_INLINE void __Pyx_RaiseUnboundLocalError(const char *varname) {
-    PyErr_Format(PyExc_UnboundLocalError, "local variable '%s' referenced before assignment", varname);
-}
-
-/* RaiseClosureNameError */
-static CYTHON_INLINE void __Pyx_RaiseClosureNameError(const char *varname) {
-    PyErr_Format(PyExc_NameError, "free variable '%s' referenced before assignment in enclosing scope", varname);
-}
-
-/* pep479 */
-static void __Pyx_Generator_Replace_StopIteration(int in_async_gen) {
-    PyObject *exc, *val, *tb, *cur_exc;
-    __Pyx_PyThreadState_declare
-    #ifdef __Pyx_StopAsyncIteration_USED
-    int is_async_stopiteration = 0;
-    #endif
-    CYTHON_MAYBE_UNUSED_VAR(in_async_gen);
-    cur_exc = PyErr_Occurred();
-    if (likely(!__Pyx_PyErr_GivenExceptionMatches(cur_exc, PyExc_StopIteration))) {
-        #ifdef __Pyx_StopAsyncIteration_USED
-        if (in_async_gen && unlikely(__Pyx_PyErr_GivenExceptionMatches(cur_exc, __Pyx_PyExc_StopAsyncIteration))) {
-            is_async_stopiteration = 1;
-        } else
-        #endif
-            return;
-    }
-    __Pyx_PyThreadState_assign
-    __Pyx_GetException(&exc, &val, &tb);
-    Py_XDECREF(exc);
-    Py_XDECREF(val);
-    Py_XDECREF(tb);
-    PyErr_SetString(PyExc_RuntimeError,
-        #ifdef __Pyx_StopAsyncIteration_USED
-        is_async_stopiteration ? "async generator raised StopAsyncIteration" :
-        in_async_gen ? "async generator raised StopIteration" :
-        #endif
-        "generator raised StopIteration");
-}
-
 /* IterFinish */
 static CYTHON_INLINE int __Pyx_IterFinish(void) {
     PyObject* exc_type;
     __Pyx_PyThreadState_declare
     __Pyx_PyThreadState_assign
     exc_type = __Pyx_PyErr_CurrentExceptionType();
     if (unlikely(exc_type)) {
@@ -16831,14 +16234,20 @@
 
 /* PyObjectCallNoArg */
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallNoArg(PyObject *func) {
     PyObject *arg[2] = {NULL, NULL};
     return __Pyx_PyObject_FastCall(func, arg + 1, 0 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
 }
 
+/* PyObjectCallOneArg */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
+    PyObject *args[2] = {NULL, arg};
+    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+}
+
 /* PyObjectGetMethod */
 static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method) {
     PyObject *attr;
 #if CYTHON_UNPACK_METHODS && CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_PYTYPE_LOOKUP
     __Pyx_TypeName type_name;
     PyTypeObject *tp = Py_TYPE(obj);
     PyObject *descr;
@@ -17155,287 +16564,142 @@
         *pkey = next_item;
     } else {
         *pvalue = next_item;
     }
     return 1;
 }
 
-/* UnpackUnboundCMethod */
-static PyObject *__Pyx_SelflessCall(PyObject *method, PyObject *args, PyObject *kwargs) {
-    PyObject *result;
-    PyObject *selfless_args = PyTuple_GetSlice(args, 1, PyTuple_Size(args));
-    if (unlikely(!selfless_args)) return NULL;
-    result = PyObject_Call(method, selfless_args, kwargs);
-    Py_DECREF(selfless_args);
-    return result;
-}
-static PyMethodDef __Pyx_UnboundCMethod_Def = {
-     "CythonUnboundCMethod",
-     __PYX_REINTERPRET_FUNCION(PyCFunction, __Pyx_SelflessCall),
-     METH_VARARGS | METH_KEYWORDS,
-     NULL
-};
-static int __Pyx_TryUnpackUnboundCMethod(__Pyx_CachedCFunction* target) {
-    PyObject *method;
-    method = __Pyx_PyObject_GetAttrStr(target->type, *target->method_name);
-    if (unlikely(!method))
-        return -1;
-    target->method = method;
-#if CYTHON_COMPILING_IN_CPYTHON
-    #if PY_MAJOR_VERSION >= 3
-    if (likely(__Pyx_TypeCheck(method, &PyMethodDescr_Type)))
-    #else
-    if (likely(!__Pyx_CyOrPyCFunction_Check(method)))
-    #endif
-    {
-        PyMethodDescrObject *descr = (PyMethodDescrObject*) method;
-        target->func = descr->d_method->ml_meth;
-        target->flag = descr->d_method->ml_flags & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_STACKLESS);
-    } else
-#endif
-#if CYTHON_COMPILING_IN_PYPY
-#else
-    if (PyCFunction_Check(method))
-#endif
-    {
-        PyObject *self;
-        int self_found;
-#if CYTHON_COMPILING_IN_LIMITED_API || CYTHON_COMPILING_IN_PYPY
-        self = PyObject_GetAttrString(method, "__self__");
-        if (!self) {
-            PyErr_Clear();
-        }
-#else
-        self = PyCFunction_GET_SELF(method);
-#endif
-        self_found = (self && self != Py_None);
-#if CYTHON_COMPILING_IN_LIMITED_API || CYTHON_COMPILING_IN_PYPY
-        Py_XDECREF(self);
-#endif
-        if (self_found) {
-            PyObject *unbound_method = PyCFunction_New(&__Pyx_UnboundCMethod_Def, method);
-            if (unlikely(!unbound_method)) return -1;
-            Py_DECREF(method);
-            target->method = unbound_method;
-        }
-    }
-    return 0;
+/* RaiseUnboundLocalError */
+static CYTHON_INLINE void __Pyx_RaiseUnboundLocalError(const char *varname) {
+    PyErr_Format(PyExc_UnboundLocalError, "local variable '%s' referenced before assignment", varname);
 }
 
-/* CallUnboundCMethod0 */
-static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self) {
-    PyObject *args, *result = NULL;
-    if (unlikely(!cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
-#if CYTHON_ASSUME_SAFE_MACROS
-    args = PyTuple_New(1);
-    if (unlikely(!args)) goto bad;
-    Py_INCREF(self);
-    PyTuple_SET_ITEM(args, 0, self);
+/* GetException */
+#if CYTHON_FAST_THREAD_STATE
+static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb)
 #else
-    args = PyTuple_Pack(1, self);
-    if (unlikely(!args)) goto bad;
+static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb)
 #endif
-    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
-    Py_DECREF(args);
-bad:
-    return result;
-}
-
-/* py_dict_keys */
-static CYTHON_INLINE PyObject* __Pyx_PyDict_Keys(PyObject* d) {
-    if (PY_MAJOR_VERSION >= 3)
-        return __Pyx_CallUnboundCMethod0(&__pyx_umethod_PyDict_Type_keys, d);
-    else
-        return PyDict_Keys(d);
-}
-
-/* py_dict_values */
-static CYTHON_INLINE PyObject* __Pyx_PyDict_Values(PyObject* d) {
-    if (PY_MAJOR_VERSION >= 3)
-        return __Pyx_CallUnboundCMethod0(&__pyx_umethod_PyDict_Type_values, d);
-    else
-        return PyDict_Values(d);
-}
-
-/* py_dict_items */
-static CYTHON_INLINE PyObject* __Pyx_PyDict_Items(PyObject* d) {
-    if (PY_MAJOR_VERSION >= 3)
-        return __Pyx_CallUnboundCMethod0(&__pyx_umethod_PyDict_Type_items, d);
-    else
-        return PyDict_Items(d);
-}
-
-/* CallUnboundCMethod1 */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg) {
-    if (likely(cfunc->func)) {
-        int flag = cfunc->flag;
-        if (flag == METH_O) {
-            return (*(cfunc->func))(self, arg);
-        } else if ((PY_VERSION_HEX >= 0x030600B1) && flag == METH_FASTCALL) {
-            #if PY_VERSION_HEX >= 0x030700A0
-                return (*(__Pyx_PyCFunctionFast)(void*)(PyCFunction)cfunc->func)(self, &arg, 1);
-            #else
-                return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, &arg, 1, NULL);
-            #endif
-        } else if ((PY_VERSION_HEX >= 0x030700A0) && flag == (METH_FASTCALL | METH_KEYWORDS)) {
-            return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, &arg, 1, NULL);
-        }
+{
+    PyObject *local_type = NULL, *local_value, *local_tb = NULL;
+#if CYTHON_FAST_THREAD_STATE
+    PyObject *tmp_type, *tmp_value, *tmp_tb;
+  #if PY_VERSION_HEX >= 0x030C00A6
+    local_value = tstate->current_exception;
+    tstate->current_exception = 0;
+    if (likely(local_value)) {
+        local_type = (PyObject*) Py_TYPE(local_value);
+        Py_INCREF(local_type);
+        local_tb = PyException_GetTraceback(local_value);
     }
-    return __Pyx__CallUnboundCMethod1(cfunc, self, arg);
-}
+  #else
+    local_type = tstate->curexc_type;
+    local_value = tstate->curexc_value;
+    local_tb = tstate->curexc_traceback;
+    tstate->curexc_type = 0;
+    tstate->curexc_value = 0;
+    tstate->curexc_traceback = 0;
+  #endif
+#else
+    PyErr_Fetch(&local_type, &local_value, &local_tb);
 #endif
-static PyObject* __Pyx__CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg){
-    PyObject *args, *result = NULL;
-    if (unlikely(!cfunc->func && !cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
-#if CYTHON_COMPILING_IN_CPYTHON
-    if (cfunc->func && (cfunc->flag & METH_VARARGS)) {
-        args = PyTuple_New(1);
-        if (unlikely(!args)) goto bad;
-        Py_INCREF(arg);
-        PyTuple_SET_ITEM(args, 0, arg);
-        if (cfunc->flag & METH_KEYWORDS)
-            result = (*(PyCFunctionWithKeywords)(void*)(PyCFunction)cfunc->func)(self, args, NULL);
-        else
-            result = (*cfunc->func)(self, args);
-    } else {
-        args = PyTuple_New(2);
-        if (unlikely(!args)) goto bad;
-        Py_INCREF(self);
-        PyTuple_SET_ITEM(args, 0, self);
-        Py_INCREF(arg);
-        PyTuple_SET_ITEM(args, 1, arg);
-        result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
-    }
+    PyErr_NormalizeException(&local_type, &local_value, &local_tb);
+#if CYTHON_FAST_THREAD_STATE && PY_VERSION_HEX >= 0x030C00A6
+    if (unlikely(tstate->current_exception))
+#elif CYTHON_FAST_THREAD_STATE
+    if (unlikely(tstate->curexc_type))
 #else
-    args = PyTuple_Pack(2, self, arg);
-    if (unlikely(!args)) goto bad;
-    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
+    if (unlikely(PyErr_Occurred()))
 #endif
-bad:
-    Py_XDECREF(args);
-    return result;
-}
-
-/* CallUnboundCMethod2 */
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030600B1
-static CYTHON_INLINE PyObject *__Pyx_CallUnboundCMethod2(__Pyx_CachedCFunction *cfunc, PyObject *self, PyObject *arg1, PyObject *arg2) {
-    if (likely(cfunc->func)) {
-        PyObject *args[2] = {arg1, arg2};
-        if (cfunc->flag == METH_FASTCALL) {
-            #if PY_VERSION_HEX >= 0x030700A0
-            return (*(__Pyx_PyCFunctionFast)(void*)(PyCFunction)cfunc->func)(self, args, 2);
-            #else
-            return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, args, 2, NULL);
-            #endif
-        }
-        #if PY_VERSION_HEX >= 0x030700A0
-        if (cfunc->flag == (METH_FASTCALL | METH_KEYWORDS))
-            return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, args, 2, NULL);
-        #endif
+        goto bad;
+    #if PY_MAJOR_VERSION >= 3
+    if (local_tb) {
+        if (unlikely(PyException_SetTraceback(local_value, local_tb) < 0))
+            goto bad;
     }
-    return __Pyx__CallUnboundCMethod2(cfunc, self, arg1, arg2);
-}
-#endif
-static PyObject* __Pyx__CallUnboundCMethod2(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg1, PyObject* arg2){
-    PyObject *args, *result = NULL;
-    if (unlikely(!cfunc->func && !cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
-#if CYTHON_COMPILING_IN_CPYTHON
-    if (cfunc->func && (cfunc->flag & METH_VARARGS)) {
-        args = PyTuple_New(2);
-        if (unlikely(!args)) goto bad;
-        Py_INCREF(arg1);
-        PyTuple_SET_ITEM(args, 0, arg1);
-        Py_INCREF(arg2);
-        PyTuple_SET_ITEM(args, 1, arg2);
-        if (cfunc->flag & METH_KEYWORDS)
-            result = (*(PyCFunctionWithKeywords)(void*)(PyCFunction)cfunc->func)(self, args, NULL);
-        else
-            result = (*cfunc->func)(self, args);
-    } else {
-        args = PyTuple_New(3);
-        if (unlikely(!args)) goto bad;
-        Py_INCREF(self);
-        PyTuple_SET_ITEM(args, 0, self);
-        Py_INCREF(arg1);
-        PyTuple_SET_ITEM(args, 1, arg1);
-        Py_INCREF(arg2);
-        PyTuple_SET_ITEM(args, 2, arg2);
-        result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
+    #endif
+    Py_XINCREF(local_tb);
+    Py_XINCREF(local_type);
+    Py_XINCREF(local_value);
+    *type = local_type;
+    *value = local_value;
+    *tb = local_tb;
+#if CYTHON_FAST_THREAD_STATE
+    #if CYTHON_USE_EXC_INFO_STACK
+    {
+        _PyErr_StackItem *exc_info = tstate->exc_info;
+      #if PY_VERSION_HEX >= 0x030B00a4
+        tmp_value = exc_info->exc_value;
+        exc_info->exc_value = local_value;
+        tmp_type = NULL;
+        tmp_tb = NULL;
+        Py_XDECREF(local_type);
+        Py_XDECREF(local_tb);
+      #else
+        tmp_type = exc_info->exc_type;
+        tmp_value = exc_info->exc_value;
+        tmp_tb = exc_info->exc_traceback;
+        exc_info->exc_type = local_type;
+        exc_info->exc_value = local_value;
+        exc_info->exc_traceback = local_tb;
+      #endif
     }
+    #else
+    tmp_type = tstate->exc_type;
+    tmp_value = tstate->exc_value;
+    tmp_tb = tstate->exc_traceback;
+    tstate->exc_type = local_type;
+    tstate->exc_value = local_value;
+    tstate->exc_traceback = local_tb;
+    #endif
+    Py_XDECREF(tmp_type);
+    Py_XDECREF(tmp_value);
+    Py_XDECREF(tmp_tb);
 #else
-    args = PyTuple_Pack(3, self, arg1, arg2);
-    if (unlikely(!args)) goto bad;
-    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
+    PyErr_SetExcInfo(local_type, local_value, local_tb);
 #endif
+    return 0;
 bad:
-    Py_XDECREF(args);
-    return result;
-}
-
-/* dict_getitem_default */
-static PyObject* __Pyx_PyDict_GetItemDefault(PyObject* d, PyObject* key, PyObject* default_value) {
-    PyObject* value;
-#if PY_MAJOR_VERSION >= 3 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07020000)
-    value = PyDict_GetItemWithError(d, key);
-    if (unlikely(!value)) {
-        if (unlikely(PyErr_Occurred()))
-            return NULL;
-        value = default_value;
-    }
-    Py_INCREF(value);
-    if ((1));
-#else
-    if (PyString_CheckExact(key) || PyUnicode_CheckExact(key) || PyInt_CheckExact(key)) {
-        value = PyDict_GetItem(d, key);
-        if (unlikely(!value)) {
-            value = default_value;
-        }
-        Py_INCREF(value);
-    }
-#endif
-    else {
-        if (default_value == Py_None)
-            value = __Pyx_CallUnboundCMethod1(&__pyx_umethod_PyDict_Type_get, d, key);
-        else
-            value = __Pyx_CallUnboundCMethod2(&__pyx_umethod_PyDict_Type_get, d, key, default_value);
-    }
-    return value;
+    *type = 0;
+    *value = 0;
+    *tb = 0;
+    Py_XDECREF(local_type);
+    Py_XDECREF(local_value);
+    Py_XDECREF(local_tb);
+    return -1;
 }
 
-/* pyfrozenset_new */
-static CYTHON_INLINE PyObject* __Pyx_PyFrozenSet_New(PyObject* it) {
-    if (it) {
-        PyObject* result;
-#if CYTHON_COMPILING_IN_PYPY
-        PyObject* args;
-        args = PyTuple_Pack(1, it);
-        if (unlikely(!args))
-            return NULL;
-        result = PyObject_Call((PyObject*)&PyFrozenSet_Type, args, NULL);
-        Py_DECREF(args);
-        return result;
-#else
-        if (PyFrozenSet_CheckExact(it)) {
-            Py_INCREF(it);
-            return it;
-        }
-        result = PyFrozenSet_New(it);
-        if (unlikely(!result))
-            return NULL;
-        if ((PY_VERSION_HEX >= 0x031000A1) || likely(PySet_GET_SIZE(result)))
-            return result;
-        Py_DECREF(result);
-#endif
+/* pep479 */
+static void __Pyx_Generator_Replace_StopIteration(int in_async_gen) {
+    PyObject *exc, *val, *tb, *cur_exc;
+    __Pyx_PyThreadState_declare
+    #ifdef __Pyx_StopAsyncIteration_USED
+    int is_async_stopiteration = 0;
+    #endif
+    CYTHON_MAYBE_UNUSED_VAR(in_async_gen);
+    cur_exc = PyErr_Occurred();
+    if (likely(!__Pyx_PyErr_GivenExceptionMatches(cur_exc, PyExc_StopIteration))) {
+        #ifdef __Pyx_StopAsyncIteration_USED
+        if (in_async_gen && unlikely(__Pyx_PyErr_GivenExceptionMatches(cur_exc, __Pyx_PyExc_StopAsyncIteration))) {
+            is_async_stopiteration = 1;
+        } else
+        #endif
+            return;
     }
-#if CYTHON_USE_TYPE_SLOTS
-    return PyFrozenSet_Type.tp_new(&PyFrozenSet_Type, __pyx_empty_tuple, NULL);
-#else
-    return PyObject_Call((PyObject*)&PyFrozenSet_Type, __pyx_empty_tuple, NULL);
-#endif
+    __Pyx_PyThreadState_assign
+    __Pyx_GetException(&exc, &val, &tb);
+    Py_XDECREF(exc);
+    Py_XDECREF(val);
+    Py_XDECREF(tb);
+    PyErr_SetString(PyExc_RuntimeError,
+        #ifdef __Pyx_StopAsyncIteration_USED
+        is_async_stopiteration ? "async generator raised StopAsyncIteration" :
+        in_async_gen ? "async generator raised StopIteration" :
+        #endif
+        "generator raised StopIteration");
 }
 
 /* SliceObject */
 static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(PyObject* obj,
         Py_ssize_t cstart, Py_ssize_t cstop,
         PyObject** _py_start, PyObject** _py_stop, PyObject** _py_slice,
         int has_cstart, int has_cstop, int wraparound) {
@@ -17534,147 +16798,1367 @@
     PyErr_Format(PyExc_TypeError,
         "'" __Pyx_FMT_TYPENAME "' object is unsliceable", obj_type_name);
     __Pyx_DECREF_TypeName(obj_type_name);
 bad:
     return NULL;
 }
 
-/* Import */
-static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
-    PyObject *module = 0;
-    PyObject *empty_dict = 0;
-    PyObject *empty_list = 0;
-    #if PY_MAJOR_VERSION < 3
-    PyObject *py_import;
-    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
-    if (unlikely(!py_import))
+/* FixUpExtensionType */
+#if CYTHON_USE_TYPE_SPECS
+static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
+#if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
+    CYTHON_UNUSED_VAR(spec);
+    CYTHON_UNUSED_VAR(type);
+#else
+    const PyType_Slot *slot = spec->slots;
+    while (slot && slot->slot && slot->slot != Py_tp_members)
+        slot++;
+    if (slot && slot->slot == Py_tp_members) {
+        int changed = 0;
+#if !(PY_VERSION_HEX <= 0x030900b1 && CYTHON_COMPILING_IN_CPYTHON)
+        const
+#endif
+            PyMemberDef *memb = (PyMemberDef*) slot->pfunc;
+        while (memb && memb->name) {
+            if (memb->name[0] == '_' && memb->name[1] == '_') {
+#if PY_VERSION_HEX < 0x030900b1
+                if (strcmp(memb->name, "__weaklistoffset__") == 0) {
+                    assert(memb->type == T_PYSSIZET);
+                    assert(memb->flags == READONLY);
+                    type->tp_weaklistoffset = memb->offset;
+                    changed = 1;
+                }
+                else if (strcmp(memb->name, "__dictoffset__") == 0) {
+                    assert(memb->type == T_PYSSIZET);
+                    assert(memb->flags == READONLY);
+                    type->tp_dictoffset = memb->offset;
+                    changed = 1;
+                }
+#if CYTHON_METH_FASTCALL
+                else if (strcmp(memb->name, "__vectorcalloffset__") == 0) {
+                    assert(memb->type == T_PYSSIZET);
+                    assert(memb->flags == READONLY);
+#if PY_VERSION_HEX >= 0x030800b4
+                    type->tp_vectorcall_offset = memb->offset;
+#else
+                    type->tp_print = (printfunc) memb->offset;
+#endif
+                    changed = 1;
+                }
+#endif
+#else
+                if ((0));
+#endif
+#if PY_VERSION_HEX <= 0x030900b1 && CYTHON_COMPILING_IN_CPYTHON
+                else if (strcmp(memb->name, "__module__") == 0) {
+                    PyObject *descr;
+                    assert(memb->type == T_OBJECT);
+                    assert(memb->flags == 0 || memb->flags == READONLY);
+                    descr = PyDescr_NewMember(type, memb);
+                    if (unlikely(!descr))
+                        return -1;
+                    if (unlikely(PyDict_SetItem(type->tp_dict, PyDescr_NAME(descr), descr) < 0)) {
+                        Py_DECREF(descr);
+                        return -1;
+                    }
+                    Py_DECREF(descr);
+                    changed = 1;
+                }
+#endif
+            }
+            memb++;
+        }
+        if (changed)
+            PyType_Modified(type);
+    }
+#endif
+    return 0;
+}
+#endif
+
+/* FetchSharedCythonModule */
+static PyObject *__Pyx_FetchSharedCythonABIModule(void) {
+    return __Pyx_PyImport_AddModuleRef((char*) __PYX_ABI_MODULE_NAME);
+}
+
+/* FetchCommonType */
+static int __Pyx_VerifyCachedType(PyObject *cached_type,
+                               const char *name,
+                               Py_ssize_t basicsize,
+                               Py_ssize_t expected_basicsize) {
+    if (!PyType_Check(cached_type)) {
+        PyErr_Format(PyExc_TypeError,
+            "Shared Cython type %.200s is not a type object", name);
+        return -1;
+    }
+    if (basicsize != expected_basicsize) {
+        PyErr_Format(PyExc_TypeError,
+            "Shared Cython type %.200s has the wrong size, try recompiling",
+            name);
+        return -1;
+    }
+    return 0;
+}
+#if !CYTHON_USE_TYPE_SPECS
+static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type) {
+    PyObject* abi_module;
+    const char* object_name;
+    PyTypeObject *cached_type = NULL;
+    abi_module = __Pyx_FetchSharedCythonABIModule();
+    if (!abi_module) return NULL;
+    object_name = strrchr(type->tp_name, '.');
+    object_name = object_name ? object_name+1 : type->tp_name;
+    cached_type = (PyTypeObject*) PyObject_GetAttrString(abi_module, object_name);
+    if (cached_type) {
+        if (__Pyx_VerifyCachedType(
+              (PyObject *)cached_type,
+              object_name,
+              cached_type->tp_basicsize,
+              type->tp_basicsize) < 0) {
+            goto bad;
+        }
+        goto done;
+    }
+    if (!PyErr_ExceptionMatches(PyExc_AttributeError)) goto bad;
+    PyErr_Clear();
+    if (PyType_Ready(type) < 0) goto bad;
+    if (PyObject_SetAttrString(abi_module, object_name, (PyObject *)type) < 0)
         goto bad;
-    if (!from_list) {
-        empty_list = PyList_New(0);
-        if (unlikely(!empty_list))
+    Py_INCREF(type);
+    cached_type = type;
+done:
+    Py_DECREF(abi_module);
+    return cached_type;
+bad:
+    Py_XDECREF(cached_type);
+    cached_type = NULL;
+    goto done;
+}
+#else
+static PyTypeObject *__Pyx_FetchCommonTypeFromSpec(PyObject *module, PyType_Spec *spec, PyObject *bases) {
+    PyObject *abi_module, *cached_type = NULL;
+    const char* object_name = strrchr(spec->name, '.');
+    object_name = object_name ? object_name+1 : spec->name;
+    abi_module = __Pyx_FetchSharedCythonABIModule();
+    if (!abi_module) return NULL;
+    cached_type = PyObject_GetAttrString(abi_module, object_name);
+    if (cached_type) {
+        Py_ssize_t basicsize;
+#if CYTHON_COMPILING_IN_LIMITED_API
+        PyObject *py_basicsize;
+        py_basicsize = PyObject_GetAttrString(cached_type, "__basicsize__");
+        if (unlikely(!py_basicsize)) goto bad;
+        basicsize = PyLong_AsSsize_t(py_basicsize);
+        Py_DECREF(py_basicsize);
+        py_basicsize = 0;
+        if (unlikely(basicsize == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
+#else
+        basicsize = likely(PyType_Check(cached_type)) ? ((PyTypeObject*) cached_type)->tp_basicsize : -1;
+#endif
+        if (__Pyx_VerifyCachedType(
+              cached_type,
+              object_name,
+              basicsize,
+              spec->basicsize) < 0) {
             goto bad;
-        from_list = empty_list;
+        }
+        goto done;
     }
-    #endif
-    empty_dict = PyDict_New();
-    if (unlikely(!empty_dict))
+    if (!PyErr_ExceptionMatches(PyExc_AttributeError)) goto bad;
+    PyErr_Clear();
+    CYTHON_UNUSED_VAR(module);
+    cached_type = __Pyx_PyType_FromModuleAndSpec(abi_module, spec, bases);
+    if (unlikely(!cached_type)) goto bad;
+    if (unlikely(__Pyx_fix_up_extension_type_from_spec(spec, (PyTypeObject *) cached_type) < 0)) goto bad;
+    if (PyObject_SetAttrString(abi_module, object_name, cached_type) < 0) goto bad;
+done:
+    Py_DECREF(abi_module);
+    assert(cached_type == NULL || PyType_Check(cached_type));
+    return (PyTypeObject *) cached_type;
+bad:
+    Py_XDECREF(cached_type);
+    cached_type = NULL;
+    goto done;
+}
+#endif
+
+/* RaiseException */
+#if PY_MAJOR_VERSION < 3
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
+    __Pyx_PyThreadState_declare
+    CYTHON_UNUSED_VAR(cause);
+    Py_XINCREF(type);
+    if (!value || value == Py_None)
+        value = NULL;
+    else
+        Py_INCREF(value);
+    if (!tb || tb == Py_None)
+        tb = NULL;
+    else {
+        Py_INCREF(tb);
+        if (!PyTraceBack_Check(tb)) {
+            PyErr_SetString(PyExc_TypeError,
+                "raise: arg 3 must be a traceback or None");
+            goto raise_error;
+        }
+    }
+    if (PyType_Check(type)) {
+#if CYTHON_COMPILING_IN_PYPY
+        if (!value) {
+            Py_INCREF(Py_None);
+            value = Py_None;
+        }
+#endif
+        PyErr_NormalizeException(&type, &value, &tb);
+    } else {
+        if (value) {
+            PyErr_SetString(PyExc_TypeError,
+                "instance exception may not have a separate value");
+            goto raise_error;
+        }
+        value = type;
+        type = (PyObject*) Py_TYPE(type);
+        Py_INCREF(type);
+        if (!PyType_IsSubtype((PyTypeObject *)type, (PyTypeObject *)PyExc_BaseException)) {
+            PyErr_SetString(PyExc_TypeError,
+                "raise: exception class must be a subclass of BaseException");
+            goto raise_error;
+        }
+    }
+    __Pyx_PyThreadState_assign
+    __Pyx_ErrRestore(type, value, tb);
+    return;
+raise_error:
+    Py_XDECREF(value);
+    Py_XDECREF(type);
+    Py_XDECREF(tb);
+    return;
+}
+#else
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
+    PyObject* owned_instance = NULL;
+    if (tb == Py_None) {
+        tb = 0;
+    } else if (tb && !PyTraceBack_Check(tb)) {
+        PyErr_SetString(PyExc_TypeError,
+            "raise: arg 3 must be a traceback or None");
         goto bad;
-    {
-        #if PY_MAJOR_VERSION >= 3
-        if (level == -1) {
-            if (strchr(__Pyx_MODULE_NAME, '.') != NULL) {
-                module = PyImport_ImportModuleLevelObject(
-                    name, __pyx_d, empty_dict, from_list, 1);
-                if (unlikely(!module)) {
-                    if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
-                        goto bad;
-                    PyErr_Clear();
+    }
+    if (value == Py_None)
+        value = 0;
+    if (PyExceptionInstance_Check(type)) {
+        if (value) {
+            PyErr_SetString(PyExc_TypeError,
+                "instance exception may not have a separate value");
+            goto bad;
+        }
+        value = type;
+        type = (PyObject*) Py_TYPE(value);
+    } else if (PyExceptionClass_Check(type)) {
+        PyObject *instance_class = NULL;
+        if (value && PyExceptionInstance_Check(value)) {
+            instance_class = (PyObject*) Py_TYPE(value);
+            if (instance_class != type) {
+                int is_subclass = PyObject_IsSubclass(instance_class, type);
+                if (!is_subclass) {
+                    instance_class = NULL;
+                } else if (unlikely(is_subclass == -1)) {
+                    goto bad;
+                } else {
+                    type = instance_class;
                 }
             }
-            level = 0;
         }
-        #endif
-        if (!module) {
-            #if PY_MAJOR_VERSION < 3
-            PyObject *py_level = PyInt_FromLong(level);
-            if (unlikely(!py_level))
+        if (!instance_class) {
+            PyObject *args;
+            if (!value)
+                args = PyTuple_New(0);
+            else if (PyTuple_Check(value)) {
+                Py_INCREF(value);
+                args = value;
+            } else
+                args = PyTuple_Pack(1, value);
+            if (!args)
                 goto bad;
-            module = PyObject_CallFunctionObjArgs(py_import,
-                name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
-            Py_DECREF(py_level);
-            #else
-            module = PyImport_ImportModuleLevelObject(
-                name, __pyx_d, empty_dict, from_list, level);
-            #endif
+            owned_instance = PyObject_Call(type, args, NULL);
+            Py_DECREF(args);
+            if (!owned_instance)
+                goto bad;
+            value = owned_instance;
+            if (!PyExceptionInstance_Check(value)) {
+                PyErr_Format(PyExc_TypeError,
+                             "calling %R should have returned an instance of "
+                             "BaseException, not %R",
+                             type, Py_TYPE(value));
+                goto bad;
+            }
+        }
+    } else {
+        PyErr_SetString(PyExc_TypeError,
+            "raise: exception class must be a subclass of BaseException");
+        goto bad;
+    }
+    if (cause) {
+        PyObject *fixed_cause;
+        if (cause == Py_None) {
+            fixed_cause = NULL;
+        } else if (PyExceptionClass_Check(cause)) {
+            fixed_cause = PyObject_CallObject(cause, NULL);
+            if (fixed_cause == NULL)
+                goto bad;
+        } else if (PyExceptionInstance_Check(cause)) {
+            fixed_cause = cause;
+            Py_INCREF(fixed_cause);
+        } else {
+            PyErr_SetString(PyExc_TypeError,
+                            "exception causes must derive from "
+                            "BaseException");
+            goto bad;
+        }
+        PyException_SetCause(value, fixed_cause);
+    }
+    PyErr_SetObject(type, value);
+    if (tb) {
+      #if PY_VERSION_HEX >= 0x030C00A6
+        PyException_SetTraceback(value, tb);
+      #elif CYTHON_FAST_THREAD_STATE
+        PyThreadState *tstate = __Pyx_PyThreadState_Current;
+        PyObject* tmp_tb = tstate->curexc_traceback;
+        if (tb != tmp_tb) {
+            Py_INCREF(tb);
+            tstate->curexc_traceback = tb;
+            Py_XDECREF(tmp_tb);
         }
+#else
+        PyObject *tmp_type, *tmp_value, *tmp_tb;
+        PyErr_Fetch(&tmp_type, &tmp_value, &tmp_tb);
+        Py_INCREF(tb);
+        PyErr_Restore(tmp_type, tmp_value, tb);
+        Py_XDECREF(tmp_tb);
+#endif
     }
 bad:
-    Py_XDECREF(empty_dict);
-    Py_XDECREF(empty_list);
-    #if PY_MAJOR_VERSION < 3
-    Py_XDECREF(py_import);
+    Py_XDECREF(owned_instance);
+    return;
+}
+#endif
+
+/* GetTopmostException */
+#if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
+static _PyErr_StackItem *
+__Pyx_PyErr_GetTopmostException(PyThreadState *tstate)
+{
+    _PyErr_StackItem *exc_info = tstate->exc_info;
+    while ((exc_info->exc_value == NULL || exc_info->exc_value == Py_None) &&
+           exc_info->previous_item != NULL)
+    {
+        exc_info = exc_info->previous_item;
+    }
+    return exc_info;
+}
+#endif
+
+/* SaveResetException */
+#if CYTHON_FAST_THREAD_STATE
+static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
+  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
+    _PyErr_StackItem *exc_info = __Pyx_PyErr_GetTopmostException(tstate);
+    PyObject *exc_value = exc_info->exc_value;
+    if (exc_value == NULL || exc_value == Py_None) {
+        *value = NULL;
+        *type = NULL;
+        *tb = NULL;
+    } else {
+        *value = exc_value;
+        Py_INCREF(*value);
+        *type = (PyObject*) Py_TYPE(exc_value);
+        Py_INCREF(*type);
+        *tb = PyException_GetTraceback(exc_value);
+    }
+  #elif CYTHON_USE_EXC_INFO_STACK
+    _PyErr_StackItem *exc_info = __Pyx_PyErr_GetTopmostException(tstate);
+    *type = exc_info->exc_type;
+    *value = exc_info->exc_value;
+    *tb = exc_info->exc_traceback;
+    Py_XINCREF(*type);
+    Py_XINCREF(*value);
+    Py_XINCREF(*tb);
+  #else
+    *type = tstate->exc_type;
+    *value = tstate->exc_value;
+    *tb = tstate->exc_traceback;
+    Py_XINCREF(*type);
+    Py_XINCREF(*value);
+    Py_XINCREF(*tb);
+  #endif
+}
+static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
+  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
+    _PyErr_StackItem *exc_info = tstate->exc_info;
+    PyObject *tmp_value = exc_info->exc_value;
+    exc_info->exc_value = value;
+    Py_XDECREF(tmp_value);
+    Py_XDECREF(type);
+    Py_XDECREF(tb);
+  #else
+    PyObject *tmp_type, *tmp_value, *tmp_tb;
+    #if CYTHON_USE_EXC_INFO_STACK
+    _PyErr_StackItem *exc_info = tstate->exc_info;
+    tmp_type = exc_info->exc_type;
+    tmp_value = exc_info->exc_value;
+    tmp_tb = exc_info->exc_traceback;
+    exc_info->exc_type = type;
+    exc_info->exc_value = value;
+    exc_info->exc_traceback = tb;
+    #else
+    tmp_type = tstate->exc_type;
+    tmp_value = tstate->exc_value;
+    tmp_tb = tstate->exc_traceback;
+    tstate->exc_type = type;
+    tstate->exc_value = value;
+    tstate->exc_traceback = tb;
     #endif
-    return module;
+    Py_XDECREF(tmp_type);
+    Py_XDECREF(tmp_value);
+    Py_XDECREF(tmp_tb);
+  #endif
 }
+#endif
 
-/* ImportFrom */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
-    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
-    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
-        const char* module_name_str = 0;
-        PyObject* module_name = 0;
-        PyObject* module_dot = 0;
-        PyObject* full_name = 0;
-        PyErr_Clear();
-        module_name_str = PyModule_GetName(module);
-        if (unlikely(!module_name_str)) { goto modbad; }
-        module_name = PyUnicode_FromString(module_name_str);
-        if (unlikely(!module_name)) { goto modbad; }
-        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__2);
-        if (unlikely(!module_dot)) { goto modbad; }
-        full_name = PyUnicode_Concat(module_dot, name);
-        if (unlikely(!full_name)) { goto modbad; }
-        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
-        {
-            PyObject *modules = PyImport_GetModuleDict();
-            if (unlikely(!modules))
-                goto modbad;
-            value = PyObject_GetItem(modules, full_name);
+/* SwapException */
+#if CYTHON_FAST_THREAD_STATE
+static CYTHON_INLINE void __Pyx__ExceptionSwap(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
+    PyObject *tmp_type, *tmp_value, *tmp_tb;
+  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
+    _PyErr_StackItem *exc_info = tstate->exc_info;
+    tmp_value = exc_info->exc_value;
+    exc_info->exc_value = *value;
+    if (tmp_value == NULL || tmp_value == Py_None) {
+        Py_XDECREF(tmp_value);
+        tmp_value = NULL;
+        tmp_type = NULL;
+        tmp_tb = NULL;
+    } else {
+        tmp_type = (PyObject*) Py_TYPE(tmp_value);
+        Py_INCREF(tmp_type);
+        #if CYTHON_COMPILING_IN_CPYTHON
+        tmp_tb = ((PyBaseExceptionObject*) tmp_value)->traceback;
+        Py_XINCREF(tmp_tb);
+        #else
+        tmp_tb = PyException_GetTraceback(tmp_value);
+        #endif
+    }
+  #elif CYTHON_USE_EXC_INFO_STACK
+    _PyErr_StackItem *exc_info = tstate->exc_info;
+    tmp_type = exc_info->exc_type;
+    tmp_value = exc_info->exc_value;
+    tmp_tb = exc_info->exc_traceback;
+    exc_info->exc_type = *type;
+    exc_info->exc_value = *value;
+    exc_info->exc_traceback = *tb;
+  #else
+    tmp_type = tstate->exc_type;
+    tmp_value = tstate->exc_value;
+    tmp_tb = tstate->exc_traceback;
+    tstate->exc_type = *type;
+    tstate->exc_value = *value;
+    tstate->exc_traceback = *tb;
+  #endif
+    *type = tmp_type;
+    *value = tmp_value;
+    *tb = tmp_tb;
+}
+#else
+static CYTHON_INLINE void __Pyx_ExceptionSwap(PyObject **type, PyObject **value, PyObject **tb) {
+    PyObject *tmp_type, *tmp_value, *tmp_tb;
+    PyErr_GetExcInfo(&tmp_type, &tmp_value, &tmp_tb);
+    PyErr_SetExcInfo(*type, *value, *tb);
+    *type = tmp_type;
+    *value = tmp_value;
+    *tb = tmp_tb;
+}
+#endif
+
+/* PyObjectCall2Args */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
+    PyObject *args[3] = {NULL, arg1, arg2};
+    return __Pyx_PyObject_FastCall(function, args+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+}
+
+/* PyObjectCallMethod1 */
+#if !(CYTHON_VECTORCALL && __PYX_LIMITED_VERSION_HEX >= 0x030C00A2)
+static PyObject* __Pyx__PyObject_CallMethod1(PyObject* method, PyObject* arg) {
+    PyObject *result = __Pyx_PyObject_CallOneArg(method, arg);
+    Py_DECREF(method);
+    return result;
+}
+#endif
+static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg) {
+#if CYTHON_VECTORCALL && __PYX_LIMITED_VERSION_HEX >= 0x030C00A2
+    PyObject *args[2] = {obj, arg};
+    (void) __Pyx_PyObject_GetMethod;
+    (void) __Pyx_PyObject_CallOneArg;
+    (void) __Pyx_PyObject_Call2Args;
+    return PyObject_VectorcallMethod(method_name, args, 2 | PY_VECTORCALL_ARGUMENTS_OFFSET, NULL);
+#else
+    PyObject *method = NULL, *result;
+    int is_method = __Pyx_PyObject_GetMethod(obj, method_name, &method);
+    if (likely(is_method)) {
+        result = __Pyx_PyObject_Call2Args(method, obj, arg);
+        Py_DECREF(method);
+        return result;
+    }
+    if (unlikely(!method)) return NULL;
+    return __Pyx__PyObject_CallMethod1(method, arg);
+#endif
+}
+
+/* CoroutineBase */
+#include <frameobject.h>
+#if PY_VERSION_HEX >= 0x030b00a6
+  #ifndef Py_BUILD_CORE
+    #define Py_BUILD_CORE 1
+  #endif
+  #include "internal/pycore_frame.h"
+#endif
+#define __Pyx_Coroutine_Undelegate(gen) Py_CLEAR((gen)->yieldfrom)
+static int __Pyx_PyGen__FetchStopIterationValue(PyThreadState *__pyx_tstate, PyObject **pvalue) {
+    PyObject *et, *ev, *tb;
+    PyObject *value = NULL;
+    CYTHON_UNUSED_VAR(__pyx_tstate);
+    __Pyx_ErrFetch(&et, &ev, &tb);
+    if (!et) {
+        Py_XDECREF(tb);
+        Py_XDECREF(ev);
+        Py_INCREF(Py_None);
+        *pvalue = Py_None;
+        return 0;
+    }
+    if (likely(et == PyExc_StopIteration)) {
+        if (!ev) {
+            Py_INCREF(Py_None);
+            value = Py_None;
+        }
+#if PY_VERSION_HEX >= 0x030300A0
+        else if (likely(__Pyx_IS_TYPE(ev, (PyTypeObject*)PyExc_StopIteration))) {
+            value = ((PyStopIterationObject *)ev)->value;
+            Py_INCREF(value);
+            Py_DECREF(ev);
+        }
+#endif
+        else if (unlikely(PyTuple_Check(ev))) {
+            if (PyTuple_GET_SIZE(ev) >= 1) {
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+                value = PyTuple_GET_ITEM(ev, 0);
+                Py_INCREF(value);
+#else
+                value = PySequence_ITEM(ev, 0);
+#endif
+            } else {
+                Py_INCREF(Py_None);
+                value = Py_None;
+            }
+            Py_DECREF(ev);
         }
+        else if (!__Pyx_TypeCheck(ev, (PyTypeObject*)PyExc_StopIteration)) {
+            value = ev;
+        }
+        if (likely(value)) {
+            Py_XDECREF(tb);
+            Py_DECREF(et);
+            *pvalue = value;
+            return 0;
+        }
+    } else if (!__Pyx_PyErr_GivenExceptionMatches(et, PyExc_StopIteration)) {
+        __Pyx_ErrRestore(et, ev, tb);
+        return -1;
+    }
+    PyErr_NormalizeException(&et, &ev, &tb);
+    if (unlikely(!PyObject_TypeCheck(ev, (PyTypeObject*)PyExc_StopIteration))) {
+        __Pyx_ErrRestore(et, ev, tb);
+        return -1;
+    }
+    Py_XDECREF(tb);
+    Py_DECREF(et);
+#if PY_VERSION_HEX >= 0x030300A0
+    value = ((PyStopIterationObject *)ev)->value;
+    Py_INCREF(value);
+    Py_DECREF(ev);
+#else
+    {
+        PyObject* args = __Pyx_PyObject_GetAttrStr(ev, __pyx_n_s_args);
+        Py_DECREF(ev);
+        if (likely(args)) {
+            value = PySequence_GetItem(args, 0);
+            Py_DECREF(args);
+        }
+        if (unlikely(!value)) {
+            __Pyx_ErrRestore(NULL, NULL, NULL);
+            Py_INCREF(Py_None);
+            value = Py_None;
+        }
+    }
+#endif
+    *pvalue = value;
+    return 0;
+}
+static CYTHON_INLINE
+void __Pyx_Coroutine_ExceptionClear(__Pyx_ExcInfoStruct *exc_state) {
+#if PY_VERSION_HEX >= 0x030B00a4
+    Py_CLEAR(exc_state->exc_value);
+#else
+    PyObject *t, *v, *tb;
+    t = exc_state->exc_type;
+    v = exc_state->exc_value;
+    tb = exc_state->exc_traceback;
+    exc_state->exc_type = NULL;
+    exc_state->exc_value = NULL;
+    exc_state->exc_traceback = NULL;
+    Py_XDECREF(t);
+    Py_XDECREF(v);
+    Py_XDECREF(tb);
+#endif
+}
+#define __Pyx_Coroutine_AlreadyRunningError(gen)  (__Pyx__Coroutine_AlreadyRunningError(gen), (PyObject*)NULL)
+static void __Pyx__Coroutine_AlreadyRunningError(__pyx_CoroutineObject *gen) {
+    const char *msg;
+    CYTHON_MAYBE_UNUSED_VAR(gen);
+    if ((0)) {
+    #ifdef __Pyx_Coroutine_USED
+    } else if (__Pyx_Coroutine_Check((PyObject*)gen)) {
+        msg = "coroutine already executing";
+    #endif
+    #ifdef __Pyx_AsyncGen_USED
+    } else if (__Pyx_AsyncGen_CheckExact((PyObject*)gen)) {
+        msg = "async generator already executing";
+    #endif
+    } else {
+        msg = "generator already executing";
+    }
+    PyErr_SetString(PyExc_ValueError, msg);
+}
+#define __Pyx_Coroutine_NotStartedError(gen)  (__Pyx__Coroutine_NotStartedError(gen), (PyObject*)NULL)
+static void __Pyx__Coroutine_NotStartedError(PyObject *gen) {
+    const char *msg;
+    CYTHON_MAYBE_UNUSED_VAR(gen);
+    if ((0)) {
+    #ifdef __Pyx_Coroutine_USED
+    } else if (__Pyx_Coroutine_Check(gen)) {
+        msg = "can't send non-None value to a just-started coroutine";
+    #endif
+    #ifdef __Pyx_AsyncGen_USED
+    } else if (__Pyx_AsyncGen_CheckExact(gen)) {
+        msg = "can't send non-None value to a just-started async generator";
+    #endif
+    } else {
+        msg = "can't send non-None value to a just-started generator";
+    }
+    PyErr_SetString(PyExc_TypeError, msg);
+}
+#define __Pyx_Coroutine_AlreadyTerminatedError(gen, value, closing)  (__Pyx__Coroutine_AlreadyTerminatedError(gen, value, closing), (PyObject*)NULL)
+static void __Pyx__Coroutine_AlreadyTerminatedError(PyObject *gen, PyObject *value, int closing) {
+    CYTHON_MAYBE_UNUSED_VAR(gen);
+    CYTHON_MAYBE_UNUSED_VAR(closing);
+    #ifdef __Pyx_Coroutine_USED
+    if (!closing && __Pyx_Coroutine_Check(gen)) {
+        PyErr_SetString(PyExc_RuntimeError, "cannot reuse already awaited coroutine");
+    } else
+    #endif
+    if (value) {
+        #ifdef __Pyx_AsyncGen_USED
+        if (__Pyx_AsyncGen_CheckExact(gen))
+            PyErr_SetNone(__Pyx_PyExc_StopAsyncIteration);
+        else
+        #endif
+        PyErr_SetNone(PyExc_StopIteration);
+    }
+}
+static
+PyObject *__Pyx_Coroutine_SendEx(__pyx_CoroutineObject *self, PyObject *value, int closing) {
+    __Pyx_PyThreadState_declare
+    PyThreadState *tstate;
+    __Pyx_ExcInfoStruct *exc_state;
+    PyObject *retval;
+    assert(!self->is_running);
+    if (unlikely(self->resume_label == 0)) {
+        if (unlikely(value && value != Py_None)) {
+            return __Pyx_Coroutine_NotStartedError((PyObject*)self);
+        }
+    }
+    if (unlikely(self->resume_label == -1)) {
+        return __Pyx_Coroutine_AlreadyTerminatedError((PyObject*)self, value, closing);
+    }
+#if CYTHON_FAST_THREAD_STATE
+    __Pyx_PyThreadState_assign
+    tstate = __pyx_tstate;
+#else
+    tstate = __Pyx_PyThreadState_Current;
+#endif
+    exc_state = &self->gi_exc_state;
+    if (exc_state->exc_value) {
+        #if CYTHON_COMPILING_IN_PYPY
         #else
-        value = PyImport_GetModule(full_name);
+        PyObject *exc_tb;
+        #if PY_VERSION_HEX >= 0x030B00a4 && !CYTHON_COMPILING_IN_CPYTHON
+        exc_tb = PyException_GetTraceback(exc_state->exc_value);
+        #elif PY_VERSION_HEX >= 0x030B00a4
+        exc_tb = ((PyBaseExceptionObject*) exc_state->exc_value)->traceback;
+        #else
+        exc_tb = exc_state->exc_traceback;
+        #endif
+        if (exc_tb) {
+            PyTracebackObject *tb = (PyTracebackObject *) exc_tb;
+            PyFrameObject *f = tb->tb_frame;
+            assert(f->f_back == NULL);
+            #if PY_VERSION_HEX >= 0x030B00A1
+            f->f_back = PyThreadState_GetFrame(tstate);
+            #else
+            Py_XINCREF(tstate->frame);
+            f->f_back = tstate->frame;
+            #endif
+            #if PY_VERSION_HEX >= 0x030B00a4 && !CYTHON_COMPILING_IN_CPYTHON
+            Py_DECREF(exc_tb);
+            #endif
+        }
         #endif
-      modbad:
-        Py_XDECREF(full_name);
-        Py_XDECREF(module_dot);
-        Py_XDECREF(module_name);
     }
-    if (unlikely(!value)) {
-        PyErr_Format(PyExc_ImportError,
-        #if PY_MAJOR_VERSION < 3
-            "cannot import name %.230s", PyString_AS_STRING(name));
+#if CYTHON_USE_EXC_INFO_STACK
+    exc_state->previous_item = tstate->exc_info;
+    tstate->exc_info = exc_state;
+#else
+    if (exc_state->exc_type) {
+        __Pyx_ExceptionSwap(&exc_state->exc_type, &exc_state->exc_value, &exc_state->exc_traceback);
+    } else {
+        __Pyx_Coroutine_ExceptionClear(exc_state);
+        __Pyx_ExceptionSave(&exc_state->exc_type, &exc_state->exc_value, &exc_state->exc_traceback);
+    }
+#endif
+    self->is_running = 1;
+    retval = self->body(self, tstate, value);
+    self->is_running = 0;
+#if CYTHON_USE_EXC_INFO_STACK
+    exc_state = &self->gi_exc_state;
+    tstate->exc_info = exc_state->previous_item;
+    exc_state->previous_item = NULL;
+    __Pyx_Coroutine_ResetFrameBackpointer(exc_state);
+#endif
+    return retval;
+}
+static CYTHON_INLINE void __Pyx_Coroutine_ResetFrameBackpointer(__Pyx_ExcInfoStruct *exc_state) {
+#if CYTHON_COMPILING_IN_PYPY
+    CYTHON_UNUSED_VAR(exc_state);
+#else
+    PyObject *exc_tb;
+    #if PY_VERSION_HEX >= 0x030B00a4
+    if (!exc_state->exc_value) return;
+    exc_tb = PyException_GetTraceback(exc_state->exc_value);
+    #else
+    exc_tb = exc_state->exc_traceback;
+    #endif
+    if (likely(exc_tb)) {
+        PyTracebackObject *tb = (PyTracebackObject *) exc_tb;
+        PyFrameObject *f = tb->tb_frame;
+        Py_CLEAR(f->f_back);
+        #if PY_VERSION_HEX >= 0x030B00a4
+        Py_DECREF(exc_tb);
+        #endif
+    }
+#endif
+}
+static CYTHON_INLINE
+PyObject *__Pyx_Coroutine_MethodReturn(PyObject* gen, PyObject *retval) {
+    CYTHON_MAYBE_UNUSED_VAR(gen);
+    if (unlikely(!retval)) {
+        __Pyx_PyThreadState_declare
+        __Pyx_PyThreadState_assign
+        if (!__Pyx_PyErr_Occurred()) {
+            PyObject *exc = PyExc_StopIteration;
+            #ifdef __Pyx_AsyncGen_USED
+            if (__Pyx_AsyncGen_CheckExact(gen))
+                exc = __Pyx_PyExc_StopAsyncIteration;
+            #endif
+            __Pyx_PyErr_SetNone(exc);
+        }
+    }
+    return retval;
+}
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x03030000 && (defined(__linux__) || PY_VERSION_HEX >= 0x030600B3)
+static CYTHON_INLINE
+PyObject *__Pyx_PyGen_Send(PyGenObject *gen, PyObject *arg) {
+#if PY_VERSION_HEX <= 0x030A00A1
+    return _PyGen_Send(gen, arg);
+#else
+    PyObject *result;
+    if (PyIter_Send((PyObject*)gen, arg ? arg : Py_None, &result) == PYGEN_RETURN) {
+        if (PyAsyncGen_CheckExact(gen)) {
+            assert(result == Py_None);
+            PyErr_SetNone(PyExc_StopAsyncIteration);
+        }
+        else if (result == Py_None) {
+            PyErr_SetNone(PyExc_StopIteration);
+        }
+        else {
+#if PY_VERSION_HEX < 0x030d00A1
+            _PyGen_SetStopIterationValue(result);
+#else
+            if (!PyTuple_Check(result) && !PyExceptionInstance_Check(result)) {
+                PyErr_SetObject(PyExc_StopIteration, result);
+            } else {
+                PyObject *exc = __Pyx_PyObject_CallOneArg(PyExc_StopIteration, result);
+                if (likely(exc != NULL)) {
+                    PyErr_SetObject(PyExc_StopIteration, exc);
+                    Py_DECREF(exc);
+                }
+            }
+#endif
+        }
+        Py_DECREF(result);
+        result = NULL;
+    }
+    return result;
+#endif
+}
+#endif
+static CYTHON_INLINE
+PyObject *__Pyx_Coroutine_FinishDelegation(__pyx_CoroutineObject *gen) {
+    PyObject *ret;
+    PyObject *val = NULL;
+    __Pyx_Coroutine_Undelegate(gen);
+    __Pyx_PyGen__FetchStopIterationValue(__Pyx_PyThreadState_Current, &val);
+    ret = __Pyx_Coroutine_SendEx(gen, val, 0);
+    Py_XDECREF(val);
+    return ret;
+}
+static PyObject *__Pyx_Coroutine_Send(PyObject *self, PyObject *value) {
+    PyObject *retval;
+    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject*) self;
+    PyObject *yf = gen->yieldfrom;
+    if (unlikely(gen->is_running))
+        return __Pyx_Coroutine_AlreadyRunningError(gen);
+    if (yf) {
+        PyObject *ret;
+        gen->is_running = 1;
+        #ifdef __Pyx_Generator_USED
+        if (__Pyx_Generator_CheckExact(yf)) {
+            ret = __Pyx_Coroutine_Send(yf, value);
+        } else
+        #endif
+        #ifdef __Pyx_Coroutine_USED
+        if (__Pyx_Coroutine_Check(yf)) {
+            ret = __Pyx_Coroutine_Send(yf, value);
+        } else
+        #endif
+        #ifdef __Pyx_AsyncGen_USED
+        if (__pyx_PyAsyncGenASend_CheckExact(yf)) {
+            ret = __Pyx_async_gen_asend_send(yf, value);
+        } else
+        #endif
+        #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x03030000 && (defined(__linux__) || PY_VERSION_HEX >= 0x030600B3)
+        if (PyGen_CheckExact(yf)) {
+            ret = __Pyx_PyGen_Send((PyGenObject*)yf, value == Py_None ? NULL : value);
+        } else
+        #endif
+        #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x03050000 && defined(PyCoro_CheckExact) && (defined(__linux__) || PY_VERSION_HEX >= 0x030600B3)
+        if (PyCoro_CheckExact(yf)) {
+            ret = __Pyx_PyGen_Send((PyGenObject*)yf, value == Py_None ? NULL : value);
+        } else
+        #endif
+        {
+            if (value == Py_None)
+                ret = __Pyx_PyObject_GetIterNextFunc(yf)(yf);
+            else
+                ret = __Pyx_PyObject_CallMethod1(yf, __pyx_n_s_send, value);
+        }
+        gen->is_running = 0;
+        if (likely(ret)) {
+            return ret;
+        }
+        retval = __Pyx_Coroutine_FinishDelegation(gen);
+    } else {
+        retval = __Pyx_Coroutine_SendEx(gen, value, 0);
+    }
+    return __Pyx_Coroutine_MethodReturn(self, retval);
+}
+static int __Pyx_Coroutine_CloseIter(__pyx_CoroutineObject *gen, PyObject *yf) {
+    PyObject *retval = NULL;
+    int err = 0;
+    #ifdef __Pyx_Generator_USED
+    if (__Pyx_Generator_CheckExact(yf)) {
+        retval = __Pyx_Coroutine_Close(yf);
+        if (!retval)
+            return -1;
+    } else
+    #endif
+    #ifdef __Pyx_Coroutine_USED
+    if (__Pyx_Coroutine_Check(yf)) {
+        retval = __Pyx_Coroutine_Close(yf);
+        if (!retval)
+            return -1;
+    } else
+    if (__Pyx_CoroutineAwait_CheckExact(yf)) {
+        retval = __Pyx_CoroutineAwait_Close((__pyx_CoroutineAwaitObject*)yf, NULL);
+        if (!retval)
+            return -1;
+    } else
+    #endif
+    #ifdef __Pyx_AsyncGen_USED
+    if (__pyx_PyAsyncGenASend_CheckExact(yf)) {
+        retval = __Pyx_async_gen_asend_close(yf, NULL);
+    } else
+    if (__pyx_PyAsyncGenAThrow_CheckExact(yf)) {
+        retval = __Pyx_async_gen_athrow_close(yf, NULL);
+    } else
+    #endif
+    {
+        PyObject *meth;
+        gen->is_running = 1;
+        meth = __Pyx_PyObject_GetAttrStrNoError(yf, __pyx_n_s_close);
+        if (unlikely(!meth)) {
+            if (unlikely(PyErr_Occurred())) {
+                PyErr_WriteUnraisable(yf);
+            }
+        } else {
+            retval = __Pyx_PyObject_CallNoArg(meth);
+            Py_DECREF(meth);
+            if (unlikely(!retval))
+                err = -1;
+        }
+        gen->is_running = 0;
+    }
+    Py_XDECREF(retval);
+    return err;
+}
+static PyObject *__Pyx_Generator_Next(PyObject *self) {
+    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject*) self;
+    PyObject *yf = gen->yieldfrom;
+    if (unlikely(gen->is_running))
+        return __Pyx_Coroutine_AlreadyRunningError(gen);
+    if (yf) {
+        PyObject *ret;
+        gen->is_running = 1;
+        #ifdef __Pyx_Generator_USED
+        if (__Pyx_Generator_CheckExact(yf)) {
+            ret = __Pyx_Generator_Next(yf);
+        } else
+        #endif
+        #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x03030000 && (defined(__linux__) || PY_VERSION_HEX >= 0x030600B3)
+        if (PyGen_CheckExact(yf)) {
+            ret = __Pyx_PyGen_Send((PyGenObject*)yf, NULL);
+        } else
+        #endif
+        #ifdef __Pyx_Coroutine_USED
+        if (__Pyx_Coroutine_Check(yf)) {
+            ret = __Pyx_Coroutine_Send(yf, Py_None);
+        } else
+        #endif
+            ret = __Pyx_PyObject_GetIterNextFunc(yf)(yf);
+        gen->is_running = 0;
+        if (likely(ret)) {
+            return ret;
+        }
+        return __Pyx_Coroutine_FinishDelegation(gen);
+    }
+    return __Pyx_Coroutine_SendEx(gen, Py_None, 0);
+}
+static PyObject *__Pyx_Coroutine_Close_Method(PyObject *self, PyObject *arg) {
+    CYTHON_UNUSED_VAR(arg);
+    return __Pyx_Coroutine_Close(self);
+}
+static PyObject *__Pyx_Coroutine_Close(PyObject *self) {
+    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
+    PyObject *retval, *raised_exception;
+    PyObject *yf = gen->yieldfrom;
+    int err = 0;
+    if (unlikely(gen->is_running))
+        return __Pyx_Coroutine_AlreadyRunningError(gen);
+    if (yf) {
+        Py_INCREF(yf);
+        err = __Pyx_Coroutine_CloseIter(gen, yf);
+        __Pyx_Coroutine_Undelegate(gen);
+        Py_DECREF(yf);
+    }
+    if (err == 0)
+        PyErr_SetNone(PyExc_GeneratorExit);
+    retval = __Pyx_Coroutine_SendEx(gen, NULL, 1);
+    if (unlikely(retval)) {
+        const char *msg;
+        Py_DECREF(retval);
+        if ((0)) {
+        #ifdef __Pyx_Coroutine_USED
+        } else if (__Pyx_Coroutine_Check(self)) {
+            msg = "coroutine ignored GeneratorExit";
+        #endif
+        #ifdef __Pyx_AsyncGen_USED
+        } else if (__Pyx_AsyncGen_CheckExact(self)) {
+#if PY_VERSION_HEX < 0x03060000
+            msg = "async generator ignored GeneratorExit - might require Python 3.6+ finalisation (PEP 525)";
+#else
+            msg = "async generator ignored GeneratorExit";
+#endif
+        #endif
+        } else {
+            msg = "generator ignored GeneratorExit";
+        }
+        PyErr_SetString(PyExc_RuntimeError, msg);
+        return NULL;
+    }
+    raised_exception = PyErr_Occurred();
+    if (likely(!raised_exception || __Pyx_PyErr_GivenExceptionMatches2(raised_exception, PyExc_GeneratorExit, PyExc_StopIteration))) {
+        if (raised_exception) PyErr_Clear();
+        Py_INCREF(Py_None);
+        return Py_None;
+    }
+    return NULL;
+}
+static PyObject *__Pyx__Coroutine_Throw(PyObject *self, PyObject *typ, PyObject *val, PyObject *tb,
+                                        PyObject *args, int close_on_genexit) {
+    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
+    PyObject *yf = gen->yieldfrom;
+    if (unlikely(gen->is_running))
+        return __Pyx_Coroutine_AlreadyRunningError(gen);
+    if (yf) {
+        PyObject *ret;
+        Py_INCREF(yf);
+        if (__Pyx_PyErr_GivenExceptionMatches(typ, PyExc_GeneratorExit) && close_on_genexit) {
+            int err = __Pyx_Coroutine_CloseIter(gen, yf);
+            Py_DECREF(yf);
+            __Pyx_Coroutine_Undelegate(gen);
+            if (err < 0)
+                return __Pyx_Coroutine_MethodReturn(self, __Pyx_Coroutine_SendEx(gen, NULL, 0));
+            goto throw_here;
+        }
+        gen->is_running = 1;
+        if (0
+        #ifdef __Pyx_Generator_USED
+            || __Pyx_Generator_CheckExact(yf)
+        #endif
+        #ifdef __Pyx_Coroutine_USED
+            || __Pyx_Coroutine_Check(yf)
+        #endif
+            ) {
+            ret = __Pyx__Coroutine_Throw(yf, typ, val, tb, args, close_on_genexit);
+        #ifdef __Pyx_Coroutine_USED
+        } else if (__Pyx_CoroutineAwait_CheckExact(yf)) {
+            ret = __Pyx__Coroutine_Throw(((__pyx_CoroutineAwaitObject*)yf)->coroutine, typ, val, tb, args, close_on_genexit);
+        #endif
+        } else {
+            PyObject *meth = __Pyx_PyObject_GetAttrStrNoError(yf, __pyx_n_s_throw);
+            if (unlikely(!meth)) {
+                Py_DECREF(yf);
+                if (unlikely(PyErr_Occurred())) {
+                    gen->is_running = 0;
+                    return NULL;
+                }
+                __Pyx_Coroutine_Undelegate(gen);
+                gen->is_running = 0;
+                goto throw_here;
+            }
+            if (likely(args)) {
+                ret = __Pyx_PyObject_Call(meth, args, NULL);
+            } else {
+                PyObject *cargs[4] = {NULL, typ, val, tb};
+                ret = __Pyx_PyObject_FastCall(meth, cargs+1, 3 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+            }
+            Py_DECREF(meth);
+        }
+        gen->is_running = 0;
+        Py_DECREF(yf);
+        if (!ret) {
+            ret = __Pyx_Coroutine_FinishDelegation(gen);
+        }
+        return __Pyx_Coroutine_MethodReturn(self, ret);
+    }
+throw_here:
+    __Pyx_Raise(typ, val, tb, NULL);
+    return __Pyx_Coroutine_MethodReturn(self, __Pyx_Coroutine_SendEx(gen, NULL, 0));
+}
+static PyObject *__Pyx_Coroutine_Throw(PyObject *self, PyObject *args) {
+    PyObject *typ;
+    PyObject *val = NULL;
+    PyObject *tb = NULL;
+    if (unlikely(!PyArg_UnpackTuple(args, (char *)"throw", 1, 3, &typ, &val, &tb)))
+        return NULL;
+    return __Pyx__Coroutine_Throw(self, typ, val, tb, args, 1);
+}
+static CYTHON_INLINE int __Pyx_Coroutine_traverse_excstate(__Pyx_ExcInfoStruct *exc_state, visitproc visit, void *arg) {
+#if PY_VERSION_HEX >= 0x030B00a4
+    Py_VISIT(exc_state->exc_value);
+#else
+    Py_VISIT(exc_state->exc_type);
+    Py_VISIT(exc_state->exc_value);
+    Py_VISIT(exc_state->exc_traceback);
+#endif
+    return 0;
+}
+static int __Pyx_Coroutine_traverse(__pyx_CoroutineObject *gen, visitproc visit, void *arg) {
+    Py_VISIT(gen->closure);
+    Py_VISIT(gen->classobj);
+    Py_VISIT(gen->yieldfrom);
+    return __Pyx_Coroutine_traverse_excstate(&gen->gi_exc_state, visit, arg);
+}
+static int __Pyx_Coroutine_clear(PyObject *self) {
+    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
+    Py_CLEAR(gen->closure);
+    Py_CLEAR(gen->classobj);
+    Py_CLEAR(gen->yieldfrom);
+    __Pyx_Coroutine_ExceptionClear(&gen->gi_exc_state);
+#ifdef __Pyx_AsyncGen_USED
+    if (__Pyx_AsyncGen_CheckExact(self)) {
+        Py_CLEAR(((__pyx_PyAsyncGenObject*)gen)->ag_finalizer);
+    }
+#endif
+    Py_CLEAR(gen->gi_code);
+    Py_CLEAR(gen->gi_frame);
+    Py_CLEAR(gen->gi_name);
+    Py_CLEAR(gen->gi_qualname);
+    Py_CLEAR(gen->gi_modulename);
+    return 0;
+}
+static void __Pyx_Coroutine_dealloc(PyObject *self) {
+    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
+    PyObject_GC_UnTrack(gen);
+    if (gen->gi_weakreflist != NULL)
+        PyObject_ClearWeakRefs(self);
+    if (gen->resume_label >= 0) {
+        PyObject_GC_Track(self);
+#if PY_VERSION_HEX >= 0x030400a1 && CYTHON_USE_TP_FINALIZE
+        if (unlikely(PyObject_CallFinalizerFromDealloc(self)))
+#else
+        Py_TYPE(gen)->tp_del(self);
+        if (unlikely(Py_REFCNT(self) > 0))
+#endif
+        {
+            return;
+        }
+        PyObject_GC_UnTrack(self);
+    }
+#ifdef __Pyx_AsyncGen_USED
+    if (__Pyx_AsyncGen_CheckExact(self)) {
+        /* We have to handle this case for asynchronous generators
+           right here, because this code has to be between UNTRACK
+           and GC_Del. */
+        Py_CLEAR(((__pyx_PyAsyncGenObject*)self)->ag_finalizer);
+    }
+#endif
+    __Pyx_Coroutine_clear(self);
+    __Pyx_PyHeapTypeObject_GC_Del(gen);
+}
+static void __Pyx_Coroutine_del(PyObject *self) {
+    PyObject *error_type, *error_value, *error_traceback;
+    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
+    __Pyx_PyThreadState_declare
+    if (gen->resume_label < 0) {
+        return;
+    }
+#if !CYTHON_USE_TP_FINALIZE
+    assert(self->ob_refcnt == 0);
+    __Pyx_SET_REFCNT(self, 1);
+#endif
+    __Pyx_PyThreadState_assign
+    __Pyx_ErrFetch(&error_type, &error_value, &error_traceback);
+#ifdef __Pyx_AsyncGen_USED
+    if (__Pyx_AsyncGen_CheckExact(self)) {
+        __pyx_PyAsyncGenObject *agen = (__pyx_PyAsyncGenObject*)self;
+        PyObject *finalizer = agen->ag_finalizer;
+        if (finalizer && !agen->ag_closed) {
+            PyObject *res = __Pyx_PyObject_CallOneArg(finalizer, self);
+            if (unlikely(!res)) {
+                PyErr_WriteUnraisable(self);
+            } else {
+                Py_DECREF(res);
+            }
+            __Pyx_ErrRestore(error_type, error_value, error_traceback);
+            return;
+        }
+    }
+#endif
+    if (unlikely(gen->resume_label == 0 && !error_value)) {
+#ifdef __Pyx_Coroutine_USED
+#ifdef __Pyx_Generator_USED
+    if (!__Pyx_Generator_CheckExact(self))
+#endif
+        {
+        PyObject_GC_UnTrack(self);
+#if PY_MAJOR_VERSION >= 3  || defined(PyErr_WarnFormat)
+        if (unlikely(PyErr_WarnFormat(PyExc_RuntimeWarning, 1, "coroutine '%.50S' was never awaited", gen->gi_qualname) < 0))
+            PyErr_WriteUnraisable(self);
+#else
+        {PyObject *msg;
+        char *cmsg;
+        #if CYTHON_COMPILING_IN_PYPY
+        msg = NULL;
+        cmsg = (char*) "coroutine was never awaited";
         #else
-            "cannot import name %S", name);
+        char *cname;
+        PyObject *qualname;
+        qualname = gen->gi_qualname;
+        cname = PyString_AS_STRING(qualname);
+        msg = PyString_FromFormat("coroutine '%.50s' was never awaited", cname);
+        if (unlikely(!msg)) {
+            PyErr_Clear();
+            cmsg = (char*) "coroutine was never awaited";
+        } else {
+            cmsg = PyString_AS_STRING(msg);
+        }
         #endif
+        if (unlikely(PyErr_WarnEx(PyExc_RuntimeWarning, cmsg, 1) < 0))
+            PyErr_WriteUnraisable(self);
+        Py_XDECREF(msg);}
+#endif
+        PyObject_GC_Track(self);
+        }
+#endif
+    } else {
+        PyObject *res = __Pyx_Coroutine_Close(self);
+        if (unlikely(!res)) {
+            if (PyErr_Occurred())
+                PyErr_WriteUnraisable(self);
+        } else {
+            Py_DECREF(res);
+        }
     }
-    return value;
+    __Pyx_ErrRestore(error_type, error_value, error_traceback);
+#if !CYTHON_USE_TP_FINALIZE
+    assert(Py_REFCNT(self) > 0);
+    if (likely(--self->ob_refcnt == 0)) {
+        return;
+    }
+    {
+        Py_ssize_t refcnt = Py_REFCNT(self);
+        _Py_NewReference(self);
+        __Pyx_SET_REFCNT(self, refcnt);
+    }
+#if CYTHON_COMPILING_IN_CPYTHON
+    assert(PyType_IS_GC(Py_TYPE(self)) &&
+           _Py_AS_GC(self)->gc.gc_refs != _PyGC_REFS_UNTRACKED);
+    _Py_DEC_REFTOTAL;
+#endif
+#ifdef COUNT_ALLOCS
+    --Py_TYPE(self)->tp_frees;
+    --Py_TYPE(self)->tp_allocs;
+#endif
+#endif
 }
-
-/* GetAttr */
-static CYTHON_INLINE PyObject *__Pyx_GetAttr(PyObject *o, PyObject *n) {
-#if CYTHON_USE_TYPE_SLOTS
+static PyObject *
+__Pyx_Coroutine_get_name(__pyx_CoroutineObject *self, void *context)
+{
+    PyObject *name = self->gi_name;
+    CYTHON_UNUSED_VAR(context);
+    if (unlikely(!name)) name = Py_None;
+    Py_INCREF(name);
+    return name;
+}
+static int
+__Pyx_Coroutine_set_name(__pyx_CoroutineObject *self, PyObject *value, void *context)
+{
+    CYTHON_UNUSED_VAR(context);
 #if PY_MAJOR_VERSION >= 3
-    if (likely(PyUnicode_Check(n)))
+    if (unlikely(value == NULL || !PyUnicode_Check(value)))
 #else
-    if (likely(PyString_Check(n)))
-#endif
-        return __Pyx_PyObject_GetAttrStr(o, n);
+    if (unlikely(value == NULL || !PyString_Check(value)))
 #endif
-    return PyObject_GetAttr(o, n);
+    {
+        PyErr_SetString(PyExc_TypeError,
+                        "__name__ must be set to a string object");
+        return -1;
+    }
+    Py_INCREF(value);
+    __Pyx_Py_XDECREF_SET(self->gi_name, value);
+    return 0;
 }
-
-/* HasAttr */
-#if __PYX_LIMITED_VERSION_HEX < 0x030d00A1
-static CYTHON_INLINE int __Pyx_HasAttr(PyObject *o, PyObject *n) {
-    PyObject *r;
-    if (unlikely(!__Pyx_PyBaseString_Check(n))) {
+static PyObject *
+__Pyx_Coroutine_get_qualname(__pyx_CoroutineObject *self, void *context)
+{
+    PyObject *name = self->gi_qualname;
+    CYTHON_UNUSED_VAR(context);
+    if (unlikely(!name)) name = Py_None;
+    Py_INCREF(name);
+    return name;
+}
+static int
+__Pyx_Coroutine_set_qualname(__pyx_CoroutineObject *self, PyObject *value, void *context)
+{
+    CYTHON_UNUSED_VAR(context);
+#if PY_MAJOR_VERSION >= 3
+    if (unlikely(value == NULL || !PyUnicode_Check(value)))
+#else
+    if (unlikely(value == NULL || !PyString_Check(value)))
+#endif
+    {
         PyErr_SetString(PyExc_TypeError,
-                        "hasattr(): attribute name must be string");
+                        "__qualname__ must be set to a string object");
         return -1;
     }
-    r = __Pyx_GetAttr(o, n);
-    if (!r) {
-        PyErr_Clear();
-        return 0;
-    } else {
-        Py_DECREF(r);
-        return 1;
+    Py_INCREF(value);
+    __Pyx_Py_XDECREF_SET(self->gi_qualname, value);
+    return 0;
+}
+static PyObject *
+__Pyx_Coroutine_get_frame(__pyx_CoroutineObject *self, void *context)
+{
+    PyObject *frame = self->gi_frame;
+    CYTHON_UNUSED_VAR(context);
+    if (!frame) {
+        if (unlikely(!self->gi_code)) {
+            Py_RETURN_NONE;
+        }
+        frame = (PyObject *) PyFrame_New(
+            PyThreadState_Get(),            /*PyThreadState *tstate,*/
+            (PyCodeObject*) self->gi_code,  /*PyCodeObject *code,*/
+            __pyx_d,                 /*PyObject *globals,*/
+            0                               /*PyObject *locals*/
+        );
+        if (unlikely(!frame))
+            return NULL;
+        self->gi_frame = frame;
     }
+    Py_INCREF(frame);
+    return frame;
+}
+static __pyx_CoroutineObject *__Pyx__Coroutine_New(
+            PyTypeObject* type, __pyx_coroutine_body_t body, PyObject *code, PyObject *closure,
+            PyObject *name, PyObject *qualname, PyObject *module_name) {
+    __pyx_CoroutineObject *gen = PyObject_GC_New(__pyx_CoroutineObject, type);
+    if (unlikely(!gen))
+        return NULL;
+    return __Pyx__Coroutine_NewInit(gen, body, code, closure, name, qualname, module_name);
 }
+static __pyx_CoroutineObject *__Pyx__Coroutine_NewInit(
+            __pyx_CoroutineObject *gen, __pyx_coroutine_body_t body, PyObject *code, PyObject *closure,
+            PyObject *name, PyObject *qualname, PyObject *module_name) {
+    gen->body = body;
+    gen->closure = closure;
+    Py_XINCREF(closure);
+    gen->is_running = 0;
+    gen->resume_label = 0;
+    gen->classobj = NULL;
+    gen->yieldfrom = NULL;
+    #if PY_VERSION_HEX >= 0x030B00a4
+    gen->gi_exc_state.exc_value = NULL;
+    #else
+    gen->gi_exc_state.exc_type = NULL;
+    gen->gi_exc_state.exc_value = NULL;
+    gen->gi_exc_state.exc_traceback = NULL;
+    #endif
+#if CYTHON_USE_EXC_INFO_STACK
+    gen->gi_exc_state.previous_item = NULL;
 #endif
+    gen->gi_weakreflist = NULL;
+    Py_XINCREF(qualname);
+    gen->gi_qualname = qualname;
+    Py_XINCREF(name);
+    gen->gi_name = name;
+    Py_XINCREF(module_name);
+    gen->gi_modulename = module_name;
+    Py_XINCREF(code);
+    gen->gi_code = code;
+    gen->gi_frame = NULL;
+    PyObject_GC_Track(gen);
+    return gen;
+}
 
 /* PyObject_GenericGetAttrNoDict */
 #if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
 static PyObject *__Pyx_RaiseGenericGetAttributeError(PyTypeObject *tp, PyObject *attr_name) {
     __Pyx_TypeName type_name = __Pyx_PyType_GetName(tp);
     PyErr_Format(PyExc_AttributeError,
 #if PY_MAJOR_VERSION >= 3
@@ -17710,143 +18194,1037 @@
             return res;
         }
     }
     return descr;
 }
 #endif
 
-/* PyObject_GenericGetAttr */
-#if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
-static PyObject* __Pyx_PyObject_GenericGetAttr(PyObject* obj, PyObject* attr_name) {
-    if (unlikely(Py_TYPE(obj)->tp_dictoffset)) {
-        return PyObject_GenericGetAttr(obj, attr_name);
+/* PatchModuleWithCoroutine */
+static PyObject* __Pyx_Coroutine_patch_module(PyObject* module, const char* py_code) {
+#if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
+    int result;
+    PyObject *globals, *result_obj;
+    globals = PyDict_New();  if (unlikely(!globals)) goto ignore;
+    result = PyDict_SetItemString(globals, "_cython_coroutine_type",
+    #ifdef __Pyx_Coroutine_USED
+        (PyObject*)__pyx_CoroutineType);
+    #else
+        Py_None);
+    #endif
+    if (unlikely(result < 0)) goto ignore;
+    result = PyDict_SetItemString(globals, "_cython_generator_type",
+    #ifdef __Pyx_Generator_USED
+        (PyObject*)__pyx_GeneratorType);
+    #else
+        Py_None);
+    #endif
+    if (unlikely(result < 0)) goto ignore;
+    if (unlikely(PyDict_SetItemString(globals, "_module", module) < 0)) goto ignore;
+    if (unlikely(PyDict_SetItemString(globals, "__builtins__", __pyx_b) < 0)) goto ignore;
+    result_obj = PyRun_String(py_code, Py_file_input, globals, globals);
+    if (unlikely(!result_obj)) goto ignore;
+    Py_DECREF(result_obj);
+    Py_DECREF(globals);
+    return module;
+ignore:
+    Py_XDECREF(globals);
+    PyErr_WriteUnraisable(module);
+    if (unlikely(PyErr_WarnEx(PyExc_RuntimeWarning, "Cython module failed to patch module with custom type", 1) < 0)) {
+        Py_DECREF(module);
+        module = NULL;
     }
-    return __Pyx_PyObject_GenericGetAttrNoDict(obj, attr_name);
+#else
+    py_code++;
+#endif
+    return module;
+}
+
+/* PatchGeneratorABC */
+#ifndef CYTHON_REGISTER_ABCS
+#define CYTHON_REGISTER_ABCS 1
+#endif
+#if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
+static PyObject* __Pyx_patch_abc_module(PyObject *module);
+static PyObject* __Pyx_patch_abc_module(PyObject *module) {
+    module = __Pyx_Coroutine_patch_module(
+        module, ""
+"if _cython_generator_type is not None:\n"
+"    try: Generator = _module.Generator\n"
+"    except AttributeError: pass\n"
+"    else: Generator.register(_cython_generator_type)\n"
+"if _cython_coroutine_type is not None:\n"
+"    try: Coroutine = _module.Coroutine\n"
+"    except AttributeError: pass\n"
+"    else: Coroutine.register(_cython_coroutine_type)\n"
+    );
+    return module;
 }
 #endif
+static int __Pyx_patch_abc(void) {
+#if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
+    static int abc_patched = 0;
+    if (CYTHON_REGISTER_ABCS && !abc_patched) {
+        PyObject *module;
+        module = PyImport_ImportModule((PY_MAJOR_VERSION >= 3) ? "collections.abc" : "collections");
+        if (unlikely(!module)) {
+            PyErr_WriteUnraisable(NULL);
+            if (unlikely(PyErr_WarnEx(PyExc_RuntimeWarning,
+                    ((PY_MAJOR_VERSION >= 3) ?
+                        "Cython module failed to register with collections.abc module" :
+                        "Cython module failed to register with collections module"), 1) < 0)) {
+                return -1;
+            }
+        } else {
+            module = __Pyx_patch_abc_module(module);
+            abc_patched = 1;
+            if (unlikely(!module))
+                return -1;
+            Py_DECREF(module);
+        }
+        module = PyImport_ImportModule("backports_abc");
+        if (module) {
+            module = __Pyx_patch_abc_module(module);
+            Py_XDECREF(module);
+        }
+        if (!module) {
+            PyErr_Clear();
+        }
+    }
+#else
+    if ((0)) __Pyx_Coroutine_patch_module(NULL, NULL);
+#endif
+    return 0;
+}
 
-/* FixUpExtensionType */
-#if CYTHON_USE_TYPE_SPECS
-static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
-#if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
-    CYTHON_UNUSED_VAR(spec);
+/* Coroutine */
+static void __Pyx_CoroutineAwait_dealloc(PyObject *self) {
+    PyObject_GC_UnTrack(self);
+    Py_CLEAR(((__pyx_CoroutineAwaitObject*)self)->coroutine);
+    __Pyx_PyHeapTypeObject_GC_Del(self);
+}
+static int __Pyx_CoroutineAwait_traverse(__pyx_CoroutineAwaitObject *self, visitproc visit, void *arg) {
+    Py_VISIT(self->coroutine);
+    return 0;
+}
+static int __Pyx_CoroutineAwait_clear(__pyx_CoroutineAwaitObject *self) {
+    Py_CLEAR(self->coroutine);
+    return 0;
+}
+static PyObject *__Pyx_CoroutineAwait_Next(__pyx_CoroutineAwaitObject *self) {
+    return __Pyx_Generator_Next(self->coroutine);
+}
+static PyObject *__Pyx_CoroutineAwait_Send(__pyx_CoroutineAwaitObject *self, PyObject *value) {
+    return __Pyx_Coroutine_Send(self->coroutine, value);
+}
+static PyObject *__Pyx_CoroutineAwait_Throw(__pyx_CoroutineAwaitObject *self, PyObject *args) {
+    return __Pyx_Coroutine_Throw(self->coroutine, args);
+}
+static PyObject *__Pyx_CoroutineAwait_Close(__pyx_CoroutineAwaitObject *self, PyObject *arg) {
+    CYTHON_UNUSED_VAR(arg);
+    return __Pyx_Coroutine_Close(self->coroutine);
+}
+static PyObject *__Pyx_CoroutineAwait_self(PyObject *self) {
+    Py_INCREF(self);
+    return self;
+}
+#if !CYTHON_COMPILING_IN_PYPY
+static PyObject *__Pyx_CoroutineAwait_no_new(PyTypeObject *type, PyObject *args, PyObject *kwargs) {
     CYTHON_UNUSED_VAR(type);
+    CYTHON_UNUSED_VAR(args);
+    CYTHON_UNUSED_VAR(kwargs);
+    PyErr_SetString(PyExc_TypeError, "cannot instantiate type, use 'await coroutine' instead");
+    return NULL;
+}
+#endif
+static PyObject *__Pyx_CoroutineAwait_reduce_ex(__pyx_CoroutineAwaitObject *self, PyObject *arg) {
+    CYTHON_UNUSED_VAR(arg);
+    PyErr_Format(PyExc_TypeError, "cannot pickle '%.200s' object",
+                         Py_TYPE(self)->tp_name);
+    return NULL;
+}
+static PyMethodDef __pyx_CoroutineAwait_methods[] = {
+    {"send", (PyCFunction) __Pyx_CoroutineAwait_Send, METH_O,
+     (char*) PyDoc_STR("send(arg) -> send 'arg' into coroutine,\nreturn next yielded value or raise StopIteration.")},
+    {"throw", (PyCFunction) __Pyx_CoroutineAwait_Throw, METH_VARARGS,
+     (char*) PyDoc_STR("throw(typ[,val[,tb]]) -> raise exception in coroutine,\nreturn next yielded value or raise StopIteration.")},
+    {"close", (PyCFunction) __Pyx_CoroutineAwait_Close, METH_NOARGS,
+     (char*) PyDoc_STR("close() -> raise GeneratorExit inside coroutine.")},
+    {"__reduce_ex__", (PyCFunction) __Pyx_CoroutineAwait_reduce_ex, METH_O, 0},
+    {"__reduce__", (PyCFunction) __Pyx_CoroutineAwait_reduce_ex, METH_NOARGS, 0},
+    {0, 0, 0, 0}
+};
+#if CYTHON_USE_TYPE_SPECS
+static PyType_Slot __pyx_CoroutineAwaitType_slots[] = {
+    {Py_tp_dealloc, (void *)__Pyx_CoroutineAwait_dealloc},
+    {Py_tp_traverse, (void *)__Pyx_CoroutineAwait_traverse},
+    {Py_tp_clear, (void *)__Pyx_CoroutineAwait_clear},
+#if !CYTHON_COMPILING_IN_PYPY
+    {Py_tp_new, (void *)__Pyx_CoroutineAwait_no_new},
+#endif
+    {Py_tp_methods, (void *)__pyx_CoroutineAwait_methods},
+    {Py_tp_iter, (void *)__Pyx_CoroutineAwait_self},
+    {Py_tp_iternext, (void *)__Pyx_CoroutineAwait_Next},
+    {0, 0},
+};
+static PyType_Spec __pyx_CoroutineAwaitType_spec = {
+    __PYX_TYPE_MODULE_PREFIX "coroutine_wrapper",
+    sizeof(__pyx_CoroutineAwaitObject),
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
+    __pyx_CoroutineAwaitType_slots
+};
 #else
-    const PyType_Slot *slot = spec->slots;
-    while (slot && slot->slot && slot->slot != Py_tp_members)
-        slot++;
-    if (slot && slot->slot == Py_tp_members) {
-        int changed = 0;
-#if !(PY_VERSION_HEX <= 0x030900b1 && CYTHON_COMPILING_IN_CPYTHON)
-        const
+static PyTypeObject __pyx_CoroutineAwaitType_type = {
+    PyVarObject_HEAD_INIT(0, 0)
+    __PYX_TYPE_MODULE_PREFIX "coroutine_wrapper",
+    sizeof(__pyx_CoroutineAwaitObject),
+    0,
+    (destructor) __Pyx_CoroutineAwait_dealloc,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
+    PyDoc_STR("A wrapper object implementing __await__ for coroutines."),
+    (traverseproc) __Pyx_CoroutineAwait_traverse,
+    (inquiry) __Pyx_CoroutineAwait_clear,
+    0,
+    0,
+    __Pyx_CoroutineAwait_self,
+    (iternextfunc) __Pyx_CoroutineAwait_Next,
+    __pyx_CoroutineAwait_methods,
+    0                         ,
+    0                      ,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+#if !CYTHON_COMPILING_IN_PYPY
+    __Pyx_CoroutineAwait_no_new,
+#else
+    0,
 #endif
-            PyMemberDef *memb = (PyMemberDef*) slot->pfunc;
-        while (memb && memb->name) {
-            if (memb->name[0] == '_' && memb->name[1] == '_') {
-#if PY_VERSION_HEX < 0x030900b1
-                if (strcmp(memb->name, "__weaklistoffset__") == 0) {
-                    assert(memb->type == T_PYSSIZET);
-                    assert(memb->flags == READONLY);
-                    type->tp_weaklistoffset = memb->offset;
-                    changed = 1;
-                }
-                else if (strcmp(memb->name, "__dictoffset__") == 0) {
-                    assert(memb->type == T_PYSSIZET);
-                    assert(memb->flags == READONLY);
-                    type->tp_dictoffset = memb->offset;
-                    changed = 1;
-                }
-#if CYTHON_METH_FASTCALL
-                else if (strcmp(memb->name, "__vectorcalloffset__") == 0) {
-                    assert(memb->type == T_PYSSIZET);
-                    assert(memb->flags == READONLY);
-#if PY_VERSION_HEX >= 0x030800b4
-                    type->tp_vectorcall_offset = memb->offset;
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+#if PY_VERSION_HEX >= 0x030400a1
+    0,
+#endif
+#if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
+    0,
+#endif
+#if __PYX_NEED_TP_PRINT_SLOT
+    0,
+#endif
+#if PY_VERSION_HEX >= 0x030C0000
+    0,
+#endif
+#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
+    0,
+#endif
+};
+#endif
+#if PY_VERSION_HEX < 0x030500B1 || defined(__Pyx_IterableCoroutine_USED) || CYTHON_USE_ASYNC_SLOTS
+static CYTHON_INLINE PyObject *__Pyx__Coroutine_await(PyObject *coroutine) {
+    __pyx_CoroutineAwaitObject *await = PyObject_GC_New(__pyx_CoroutineAwaitObject, __pyx_CoroutineAwaitType);
+    if (unlikely(!await)) return NULL;
+    Py_INCREF(coroutine);
+    await->coroutine = coroutine;
+    PyObject_GC_Track(await);
+    return (PyObject*)await;
+}
+#endif
+#if PY_VERSION_HEX < 0x030500B1
+static PyObject *__Pyx_Coroutine_await_method(PyObject *coroutine, PyObject *arg) {
+    CYTHON_UNUSED_VAR(arg);
+    return __Pyx__Coroutine_await(coroutine);
+}
+#endif
+#if defined(__Pyx_IterableCoroutine_USED) || CYTHON_USE_ASYNC_SLOTS
+static PyObject *__Pyx_Coroutine_await(PyObject *coroutine) {
+    if (unlikely(!coroutine || !__Pyx_Coroutine_Check(coroutine))) {
+        PyErr_SetString(PyExc_TypeError, "invalid input, expected coroutine");
+        return NULL;
+    }
+    return __Pyx__Coroutine_await(coroutine);
+}
+#endif
+#if CYTHON_COMPILING_IN_CPYTHON && PY_MAJOR_VERSION >= 3 && PY_VERSION_HEX < 0x030500B1
+static PyObject *__Pyx_Coroutine_compare(PyObject *obj, PyObject *other, int op) {
+    PyObject* result;
+    switch (op) {
+        case Py_EQ: result = (other == obj) ? Py_True : Py_False; break;
+        case Py_NE: result = (other != obj) ? Py_True : Py_False; break;
+        default:
+            result = Py_NotImplemented;
+    }
+    Py_INCREF(result);
+    return result;
+}
+#endif
+static PyMethodDef __pyx_Coroutine_methods[] = {
+    {"send", (PyCFunction) __Pyx_Coroutine_Send, METH_O,
+     (char*) PyDoc_STR("send(arg) -> send 'arg' into coroutine,\nreturn next iterated value or raise StopIteration.")},
+    {"throw", (PyCFunction) __Pyx_Coroutine_Throw, METH_VARARGS,
+     (char*) PyDoc_STR("throw(typ[,val[,tb]]) -> raise exception in coroutine,\nreturn next iterated value or raise StopIteration.")},
+    {"close", (PyCFunction) __Pyx_Coroutine_Close_Method, METH_NOARGS,
+     (char*) PyDoc_STR("close() -> raise GeneratorExit inside coroutine.")},
+#if PY_VERSION_HEX < 0x030500B1
+    {"__await__", (PyCFunction) __Pyx_Coroutine_await_method, METH_NOARGS,
+     (char*) PyDoc_STR("__await__() -> return an iterator to be used in await expression.")},
+#endif
+    {0, 0, 0, 0}
+};
+static PyMemberDef __pyx_Coroutine_memberlist[] = {
+    {(char *) "cr_running", T_BOOL, offsetof(__pyx_CoroutineObject, is_running), READONLY, NULL},
+    {(char*) "cr_await", T_OBJECT, offsetof(__pyx_CoroutineObject, yieldfrom), READONLY,
+     (char*) PyDoc_STR("object being awaited, or None")},
+    {(char*) "cr_code", T_OBJECT, offsetof(__pyx_CoroutineObject, gi_code), READONLY, NULL},
+    {(char *) "__module__", T_OBJECT, offsetof(__pyx_CoroutineObject, gi_modulename), 0, 0},
+#if CYTHON_USE_TYPE_SPECS
+    {(char *) "__weaklistoffset__", T_PYSSIZET, offsetof(__pyx_CoroutineObject, gi_weakreflist), READONLY, 0},
+#endif
+    {0, 0, 0, 0, 0}
+};
+static PyGetSetDef __pyx_Coroutine_getsets[] = {
+    {(char *) "__name__", (getter)__Pyx_Coroutine_get_name, (setter)__Pyx_Coroutine_set_name,
+     (char*) PyDoc_STR("name of the coroutine"), 0},
+    {(char *) "__qualname__", (getter)__Pyx_Coroutine_get_qualname, (setter)__Pyx_Coroutine_set_qualname,
+     (char*) PyDoc_STR("qualified name of the coroutine"), 0},
+    {(char *) "cr_frame", (getter)__Pyx_Coroutine_get_frame, NULL,
+     (char*) PyDoc_STR("Frame of the coroutine"), 0},
+    {0, 0, 0, 0, 0}
+};
+#if CYTHON_USE_TYPE_SPECS
+static PyType_Slot __pyx_CoroutineType_slots[] = {
+    {Py_tp_dealloc, (void *)__Pyx_Coroutine_dealloc},
+    {Py_am_await, (void *)&__Pyx_Coroutine_await},
+    {Py_tp_traverse, (void *)__Pyx_Coroutine_traverse},
+    {Py_tp_methods, (void *)__pyx_Coroutine_methods},
+    {Py_tp_members, (void *)__pyx_Coroutine_memberlist},
+    {Py_tp_getset, (void *)__pyx_Coroutine_getsets},
+    {Py_tp_getattro, (void *) __Pyx_PyObject_GenericGetAttrNoDict},
+#if CYTHON_USE_TP_FINALIZE
+    {Py_tp_finalize, (void *)__Pyx_Coroutine_del},
+#endif
+    {0, 0},
+};
+static PyType_Spec __pyx_CoroutineType_spec = {
+    __PYX_TYPE_MODULE_PREFIX "coroutine",
+    sizeof(__pyx_CoroutineObject),
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_HAVE_FINALIZE,
+    __pyx_CoroutineType_slots
+};
 #else
-                    type->tp_print = (printfunc) memb->offset;
+#if CYTHON_USE_ASYNC_SLOTS
+static __Pyx_PyAsyncMethodsStruct __pyx_Coroutine_as_async = {
+    __Pyx_Coroutine_await,
+    0,
+    0,
+#if PY_VERSION_HEX >= 0x030A00A3
+    0,
 #endif
-                    changed = 1;
-                }
+};
 #endif
+static PyTypeObject __pyx_CoroutineType_type = {
+    PyVarObject_HEAD_INIT(0, 0)
+    __PYX_TYPE_MODULE_PREFIX "coroutine",
+    sizeof(__pyx_CoroutineObject),
+    0,
+    (destructor) __Pyx_Coroutine_dealloc,
+    0,
+    0,
+    0,
+#if CYTHON_USE_ASYNC_SLOTS
+    &__pyx_Coroutine_as_async,
 #else
-                if ((0));
+    0,
 #endif
-#if PY_VERSION_HEX <= 0x030900b1 && CYTHON_COMPILING_IN_CPYTHON
-                else if (strcmp(memb->name, "__module__") == 0) {
-                    PyObject *descr;
-                    assert(memb->type == T_OBJECT);
-                    assert(memb->flags == 0 || memb->flags == READONLY);
-                    descr = PyDescr_NewMember(type, memb);
-                    if (unlikely(!descr))
-                        return -1;
-                    if (unlikely(PyDict_SetItem(type->tp_dict, PyDescr_NAME(descr), descr) < 0)) {
-                        Py_DECREF(descr);
-                        return -1;
-                    }
-                    Py_DECREF(descr);
-                    changed = 1;
-                }
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_HAVE_FINALIZE,
+    0,
+    (traverseproc) __Pyx_Coroutine_traverse,
+    0,
+#if CYTHON_USE_ASYNC_SLOTS && CYTHON_COMPILING_IN_CPYTHON && PY_MAJOR_VERSION >= 3 && PY_VERSION_HEX < 0x030500B1
+    __Pyx_Coroutine_compare,
+#else
+    0,
 #endif
-            }
-            memb++;
+    offsetof(__pyx_CoroutineObject, gi_weakreflist),
+    0,
+    0,
+    __pyx_Coroutine_methods,
+    __pyx_Coroutine_memberlist,
+    __pyx_Coroutine_getsets,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+#if CYTHON_USE_TP_FINALIZE
+    0,
+#else
+    __Pyx_Coroutine_del,
+#endif
+    0,
+#if CYTHON_USE_TP_FINALIZE
+    __Pyx_Coroutine_del,
+#elif PY_VERSION_HEX >= 0x030400a1
+    0,
+#endif
+#if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
+    0,
+#endif
+#if __PYX_NEED_TP_PRINT_SLOT
+    0,
+#endif
+#if PY_VERSION_HEX >= 0x030C0000
+    0,
+#endif
+#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
+    0,
+#endif
+};
+#endif
+static int __pyx_Coroutine_init(PyObject *module) {
+    CYTHON_MAYBE_UNUSED_VAR(module);
+#if CYTHON_USE_TYPE_SPECS
+    __pyx_CoroutineType = __Pyx_FetchCommonTypeFromSpec(module, &__pyx_CoroutineType_spec, NULL);
+#else
+    __pyx_CoroutineType_type.tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+    __pyx_CoroutineType = __Pyx_FetchCommonType(&__pyx_CoroutineType_type);
+#endif
+    if (unlikely(!__pyx_CoroutineType))
+        return -1;
+#ifdef __Pyx_IterableCoroutine_USED
+    if (unlikely(__pyx_IterableCoroutine_init(module) == -1))
+        return -1;
+#endif
+#if CYTHON_USE_TYPE_SPECS
+    __pyx_CoroutineAwaitType = __Pyx_FetchCommonTypeFromSpec(module, &__pyx_CoroutineAwaitType_spec, NULL);
+#else
+    __pyx_CoroutineAwaitType = __Pyx_FetchCommonType(&__pyx_CoroutineAwaitType_type);
+#endif
+    if (unlikely(!__pyx_CoroutineAwaitType))
+        return -1;
+    return 0;
+}
+
+/* GetAwaitIter */
+static CYTHON_INLINE PyObject *__Pyx_Coroutine_GetAwaitableIter(PyObject *o) {
+#ifdef __Pyx_Coroutine_USED
+    if (__Pyx_Coroutine_Check(o)) {
+        return __Pyx_NewRef(o);
+    }
+#endif
+    return __Pyx__Coroutine_GetAwaitableIter(o);
+}
+static void __Pyx_Coroutine_AwaitableIterError(PyObject *source) {
+#if PY_VERSION_HEX >= 0x030600B3 && PY_VERSION_HEX < 0x030d0000 || defined(_PyErr_FormatFromCause)
+    __Pyx_TypeName source_type_name = __Pyx_PyType_GetName(Py_TYPE(source));
+    _PyErr_FormatFromCause(PyExc_TypeError,
+        "'async for' received an invalid object from __anext__: " __Pyx_FMT_TYPENAME, source_type_name);
+    __Pyx_DECREF_TypeName(source_type_name);
+#elif PY_MAJOR_VERSION >= 3
+    PyObject *exc, *val, *val2, *tb;
+    __Pyx_TypeName source_type_name = __Pyx_PyType_GetName(Py_TYPE(source));
+    assert(PyErr_Occurred());
+    PyErr_Fetch(&exc, &val, &tb);
+    PyErr_NormalizeException(&exc, &val, &tb);
+    if (tb != NULL) {
+        PyException_SetTraceback(val, tb);
+        Py_DECREF(tb);
+    }
+    Py_DECREF(exc);
+    assert(!PyErr_Occurred());
+    PyErr_Format(PyExc_TypeError,
+        "'async for' received an invalid object from __anext__: " __Pyx_FMT_TYPENAME, source_type_name);
+    __Pyx_DECREF_TypeName(source_type_name);
+    PyErr_Fetch(&exc, &val2, &tb);
+    PyErr_NormalizeException(&exc, &val2, &tb);
+    Py_INCREF(val);
+    PyException_SetCause(val2, val);
+    PyException_SetContext(val2, val);
+    PyErr_Restore(exc, val2, tb);
+#else
+    CYTHON_UNUSED_VAR(source);
+#endif
+}
+static PyObject *__Pyx__Coroutine_GetAwaitableIter(PyObject *obj) {
+    PyObject *res;
+#if CYTHON_USE_ASYNC_SLOTS
+    __Pyx_PyAsyncMethodsStruct* am = __Pyx_PyType_AsAsync(obj);
+    if (likely(am && am->am_await)) {
+        res = (*am->am_await)(obj);
+    } else
+#endif
+#if PY_VERSION_HEX >= 0x030500B2 || defined(PyCoro_CheckExact)
+    if (PyCoro_CheckExact(obj)) {
+        return __Pyx_NewRef(obj);
+    } else
+#endif
+#if CYTHON_COMPILING_IN_CPYTHON && defined(CO_ITERABLE_COROUTINE)
+#if PY_VERSION_HEX >= 0x030C00A6
+    if (PyGen_CheckExact(obj) && (PyGen_GetCode((PyGenObject*)obj)->co_flags & CO_ITERABLE_COROUTINE)) {
+#else
+    if (PyGen_CheckExact(obj) && ((PyGenObject*)obj)->gi_code && ((PyCodeObject *)((PyGenObject*)obj)->gi_code)->co_flags & CO_ITERABLE_COROUTINE) {
+#endif
+        return __Pyx_NewRef(obj);
+    } else
+#endif
+    {
+        PyObject *method = NULL;
+        int is_method = __Pyx_PyObject_GetMethod(obj, __pyx_n_s_await, &method);
+        if (likely(is_method)) {
+            res = __Pyx_PyObject_CallOneArg(method, obj);
+        } else if (likely(method)) {
+            res = __Pyx_PyObject_CallNoArg(method);
+        } else
+            goto slot_error;
+        Py_DECREF(method);
+    }
+    if (unlikely(!res)) {
+        __Pyx_Coroutine_AwaitableIterError(obj);
+        goto bad;
+    }
+    if (unlikely(!PyIter_Check(res))) {
+        __Pyx_TypeName res_type_name = __Pyx_PyType_GetName(Py_TYPE(res));
+        PyErr_Format(PyExc_TypeError,
+            "__await__() returned non-iterator of type '" __Pyx_FMT_TYPENAME "'", res_type_name);
+        __Pyx_DECREF_TypeName(res_type_name);
+        Py_CLEAR(res);
+    } else {
+        int is_coroutine = 0;
+        #ifdef __Pyx_Coroutine_USED
+        is_coroutine |= __Pyx_Coroutine_Check(res);
+        #endif
+        #if PY_VERSION_HEX >= 0x030500B2 || defined(PyCoro_CheckExact)
+        is_coroutine |= PyCoro_CheckExact(res);
+        #endif
+        if (unlikely(is_coroutine)) {
+            /* __await__ must return an *iterator*, not
+               a coroutine or another awaitable (see PEP 492) */
+            PyErr_SetString(PyExc_TypeError,
+                            "__await__() returned a coroutine");
+            Py_CLEAR(res);
         }
-        if (changed)
-            PyType_Modified(type);
     }
+    return res;
+slot_error:
+    {
+        __Pyx_TypeName obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
+        PyErr_Format(PyExc_TypeError,
+            "object " __Pyx_FMT_TYPENAME " can't be used in 'await' expression", obj_type_name);
+        __Pyx_DECREF_TypeName(obj_type_name);
+    }
+bad:
+    return NULL;
+}
+
+/* CoroutineYieldFrom */
+  static PyObject* __Pyx__Coroutine_Yield_From_Generic(__pyx_CoroutineObject *gen, PyObject *source) {
+    PyObject *retval;
+    PyObject *source_gen = __Pyx__Coroutine_GetAwaitableIter(source);
+    if (unlikely(!source_gen)) {
+        return NULL;
+    }
+    if (__Pyx_Coroutine_Check(source_gen)) {
+        retval = __Pyx_Generator_Next(source_gen);
+    } else {
+        retval = __Pyx_PyObject_GetIterNextFunc(source_gen)(source_gen);
+    }
+    if (retval) {
+        gen->yieldfrom = source_gen;
+        return retval;
+    }
+    Py_DECREF(source_gen);
+    return NULL;
+}
+static CYTHON_INLINE PyObject* __Pyx_Coroutine_Yield_From(__pyx_CoroutineObject *gen, PyObject *source) {
+    PyObject *retval;
+    if (__Pyx_Coroutine_Check(source)) {
+        if (unlikely(((__pyx_CoroutineObject*)source)->yieldfrom)) {
+            PyErr_SetString(
+                PyExc_RuntimeError,
+                "coroutine is being awaited already");
+            return NULL;
+        }
+        retval = __Pyx_Generator_Next(source);
+#ifdef __Pyx_AsyncGen_USED
+    } else if (__pyx_PyAsyncGenASend_CheckExact(source)) {
+        retval = __Pyx_async_gen_asend_iternext(source);
 #endif
-    return 0;
+    } else {
+        return __Pyx__Coroutine_Yield_From_Generic(gen, source);
+    }
+    if (retval) {
+        Py_INCREF(source);
+        gen->yieldfrom = source;
+    }
+    return retval;
 }
+
+/* ReturnWithStopIteration */
+  static void __Pyx__ReturnWithStopIteration(PyObject* value) {
+    PyObject *exc, *args;
+#if CYTHON_COMPILING_IN_CPYTHON
+    __Pyx_PyThreadState_declare
+    if (PY_VERSION_HEX >= 0x030C00A6
+            || unlikely(PyTuple_Check(value) || PyExceptionInstance_Check(value))) {
+        args = PyTuple_New(1);
+        if (unlikely(!args)) return;
+        Py_INCREF(value);
+        PyTuple_SET_ITEM(args, 0, value);
+        exc = PyType_Type.tp_call(PyExc_StopIteration, args, NULL);
+        Py_DECREF(args);
+        if (!exc) return;
+    } else {
+        Py_INCREF(value);
+        exc = value;
+    }
+    #if CYTHON_FAST_THREAD_STATE
+    __Pyx_PyThreadState_assign
+    #if CYTHON_USE_EXC_INFO_STACK
+    if (!__pyx_tstate->exc_info->exc_value)
+    #else
+    if (!__pyx_tstate->exc_type)
+    #endif
+    {
+        Py_INCREF(PyExc_StopIteration);
+        __Pyx_ErrRestore(PyExc_StopIteration, exc, NULL);
+        return;
+    }
+    #endif
+#else
+    args = PyTuple_Pack(1, value);
+    if (unlikely(!args)) return;
+    exc = PyObject_Call(PyExc_StopIteration, args, NULL);
+    Py_DECREF(args);
+    if (unlikely(!exc)) return;
 #endif
+    PyErr_SetObject(PyExc_StopIteration, exc);
+    Py_DECREF(exc);
+}
 
-/* FormatTypeName */
-#if CYTHON_COMPILING_IN_LIMITED_API
-static __Pyx_TypeName
-__Pyx_PyType_GetName(PyTypeObject* tp)
-{
-    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
-                                               __pyx_n_s_name);
-    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
-        PyErr_Clear();
-        Py_XDECREF(name);
-        name = __Pyx_NewRef(__pyx_n_s__10);
+/* GetItemInt */
+  static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
+    PyObject *r;
+    if (unlikely(!j)) return NULL;
+    r = PyObject_GetItem(o, j);
+    Py_DECREF(j);
+    return r;
+}
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
+                                                              CYTHON_NCP_UNUSED int wraparound,
+                                                              CYTHON_NCP_UNUSED int boundscheck) {
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    Py_ssize_t wrapped_i = i;
+    if (wraparound & unlikely(i < 0)) {
+        wrapped_i += PyList_GET_SIZE(o);
     }
-    return name;
+    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
+        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
+        Py_INCREF(r);
+        return r;
+    }
+    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
+#else
+    return PySequence_GetItem(o, i);
+#endif
+}
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
+                                                              CYTHON_NCP_UNUSED int wraparound,
+                                                              CYTHON_NCP_UNUSED int boundscheck) {
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    Py_ssize_t wrapped_i = i;
+    if (wraparound & unlikely(i < 0)) {
+        wrapped_i += PyTuple_GET_SIZE(o);
+    }
+    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
+        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
+        Py_INCREF(r);
+        return r;
+    }
+    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
+#else
+    return PySequence_GetItem(o, i);
+#endif
+}
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
+                                                     CYTHON_NCP_UNUSED int wraparound,
+                                                     CYTHON_NCP_UNUSED int boundscheck) {
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
+    if (is_list || PyList_CheckExact(o)) {
+        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
+        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
+            PyObject *r = PyList_GET_ITEM(o, n);
+            Py_INCREF(r);
+            return r;
+        }
+    }
+    else if (PyTuple_CheckExact(o)) {
+        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
+        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
+            PyObject *r = PyTuple_GET_ITEM(o, n);
+            Py_INCREF(r);
+            return r;
+        }
+    } else {
+        PyMappingMethods *mm = Py_TYPE(o)->tp_as_mapping;
+        PySequenceMethods *sm = Py_TYPE(o)->tp_as_sequence;
+        if (mm && mm->mp_subscript) {
+            PyObject *r, *key = PyInt_FromSsize_t(i);
+            if (unlikely(!key)) return NULL;
+            r = mm->mp_subscript(o, key);
+            Py_DECREF(key);
+            return r;
+        }
+        if (likely(sm && sm->sq_item)) {
+            if (wraparound && unlikely(i < 0) && likely(sm->sq_length)) {
+                Py_ssize_t l = sm->sq_length(o);
+                if (likely(l >= 0)) {
+                    i += l;
+                } else {
+                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
+                        return NULL;
+                    PyErr_Clear();
+                }
+            }
+            return sm->sq_item(o, i);
+        }
+    }
+#else
+    if (is_list || !PyMapping_Check(o)) {
+        return PySequence_GetItem(o, i);
+    }
+#endif
+    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
+}
+
+/* AsyncIter */
+  static PyObject *__Pyx_Coroutine_GetAsyncIter_Generic(PyObject *obj) {
+    __Pyx_TypeName obj_type_name;
+#if PY_VERSION_HEX < 0x030500B1
+    {
+        PyObject *iter = __Pyx_PyObject_CallMethod0(obj, __pyx_n_s_aiter);
+        if (likely(iter))
+            return iter;
+        if (!PyErr_ExceptionMatches(PyExc_AttributeError))
+            return NULL;
+    }
+#else
+    (void)&__Pyx_PyObject_CallMethod0;
+#endif
+    obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
+    PyErr_Format(PyExc_TypeError,
+                 "'async for' requires an object with __aiter__ method, got " __Pyx_FMT_TYPENAME, obj_type_name);
+    __Pyx_DECREF_TypeName(obj_type_name);
+    return NULL;
+}
+static CYTHON_INLINE PyObject *__Pyx_Coroutine_GetAsyncIter(PyObject *obj) {
+#ifdef __Pyx_AsyncGen_USED
+    if (__Pyx_AsyncGen_CheckExact(obj)) {
+        return __Pyx_NewRef(obj);
+    }
+#endif
+#if CYTHON_USE_ASYNC_SLOTS
+    {
+        __Pyx_PyAsyncMethodsStruct* am = __Pyx_PyType_AsAsync(obj);
+        if (likely(am && am->am_aiter)) {
+            return (*am->am_aiter)(obj);
+        }
+    }
+#endif
+    return __Pyx_Coroutine_GetAsyncIter_Generic(obj);
+}
+static PyObject *__Pyx__Coroutine_AsyncIterNext(PyObject *obj) {
+#if PY_VERSION_HEX < 0x030500B1
+    {
+        PyObject *value = __Pyx_PyObject_CallMethod0(obj, __pyx_n_s_anext);
+        if (likely(value))
+            return value;
+    }
+    if (PyErr_ExceptionMatches(PyExc_AttributeError))
+#endif
+    {
+        __Pyx_TypeName obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
+        PyErr_Format(PyExc_TypeError,
+            "'async for' requires an object with __anext__ method, got " __Pyx_FMT_TYPENAME, obj_type_name);
+        __Pyx_DECREF_TypeName(obj_type_name);
+    }
+    return NULL;
 }
+static CYTHON_INLINE PyObject *__Pyx_Coroutine_AsyncIterNext(PyObject *obj) {
+#ifdef __Pyx_AsyncGen_USED
+    if (__Pyx_AsyncGen_CheckExact(obj)) {
+        return __Pyx_async_gen_anext(obj);
+    }
 #endif
+#if CYTHON_USE_ASYNC_SLOTS
+    {
+        __Pyx_PyAsyncMethodsStruct* am = __Pyx_PyType_AsAsync(obj);
+        if (likely(am && am->am_anext)) {
+            return (*am->am_anext)(obj);
+        }
+    }
+#endif
+    return __Pyx__Coroutine_AsyncIterNext(obj);
+}
 
-/* ValidateExternBase */
-static int __Pyx_validate_extern_base(PyTypeObject *base) {
-    Py_ssize_t itemsize;
-#if CYTHON_COMPILING_IN_LIMITED_API
-    PyObject *py_itemsize;
+/* StopAsyncIteration */
+  #if PY_VERSION_HEX < 0x030500B1
+#if CYTHON_USE_TYPE_SPECS
+#error Using async coroutines with type specs requires Python 3.5 or later.
+#else
+static PyTypeObject __Pyx__PyExc_StopAsyncIteration_type = {
+    PyVarObject_HEAD_INIT(0, 0)
+    "StopAsyncIteration",
+    sizeof(PyBaseExceptionObject),
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE | Py_TPFLAGS_HAVE_GC,
+    PyDoc_STR("Signal the end from iterator.__anext__()."),
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+#if PY_VERSION_HEX >= 0x030400a1
+    0,
 #endif
-#if !CYTHON_COMPILING_IN_LIMITED_API
-    itemsize = ((PyTypeObject *)base)->tp_itemsize;
+#if CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM+0 >= 0x06000000
+    0,
+#endif
+};
+#endif
+#endif
+static int __pyx_StopAsyncIteration_init(PyObject *module) {
+    CYTHON_UNUSED_VAR(module);
+#if PY_VERSION_HEX >= 0x030500B1
+    __Pyx_PyExc_StopAsyncIteration = PyExc_StopAsyncIteration;
 #else
-    py_itemsize = PyObject_GetAttrString((PyObject*)base, "__itemsize__");
-    if (!py_itemsize)
+    PyObject *builtins = PyEval_GetBuiltins();
+    if (likely(builtins)) {
+        PyObject *exc = PyMapping_GetItemString(builtins, (char*) "StopAsyncIteration");
+        if (exc) {
+            __Pyx_PyExc_StopAsyncIteration = exc;
+            return 0;
+        }
+    }
+    PyErr_Clear();
+    __Pyx__PyExc_StopAsyncIteration_type.tp_traverse = ((PyTypeObject*)PyExc_BaseException)->tp_traverse;
+    __Pyx__PyExc_StopAsyncIteration_type.tp_clear = ((PyTypeObject*)PyExc_BaseException)->tp_clear;
+    __Pyx__PyExc_StopAsyncIteration_type.tp_dictoffset = ((PyTypeObject*)PyExc_BaseException)->tp_dictoffset;
+    __Pyx__PyExc_StopAsyncIteration_type.tp_base = (PyTypeObject*)PyExc_Exception;
+    __Pyx_PyExc_StopAsyncIteration = (PyObject*) __Pyx_FetchCommonType(&__Pyx__PyExc_StopAsyncIteration_type);
+    if (unlikely(!__Pyx_PyExc_StopAsyncIteration))
         return -1;
-    itemsize = PyLong_AsSsize_t(py_itemsize);
-    Py_DECREF(py_itemsize);
-    py_itemsize = 0;
-    if (itemsize == (Py_ssize_t)-1 && PyErr_Occurred())
+    if (likely(builtins) && unlikely(PyMapping_SetItemString(builtins, (char*) "StopAsyncIteration", __Pyx_PyExc_StopAsyncIteration) < 0))
         return -1;
 #endif
-    if (itemsize) {
-        __Pyx_TypeName b_name = __Pyx_PyType_GetName(base);
-        PyErr_Format(PyExc_TypeError,
-                "inheritance from PyVarObject types like '" __Pyx_FMT_TYPENAME "' not currently supported", b_name);
-        __Pyx_DECREF_TypeName(b_name);
-        return -1;
+    return 0;
+}
+
+/* ExtTypeTest */
+  static CYTHON_INLINE int __Pyx_TypeTest(PyObject *obj, PyTypeObject *type) {
+    __Pyx_TypeName obj_type_name;
+    __Pyx_TypeName type_name;
+    if (unlikely(!type)) {
+        PyErr_SetString(PyExc_SystemError, "Missing type object");
+        return 0;
     }
+    if (likely(__Pyx_TypeCheck(obj, type)))
+        return 1;
+    obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
+    type_name = __Pyx_PyType_GetName(type);
+    PyErr_Format(PyExc_TypeError,
+                 "Cannot convert " __Pyx_FMT_TYPENAME " to " __Pyx_FMT_TYPENAME,
+                 obj_type_name, type_name);
+    __Pyx_DECREF_TypeName(obj_type_name);
+    __Pyx_DECREF_TypeName(type_name);
     return 0;
 }
 
+/* Import */
+  static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
+    PyObject *module = 0;
+    PyObject *empty_dict = 0;
+    PyObject *empty_list = 0;
+    #if PY_MAJOR_VERSION < 3
+    PyObject *py_import;
+    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
+    if (unlikely(!py_import))
+        goto bad;
+    if (!from_list) {
+        empty_list = PyList_New(0);
+        if (unlikely(!empty_list))
+            goto bad;
+        from_list = empty_list;
+    }
+    #endif
+    empty_dict = PyDict_New();
+    if (unlikely(!empty_dict))
+        goto bad;
+    {
+        #if PY_MAJOR_VERSION >= 3
+        if (level == -1) {
+            if (strchr(__Pyx_MODULE_NAME, '.') != NULL) {
+                module = PyImport_ImportModuleLevelObject(
+                    name, __pyx_d, empty_dict, from_list, 1);
+                if (unlikely(!module)) {
+                    if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
+                        goto bad;
+                    PyErr_Clear();
+                }
+            }
+            level = 0;
+        }
+        #endif
+        if (!module) {
+            #if PY_MAJOR_VERSION < 3
+            PyObject *py_level = PyInt_FromLong(level);
+            if (unlikely(!py_level))
+                goto bad;
+            module = PyObject_CallFunctionObjArgs(py_import,
+                name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
+            Py_DECREF(py_level);
+            #else
+            module = PyImport_ImportModuleLevelObject(
+                name, __pyx_d, empty_dict, from_list, level);
+            #endif
+        }
+    }
+bad:
+    Py_XDECREF(empty_dict);
+    Py_XDECREF(empty_list);
+    #if PY_MAJOR_VERSION < 3
+    Py_XDECREF(py_import);
+    #endif
+    return module;
+}
+
+/* ImportFrom */
+  static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
+    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
+    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
+        const char* module_name_str = 0;
+        PyObject* module_name = 0;
+        PyObject* module_dot = 0;
+        PyObject* full_name = 0;
+        PyErr_Clear();
+        module_name_str = PyModule_GetName(module);
+        if (unlikely(!module_name_str)) { goto modbad; }
+        module_name = PyUnicode_FromString(module_name_str);
+        if (unlikely(!module_name)) { goto modbad; }
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__5);
+        if (unlikely(!module_dot)) { goto modbad; }
+        full_name = PyUnicode_Concat(module_dot, name);
+        if (unlikely(!full_name)) { goto modbad; }
+        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+        {
+            PyObject *modules = PyImport_GetModuleDict();
+            if (unlikely(!modules))
+                goto modbad;
+            value = PyObject_GetItem(modules, full_name);
+        }
+        #else
+        value = PyImport_GetModule(full_name);
+        #endif
+      modbad:
+        Py_XDECREF(full_name);
+        Py_XDECREF(module_dot);
+        Py_XDECREF(module_name);
+    }
+    if (unlikely(!value)) {
+        PyErr_Format(PyExc_ImportError,
+        #if PY_MAJOR_VERSION < 3
+            "cannot import name %.230s", PyString_AS_STRING(name));
+        #else
+            "cannot import name %S", name);
+        #endif
+    }
+    return value;
+}
+
 /* ValidateBasesTuple */
-#if CYTHON_COMPILING_IN_CPYTHON || CYTHON_COMPILING_IN_LIMITED_API || CYTHON_USE_TYPE_SPECS
+  #if CYTHON_COMPILING_IN_CPYTHON || CYTHON_COMPILING_IN_LIMITED_API || CYTHON_USE_TYPE_SPECS
 static int __Pyx_validate_bases_tuple(const char *type_name, Py_ssize_t dictoffset, PyObject *bases) {
     Py_ssize_t i, n;
 #if CYTHON_ASSUME_SAFE_MACROS
     n = PyTuple_GET_SIZE(bases);
 #else
     n = PyTuple_Size(bases);
     if (n < 0) return -1;
@@ -17923,15 +19301,15 @@
 #endif
     }
     return 0;
 }
 #endif
 
 /* PyType_Ready */
-static int __Pyx_PyType_Ready(PyTypeObject *t) {
+  static int __Pyx_PyType_Ready(PyTypeObject *t) {
 #if CYTHON_USE_TYPE_SPECS || !(CYTHON_COMPILING_IN_CPYTHON || CYTHON_COMPILING_IN_LIMITED_API) || defined(PYSTON_MAJOR_VERSION)
     (void)__Pyx_PyObject_CallMethod0;
 #if CYTHON_USE_TYPE_SPECS
     (void)__Pyx_validate_bases_tuple;
 #endif
     return PyType_Ready(t);
 #else
@@ -18004,20 +19382,30 @@
     #endif
     }
 #endif
     return r;
 #endif
 }
 
+/* PyObject_GenericGetAttr */
+  #if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
+static PyObject* __Pyx_PyObject_GenericGetAttr(PyObject* obj, PyObject* attr_name) {
+    if (unlikely(Py_TYPE(obj)->tp_dictoffset)) {
+        return PyObject_GenericGetAttr(obj, attr_name);
+    }
+    return __Pyx_PyObject_GenericGetAttrNoDict(obj, attr_name);
+}
+#endif
+
 /* SetupReduce */
-#if !CYTHON_COMPILING_IN_LIMITED_API
+  #if !CYTHON_COMPILING_IN_LIMITED_API
 static int __Pyx_setup_reduce_is_named(PyObject* meth, PyObject* name) {
   int ret;
   PyObject *name_attr;
-  name_attr = __Pyx_PyObject_GetAttrStrNoError(meth, __pyx_n_s_name);
+  name_attr = __Pyx_PyObject_GetAttrStrNoError(meth, __pyx_n_s_name_2);
   if (likely(name_attr)) {
       ret = PyObject_RichCompareBool(name_attr, name, Py_EQ);
   } else {
       ret = -1;
   }
   if (unlikely(ret < 0)) {
       PyErr_Clear();
@@ -18116,15 +19504,15 @@
     Py_XDECREF(setstate);
     Py_XDECREF(setstate_cython);
     return ret;
 }
 #endif
 
 /* SetVTable */
-static int __Pyx_SetVtable(PyTypeObject *type, void *vtable) {
+  static int __Pyx_SetVtable(PyTypeObject *type, void *vtable) {
     PyObject *ob = PyCapsule_New(vtable, 0, 0);
     if (unlikely(!ob))
         goto bad;
 #if CYTHON_COMPILING_IN_LIMITED_API
     if (unlikely(PyObject_SetAttr((PyObject *) type, __pyx_n_s_pyx_vtable, ob) < 0))
 #else
     if (unlikely(PyDict_SetItem(type->tp_dict, __pyx_n_s_pyx_vtable, ob) < 0))
@@ -18134,15 +19522,15 @@
     return 0;
 bad:
     Py_XDECREF(ob);
     return -1;
 }
 
 /* GetVTable */
-static void* __Pyx_GetVtable(PyTypeObject *type) {
+  static void* __Pyx_GetVtable(PyTypeObject *type) {
     void* ptr;
 #if CYTHON_COMPILING_IN_LIMITED_API
     PyObject *ob = PyObject_GetAttr((PyObject *)type, __pyx_n_s_pyx_vtable);
 #else
     PyObject *ob = PyObject_GetItem(type->tp_dict, __pyx_n_s_pyx_vtable);
 #endif
     if (!ob)
@@ -18154,15 +19542,15 @@
     return ptr;
 bad:
     Py_XDECREF(ob);
     return NULL;
 }
 
 /* MergeVTables */
-#if !CYTHON_COMPILING_IN_LIMITED_API
+  #if !CYTHON_COMPILING_IN_LIMITED_API
 static int __Pyx_MergeVtables(PyTypeObject *type) {
     int i;
     void** base_vtables;
     __Pyx_TypeName tp_base_name;
     __Pyx_TypeName base_name;
     void* unknown = (void*)-1;
     PyObject* bases = type->tp_bases;
@@ -18207,15 +19595,15 @@
     __Pyx_DECREF_TypeName(base_name);
     free(base_vtables);
     return -1;
 }
 #endif
 
 /* TypeImport */
-#ifndef __PYX_HAVE_RT_ImportType_3_0_10
+  #ifndef __PYX_HAVE_RT_ImportType_3_0_10
 #define __PYX_HAVE_RT_ImportType_3_0_10
 static PyTypeObject *__Pyx_ImportType_3_0_10(PyObject *module, const char *module_name, const char *class_name,
     size_t size, size_t alignment, enum __Pyx_ImportType_CheckSize_3_0_10 check_size)
 {
     PyObject *result = 0;
     char warning[200];
     Py_ssize_t basicsize;
@@ -18286,122 +19674,169 @@
     return (PyTypeObject *)result;
 bad:
     Py_XDECREF(result);
     return NULL;
 }
 #endif
 
-/* FetchSharedCythonModule */
-static PyObject *__Pyx_FetchSharedCythonABIModule(void) {
-    return __Pyx_PyImport_AddModuleRef((char*) __PYX_ABI_MODULE_NAME);
-}
-
-/* FetchCommonType */
-static int __Pyx_VerifyCachedType(PyObject *cached_type,
-                               const char *name,
-                               Py_ssize_t basicsize,
-                               Py_ssize_t expected_basicsize) {
-    if (!PyType_Check(cached_type)) {
-        PyErr_Format(PyExc_TypeError,
-            "Shared Cython type %.200s is not a type object", name);
-        return -1;
-    }
-    if (basicsize != expected_basicsize) {
-        PyErr_Format(PyExc_TypeError,
-            "Shared Cython type %.200s has the wrong size, try recompiling",
-            name);
-        return -1;
+/* ImportDottedModule */
+  #if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx__ImportDottedModule_Error(PyObject *name, PyObject *parts_tuple, Py_ssize_t count) {
+    PyObject *partial_name = NULL, *slice = NULL, *sep = NULL;
+    if (unlikely(PyErr_Occurred())) {
+        PyErr_Clear();
     }
-    return 0;
-}
-#if !CYTHON_USE_TYPE_SPECS
-static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type) {
-    PyObject* abi_module;
-    const char* object_name;
-    PyTypeObject *cached_type = NULL;
-    abi_module = __Pyx_FetchSharedCythonABIModule();
-    if (!abi_module) return NULL;
-    object_name = strrchr(type->tp_name, '.');
-    object_name = object_name ? object_name+1 : type->tp_name;
-    cached_type = (PyTypeObject*) PyObject_GetAttrString(abi_module, object_name);
-    if (cached_type) {
-        if (__Pyx_VerifyCachedType(
-              (PyObject *)cached_type,
-              object_name,
-              cached_type->tp_basicsize,
-              type->tp_basicsize) < 0) {
+    if (likely(PyTuple_GET_SIZE(parts_tuple) == count)) {
+        partial_name = name;
+    } else {
+        slice = PySequence_GetSlice(parts_tuple, 0, count);
+        if (unlikely(!slice))
             goto bad;
-        }
-        goto done;
+        sep = PyUnicode_FromStringAndSize(".", 1);
+        if (unlikely(!sep))
+            goto bad;
+        partial_name = PyUnicode_Join(sep, slice);
     }
-    if (!PyErr_ExceptionMatches(PyExc_AttributeError)) goto bad;
-    PyErr_Clear();
-    if (PyType_Ready(type) < 0) goto bad;
-    if (PyObject_SetAttrString(abi_module, object_name, (PyObject *)type) < 0)
-        goto bad;
-    Py_INCREF(type);
-    cached_type = type;
-done:
-    Py_DECREF(abi_module);
-    return cached_type;
+    PyErr_Format(
+#if PY_MAJOR_VERSION < 3
+        PyExc_ImportError,
+        "No module named '%s'", PyString_AS_STRING(partial_name));
+#else
+#if PY_VERSION_HEX >= 0x030600B1
+        PyExc_ModuleNotFoundError,
+#else
+        PyExc_ImportError,
+#endif
+        "No module named '%U'", partial_name);
+#endif
 bad:
-    Py_XDECREF(cached_type);
-    cached_type = NULL;
-    goto done;
+    Py_XDECREF(sep);
+    Py_XDECREF(slice);
+    Py_XDECREF(partial_name);
+    return NULL;
 }
+#endif
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx__ImportDottedModule_Lookup(PyObject *name) {
+    PyObject *imported_module;
+#if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+    PyObject *modules = PyImport_GetModuleDict();
+    if (unlikely(!modules))
+        return NULL;
+    imported_module = __Pyx_PyDict_GetItemStr(modules, name);
+    Py_XINCREF(imported_module);
 #else
-static PyTypeObject *__Pyx_FetchCommonTypeFromSpec(PyObject *module, PyType_Spec *spec, PyObject *bases) {
-    PyObject *abi_module, *cached_type = NULL;
-    const char* object_name = strrchr(spec->name, '.');
-    object_name = object_name ? object_name+1 : spec->name;
-    abi_module = __Pyx_FetchSharedCythonABIModule();
-    if (!abi_module) return NULL;
-    cached_type = PyObject_GetAttrString(abi_module, object_name);
-    if (cached_type) {
-        Py_ssize_t basicsize;
-#if CYTHON_COMPILING_IN_LIMITED_API
-        PyObject *py_basicsize;
-        py_basicsize = PyObject_GetAttrString(cached_type, "__basicsize__");
-        if (unlikely(!py_basicsize)) goto bad;
-        basicsize = PyLong_AsSsize_t(py_basicsize);
-        Py_DECREF(py_basicsize);
-        py_basicsize = 0;
-        if (unlikely(basicsize == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
+    imported_module = PyImport_GetModule(name);
+#endif
+    return imported_module;
+}
+#endif
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple) {
+    Py_ssize_t i, nparts;
+    nparts = PyTuple_GET_SIZE(parts_tuple);
+    for (i=1; i < nparts && module; i++) {
+        PyObject *part, *submodule;
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        part = PyTuple_GET_ITEM(parts_tuple, i);
 #else
-        basicsize = likely(PyType_Check(cached_type)) ? ((PyTypeObject*) cached_type)->tp_basicsize : -1;
+        part = PySequence_ITEM(parts_tuple, i);
 #endif
-        if (__Pyx_VerifyCachedType(
-              cached_type,
-              object_name,
-              basicsize,
-              spec->basicsize) < 0) {
-            goto bad;
-        }
-        goto done;
+        submodule = __Pyx_PyObject_GetAttrStrNoError(module, part);
+#if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
+        Py_DECREF(part);
+#endif
+        Py_DECREF(module);
+        module = submodule;
+    }
+    if (unlikely(!module)) {
+        return __Pyx__ImportDottedModule_Error(name, parts_tuple, i);
+    }
+    return module;
+}
+#endif
+static PyObject *__Pyx__ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
+#if PY_MAJOR_VERSION < 3
+    PyObject *module, *from_list, *star = __pyx_n_s__7;
+    CYTHON_UNUSED_VAR(parts_tuple);
+    from_list = PyList_New(1);
+    if (unlikely(!from_list))
+        return NULL;
+    Py_INCREF(star);
+    PyList_SET_ITEM(from_list, 0, star);
+    module = __Pyx_Import(name, from_list, 0);
+    Py_DECREF(from_list);
+    return module;
+#else
+    PyObject *imported_module;
+    PyObject *module = __Pyx_Import(name, NULL, 0);
+    if (!parts_tuple || unlikely(!module))
+        return module;
+    imported_module = __Pyx__ImportDottedModule_Lookup(name);
+    if (likely(imported_module)) {
+        Py_DECREF(module);
+        return imported_module;
     }
-    if (!PyErr_ExceptionMatches(PyExc_AttributeError)) goto bad;
     PyErr_Clear();
-    CYTHON_UNUSED_VAR(module);
-    cached_type = __Pyx_PyType_FromModuleAndSpec(abi_module, spec, bases);
-    if (unlikely(!cached_type)) goto bad;
-    if (unlikely(__Pyx_fix_up_extension_type_from_spec(spec, (PyTypeObject *) cached_type) < 0)) goto bad;
-    if (PyObject_SetAttrString(abi_module, object_name, cached_type) < 0) goto bad;
-done:
-    Py_DECREF(abi_module);
-    assert(cached_type == NULL || PyType_Check(cached_type));
-    return (PyTypeObject *) cached_type;
-bad:
-    Py_XDECREF(cached_type);
-    cached_type = NULL;
-    goto done;
+    return __Pyx_ImportDottedModule_WalkParts(module, name, parts_tuple);
+#endif
+}
+static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030400B1
+    PyObject *module = __Pyx__ImportDottedModule_Lookup(name);
+    if (likely(module)) {
+        PyObject *spec = __Pyx_PyObject_GetAttrStrNoError(module, __pyx_n_s_spec);
+        if (likely(spec)) {
+            PyObject *unsafe = __Pyx_PyObject_GetAttrStrNoError(spec, __pyx_n_s_initializing);
+            if (likely(!unsafe || !__Pyx_PyObject_IsTrue(unsafe))) {
+                Py_DECREF(spec);
+                spec = NULL;
+            }
+            Py_XDECREF(unsafe);
+        }
+        if (likely(!spec)) {
+            PyErr_Clear();
+            return module;
+        }
+        Py_DECREF(spec);
+        Py_DECREF(module);
+    } else if (PyErr_Occurred()) {
+        PyErr_Clear();
+    }
+#endif
+    return __Pyx__ImportDottedModule(name, parts_tuple);
 }
+
+/* PatchInspect */
+  static PyObject* __Pyx_patch_inspect(PyObject* module) {
+#if defined(__Pyx_Generator_USED) && (!defined(CYTHON_PATCH_INSPECT) || CYTHON_PATCH_INSPECT)
+    static int inspect_patched = 0;
+    if (unlikely((!inspect_patched) && module)) {
+        module = __Pyx_Coroutine_patch_module(
+            module, ""
+"old_types = getattr(_module.isgenerator, '_cython_generator_types', None)\n"
+"if old_types is None or not isinstance(old_types, set):\n"
+"    old_types = set()\n"
+"    def cy_wrap(orig_func, type=type, cython_generator_types=old_types):\n"
+"        def cy_isgenerator(obj): return type(obj) in cython_generator_types or orig_func(obj)\n"
+"        cy_isgenerator._cython_generator_types = cython_generator_types\n"
+"        return cy_isgenerator\n"
+"    _module.isgenerator = cy_wrap(_module.isgenerator)\n"
+"old_types.add(_cython_generator_type)\n"
+        );
+        inspect_patched = 1;
+    }
+#else
+    if ((0)) return __Pyx_Coroutine_patch_module(module, NULL);
 #endif
+    return module;
+}
 
 /* PyVectorcallFastCallDict */
-#if CYTHON_METH_FASTCALL
+  #if CYTHON_METH_FASTCALL
 static PyObject *__Pyx_PyVectorcall_FastCallDict_kw(PyObject *func, __pyx_vectorcallfunc vc, PyObject *const *args, size_t nargs, PyObject *kw)
 {
     PyObject *res = NULL;
     PyObject *kwnames;
     PyObject **newargs;
     PyObject **kwvalues;
     Py_ssize_t i, pos;
@@ -18449,15 +19884,15 @@
         return vc(func, args, nargs, NULL);
     }
     return __Pyx_PyVectorcall_FastCallDict_kw(func, vc, args, nargs, kw);
 }
 #endif
 
 /* CythonFunctionShared */
-#if CYTHON_COMPILING_IN_LIMITED_API
+  #if CYTHON_COMPILING_IN_LIMITED_API
 static CYTHON_INLINE int __Pyx__IsSameCyOrCFunction(PyObject *func, void *cfunc) {
     if (__Pyx_CyFunction_Check(func)) {
         return PyCFunction_GetFunction(((__pyx_CyFunctionObject*)func)->func) == (PyCFunction) cfunc;
     } else if (PyCFunction_Check(func)) {
         return PyCFunction_GetFunction(func) == (PyCFunction) cfunc;
     }
     return 0;
@@ -19451,28 +20886,377 @@
 static CYTHON_INLINE void __Pyx_CyFunction_SetAnnotationsDict(PyObject *func, PyObject *dict) {
     __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
     m->func_annotations = dict;
     Py_INCREF(dict);
 }
 
 /* CythonFunction */
-static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml, int flags, PyObject* qualname,
+  static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml, int flags, PyObject* qualname,
                                       PyObject *closure, PyObject *module, PyObject* globals, PyObject* code) {
     PyObject *op = __Pyx_CyFunction_Init(
         PyObject_GC_New(__pyx_CyFunctionObject, __pyx_CyFunctionType),
         ml, flags, qualname, closure, module, globals, code
     );
     if (likely(op)) {
         PyObject_GC_Track(op);
     }
     return op;
 }
 
+/* Py3UpdateBases */
+  static PyObject*
+__Pyx_PEP560_update_bases(PyObject *bases)
+{
+    Py_ssize_t i, j, size_bases;
+    PyObject *base, *meth, *new_base, *result, *new_bases = NULL;
+    size_bases = PyTuple_GET_SIZE(bases);
+    for (i = 0; i < size_bases; i++) {
+        base  = PyTuple_GET_ITEM(bases, i);
+        if (PyType_Check(base)) {
+            if (new_bases) {
+                if (PyList_Append(new_bases, base) < 0) {
+                    goto error;
+                }
+            }
+            continue;
+        }
+        meth = __Pyx_PyObject_GetAttrStrNoError(base, __pyx_n_s_mro_entries);
+        if (!meth && PyErr_Occurred()) {
+            goto error;
+        }
+        if (!meth) {
+            if (new_bases) {
+                if (PyList_Append(new_bases, base) < 0) {
+                    goto error;
+                }
+            }
+            continue;
+        }
+        new_base = __Pyx_PyObject_CallOneArg(meth, bases);
+        Py_DECREF(meth);
+        if (!new_base) {
+            goto error;
+        }
+        if (!PyTuple_Check(new_base)) {
+            PyErr_SetString(PyExc_TypeError,
+                            "__mro_entries__ must return a tuple");
+            Py_DECREF(new_base);
+            goto error;
+        }
+        if (!new_bases) {
+            if (!(new_bases = PyList_New(i))) {
+                goto error;
+            }
+            for (j = 0; j < i; j++) {
+                base = PyTuple_GET_ITEM(bases, j);
+                PyList_SET_ITEM(new_bases, j, base);
+                Py_INCREF(base);
+            }
+        }
+        j = PyList_GET_SIZE(new_bases);
+        if (PyList_SetSlice(new_bases, j, j, new_base) < 0) {
+            goto error;
+        }
+        Py_DECREF(new_base);
+    }
+    if (!new_bases) {
+        Py_INCREF(bases);
+        return bases;
+    }
+    result = PyList_AsTuple(new_bases);
+    Py_DECREF(new_bases);
+    return result;
+error:
+    Py_XDECREF(new_bases);
+    return NULL;
+}
+
+/* CalculateMetaclass */
+  static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases) {
+    Py_ssize_t i, nbases;
+#if CYTHON_ASSUME_SAFE_MACROS
+    nbases = PyTuple_GET_SIZE(bases);
+#else
+    nbases = PyTuple_Size(bases);
+    if (nbases < 0) return NULL;
+#endif
+    for (i=0; i < nbases; i++) {
+        PyTypeObject *tmptype;
+#if CYTHON_ASSUME_SAFE_MACROS
+        PyObject *tmp = PyTuple_GET_ITEM(bases, i);
+#else
+        PyObject *tmp = PyTuple_GetItem(bases, i);
+        if (!tmp) return NULL;
+#endif
+        tmptype = Py_TYPE(tmp);
+#if PY_MAJOR_VERSION < 3
+        if (tmptype == &PyClass_Type)
+            continue;
+#endif
+        if (!metaclass) {
+            metaclass = tmptype;
+            continue;
+        }
+        if (PyType_IsSubtype(metaclass, tmptype))
+            continue;
+        if (PyType_IsSubtype(tmptype, metaclass)) {
+            metaclass = tmptype;
+            continue;
+        }
+        PyErr_SetString(PyExc_TypeError,
+                        "metaclass conflict: "
+                        "the metaclass of a derived class "
+                        "must be a (non-strict) subclass "
+                        "of the metaclasses of all its bases");
+        return NULL;
+    }
+    if (!metaclass) {
+#if PY_MAJOR_VERSION < 3
+        metaclass = &PyClass_Type;
+#else
+        metaclass = &PyType_Type;
+#endif
+    }
+    Py_INCREF((PyObject*) metaclass);
+    return (PyObject*) metaclass;
+}
+
+/* PyObjectLookupSpecial */
+  #if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error) {
+    PyObject *res;
+    PyTypeObject *tp = Py_TYPE(obj);
+#if PY_MAJOR_VERSION < 3
+    if (unlikely(PyInstance_Check(obj)))
+        return with_error ? __Pyx_PyObject_GetAttrStr(obj, attr_name) : __Pyx_PyObject_GetAttrStrNoError(obj, attr_name);
+#endif
+    res = _PyType_Lookup(tp, attr_name);
+    if (likely(res)) {
+        descrgetfunc f = Py_TYPE(res)->tp_descr_get;
+        if (!f) {
+            Py_INCREF(res);
+        } else {
+            res = f(res, obj, (PyObject *)tp);
+        }
+    } else if (with_error) {
+        PyErr_SetObject(PyExc_AttributeError, attr_name);
+    }
+    return res;
+}
+#endif
+
+/* Py3ClassCreate */
+  static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name,
+                                           PyObject *qualname, PyObject *mkw, PyObject *modname, PyObject *doc) {
+    PyObject *ns;
+    if (metaclass) {
+        PyObject *prep = __Pyx_PyObject_GetAttrStrNoError(metaclass, __pyx_n_s_prepare);
+        if (prep) {
+            PyObject *pargs[3] = {NULL, name, bases};
+            ns = __Pyx_PyObject_FastCallDict(prep, pargs+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET, mkw);
+            Py_DECREF(prep);
+        } else {
+            if (unlikely(PyErr_Occurred()))
+                return NULL;
+            ns = PyDict_New();
+        }
+    } else {
+        ns = PyDict_New();
+    }
+    if (unlikely(!ns))
+        return NULL;
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_module, modname) < 0)) goto bad;
+#if PY_VERSION_HEX >= 0x03030000
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_qualname, qualname) < 0)) goto bad;
+#else
+    CYTHON_MAYBE_UNUSED_VAR(qualname);
+#endif
+    if (unlikely(doc && PyObject_SetItem(ns, __pyx_n_s_doc, doc) < 0)) goto bad;
+    return ns;
+bad:
+    Py_DECREF(ns);
+    return NULL;
+}
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+static int __Pyx_SetNamesPEP487(PyObject *type_obj) {
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *names_to_set, *key, *value, *set_name, *tmp;
+    Py_ssize_t i = 0;
+#if CYTHON_USE_TYPE_SLOTS
+    names_to_set = PyDict_Copy(type->tp_dict);
+#else
+    {
+        PyObject *d = PyObject_GetAttr(type_obj, __pyx_n_s_dict);
+        names_to_set = NULL;
+        if (likely(d)) {
+            PyObject *names_to_set = PyDict_New();
+            int ret = likely(names_to_set) ? PyDict_Update(names_to_set, d) : -1;
+            Py_DECREF(d);
+            if (unlikely(ret < 0))
+                Py_CLEAR(names_to_set);
+        }
+    }
+#endif
+    if (unlikely(names_to_set == NULL))
+        goto bad;
+    while (PyDict_Next(names_to_set, &i, &key, &value)) {
+        set_name = __Pyx_PyObject_LookupSpecialNoError(value, __pyx_n_s_set_name);
+        if (unlikely(set_name != NULL)) {
+            tmp = __Pyx_PyObject_Call2Args(set_name, type_obj, key);
+            Py_DECREF(set_name);
+            if (unlikely(tmp == NULL)) {
+                __Pyx_TypeName value_type_name =
+                    __Pyx_PyType_GetName(Py_TYPE(value));
+                __Pyx_TypeName type_name = __Pyx_PyType_GetName(type);
+                PyErr_Format(PyExc_RuntimeError,
+#if PY_MAJOR_VERSION >= 3
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %R " "in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name, key, type_name);
+#else
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %.100s in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name,
+                    PyString_Check(key) ? PyString_AS_STRING(key) : "?",
+                    type_name);
+#endif
+                goto bad;
+            } else {
+                Py_DECREF(tmp);
+            }
+        }
+        else if (unlikely(PyErr_Occurred())) {
+            goto bad;
+        }
+    }
+    Py_DECREF(names_to_set);
+    return 0;
+bad:
+    Py_XDECREF(names_to_set);
+    return -1;
+}
+static PyObject *__Pyx_InitSubclassPEP487(PyObject *type_obj, PyObject *mkw) {
+#if CYTHON_USE_TYPE_SLOTS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *mro = type->tp_mro;
+    Py_ssize_t i, nbases;
+    if (unlikely(!mro)) goto done;
+    (void) &__Pyx_GetBuiltinName;
+    Py_INCREF(mro);
+    nbases = PyTuple_GET_SIZE(mro);
+    assert(PyTuple_GET_ITEM(mro, 0) == type_obj);
+    for (i = 1; i < nbases-1; i++) {
+        PyObject *base, *dict, *meth;
+        base = PyTuple_GET_ITEM(mro, i);
+        dict = ((PyTypeObject *)base)->tp_dict;
+        meth = __Pyx_PyDict_GetItemStrWithError(dict, __pyx_n_s_init_subclass);
+        if (unlikely(meth)) {
+            descrgetfunc f = Py_TYPE(meth)->tp_descr_get;
+            PyObject *res;
+            Py_INCREF(meth);
+            if (likely(f)) {
+                res = f(meth, NULL, type_obj);
+                Py_DECREF(meth);
+                if (unlikely(!res)) goto bad;
+                meth = res;
+            }
+            res = __Pyx_PyObject_FastCallDict(meth, NULL, 0, mkw);
+            Py_DECREF(meth);
+            if (unlikely(!res)) goto bad;
+            Py_DECREF(res);
+            goto done;
+        } else if (unlikely(PyErr_Occurred())) {
+            goto bad;
+        }
+    }
+done:
+    Py_XDECREF(mro);
+    return type_obj;
+bad:
+    Py_XDECREF(mro);
+    Py_DECREF(type_obj);
+    return NULL;
+#else
+    PyObject *super_type, *super, *func, *res;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    super_type = __Pyx_GetBuiltinName(__pyx_n_s_super);
+#else
+    super_type = (PyObject*) &PySuper_Type;
+    (void) &__Pyx_GetBuiltinName;
+#endif
+    super = likely(super_type) ? __Pyx_PyObject_Call2Args(super_type, type_obj, type_obj) : NULL;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    Py_XDECREF(super_type);
+#endif
+    if (unlikely(!super)) {
+        Py_CLEAR(type_obj);
+        goto done;
+    }
+    func = __Pyx_PyObject_GetAttrStrNoError(super, __pyx_n_s_init_subclass);
+    Py_DECREF(super);
+    if (likely(!func)) {
+        if (unlikely(PyErr_Occurred()))
+            Py_CLEAR(type_obj);
+        goto done;
+    }
+    res = __Pyx_PyObject_FastCallDict(func, NULL, 0, mkw);
+    Py_DECREF(func);
+    if (unlikely(!res))
+        Py_CLEAR(type_obj);
+    Py_XDECREF(res);
+done:
+    return type_obj;
+#endif
+}
+#endif
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases,
+                                      PyObject *dict, PyObject *mkw,
+                                      int calculate_metaclass, int allow_py2_metaclass) {
+    PyObject *result;
+    PyObject *owned_metaclass = NULL;
+    PyObject *margs[4] = {NULL, name, bases, dict};
+    if (allow_py2_metaclass) {
+        owned_metaclass = PyObject_GetItem(dict, __pyx_n_s_metaclass);
+        if (owned_metaclass) {
+            metaclass = owned_metaclass;
+        } else if (likely(PyErr_ExceptionMatches(PyExc_KeyError))) {
+            PyErr_Clear();
+        } else {
+            return NULL;
+        }
+    }
+    if (calculate_metaclass && (!metaclass || PyType_Check(metaclass))) {
+        metaclass = __Pyx_CalculateMetaclass((PyTypeObject*) metaclass, bases);
+        Py_XDECREF(owned_metaclass);
+        if (unlikely(!metaclass))
+            return NULL;
+        owned_metaclass = metaclass;
+    }
+    result = __Pyx_PyObject_FastCallDict(metaclass, margs+1, 3 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET,
+#if PY_VERSION_HEX < 0x030600A4
+        (metaclass == (PyObject*)&PyType_Type) ? NULL : mkw
+#else
+        mkw
+#endif
+    );
+    Py_XDECREF(owned_metaclass);
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+    if (likely(result) && likely(PyType_Check(result))) {
+        if (unlikely(__Pyx_SetNamesPEP487(result) < 0)) {
+            Py_CLEAR(result);
+        } else {
+            result = __Pyx_InitSubclassPEP487(result, mkw);
+        }
+    }
+#else
+    (void) &__Pyx_GetBuiltinName;
+#endif
+    return result;
+}
+
 /* CLineInTraceback */
-#ifndef CYTHON_CLINE_IN_TRACEBACK
+  #ifndef CYTHON_CLINE_IN_TRACEBACK
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line) {
     PyObject *use_cline;
     PyObject *ptype, *pvalue, *ptraceback;
 #if CYTHON_COMPILING_IN_CPYTHON
     PyObject **cython_runtime_dict;
 #endif
     CYTHON_MAYBE_UNUSED_VAR(tstate);
@@ -19507,15 +21291,15 @@
     }
     __Pyx_ErrRestoreInState(tstate, ptype, pvalue, ptraceback);
     return c_line;
 }
 #endif
 
 /* CodeObjectCache */
-#if !CYTHON_COMPILING_IN_LIMITED_API
+  #if !CYTHON_COMPILING_IN_LIMITED_API
 static int __pyx_bisect_code_objects(__Pyx_CodeObjectCacheEntry* entries, int count, int code_line) {
     int start = 0, mid = 0, end = count - 1;
     if (end >= 0 && code_line > entries[end].code_line) {
         return count;
     }
     while (start < end) {
         mid = start + (end - start) / 2;
@@ -19589,15 +21373,15 @@
     entries[pos].code_object = code_object;
     __pyx_code_cache.count++;
     Py_INCREF(code_object);
 }
 #endif
 
 /* AddTraceback */
-#include "compile.h"
+  #include "compile.h"
 #include "frameobject.h"
 #include "traceback.h"
 #if PY_VERSION_HEX >= 0x030b00a6 && !CYTHON_COMPILING_IN_LIMITED_API
   #ifndef Py_BUILD_CORE
     #define Py_BUILD_CORE 1
   #endif
   #include "internal/pycore_frame.h"
@@ -19781,15 +21565,15 @@
 bad:
     Py_XDECREF(py_code);
     Py_XDECREF(py_frame);
 }
 #endif
 
 /* CIntFromPyVerify */
-#define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
+  #define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
 #define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
 #define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
     {\
         func_type value = func_value;\
         if (sizeof(target_type) < sizeof(func_type)) {\
@@ -19803,15 +21587,15 @@
                     goto raise_overflow;\
             }\
         }\
         return (target_type) value;\
     }
 
 /* CIntFromPy */
-static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *x) {
+  static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *x) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #endif
     const long neg_one = (long) -1, const_zero = (long) 0;
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic pop
@@ -20075,16 +21859,96 @@
     return (long) -1;
 raise_neg_overflow:
     PyErr_SetString(PyExc_OverflowError,
         "can't convert negative value to long");
     return (long) -1;
 }
 
+/* CIntToPy */
+  static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
+#ifdef __Pyx_HAS_GCC_DIAGNOSTIC
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wconversion"
+#endif
+    const long neg_one = (long) -1, const_zero = (long) 0;
+#ifdef __Pyx_HAS_GCC_DIAGNOSTIC
+#pragma GCC diagnostic pop
+#endif
+    const int is_unsigned = neg_one > const_zero;
+    if (is_unsigned) {
+        if (sizeof(long) < sizeof(long)) {
+            return PyInt_FromLong((long) value);
+        } else if (sizeof(long) <= sizeof(unsigned long)) {
+            return PyLong_FromUnsignedLong((unsigned long) value);
+#ifdef HAVE_LONG_LONG
+        } else if (sizeof(long) <= sizeof(unsigned PY_LONG_LONG)) {
+            return PyLong_FromUnsignedLongLong((unsigned PY_LONG_LONG) value);
+#endif
+        }
+    } else {
+        if (sizeof(long) <= sizeof(long)) {
+            return PyInt_FromLong((long) value);
+#ifdef HAVE_LONG_LONG
+        } else if (sizeof(long) <= sizeof(PY_LONG_LONG)) {
+            return PyLong_FromLongLong((PY_LONG_LONG) value);
+#endif
+        }
+    }
+    {
+        int one = 1; int little = (int)*(unsigned char *)&one;
+        unsigned char *bytes = (unsigned char *)&value;
+#if !CYTHON_COMPILING_IN_LIMITED_API && PY_VERSION_HEX < 0x030d0000
+        return _PyLong_FromByteArray(bytes, sizeof(long),
+                                     little, !is_unsigned);
+#else
+        PyObject *from_bytes, *result = NULL;
+        PyObject *py_bytes = NULL, *arg_tuple = NULL, *kwds = NULL, *order_str = NULL;
+        from_bytes = PyObject_GetAttrString((PyObject*)&PyLong_Type, "from_bytes");
+        if (!from_bytes) return NULL;
+        py_bytes = PyBytes_FromStringAndSize((char*)bytes, sizeof(long));
+        if (!py_bytes) goto limited_bad;
+        order_str = PyUnicode_FromString(little ? "little" : "big");
+        if (!order_str) goto limited_bad;
+        arg_tuple = PyTuple_Pack(2, py_bytes, order_str);
+        if (!arg_tuple) goto limited_bad;
+        if (!is_unsigned) {
+            kwds = PyDict_New();
+            if (!kwds) goto limited_bad;
+            if (PyDict_SetItemString(kwds, "signed", __Pyx_NewRef(Py_True))) goto limited_bad;
+        }
+        result = PyObject_Call(from_bytes, arg_tuple, kwds);
+        limited_bad:
+        Py_XDECREF(kwds);
+        Py_XDECREF(arg_tuple);
+        Py_XDECREF(order_str);
+        Py_XDECREF(py_bytes);
+        Py_XDECREF(from_bytes);
+        return result;
+#endif
+    }
+}
+
+/* FormatTypeName */
+  #if CYTHON_COMPILING_IN_LIMITED_API
+static __Pyx_TypeName
+__Pyx_PyType_GetName(PyTypeObject* tp)
+{
+    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
+                                               __pyx_n_s_name_2);
+    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
+        PyErr_Clear();
+        Py_XDECREF(name);
+        name = __Pyx_NewRef(__pyx_n_s__28);
+    }
+    return name;
+}
+#endif
+
 /* CIntFromPy */
-static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *x) {
+  static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *x) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #endif
     const int neg_one = (int) -1, const_zero = (int) 0;
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic pop
@@ -20348,80 +22212,16 @@
     return (int) -1;
 raise_neg_overflow:
     PyErr_SetString(PyExc_OverflowError,
         "can't convert negative value to int");
     return (int) -1;
 }
 
-/* CIntToPy */
-static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
-#ifdef __Pyx_HAS_GCC_DIAGNOSTIC
-#pragma GCC diagnostic push
-#pragma GCC diagnostic ignored "-Wconversion"
-#endif
-    const long neg_one = (long) -1, const_zero = (long) 0;
-#ifdef __Pyx_HAS_GCC_DIAGNOSTIC
-#pragma GCC diagnostic pop
-#endif
-    const int is_unsigned = neg_one > const_zero;
-    if (is_unsigned) {
-        if (sizeof(long) < sizeof(long)) {
-            return PyInt_FromLong((long) value);
-        } else if (sizeof(long) <= sizeof(unsigned long)) {
-            return PyLong_FromUnsignedLong((unsigned long) value);
-#ifdef HAVE_LONG_LONG
-        } else if (sizeof(long) <= sizeof(unsigned PY_LONG_LONG)) {
-            return PyLong_FromUnsignedLongLong((unsigned PY_LONG_LONG) value);
-#endif
-        }
-    } else {
-        if (sizeof(long) <= sizeof(long)) {
-            return PyInt_FromLong((long) value);
-#ifdef HAVE_LONG_LONG
-        } else if (sizeof(long) <= sizeof(PY_LONG_LONG)) {
-            return PyLong_FromLongLong((PY_LONG_LONG) value);
-#endif
-        }
-    }
-    {
-        int one = 1; int little = (int)*(unsigned char *)&one;
-        unsigned char *bytes = (unsigned char *)&value;
-#if !CYTHON_COMPILING_IN_LIMITED_API && PY_VERSION_HEX < 0x030d0000
-        return _PyLong_FromByteArray(bytes, sizeof(long),
-                                     little, !is_unsigned);
-#else
-        PyObject *from_bytes, *result = NULL;
-        PyObject *py_bytes = NULL, *arg_tuple = NULL, *kwds = NULL, *order_str = NULL;
-        from_bytes = PyObject_GetAttrString((PyObject*)&PyLong_Type, "from_bytes");
-        if (!from_bytes) return NULL;
-        py_bytes = PyBytes_FromStringAndSize((char*)bytes, sizeof(long));
-        if (!py_bytes) goto limited_bad;
-        order_str = PyUnicode_FromString(little ? "little" : "big");
-        if (!order_str) goto limited_bad;
-        arg_tuple = PyTuple_Pack(2, py_bytes, order_str);
-        if (!arg_tuple) goto limited_bad;
-        if (!is_unsigned) {
-            kwds = PyDict_New();
-            if (!kwds) goto limited_bad;
-            if (PyDict_SetItemString(kwds, "signed", __Pyx_NewRef(Py_True))) goto limited_bad;
-        }
-        result = PyObject_Call(from_bytes, arg_tuple, kwds);
-        limited_bad:
-        Py_XDECREF(kwds);
-        Py_XDECREF(arg_tuple);
-        Py_XDECREF(order_str);
-        Py_XDECREF(py_bytes);
-        Py_XDECREF(from_bytes);
-        return result;
-#endif
-    }
-}
-
 /* FastTypeChecks */
-#if CYTHON_COMPILING_IN_CPYTHON
+  #if CYTHON_COMPILING_IN_CPYTHON
 static int __Pyx_InBases(PyTypeObject *a, PyTypeObject *b) {
     while (a) {
         a = __Pyx_PyType_GetSlot(a, tp_base, PyTypeObject*);
         if (a == b)
             return 1;
     }
     return b == &PyBaseObject_Type;
@@ -20528,1073 +22328,1088 @@
     if (likely(PyExceptionClass_Check(err))) {
         return __Pyx_inner_PyErr_GivenExceptionMatches2(err, exc_type1, exc_type2);
     }
     return (PyErr_GivenExceptionMatches(err, exc_type1) || PyErr_GivenExceptionMatches(err, exc_type2));
 }
 #endif
 
-/* PyObjectCall2Args */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
-    PyObject *args[3] = {NULL, arg1, arg2};
-    return __Pyx_PyObject_FastCall(function, args+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
-}
-
-/* PyObjectCallMethod1 */
-#if !(CYTHON_VECTORCALL && __PYX_LIMITED_VERSION_HEX >= 0x030C00A2)
-static PyObject* __Pyx__PyObject_CallMethod1(PyObject* method, PyObject* arg) {
-    PyObject *result = __Pyx_PyObject_CallOneArg(method, arg);
-    Py_DECREF(method);
-    return result;
-}
+/* Generator */
+  static PyMethodDef __pyx_Generator_methods[] = {
+    {"send", (PyCFunction) __Pyx_Coroutine_Send, METH_O,
+     (char*) PyDoc_STR("send(arg) -> send 'arg' into generator,\nreturn next yielded value or raise StopIteration.")},
+    {"throw", (PyCFunction) __Pyx_Coroutine_Throw, METH_VARARGS,
+     (char*) PyDoc_STR("throw(typ[,val[,tb]]) -> raise exception in generator,\nreturn next yielded value or raise StopIteration.")},
+    {"close", (PyCFunction) __Pyx_Coroutine_Close_Method, METH_NOARGS,
+     (char*) PyDoc_STR("close() -> raise GeneratorExit inside generator.")},
+    {0, 0, 0, 0}
+};
+static PyMemberDef __pyx_Generator_memberlist[] = {
+    {(char *) "gi_running", T_BOOL, offsetof(__pyx_CoroutineObject, is_running), READONLY, NULL},
+    {(char*) "gi_yieldfrom", T_OBJECT, offsetof(__pyx_CoroutineObject, yieldfrom), READONLY,
+     (char*) PyDoc_STR("object being iterated by 'yield from', or None")},
+    {(char*) "gi_code", T_OBJECT, offsetof(__pyx_CoroutineObject, gi_code), READONLY, NULL},
+    {(char *) "__module__", T_OBJECT, offsetof(__pyx_CoroutineObject, gi_modulename), 0, 0},
+#if CYTHON_USE_TYPE_SPECS
+    {(char *) "__weaklistoffset__", T_PYSSIZET, offsetof(__pyx_CoroutineObject, gi_weakreflist), READONLY, 0},
 #endif
-static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg) {
-#if CYTHON_VECTORCALL && __PYX_LIMITED_VERSION_HEX >= 0x030C00A2
-    PyObject *args[2] = {obj, arg};
-    (void) __Pyx_PyObject_GetMethod;
-    (void) __Pyx_PyObject_CallOneArg;
-    (void) __Pyx_PyObject_Call2Args;
-    return PyObject_VectorcallMethod(method_name, args, 2 | PY_VECTORCALL_ARGUMENTS_OFFSET, NULL);
+    {0, 0, 0, 0, 0}
+};
+static PyGetSetDef __pyx_Generator_getsets[] = {
+    {(char *) "__name__", (getter)__Pyx_Coroutine_get_name, (setter)__Pyx_Coroutine_set_name,
+     (char*) PyDoc_STR("name of the generator"), 0},
+    {(char *) "__qualname__", (getter)__Pyx_Coroutine_get_qualname, (setter)__Pyx_Coroutine_set_qualname,
+     (char*) PyDoc_STR("qualified name of the generator"), 0},
+    {(char *) "gi_frame", (getter)__Pyx_Coroutine_get_frame, NULL,
+     (char*) PyDoc_STR("Frame of the generator"), 0},
+    {0, 0, 0, 0, 0}
+};
+#if CYTHON_USE_TYPE_SPECS
+static PyType_Slot __pyx_GeneratorType_slots[] = {
+    {Py_tp_dealloc, (void *)__Pyx_Coroutine_dealloc},
+    {Py_tp_traverse, (void *)__Pyx_Coroutine_traverse},
+    {Py_tp_iter, (void *)PyObject_SelfIter},
+    {Py_tp_iternext, (void *)__Pyx_Generator_Next},
+    {Py_tp_methods, (void *)__pyx_Generator_methods},
+    {Py_tp_members, (void *)__pyx_Generator_memberlist},
+    {Py_tp_getset, (void *)__pyx_Generator_getsets},
+    {Py_tp_getattro, (void *) __Pyx_PyObject_GenericGetAttrNoDict},
+#if CYTHON_USE_TP_FINALIZE
+    {Py_tp_finalize, (void *)__Pyx_Coroutine_del},
+#endif
+    {0, 0},
+};
+static PyType_Spec __pyx_GeneratorType_spec = {
+    __PYX_TYPE_MODULE_PREFIX "generator",
+    sizeof(__pyx_CoroutineObject),
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_HAVE_FINALIZE,
+    __pyx_GeneratorType_slots
+};
 #else
-    PyObject *method = NULL, *result;
-    int is_method = __Pyx_PyObject_GetMethod(obj, method_name, &method);
-    if (likely(is_method)) {
-        result = __Pyx_PyObject_Call2Args(method, obj, arg);
-        Py_DECREF(method);
-        return result;
-    }
-    if (unlikely(!method)) return NULL;
-    return __Pyx__PyObject_CallMethod1(method, arg);
+static PyTypeObject __pyx_GeneratorType_type = {
+    PyVarObject_HEAD_INIT(0, 0)
+    __PYX_TYPE_MODULE_PREFIX "generator",
+    sizeof(__pyx_CoroutineObject),
+    0,
+    (destructor) __Pyx_Coroutine_dealloc,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_HAVE_FINALIZE,
+    0,
+    (traverseproc) __Pyx_Coroutine_traverse,
+    0,
+    0,
+    offsetof(__pyx_CoroutineObject, gi_weakreflist),
+    0,
+    (iternextfunc) __Pyx_Generator_Next,
+    __pyx_Generator_methods,
+    __pyx_Generator_memberlist,
+    __pyx_Generator_getsets,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+#if CYTHON_USE_TP_FINALIZE
+    0,
+#else
+    __Pyx_Coroutine_del,
 #endif
-}
-
-/* CoroutineBase */
-#include <frameobject.h>
-#if PY_VERSION_HEX >= 0x030b00a6
-  #ifndef Py_BUILD_CORE
-    #define Py_BUILD_CORE 1
-  #endif
-  #include "internal/pycore_frame.h"
+    0,
+#if CYTHON_USE_TP_FINALIZE
+    __Pyx_Coroutine_del,
+#elif PY_VERSION_HEX >= 0x030400a1
+    0,
 #endif
-#define __Pyx_Coroutine_Undelegate(gen) Py_CLEAR((gen)->yieldfrom)
-static int __Pyx_PyGen__FetchStopIterationValue(PyThreadState *__pyx_tstate, PyObject **pvalue) {
-    PyObject *et, *ev, *tb;
-    PyObject *value = NULL;
-    CYTHON_UNUSED_VAR(__pyx_tstate);
-    __Pyx_ErrFetch(&et, &ev, &tb);
-    if (!et) {
-        Py_XDECREF(tb);
-        Py_XDECREF(ev);
-        Py_INCREF(Py_None);
-        *pvalue = Py_None;
-        return 0;
-    }
-    if (likely(et == PyExc_StopIteration)) {
-        if (!ev) {
-            Py_INCREF(Py_None);
-            value = Py_None;
-        }
-#if PY_VERSION_HEX >= 0x030300A0
-        else if (likely(__Pyx_IS_TYPE(ev, (PyTypeObject*)PyExc_StopIteration))) {
-            value = ((PyStopIterationObject *)ev)->value;
-            Py_INCREF(value);
-            Py_DECREF(ev);
-        }
+#if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
+    0,
 #endif
-        else if (unlikely(PyTuple_Check(ev))) {
-            if (PyTuple_GET_SIZE(ev) >= 1) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-                value = PyTuple_GET_ITEM(ev, 0);
-                Py_INCREF(value);
+#if __PYX_NEED_TP_PRINT_SLOT
+    0,
+#endif
+#if PY_VERSION_HEX >= 0x030C0000
+    0,
+#endif
+#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
+    0,
+#endif
+};
+#endif
+static int __pyx_Generator_init(PyObject *module) {
+#if CYTHON_USE_TYPE_SPECS
+    __pyx_GeneratorType = __Pyx_FetchCommonTypeFromSpec(module, &__pyx_GeneratorType_spec, NULL);
 #else
-                value = PySequence_ITEM(ev, 0);
+    CYTHON_UNUSED_VAR(module);
+    __pyx_GeneratorType_type.tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+    __pyx_GeneratorType_type.tp_iter = PyObject_SelfIter;
+    __pyx_GeneratorType = __Pyx_FetchCommonType(&__pyx_GeneratorType_type);
 #endif
-            } else {
-                Py_INCREF(Py_None);
-                value = Py_None;
-            }
-            Py_DECREF(ev);
-        }
-        else if (!__Pyx_TypeCheck(ev, (PyTypeObject*)PyExc_StopIteration)) {
-            value = ev;
-        }
-        if (likely(value)) {
-            Py_XDECREF(tb);
-            Py_DECREF(et);
-            *pvalue = value;
-            return 0;
-        }
-    } else if (!__Pyx_PyErr_GivenExceptionMatches(et, PyExc_StopIteration)) {
-        __Pyx_ErrRestore(et, ev, tb);
+    if (unlikely(!__pyx_GeneratorType)) {
         return -1;
     }
-    PyErr_NormalizeException(&et, &ev, &tb);
-    if (unlikely(!PyObject_TypeCheck(ev, (PyTypeObject*)PyExc_StopIteration))) {
-        __Pyx_ErrRestore(et, ev, tb);
-        return -1;
+    return 0;
+}
+
+/* AsyncGeneratorInitFinalizer */
+  #if PY_VERSION_HEX < 0x030600B0
+static int __Pyx_async_gen_init_hooks(__pyx_PyAsyncGenObject *o) {
+#if 0
+    PyThreadState *tstate;
+    PyObject *finalizer;
+    PyObject *firstiter;
+#endif
+    if (likely(o->ag_hooks_inited)) {
+        return 0;
     }
-    Py_XDECREF(tb);
-    Py_DECREF(et);
-#if PY_VERSION_HEX >= 0x030300A0
-    value = ((PyStopIterationObject *)ev)->value;
-    Py_INCREF(value);
-    Py_DECREF(ev);
-#else
-    {
-        PyObject* args = __Pyx_PyObject_GetAttrStr(ev, __pyx_n_s_args);
-        Py_DECREF(ev);
-        if (likely(args)) {
-            value = PySequence_GetItem(args, 0);
-            Py_DECREF(args);
-        }
-        if (unlikely(!value)) {
-            __Pyx_ErrRestore(NULL, NULL, NULL);
-            Py_INCREF(Py_None);
-            value = Py_None;
+    o->ag_hooks_inited = 1;
+#if 0
+    tstate = __Pyx_PyThreadState_Current;
+    finalizer = tstate->async_gen_finalizer;
+    if (finalizer) {
+        Py_INCREF(finalizer);
+        o->ag_finalizer = finalizer;
+    }
+    firstiter = tstate->async_gen_firstiter;
+    if (firstiter) {
+        PyObject *res;
+        Py_INCREF(firstiter);
+        res = __Pyx_PyObject_CallOneArg(firstiter, (PyObject*)o);
+        Py_DECREF(firstiter);
+        if (res == NULL) {
+            return 1;
         }
+        Py_DECREF(res);
     }
 #endif
-    *pvalue = value;
     return 0;
 }
-static CYTHON_INLINE
-void __Pyx_Coroutine_ExceptionClear(__Pyx_ExcInfoStruct *exc_state) {
-#if PY_VERSION_HEX >= 0x030B00a4
-    Py_CLEAR(exc_state->exc_value);
-#else
-    PyObject *t, *v, *tb;
-    t = exc_state->exc_type;
-    v = exc_state->exc_value;
-    tb = exc_state->exc_traceback;
-    exc_state->exc_type = NULL;
-    exc_state->exc_value = NULL;
-    exc_state->exc_traceback = NULL;
-    Py_XDECREF(t);
-    Py_XDECREF(v);
-    Py_XDECREF(tb);
 #endif
+
+/* AsyncGenerator */
+  PyDoc_STRVAR(__Pyx_async_gen_send_doc,
+"send(arg) -> send 'arg' into generator,\n\
+return next yielded value or raise StopIteration.");
+PyDoc_STRVAR(__Pyx_async_gen_close_doc,
+"close() -> raise GeneratorExit inside generator.");
+PyDoc_STRVAR(__Pyx_async_gen_throw_doc,
+"throw(typ[,val[,tb]]) -> raise exception in generator,\n\
+return next yielded value or raise StopIteration.");
+PyDoc_STRVAR(__Pyx_async_gen_await_doc,
+"__await__() -> return a representation that can be passed into the 'await' expression.");
+static PyObject *__Pyx_async_gen_asend_new(__pyx_PyAsyncGenObject *, PyObject *);
+static PyObject *__Pyx_async_gen_athrow_new(__pyx_PyAsyncGenObject *, PyObject *);
+static const char *__Pyx_NON_INIT_CORO_MSG = "can't send non-None value to a just-started coroutine";
+static const char *__Pyx_ASYNC_GEN_IGNORED_EXIT_MSG = "async generator ignored GeneratorExit";
+static const char *__Pyx_ASYNC_GEN_CANNOT_REUSE_SEND_MSG = "cannot reuse already awaited __anext__()/asend()";
+static const char *__Pyx_ASYNC_GEN_CANNOT_REUSE_CLOSE_MSG = "cannot reuse already awaited aclose()/athrow()";
+typedef enum {
+    __PYX_AWAITABLE_STATE_INIT,
+    __PYX_AWAITABLE_STATE_ITER,
+    __PYX_AWAITABLE_STATE_CLOSED,
+} __pyx_AwaitableState;
+typedef struct {
+    PyObject_HEAD
+    __pyx_PyAsyncGenObject *ags_gen;
+    PyObject *ags_sendval;
+    __pyx_AwaitableState ags_state;
+} __pyx_PyAsyncGenASend;
+typedef struct {
+    PyObject_HEAD
+    __pyx_PyAsyncGenObject *agt_gen;
+    PyObject *agt_args;
+    __pyx_AwaitableState agt_state;
+} __pyx_PyAsyncGenAThrow;
+typedef struct {
+    PyObject_HEAD
+    PyObject *agw_val;
+} __pyx__PyAsyncGenWrappedValue;
+#ifndef _PyAsyncGen_MAXFREELIST
+#define _PyAsyncGen_MAXFREELIST 80
+#endif
+static __pyx__PyAsyncGenWrappedValue *__Pyx_ag_value_freelist[_PyAsyncGen_MAXFREELIST];
+static int __Pyx_ag_value_freelist_free = 0;
+static __pyx_PyAsyncGenASend *__Pyx_ag_asend_freelist[_PyAsyncGen_MAXFREELIST];
+static int __Pyx_ag_asend_freelist_free = 0;
+#define __pyx__PyAsyncGenWrappedValue_CheckExact(o)\
+                    __Pyx_IS_TYPE(o, __pyx__PyAsyncGenWrappedValueType)
+static int
+__Pyx_async_gen_traverse(__pyx_PyAsyncGenObject *gen, visitproc visit, void *arg)
+{
+    Py_VISIT(gen->ag_finalizer);
+    return __Pyx_Coroutine_traverse((__pyx_CoroutineObject*)gen, visit, arg);
 }
-#define __Pyx_Coroutine_AlreadyRunningError(gen)  (__Pyx__Coroutine_AlreadyRunningError(gen), (PyObject*)NULL)
-static void __Pyx__Coroutine_AlreadyRunningError(__pyx_CoroutineObject *gen) {
-    const char *msg;
-    CYTHON_MAYBE_UNUSED_VAR(gen);
-    if ((0)) {
-    #ifdef __Pyx_Coroutine_USED
-    } else if (__Pyx_Coroutine_Check((PyObject*)gen)) {
-        msg = "coroutine already executing";
-    #endif
-    #ifdef __Pyx_AsyncGen_USED
-    } else if (__Pyx_AsyncGen_CheckExact((PyObject*)gen)) {
-        msg = "async generator already executing";
-    #endif
-    } else {
-        msg = "generator already executing";
-    }
-    PyErr_SetString(PyExc_ValueError, msg);
-}
-#define __Pyx_Coroutine_NotStartedError(gen)  (__Pyx__Coroutine_NotStartedError(gen), (PyObject*)NULL)
-static void __Pyx__Coroutine_NotStartedError(PyObject *gen) {
-    const char *msg;
-    CYTHON_MAYBE_UNUSED_VAR(gen);
-    if ((0)) {
-    #ifdef __Pyx_Coroutine_USED
-    } else if (__Pyx_Coroutine_Check(gen)) {
-        msg = "can't send non-None value to a just-started coroutine";
-    #endif
-    #ifdef __Pyx_AsyncGen_USED
-    } else if (__Pyx_AsyncGen_CheckExact(gen)) {
-        msg = "can't send non-None value to a just-started async generator";
-    #endif
-    } else {
-        msg = "can't send non-None value to a just-started generator";
-    }
-    PyErr_SetString(PyExc_TypeError, msg);
-}
-#define __Pyx_Coroutine_AlreadyTerminatedError(gen, value, closing)  (__Pyx__Coroutine_AlreadyTerminatedError(gen, value, closing), (PyObject*)NULL)
-static void __Pyx__Coroutine_AlreadyTerminatedError(PyObject *gen, PyObject *value, int closing) {
-    CYTHON_MAYBE_UNUSED_VAR(gen);
-    CYTHON_MAYBE_UNUSED_VAR(closing);
-    #ifdef __Pyx_Coroutine_USED
-    if (!closing && __Pyx_Coroutine_Check(gen)) {
-        PyErr_SetString(PyExc_RuntimeError, "cannot reuse already awaited coroutine");
-    } else
-    #endif
-    if (value) {
-        #ifdef __Pyx_AsyncGen_USED
-        if (__Pyx_AsyncGen_CheckExact(gen))
-            PyErr_SetNone(__Pyx_PyExc_StopAsyncIteration);
-        else
-        #endif
-        PyErr_SetNone(PyExc_StopIteration);
-    }
+static PyObject *
+__Pyx_async_gen_repr(__pyx_CoroutineObject *o)
+{
+    return PyUnicode_FromFormat("<async_generator object %S at %p>",
+                                o->gi_qualname ? o->gi_qualname : Py_None, o);
 }
-static
-PyObject *__Pyx_Coroutine_SendEx(__pyx_CoroutineObject *self, PyObject *value, int closing) {
-    __Pyx_PyThreadState_declare
+#if PY_VERSION_HEX >= 0x030600B0
+static int
+__Pyx_async_gen_init_hooks(__pyx_PyAsyncGenObject *o)
+{
+#if !CYTHON_COMPILING_IN_PYPY
     PyThreadState *tstate;
-    __Pyx_ExcInfoStruct *exc_state;
-    PyObject *retval;
-    assert(!self->is_running);
-    if (unlikely(self->resume_label == 0)) {
-        if (unlikely(value && value != Py_None)) {
-            return __Pyx_Coroutine_NotStartedError((PyObject*)self);
-        }
-    }
-    if (unlikely(self->resume_label == -1)) {
-        return __Pyx_Coroutine_AlreadyTerminatedError((PyObject*)self, value, closing);
+#endif
+    PyObject *finalizer;
+    PyObject *firstiter;
+    if (o->ag_hooks_inited) {
+        return 0;
     }
-#if CYTHON_FAST_THREAD_STATE
-    __Pyx_PyThreadState_assign
-    tstate = __pyx_tstate;
+    o->ag_hooks_inited = 1;
+#if CYTHON_COMPILING_IN_PYPY
+    finalizer = _PyEval_GetAsyncGenFinalizer();
 #else
     tstate = __Pyx_PyThreadState_Current;
+    finalizer = tstate->async_gen_finalizer;
 #endif
-    exc_state = &self->gi_exc_state;
-    if (exc_state->exc_value) {
-        #if CYTHON_COMPILING_IN_PYPY
-        #else
-        PyObject *exc_tb;
-        #if PY_VERSION_HEX >= 0x030B00a4 && !CYTHON_COMPILING_IN_CPYTHON
-        exc_tb = PyException_GetTraceback(exc_state->exc_value);
-        #elif PY_VERSION_HEX >= 0x030B00a4
-        exc_tb = ((PyBaseExceptionObject*) exc_state->exc_value)->traceback;
-        #else
-        exc_tb = exc_state->exc_traceback;
-        #endif
-        if (exc_tb) {
-            PyTracebackObject *tb = (PyTracebackObject *) exc_tb;
-            PyFrameObject *f = tb->tb_frame;
-            assert(f->f_back == NULL);
-            #if PY_VERSION_HEX >= 0x030B00A1
-            f->f_back = PyThreadState_GetFrame(tstate);
-            #else
-            Py_XINCREF(tstate->frame);
-            f->f_back = tstate->frame;
-            #endif
-            #if PY_VERSION_HEX >= 0x030B00a4 && !CYTHON_COMPILING_IN_CPYTHON
-            Py_DECREF(exc_tb);
-            #endif
-        }
-        #endif
+    if (finalizer) {
+        Py_INCREF(finalizer);
+        o->ag_finalizer = finalizer;
     }
-#if CYTHON_USE_EXC_INFO_STACK
-    exc_state->previous_item = tstate->exc_info;
-    tstate->exc_info = exc_state;
+#if CYTHON_COMPILING_IN_PYPY
+    firstiter = _PyEval_GetAsyncGenFirstiter();
 #else
-    if (exc_state->exc_type) {
-        __Pyx_ExceptionSwap(&exc_state->exc_type, &exc_state->exc_value, &exc_state->exc_traceback);
-    } else {
-        __Pyx_Coroutine_ExceptionClear(exc_state);
-        __Pyx_ExceptionSave(&exc_state->exc_type, &exc_state->exc_value, &exc_state->exc_traceback);
-    }
+    firstiter = tstate->async_gen_firstiter;
 #endif
-    self->is_running = 1;
-    retval = self->body(self, tstate, value);
-    self->is_running = 0;
-#if CYTHON_USE_EXC_INFO_STACK
-    exc_state = &self->gi_exc_state;
-    tstate->exc_info = exc_state->previous_item;
-    exc_state->previous_item = NULL;
-    __Pyx_Coroutine_ResetFrameBackpointer(exc_state);
+    if (firstiter) {
+        PyObject *res;
+#if CYTHON_UNPACK_METHODS
+        PyObject *self;
 #endif
-    return retval;
-}
-static CYTHON_INLINE void __Pyx_Coroutine_ResetFrameBackpointer(__Pyx_ExcInfoStruct *exc_state) {
-#if CYTHON_COMPILING_IN_PYPY
-    CYTHON_UNUSED_VAR(exc_state);
-#else
-    PyObject *exc_tb;
-    #if PY_VERSION_HEX >= 0x030B00a4
-    if (!exc_state->exc_value) return;
-    exc_tb = PyException_GetTraceback(exc_state->exc_value);
-    #else
-    exc_tb = exc_state->exc_traceback;
-    #endif
-    if (likely(exc_tb)) {
-        PyTracebackObject *tb = (PyTracebackObject *) exc_tb;
-        PyFrameObject *f = tb->tb_frame;
-        Py_CLEAR(f->f_back);
-        #if PY_VERSION_HEX >= 0x030B00a4
-        Py_DECREF(exc_tb);
-        #endif
-    }
+        Py_INCREF(firstiter);
+#if CYTHON_UNPACK_METHODS
+        if (likely(PyMethod_Check(firstiter)) && likely((self = PyMethod_GET_SELF(firstiter)) != NULL)) {
+            PyObject *function = PyMethod_GET_FUNCTION(firstiter);
+            res = __Pyx_PyObject_Call2Args(function, self, (PyObject*)o);
+        } else
 #endif
-}
-static CYTHON_INLINE
-PyObject *__Pyx_Coroutine_MethodReturn(PyObject* gen, PyObject *retval) {
-    CYTHON_MAYBE_UNUSED_VAR(gen);
-    if (unlikely(!retval)) {
-        __Pyx_PyThreadState_declare
-        __Pyx_PyThreadState_assign
-        if (!__Pyx_PyErr_Occurred()) {
-            PyObject *exc = PyExc_StopIteration;
-            #ifdef __Pyx_AsyncGen_USED
-            if (__Pyx_AsyncGen_CheckExact(gen))
-                exc = __Pyx_PyExc_StopAsyncIteration;
-            #endif
-            __Pyx_PyErr_SetNone(exc);
+        res = __Pyx_PyObject_CallOneArg(firstiter, (PyObject*)o);
+        Py_DECREF(firstiter);
+        if (unlikely(res == NULL)) {
+            return 1;
         }
+        Py_DECREF(res);
     }
-    return retval;
+    return 0;
 }
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x03030000 && (defined(__linux__) || PY_VERSION_HEX >= 0x030600B3)
-static CYTHON_INLINE
-PyObject *__Pyx_PyGen_Send(PyGenObject *gen, PyObject *arg) {
-#if PY_VERSION_HEX <= 0x030A00A1
-    return _PyGen_Send(gen, arg);
-#else
-    PyObject *result;
-    if (PyIter_Send((PyObject*)gen, arg ? arg : Py_None, &result) == PYGEN_RETURN) {
-        if (PyAsyncGen_CheckExact(gen)) {
-            assert(result == Py_None);
-            PyErr_SetNone(PyExc_StopAsyncIteration);
-        }
-        else if (result == Py_None) {
-            PyErr_SetNone(PyExc_StopIteration);
-        }
-        else {
-#if PY_VERSION_HEX < 0x030d00A1
-            _PyGen_SetStopIterationValue(result);
-#else
-            if (!PyTuple_Check(result) && !PyExceptionInstance_Check(result)) {
-                PyErr_SetObject(PyExc_StopIteration, result);
-            } else {
-                PyObject *exc = __Pyx_PyObject_CallOneArg(PyExc_StopIteration, result);
-                if (likely(exc != NULL)) {
-                    PyErr_SetObject(PyExc_StopIteration, exc);
-                    Py_DECREF(exc);
-                }
-            }
 #endif
-        }
-        Py_DECREF(result);
-        result = NULL;
+static PyObject *
+__Pyx_async_gen_anext(PyObject *g)
+{
+    __pyx_PyAsyncGenObject *o = (__pyx_PyAsyncGenObject*) g;
+    if (unlikely(__Pyx_async_gen_init_hooks(o))) {
+        return NULL;
     }
-    return result;
-#endif
+    return __Pyx_async_gen_asend_new(o, NULL);
 }
-#endif
-static CYTHON_INLINE
-PyObject *__Pyx_Coroutine_FinishDelegation(__pyx_CoroutineObject *gen) {
-    PyObject *ret;
-    PyObject *val = NULL;
-    __Pyx_Coroutine_Undelegate(gen);
-    __Pyx_PyGen__FetchStopIterationValue(__Pyx_PyThreadState_Current, &val);
-    ret = __Pyx_Coroutine_SendEx(gen, val, 0);
-    Py_XDECREF(val);
-    return ret;
+static PyObject *
+__Pyx_async_gen_anext_method(PyObject *g, PyObject *arg) {
+    CYTHON_UNUSED_VAR(arg);
+    return __Pyx_async_gen_anext(g);
 }
-static PyObject *__Pyx_Coroutine_Send(PyObject *self, PyObject *value) {
-    PyObject *retval;
-    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject*) self;
-    PyObject *yf = gen->yieldfrom;
-    if (unlikely(gen->is_running))
-        return __Pyx_Coroutine_AlreadyRunningError(gen);
-    if (yf) {
-        PyObject *ret;
-        gen->is_running = 1;
-        #ifdef __Pyx_Generator_USED
-        if (__Pyx_Generator_CheckExact(yf)) {
-            ret = __Pyx_Coroutine_Send(yf, value);
-        } else
-        #endif
-        #ifdef __Pyx_Coroutine_USED
-        if (__Pyx_Coroutine_Check(yf)) {
-            ret = __Pyx_Coroutine_Send(yf, value);
-        } else
-        #endif
-        #ifdef __Pyx_AsyncGen_USED
-        if (__pyx_PyAsyncGenASend_CheckExact(yf)) {
-            ret = __Pyx_async_gen_asend_send(yf, value);
-        } else
-        #endif
-        #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x03030000 && (defined(__linux__) || PY_VERSION_HEX >= 0x030600B3)
-        if (PyGen_CheckExact(yf)) {
-            ret = __Pyx_PyGen_Send((PyGenObject*)yf, value == Py_None ? NULL : value);
-        } else
-        #endif
-        #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x03050000 && defined(PyCoro_CheckExact) && (defined(__linux__) || PY_VERSION_HEX >= 0x030600B3)
-        if (PyCoro_CheckExact(yf)) {
-            ret = __Pyx_PyGen_Send((PyGenObject*)yf, value == Py_None ? NULL : value);
-        } else
-        #endif
-        {
-            if (value == Py_None)
-                ret = __Pyx_PyObject_GetIterNextFunc(yf)(yf);
-            else
-                ret = __Pyx_PyObject_CallMethod1(yf, __pyx_n_s_send, value);
-        }
-        gen->is_running = 0;
-        if (likely(ret)) {
-            return ret;
-        }
-        retval = __Pyx_Coroutine_FinishDelegation(gen);
-    } else {
-        retval = __Pyx_Coroutine_SendEx(gen, value, 0);
+static PyObject *
+__Pyx_async_gen_asend(__pyx_PyAsyncGenObject *o, PyObject *arg)
+{
+    if (unlikely(__Pyx_async_gen_init_hooks(o))) {
+        return NULL;
     }
-    return __Pyx_Coroutine_MethodReturn(self, retval);
+    return __Pyx_async_gen_asend_new(o, arg);
 }
-static int __Pyx_Coroutine_CloseIter(__pyx_CoroutineObject *gen, PyObject *yf) {
-    PyObject *retval = NULL;
-    int err = 0;
-    #ifdef __Pyx_Generator_USED
-    if (__Pyx_Generator_CheckExact(yf)) {
-        retval = __Pyx_Coroutine_Close(yf);
-        if (!retval)
-            return -1;
-    } else
-    #endif
-    #ifdef __Pyx_Coroutine_USED
-    if (__Pyx_Coroutine_Check(yf)) {
-        retval = __Pyx_Coroutine_Close(yf);
-        if (!retval)
-            return -1;
-    } else
-    if (__Pyx_CoroutineAwait_CheckExact(yf)) {
-        retval = __Pyx_CoroutineAwait_Close((__pyx_CoroutineAwaitObject*)yf, NULL);
-        if (!retval)
-            return -1;
-    } else
-    #endif
-    #ifdef __Pyx_AsyncGen_USED
-    if (__pyx_PyAsyncGenASend_CheckExact(yf)) {
-        retval = __Pyx_async_gen_asend_close(yf, NULL);
-    } else
-    if (__pyx_PyAsyncGenAThrow_CheckExact(yf)) {
-        retval = __Pyx_async_gen_athrow_close(yf, NULL);
-    } else
-    #endif
-    {
-        PyObject *meth;
-        gen->is_running = 1;
-        meth = __Pyx_PyObject_GetAttrStrNoError(yf, __pyx_n_s_close);
-        if (unlikely(!meth)) {
-            if (unlikely(PyErr_Occurred())) {
-                PyErr_WriteUnraisable(yf);
-            }
-        } else {
-            retval = __Pyx_PyObject_CallNoArg(meth);
-            Py_DECREF(meth);
-            if (unlikely(!retval))
-                err = -1;
-        }
-        gen->is_running = 0;
+static PyObject *
+__Pyx_async_gen_aclose(__pyx_PyAsyncGenObject *o, PyObject *arg)
+{
+    CYTHON_UNUSED_VAR(arg);
+    if (unlikely(__Pyx_async_gen_init_hooks(o))) {
+        return NULL;
     }
-    Py_XDECREF(retval);
-    return err;
+    return __Pyx_async_gen_athrow_new(o, NULL);
 }
-static PyObject *__Pyx_Generator_Next(PyObject *self) {
-    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject*) self;
-    PyObject *yf = gen->yieldfrom;
-    if (unlikely(gen->is_running))
-        return __Pyx_Coroutine_AlreadyRunningError(gen);
-    if (yf) {
-        PyObject *ret;
-        gen->is_running = 1;
-        #ifdef __Pyx_Generator_USED
-        if (__Pyx_Generator_CheckExact(yf)) {
-            ret = __Pyx_Generator_Next(yf);
-        } else
-        #endif
-        #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x03030000 && (defined(__linux__) || PY_VERSION_HEX >= 0x030600B3)
-        if (PyGen_CheckExact(yf)) {
-            ret = __Pyx_PyGen_Send((PyGenObject*)yf, NULL);
-        } else
-        #endif
-        #ifdef __Pyx_Coroutine_USED
-        if (__Pyx_Coroutine_Check(yf)) {
-            ret = __Pyx_Coroutine_Send(yf, Py_None);
-        } else
-        #endif
-            ret = __Pyx_PyObject_GetIterNextFunc(yf)(yf);
-        gen->is_running = 0;
-        if (likely(ret)) {
-            return ret;
-        }
-        return __Pyx_Coroutine_FinishDelegation(gen);
+static PyObject *
+__Pyx_async_gen_athrow(__pyx_PyAsyncGenObject *o, PyObject *args)
+{
+    if (unlikely(__Pyx_async_gen_init_hooks(o))) {
+        return NULL;
     }
-    return __Pyx_Coroutine_SendEx(gen, Py_None, 0);
+    return __Pyx_async_gen_athrow_new(o, args);
 }
-static PyObject *__Pyx_Coroutine_Close_Method(PyObject *self, PyObject *arg) {
+static PyObject *
+__Pyx_async_gen_self_method(PyObject *g, PyObject *arg) {
     CYTHON_UNUSED_VAR(arg);
-    return __Pyx_Coroutine_Close(self);
+    return __Pyx_NewRef(g);
 }
-static PyObject *__Pyx_Coroutine_Close(PyObject *self) {
-    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
-    PyObject *retval, *raised_exception;
-    PyObject *yf = gen->yieldfrom;
-    int err = 0;
-    if (unlikely(gen->is_running))
-        return __Pyx_Coroutine_AlreadyRunningError(gen);
-    if (yf) {
-        Py_INCREF(yf);
-        err = __Pyx_Coroutine_CloseIter(gen, yf);
-        __Pyx_Coroutine_Undelegate(gen);
-        Py_DECREF(yf);
-    }
-    if (err == 0)
-        PyErr_SetNone(PyExc_GeneratorExit);
-    retval = __Pyx_Coroutine_SendEx(gen, NULL, 1);
-    if (unlikely(retval)) {
-        const char *msg;
-        Py_DECREF(retval);
-        if ((0)) {
-        #ifdef __Pyx_Coroutine_USED
-        } else if (__Pyx_Coroutine_Check(self)) {
-            msg = "coroutine ignored GeneratorExit";
-        #endif
-        #ifdef __Pyx_AsyncGen_USED
-        } else if (__Pyx_AsyncGen_CheckExact(self)) {
-#if PY_VERSION_HEX < 0x03060000
-            msg = "async generator ignored GeneratorExit - might require Python 3.6+ finalisation (PEP 525)";
+static PyGetSetDef __Pyx_async_gen_getsetlist[] = {
+    {(char*) "__name__", (getter)__Pyx_Coroutine_get_name, (setter)__Pyx_Coroutine_set_name,
+     (char*) PyDoc_STR("name of the async generator"), 0},
+    {(char*) "__qualname__", (getter)__Pyx_Coroutine_get_qualname, (setter)__Pyx_Coroutine_set_qualname,
+     (char*) PyDoc_STR("qualified name of the async generator"), 0},
+    {0, 0, 0, 0, 0}
+};
+static PyMemberDef __Pyx_async_gen_memberlist[] = {
+    {(char*) "ag_running", T_BOOL,   offsetof(__pyx_PyAsyncGenObject, ag_running_async), READONLY, NULL},
+    {(char*) "ag_await", T_OBJECT, offsetof(__pyx_CoroutineObject, yieldfrom), READONLY,
+     (char*) PyDoc_STR("object being awaited on, or None")},
+    {(char *) "__module__", T_OBJECT, offsetof(__pyx_CoroutineObject, gi_modulename), 0, 0},
+#if CYTHON_USE_TYPE_SPECS
+    {(char *) "__weaklistoffset__", T_PYSSIZET, offsetof(__pyx_CoroutineObject, gi_weakreflist), READONLY, 0},
+#endif
+    {0, 0, 0, 0, 0}
+};
+PyDoc_STRVAR(__Pyx_async_aclose_doc,
+"aclose() -> raise GeneratorExit inside generator.");
+PyDoc_STRVAR(__Pyx_async_asend_doc,
+"asend(v) -> send 'v' in generator.");
+PyDoc_STRVAR(__Pyx_async_athrow_doc,
+"athrow(typ[,val[,tb]]) -> raise exception in generator.");
+PyDoc_STRVAR(__Pyx_async_aiter_doc,
+"__aiter__(v) -> return an asynchronous iterator.");
+PyDoc_STRVAR(__Pyx_async_anext_doc,
+"__anext__(v) -> continue asynchronous iteration and return the next element.");
+static PyMethodDef __Pyx_async_gen_methods[] = {
+    {"asend", (PyCFunction)__Pyx_async_gen_asend, METH_O, __Pyx_async_asend_doc},
+    {"athrow",(PyCFunction)__Pyx_async_gen_athrow, METH_VARARGS, __Pyx_async_athrow_doc},
+    {"aclose", (PyCFunction)__Pyx_async_gen_aclose, METH_NOARGS, __Pyx_async_aclose_doc},
+    {"__aiter__", (PyCFunction)__Pyx_async_gen_self_method, METH_NOARGS, __Pyx_async_aiter_doc},
+    {"__anext__", (PyCFunction)__Pyx_async_gen_anext_method, METH_NOARGS, __Pyx_async_anext_doc},
+    {0, 0, 0, 0}
+};
+#if CYTHON_USE_TYPE_SPECS
+static PyType_Slot __pyx_AsyncGenType_slots[] = {
+    {Py_tp_dealloc, (void *)__Pyx_Coroutine_dealloc},
+    {Py_am_aiter, (void *)PyObject_SelfIter},
+    {Py_am_anext, (void *)__Pyx_async_gen_anext},
+    {Py_tp_repr, (void *)__Pyx_async_gen_repr},
+    {Py_tp_traverse, (void *)__Pyx_async_gen_traverse},
+    {Py_tp_methods, (void *)__Pyx_async_gen_methods},
+    {Py_tp_members, (void *)__Pyx_async_gen_memberlist},
+    {Py_tp_getset, (void *)__Pyx_async_gen_getsetlist},
+#if CYTHON_USE_TP_FINALIZE
+    {Py_tp_finalize, (void *)__Pyx_Coroutine_del},
+#endif
+    {0, 0},
+};
+static PyType_Spec __pyx_AsyncGenType_spec = {
+    __PYX_TYPE_MODULE_PREFIX "async_generator",
+    sizeof(__pyx_PyAsyncGenObject),
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_HAVE_FINALIZE,
+    __pyx_AsyncGenType_slots
+};
 #else
-            msg = "async generator ignored GeneratorExit";
+#if CYTHON_USE_ASYNC_SLOTS
+static __Pyx_PyAsyncMethodsStruct __Pyx_async_gen_as_async = {
+    0,
+    PyObject_SelfIter,
+    (unaryfunc)__Pyx_async_gen_anext,
+#if PY_VERSION_HEX >= 0x030A00A3
+    0,
 #endif
-        #endif
-        } else {
-            msg = "generator ignored GeneratorExit";
+};
+#endif
+static PyTypeObject __pyx_AsyncGenType_type = {
+    PyVarObject_HEAD_INIT(0, 0)
+    "async_generator",
+    sizeof(__pyx_PyAsyncGenObject),
+    0,
+    (destructor)__Pyx_Coroutine_dealloc,
+    0,
+    0,
+    0,
+#if CYTHON_USE_ASYNC_SLOTS
+    &__Pyx_async_gen_as_async,
+#else
+    0,
+#endif
+    (reprfunc)__Pyx_async_gen_repr,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC |
+        Py_TPFLAGS_HAVE_FINALIZE,
+    0,
+    (traverseproc)__Pyx_async_gen_traverse,
+    0,
+#if CYTHON_USE_ASYNC_SLOTS && CYTHON_COMPILING_IN_CPYTHON && PY_MAJOR_VERSION >= 3 && PY_VERSION_HEX < 0x030500B1
+    __Pyx_Coroutine_compare,
+#else
+    0,
+#endif
+    offsetof(__pyx_CoroutineObject, gi_weakreflist),
+    0,
+    0,
+    __Pyx_async_gen_methods,
+    __Pyx_async_gen_memberlist,
+    __Pyx_async_gen_getsetlist,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+#if CYTHON_USE_TP_FINALIZE
+    0,
+#else
+    __Pyx_Coroutine_del,
+#endif
+    0,
+#if CYTHON_USE_TP_FINALIZE
+    __Pyx_Coroutine_del,
+#elif PY_VERSION_HEX >= 0x030400a1
+    0,
+#endif
+#if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
+    0,
+#endif
+#if __PYX_NEED_TP_PRINT_SLOT
+    0,
+#endif
+#if PY_VERSION_HEX >= 0x030C0000
+    0,
+#endif
+#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
+    0,
+#endif
+};
+#endif
+static int
+__Pyx_PyAsyncGen_ClearFreeLists(void)
+{
+    int ret = __Pyx_ag_value_freelist_free + __Pyx_ag_asend_freelist_free;
+    while (__Pyx_ag_value_freelist_free) {
+        __pyx__PyAsyncGenWrappedValue *o;
+        o = __Pyx_ag_value_freelist[--__Pyx_ag_value_freelist_free];
+        assert(__pyx__PyAsyncGenWrappedValue_CheckExact(o));
+        __Pyx_PyHeapTypeObject_GC_Del(o);
+    }
+    while (__Pyx_ag_asend_freelist_free) {
+        __pyx_PyAsyncGenASend *o;
+        o = __Pyx_ag_asend_freelist[--__Pyx_ag_asend_freelist_free];
+        assert(__Pyx_IS_TYPE(o, __pyx__PyAsyncGenASendType));
+        __Pyx_PyHeapTypeObject_GC_Del(o);
+    }
+    return ret;
+}
+static void
+__Pyx_PyAsyncGen_Fini(void)
+{
+    __Pyx_PyAsyncGen_ClearFreeLists();
+}
+static PyObject *
+__Pyx_async_gen_unwrap_value(__pyx_PyAsyncGenObject *gen, PyObject *result)
+{
+    if (result == NULL) {
+        PyObject *exc_type = PyErr_Occurred();
+        if (!exc_type) {
+            PyErr_SetNone(__Pyx_PyExc_StopAsyncIteration);
+            gen->ag_closed = 1;
+        } else if (__Pyx_PyErr_GivenExceptionMatches2(exc_type, __Pyx_PyExc_StopAsyncIteration, PyExc_GeneratorExit)) {
+            gen->ag_closed = 1;
         }
-        PyErr_SetString(PyExc_RuntimeError, msg);
+        gen->ag_running_async = 0;
         return NULL;
     }
-    raised_exception = PyErr_Occurred();
-    if (likely(!raised_exception || __Pyx_PyErr_GivenExceptionMatches2(raised_exception, PyExc_GeneratorExit, PyExc_StopIteration))) {
-        if (raised_exception) PyErr_Clear();
-        Py_INCREF(Py_None);
-        return Py_None;
+    if (__pyx__PyAsyncGenWrappedValue_CheckExact(result)) {
+        __Pyx_ReturnWithStopIteration(((__pyx__PyAsyncGenWrappedValue*)result)->agw_val);
+        Py_DECREF(result);
+        gen->ag_running_async = 0;
+        return NULL;
     }
-    return NULL;
+    return result;
 }
-static PyObject *__Pyx__Coroutine_Throw(PyObject *self, PyObject *typ, PyObject *val, PyObject *tb,
-                                        PyObject *args, int close_on_genexit) {
-    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
-    PyObject *yf = gen->yieldfrom;
-    if (unlikely(gen->is_running))
-        return __Pyx_Coroutine_AlreadyRunningError(gen);
-    if (yf) {
-        PyObject *ret;
-        Py_INCREF(yf);
-        if (__Pyx_PyErr_GivenExceptionMatches(typ, PyExc_GeneratorExit) && close_on_genexit) {
-            int err = __Pyx_Coroutine_CloseIter(gen, yf);
-            Py_DECREF(yf);
-            __Pyx_Coroutine_Undelegate(gen);
-            if (err < 0)
-                return __Pyx_Coroutine_MethodReturn(self, __Pyx_Coroutine_SendEx(gen, NULL, 0));
-            goto throw_here;
-        }
-        gen->is_running = 1;
-        if (0
-        #ifdef __Pyx_Generator_USED
-            || __Pyx_Generator_CheckExact(yf)
-        #endif
-        #ifdef __Pyx_Coroutine_USED
-            || __Pyx_Coroutine_Check(yf)
-        #endif
-            ) {
-            ret = __Pyx__Coroutine_Throw(yf, typ, val, tb, args, close_on_genexit);
-        #ifdef __Pyx_Coroutine_USED
-        } else if (__Pyx_CoroutineAwait_CheckExact(yf)) {
-            ret = __Pyx__Coroutine_Throw(((__pyx_CoroutineAwaitObject*)yf)->coroutine, typ, val, tb, args, close_on_genexit);
-        #endif
-        } else {
-            PyObject *meth = __Pyx_PyObject_GetAttrStrNoError(yf, __pyx_n_s_throw);
-            if (unlikely(!meth)) {
-                Py_DECREF(yf);
-                if (unlikely(PyErr_Occurred())) {
-                    gen->is_running = 0;
-                    return NULL;
-                }
-                __Pyx_Coroutine_Undelegate(gen);
-                gen->is_running = 0;
-                goto throw_here;
-            }
-            if (likely(args)) {
-                ret = __Pyx_PyObject_Call(meth, args, NULL);
-            } else {
-                PyObject *cargs[4] = {NULL, typ, val, tb};
-                ret = __Pyx_PyObject_FastCall(meth, cargs+1, 3 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
-            }
-            Py_DECREF(meth);
+static void
+__Pyx_async_gen_asend_dealloc(__pyx_PyAsyncGenASend *o)
+{
+    PyObject_GC_UnTrack((PyObject *)o);
+    Py_CLEAR(o->ags_gen);
+    Py_CLEAR(o->ags_sendval);
+    if (likely(__Pyx_ag_asend_freelist_free < _PyAsyncGen_MAXFREELIST)) {
+        assert(__pyx_PyAsyncGenASend_CheckExact(o));
+        __Pyx_ag_asend_freelist[__Pyx_ag_asend_freelist_free++] = o;
+    } else {
+        __Pyx_PyHeapTypeObject_GC_Del(o);
+    }
+}
+static int
+__Pyx_async_gen_asend_traverse(__pyx_PyAsyncGenASend *o, visitproc visit, void *arg)
+{
+    Py_VISIT(o->ags_gen);
+    Py_VISIT(o->ags_sendval);
+    return 0;
+}
+static PyObject *
+__Pyx_async_gen_asend_send(PyObject *g, PyObject *arg)
+{
+    __pyx_PyAsyncGenASend *o = (__pyx_PyAsyncGenASend*) g;
+    PyObject *result;
+    if (unlikely(o->ags_state == __PYX_AWAITABLE_STATE_CLOSED)) {
+        PyErr_SetString(PyExc_RuntimeError, __Pyx_ASYNC_GEN_CANNOT_REUSE_SEND_MSG);
+        return NULL;
+    }
+    if (o->ags_state == __PYX_AWAITABLE_STATE_INIT) {
+        if (unlikely(o->ags_gen->ag_running_async)) {
+            PyErr_SetString(
+                PyExc_RuntimeError,
+                "anext(): asynchronous generator is already running");
+            return NULL;
         }
-        gen->is_running = 0;
-        Py_DECREF(yf);
-        if (!ret) {
-            ret = __Pyx_Coroutine_FinishDelegation(gen);
+        if (arg == NULL || arg == Py_None) {
+            arg = o->ags_sendval ? o->ags_sendval : Py_None;
         }
-        return __Pyx_Coroutine_MethodReturn(self, ret);
+        o->ags_state = __PYX_AWAITABLE_STATE_ITER;
     }
-throw_here:
-    __Pyx_Raise(typ, val, tb, NULL);
-    return __Pyx_Coroutine_MethodReturn(self, __Pyx_Coroutine_SendEx(gen, NULL, 0));
+    o->ags_gen->ag_running_async = 1;
+    result = __Pyx_Coroutine_Send((PyObject*)o->ags_gen, arg);
+    result = __Pyx_async_gen_unwrap_value(o->ags_gen, result);
+    if (result == NULL) {
+        o->ags_state = __PYX_AWAITABLE_STATE_CLOSED;
+    }
+    return result;
 }
-static PyObject *__Pyx_Coroutine_Throw(PyObject *self, PyObject *args) {
-    PyObject *typ;
-    PyObject *val = NULL;
-    PyObject *tb = NULL;
-    if (unlikely(!PyArg_UnpackTuple(args, (char *)"throw", 1, 3, &typ, &val, &tb)))
+static CYTHON_INLINE PyObject *
+__Pyx_async_gen_asend_iternext(PyObject *o)
+{
+    return __Pyx_async_gen_asend_send(o, Py_None);
+}
+static PyObject *
+__Pyx_async_gen_asend_throw(__pyx_PyAsyncGenASend *o, PyObject *args)
+{
+    PyObject *result;
+    if (unlikely(o->ags_state == __PYX_AWAITABLE_STATE_CLOSED)) {
+        PyErr_SetString(PyExc_RuntimeError, __Pyx_ASYNC_GEN_CANNOT_REUSE_SEND_MSG);
         return NULL;
-    return __Pyx__Coroutine_Throw(self, typ, val, tb, args, 1);
+    }
+    result = __Pyx_Coroutine_Throw((PyObject*)o->ags_gen, args);
+    result = __Pyx_async_gen_unwrap_value(o->ags_gen, result);
+    if (result == NULL) {
+        o->ags_state = __PYX_AWAITABLE_STATE_CLOSED;
+    }
+    return result;
 }
-static CYTHON_INLINE int __Pyx_Coroutine_traverse_excstate(__Pyx_ExcInfoStruct *exc_state, visitproc visit, void *arg) {
-#if PY_VERSION_HEX >= 0x030B00a4
-    Py_VISIT(exc_state->exc_value);
+static PyObject *
+__Pyx_async_gen_asend_close(PyObject *g, PyObject *args)
+{
+    __pyx_PyAsyncGenASend *o = (__pyx_PyAsyncGenASend*) g;
+    CYTHON_UNUSED_VAR(args);
+    o->ags_state = __PYX_AWAITABLE_STATE_CLOSED;
+    Py_RETURN_NONE;
+}
+static PyMethodDef __Pyx_async_gen_asend_methods[] = {
+    {"send", (PyCFunction)__Pyx_async_gen_asend_send, METH_O, __Pyx_async_gen_send_doc},
+    {"throw", (PyCFunction)__Pyx_async_gen_asend_throw, METH_VARARGS, __Pyx_async_gen_throw_doc},
+    {"close", (PyCFunction)__Pyx_async_gen_asend_close, METH_NOARGS, __Pyx_async_gen_close_doc},
+    {"__await__", (PyCFunction)__Pyx_async_gen_self_method, METH_NOARGS, __Pyx_async_gen_await_doc},
+    {0, 0, 0, 0}
+};
+#if CYTHON_USE_TYPE_SPECS
+static PyType_Slot __pyx__PyAsyncGenASendType_slots[] = {
+    {Py_tp_dealloc, (void *)__Pyx_async_gen_asend_dealloc},
+    {Py_am_await, (void *)PyObject_SelfIter},
+    {Py_tp_traverse, (void *)__Pyx_async_gen_asend_traverse},
+    {Py_tp_methods, (void *)__Pyx_async_gen_asend_methods},
+    {Py_tp_iter, (void *)PyObject_SelfIter},
+    {Py_tp_iternext, (void *)__Pyx_async_gen_asend_iternext},
+    {0, 0},
+};
+static PyType_Spec __pyx__PyAsyncGenASendType_spec = {
+    __PYX_TYPE_MODULE_PREFIX "async_generator_asend",
+    sizeof(__pyx_PyAsyncGenASend),
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
+    __pyx__PyAsyncGenASendType_slots
+};
 #else
-    Py_VISIT(exc_state->exc_type);
-    Py_VISIT(exc_state->exc_value);
-    Py_VISIT(exc_state->exc_traceback);
+#if CYTHON_USE_ASYNC_SLOTS
+static __Pyx_PyAsyncMethodsStruct __Pyx_async_gen_asend_as_async = {
+    PyObject_SelfIter,
+    0,
+    0,
+#if PY_VERSION_HEX >= 0x030A00A3
+    0,
 #endif
-    return 0;
-}
-static int __Pyx_Coroutine_traverse(__pyx_CoroutineObject *gen, visitproc visit, void *arg) {
-    Py_VISIT(gen->closure);
-    Py_VISIT(gen->classobj);
-    Py_VISIT(gen->yieldfrom);
-    return __Pyx_Coroutine_traverse_excstate(&gen->gi_exc_state, visit, arg);
-}
-static int __Pyx_Coroutine_clear(PyObject *self) {
-    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
-    Py_CLEAR(gen->closure);
-    Py_CLEAR(gen->classobj);
-    Py_CLEAR(gen->yieldfrom);
-    __Pyx_Coroutine_ExceptionClear(&gen->gi_exc_state);
-#ifdef __Pyx_AsyncGen_USED
-    if (__Pyx_AsyncGen_CheckExact(self)) {
-        Py_CLEAR(((__pyx_PyAsyncGenObject*)gen)->ag_finalizer);
-    }
+};
 #endif
-    Py_CLEAR(gen->gi_code);
-    Py_CLEAR(gen->gi_frame);
-    Py_CLEAR(gen->gi_name);
-    Py_CLEAR(gen->gi_qualname);
-    Py_CLEAR(gen->gi_modulename);
-    return 0;
-}
-static void __Pyx_Coroutine_dealloc(PyObject *self) {
-    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
-    PyObject_GC_UnTrack(gen);
-    if (gen->gi_weakreflist != NULL)
-        PyObject_ClearWeakRefs(self);
-    if (gen->resume_label >= 0) {
-        PyObject_GC_Track(self);
-#if PY_VERSION_HEX >= 0x030400a1 && CYTHON_USE_TP_FINALIZE
-        if (unlikely(PyObject_CallFinalizerFromDealloc(self)))
+static PyTypeObject __pyx__PyAsyncGenASendType_type = {
+    PyVarObject_HEAD_INIT(0, 0)
+    "async_generator_asend",
+    sizeof(__pyx_PyAsyncGenASend),
+    0,
+    (destructor)__Pyx_async_gen_asend_dealloc,
+    0,
+    0,
+    0,
+#if CYTHON_USE_ASYNC_SLOTS
+    &__Pyx_async_gen_asend_as_async,
 #else
-        Py_TYPE(gen)->tp_del(self);
-        if (unlikely(Py_REFCNT(self) > 0))
+    0,
 #endif
-        {
-            return;
-        }
-        PyObject_GC_UnTrack(self);
-    }
-#ifdef __Pyx_AsyncGen_USED
-    if (__Pyx_AsyncGen_CheckExact(self)) {
-        /* We have to handle this case for asynchronous generators
-           right here, because this code has to be between UNTRACK
-           and GC_Del. */
-        Py_CLEAR(((__pyx_PyAsyncGenObject*)self)->ag_finalizer);
-    }
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
+    0,
+    (traverseproc)__Pyx_async_gen_asend_traverse,
+    0,
+#if CYTHON_USE_ASYNC_SLOTS && CYTHON_COMPILING_IN_CPYTHON && PY_MAJOR_VERSION >= 3 && PY_VERSION_HEX < 0x030500B1
+    __Pyx_Coroutine_compare,
+#else
+    0,
 #endif
-    __Pyx_Coroutine_clear(self);
-    __Pyx_PyHeapTypeObject_GC_Del(gen);
-}
-static void __Pyx_Coroutine_del(PyObject *self) {
-    PyObject *error_type, *error_value, *error_traceback;
-    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
-    __Pyx_PyThreadState_declare
-    if (gen->resume_label < 0) {
-        return;
-    }
-#if !CYTHON_USE_TP_FINALIZE
-    assert(self->ob_refcnt == 0);
-    __Pyx_SET_REFCNT(self, 1);
+    0,
+    PyObject_SelfIter,
+    (iternextfunc)__Pyx_async_gen_asend_iternext,
+    __Pyx_async_gen_asend_methods,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+#if PY_VERSION_HEX >= 0x030400a1
+    0,
 #endif
-    __Pyx_PyThreadState_assign
-    __Pyx_ErrFetch(&error_type, &error_value, &error_traceback);
-#ifdef __Pyx_AsyncGen_USED
-    if (__Pyx_AsyncGen_CheckExact(self)) {
-        __pyx_PyAsyncGenObject *agen = (__pyx_PyAsyncGenObject*)self;
-        PyObject *finalizer = agen->ag_finalizer;
-        if (finalizer && !agen->ag_closed) {
-            PyObject *res = __Pyx_PyObject_CallOneArg(finalizer, self);
-            if (unlikely(!res)) {
-                PyErr_WriteUnraisable(self);
-            } else {
-                Py_DECREF(res);
-            }
-            __Pyx_ErrRestore(error_type, error_value, error_traceback);
-            return;
-        }
-    }
+#if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
+    0,
 #endif
-    if (unlikely(gen->resume_label == 0 && !error_value)) {
-#ifdef __Pyx_Coroutine_USED
-#ifdef __Pyx_Generator_USED
-    if (!__Pyx_Generator_CheckExact(self))
+#if __PYX_NEED_TP_PRINT_SLOT
+    0,
 #endif
-        {
-        PyObject_GC_UnTrack(self);
-#if PY_MAJOR_VERSION >= 3  || defined(PyErr_WarnFormat)
-        if (unlikely(PyErr_WarnFormat(PyExc_RuntimeWarning, 1, "coroutine '%.50S' was never awaited", gen->gi_qualname) < 0))
-            PyErr_WriteUnraisable(self);
-#else
-        {PyObject *msg;
-        char *cmsg;
-        #if CYTHON_COMPILING_IN_PYPY
-        msg = NULL;
-        cmsg = (char*) "coroutine was never awaited";
-        #else
-        char *cname;
-        PyObject *qualname;
-        qualname = gen->gi_qualname;
-        cname = PyString_AS_STRING(qualname);
-        msg = PyString_FromFormat("coroutine '%.50s' was never awaited", cname);
-        if (unlikely(!msg)) {
-            PyErr_Clear();
-            cmsg = (char*) "coroutine was never awaited";
-        } else {
-            cmsg = PyString_AS_STRING(msg);
-        }
-        #endif
-        if (unlikely(PyErr_WarnEx(PyExc_RuntimeWarning, cmsg, 1) < 0))
-            PyErr_WriteUnraisable(self);
-        Py_XDECREF(msg);}
+#if PY_VERSION_HEX >= 0x030C0000
+    0,
 #endif
-        PyObject_GC_Track(self);
-        }
+#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
+    0,
 #endif
+};
+#endif
+static PyObject *
+__Pyx_async_gen_asend_new(__pyx_PyAsyncGenObject *gen, PyObject *sendval)
+{
+    __pyx_PyAsyncGenASend *o;
+    if (likely(__Pyx_ag_asend_freelist_free)) {
+        __Pyx_ag_asend_freelist_free--;
+        o = __Pyx_ag_asend_freelist[__Pyx_ag_asend_freelist_free];
+        _Py_NewReference((PyObject *)o);
     } else {
-        PyObject *res = __Pyx_Coroutine_Close(self);
-        if (unlikely(!res)) {
-            if (PyErr_Occurred())
-                PyErr_WriteUnraisable(self);
-        } else {
-            Py_DECREF(res);
+        o = PyObject_GC_New(__pyx_PyAsyncGenASend, __pyx__PyAsyncGenASendType);
+        if (unlikely(o == NULL)) {
+            return NULL;
         }
     }
-    __Pyx_ErrRestore(error_type, error_value, error_traceback);
-#if !CYTHON_USE_TP_FINALIZE
-    assert(Py_REFCNT(self) > 0);
-    if (likely(--self->ob_refcnt == 0)) {
-        return;
-    }
-    {
-        Py_ssize_t refcnt = Py_REFCNT(self);
-        _Py_NewReference(self);
-        __Pyx_SET_REFCNT(self, refcnt);
-    }
-#if CYTHON_COMPILING_IN_CPYTHON
-    assert(PyType_IS_GC(Py_TYPE(self)) &&
-           _Py_AS_GC(self)->gc.gc_refs != _PyGC_REFS_UNTRACKED);
-    _Py_DEC_REFTOTAL;
-#endif
-#ifdef COUNT_ALLOCS
-    --Py_TYPE(self)->tp_frees;
-    --Py_TYPE(self)->tp_allocs;
-#endif
-#endif
+    Py_INCREF(gen);
+    o->ags_gen = gen;
+    Py_XINCREF(sendval);
+    o->ags_sendval = sendval;
+    o->ags_state = __PYX_AWAITABLE_STATE_INIT;
+    PyObject_GC_Track((PyObject*)o);
+    return (PyObject*)o;
 }
-static PyObject *
-__Pyx_Coroutine_get_name(__pyx_CoroutineObject *self, void *context)
+static void
+__Pyx_async_gen_wrapped_val_dealloc(__pyx__PyAsyncGenWrappedValue *o)
 {
-    PyObject *name = self->gi_name;
-    CYTHON_UNUSED_VAR(context);
-    if (unlikely(!name)) name = Py_None;
-    Py_INCREF(name);
-    return name;
+    PyObject_GC_UnTrack((PyObject *)o);
+    Py_CLEAR(o->agw_val);
+    if (likely(__Pyx_ag_value_freelist_free < _PyAsyncGen_MAXFREELIST)) {
+        assert(__pyx__PyAsyncGenWrappedValue_CheckExact(o));
+        __Pyx_ag_value_freelist[__Pyx_ag_value_freelist_free++] = o;
+    } else {
+        __Pyx_PyHeapTypeObject_GC_Del(o);
+    }
 }
 static int
-__Pyx_Coroutine_set_name(__pyx_CoroutineObject *self, PyObject *value, void *context)
+__Pyx_async_gen_wrapped_val_traverse(__pyx__PyAsyncGenWrappedValue *o,
+                                     visitproc visit, void *arg)
 {
-    CYTHON_UNUSED_VAR(context);
-#if PY_MAJOR_VERSION >= 3
-    if (unlikely(value == NULL || !PyUnicode_Check(value)))
+    Py_VISIT(o->agw_val);
+    return 0;
+}
+#if CYTHON_USE_TYPE_SPECS
+static PyType_Slot __pyx__PyAsyncGenWrappedValueType_slots[] = {
+    {Py_tp_dealloc, (void *)__Pyx_async_gen_wrapped_val_dealloc},
+    {Py_tp_traverse, (void *)__Pyx_async_gen_wrapped_val_traverse},
+    {0, 0},
+};
+static PyType_Spec __pyx__PyAsyncGenWrappedValueType_spec = {
+    __PYX_TYPE_MODULE_PREFIX "async_generator_wrapped_value",
+    sizeof(__pyx__PyAsyncGenWrappedValue),
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
+    __pyx__PyAsyncGenWrappedValueType_slots
+};
 #else
-    if (unlikely(value == NULL || !PyString_Check(value)))
+static PyTypeObject __pyx__PyAsyncGenWrappedValueType_type = {
+    PyVarObject_HEAD_INIT(0, 0)
+    "async_generator_wrapped_value",
+    sizeof(__pyx__PyAsyncGenWrappedValue),
+    0,
+    (destructor)__Pyx_async_gen_wrapped_val_dealloc,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
+    0,
+    (traverseproc)__Pyx_async_gen_wrapped_val_traverse,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+    0,
+#if PY_VERSION_HEX >= 0x030400a1
+    0,
 #endif
-    {
-        PyErr_SetString(PyExc_TypeError,
-                        "__name__ must be set to a string object");
-        return -1;
+#if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
+    0,
+#endif
+#if __PYX_NEED_TP_PRINT_SLOT
+    0,
+#endif
+#if PY_VERSION_HEX >= 0x030C0000
+    0,
+#endif
+#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
+    0,
+#endif
+};
+#endif
+static PyObject *
+__Pyx__PyAsyncGenValueWrapperNew(PyObject *val)
+{
+    __pyx__PyAsyncGenWrappedValue *o;
+    assert(val);
+    if (likely(__Pyx_ag_value_freelist_free)) {
+        __Pyx_ag_value_freelist_free--;
+        o = __Pyx_ag_value_freelist[__Pyx_ag_value_freelist_free];
+        assert(__pyx__PyAsyncGenWrappedValue_CheckExact(o));
+        _Py_NewReference((PyObject*)o);
+    } else {
+        o = PyObject_GC_New(__pyx__PyAsyncGenWrappedValue, __pyx__PyAsyncGenWrappedValueType);
+        if (unlikely(!o)) {
+            Py_DECREF(val);
+            return NULL;
+        }
     }
-    Py_INCREF(value);
-    __Pyx_Py_XDECREF_SET(self->gi_name, value);
-    return 0;
+    o->agw_val = val;
+    PyObject_GC_Track((PyObject*)o);
+    return (PyObject*)o;
 }
-static PyObject *
-__Pyx_Coroutine_get_qualname(__pyx_CoroutineObject *self, void *context)
+static void
+__Pyx_async_gen_athrow_dealloc(__pyx_PyAsyncGenAThrow *o)
 {
-    PyObject *name = self->gi_qualname;
-    CYTHON_UNUSED_VAR(context);
-    if (unlikely(!name)) name = Py_None;
-    Py_INCREF(name);
-    return name;
+    PyObject_GC_UnTrack((PyObject *)o);
+    Py_CLEAR(o->agt_gen);
+    Py_CLEAR(o->agt_args);
+    __Pyx_PyHeapTypeObject_GC_Del(o);
 }
 static int
-__Pyx_Coroutine_set_qualname(__pyx_CoroutineObject *self, PyObject *value, void *context)
+__Pyx_async_gen_athrow_traverse(__pyx_PyAsyncGenAThrow *o, visitproc visit, void *arg)
 {
-    CYTHON_UNUSED_VAR(context);
-#if PY_MAJOR_VERSION >= 3
-    if (unlikely(value == NULL || !PyUnicode_Check(value)))
-#else
-    if (unlikely(value == NULL || !PyString_Check(value)))
-#endif
-    {
-        PyErr_SetString(PyExc_TypeError,
-                        "__qualname__ must be set to a string object");
-        return -1;
-    }
-    Py_INCREF(value);
-    __Pyx_Py_XDECREF_SET(self->gi_qualname, value);
+    Py_VISIT(o->agt_gen);
+    Py_VISIT(o->agt_args);
     return 0;
 }
 static PyObject *
-__Pyx_Coroutine_get_frame(__pyx_CoroutineObject *self, void *context)
+__Pyx_async_gen_athrow_send(__pyx_PyAsyncGenAThrow *o, PyObject *arg)
 {
-    PyObject *frame = self->gi_frame;
-    CYTHON_UNUSED_VAR(context);
-    if (!frame) {
-        if (unlikely(!self->gi_code)) {
-            Py_RETURN_NONE;
-        }
-        frame = (PyObject *) PyFrame_New(
-            PyThreadState_Get(),            /*PyThreadState *tstate,*/
-            (PyCodeObject*) self->gi_code,  /*PyCodeObject *code,*/
-            __pyx_d,                 /*PyObject *globals,*/
-            0                               /*PyObject *locals*/
-        );
-        if (unlikely(!frame))
-            return NULL;
-        self->gi_frame = frame;
+    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject*)o->agt_gen;
+    PyObject *retval, *exc_type;
+    if (unlikely(o->agt_state == __PYX_AWAITABLE_STATE_CLOSED)) {
+        PyErr_SetString(PyExc_RuntimeError, __Pyx_ASYNC_GEN_CANNOT_REUSE_CLOSE_MSG);
+        return NULL;
     }
-    Py_INCREF(frame);
-    return frame;
-}
-static __pyx_CoroutineObject *__Pyx__Coroutine_New(
-            PyTypeObject* type, __pyx_coroutine_body_t body, PyObject *code, PyObject *closure,
-            PyObject *name, PyObject *qualname, PyObject *module_name) {
-    __pyx_CoroutineObject *gen = PyObject_GC_New(__pyx_CoroutineObject, type);
-    if (unlikely(!gen))
+    if (unlikely(gen->resume_label == -1)) {
+        o->agt_state = __PYX_AWAITABLE_STATE_CLOSED;
+        PyErr_SetNone(PyExc_StopIteration);
         return NULL;
-    return __Pyx__Coroutine_NewInit(gen, body, code, closure, name, qualname, module_name);
-}
-static __pyx_CoroutineObject *__Pyx__Coroutine_NewInit(
-            __pyx_CoroutineObject *gen, __pyx_coroutine_body_t body, PyObject *code, PyObject *closure,
-            PyObject *name, PyObject *qualname, PyObject *module_name) {
-    gen->body = body;
-    gen->closure = closure;
-    Py_XINCREF(closure);
-    gen->is_running = 0;
-    gen->resume_label = 0;
-    gen->classobj = NULL;
-    gen->yieldfrom = NULL;
-    #if PY_VERSION_HEX >= 0x030B00a4
-    gen->gi_exc_state.exc_value = NULL;
-    #else
-    gen->gi_exc_state.exc_type = NULL;
-    gen->gi_exc_state.exc_value = NULL;
-    gen->gi_exc_state.exc_traceback = NULL;
-    #endif
-#if CYTHON_USE_EXC_INFO_STACK
-    gen->gi_exc_state.previous_item = NULL;
-#endif
-    gen->gi_weakreflist = NULL;
-    Py_XINCREF(qualname);
-    gen->gi_qualname = qualname;
-    Py_XINCREF(name);
-    gen->gi_name = name;
-    Py_XINCREF(module_name);
-    gen->gi_modulename = module_name;
-    Py_XINCREF(code);
-    gen->gi_code = code;
-    gen->gi_frame = NULL;
-    PyObject_GC_Track(gen);
-    return gen;
-}
-
-/* PatchModuleWithCoroutine */
-static PyObject* __Pyx_Coroutine_patch_module(PyObject* module, const char* py_code) {
-#if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
-    int result;
-    PyObject *globals, *result_obj;
-    globals = PyDict_New();  if (unlikely(!globals)) goto ignore;
-    result = PyDict_SetItemString(globals, "_cython_coroutine_type",
-    #ifdef __Pyx_Coroutine_USED
-        (PyObject*)__pyx_CoroutineType);
-    #else
-        Py_None);
-    #endif
-    if (unlikely(result < 0)) goto ignore;
-    result = PyDict_SetItemString(globals, "_cython_generator_type",
-    #ifdef __Pyx_Generator_USED
-        (PyObject*)__pyx_GeneratorType);
-    #else
-        Py_None);
-    #endif
-    if (unlikely(result < 0)) goto ignore;
-    if (unlikely(PyDict_SetItemString(globals, "_module", module) < 0)) goto ignore;
-    if (unlikely(PyDict_SetItemString(globals, "__builtins__", __pyx_b) < 0)) goto ignore;
-    result_obj = PyRun_String(py_code, Py_file_input, globals, globals);
-    if (unlikely(!result_obj)) goto ignore;
-    Py_DECREF(result_obj);
-    Py_DECREF(globals);
-    return module;
-ignore:
-    Py_XDECREF(globals);
-    PyErr_WriteUnraisable(module);
-    if (unlikely(PyErr_WarnEx(PyExc_RuntimeWarning, "Cython module failed to patch module with custom type", 1) < 0)) {
-        Py_DECREF(module);
-        module = NULL;
     }
-#else
-    py_code++;
-#endif
-    return module;
-}
-
-/* PatchGeneratorABC */
-#ifndef CYTHON_REGISTER_ABCS
-#define CYTHON_REGISTER_ABCS 1
-#endif
-#if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
-static PyObject* __Pyx_patch_abc_module(PyObject *module);
-static PyObject* __Pyx_patch_abc_module(PyObject *module) {
-    module = __Pyx_Coroutine_patch_module(
-        module, ""
-"if _cython_generator_type is not None:\n"
-"    try: Generator = _module.Generator\n"
-"    except AttributeError: pass\n"
-"    else: Generator.register(_cython_generator_type)\n"
-"if _cython_coroutine_type is not None:\n"
-"    try: Coroutine = _module.Coroutine\n"
-"    except AttributeError: pass\n"
-"    else: Coroutine.register(_cython_coroutine_type)\n"
-    );
-    return module;
-}
-#endif
-static int __Pyx_patch_abc(void) {
-#if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
-    static int abc_patched = 0;
-    if (CYTHON_REGISTER_ABCS && !abc_patched) {
-        PyObject *module;
-        module = PyImport_ImportModule((PY_MAJOR_VERSION >= 3) ? "collections.abc" : "collections");
-        if (unlikely(!module)) {
-            PyErr_WriteUnraisable(NULL);
-            if (unlikely(PyErr_WarnEx(PyExc_RuntimeWarning,
-                    ((PY_MAJOR_VERSION >= 3) ?
-                        "Cython module failed to register with collections.abc module" :
-                        "Cython module failed to register with collections module"), 1) < 0)) {
-                return -1;
+    if (o->agt_state == __PYX_AWAITABLE_STATE_INIT) {
+        if (unlikely(o->agt_gen->ag_running_async)) {
+            o->agt_state = __PYX_AWAITABLE_STATE_CLOSED;
+            if (o->agt_args == NULL) {
+                PyErr_SetString(
+                    PyExc_RuntimeError,
+                    "aclose(): asynchronous generator is already running");
+            } else {
+                PyErr_SetString(
+                    PyExc_RuntimeError,
+                    "athrow(): asynchronous generator is already running");
+            }
+            return NULL;
+        }
+        if (unlikely(o->agt_gen->ag_closed)) {
+            o->agt_state = __PYX_AWAITABLE_STATE_CLOSED;
+            PyErr_SetNone(__Pyx_PyExc_StopAsyncIteration);
+            return NULL;
+        }
+        if (unlikely(arg != Py_None)) {
+            PyErr_SetString(PyExc_RuntimeError, __Pyx_NON_INIT_CORO_MSG);
+            return NULL;
+        }
+        o->agt_state = __PYX_AWAITABLE_STATE_ITER;
+        o->agt_gen->ag_running_async = 1;
+        if (o->agt_args == NULL) {
+            o->agt_gen->ag_closed = 1;
+            retval = __Pyx__Coroutine_Throw((PyObject*)gen,
+                PyExc_GeneratorExit, NULL, NULL, NULL, 0);
+            if (retval && __pyx__PyAsyncGenWrappedValue_CheckExact(retval)) {
+                Py_DECREF(retval);
+                goto yield_close;
             }
         } else {
-            module = __Pyx_patch_abc_module(module);
-            abc_patched = 1;
-            if (unlikely(!module))
-                return -1;
-            Py_DECREF(module);
+            PyObject *typ;
+            PyObject *tb = NULL;
+            PyObject *val = NULL;
+            if (unlikely(!PyArg_UnpackTuple(o->agt_args, "athrow", 1, 3, &typ, &val, &tb))) {
+                return NULL;
+            }
+            retval = __Pyx__Coroutine_Throw((PyObject*)gen,
+                typ, val, tb, o->agt_args, 0);
+            retval = __Pyx_async_gen_unwrap_value(o->agt_gen, retval);
+        }
+        if (retval == NULL) {
+            goto check_error;
+        }
+        return retval;
+    }
+    assert (o->agt_state == __PYX_AWAITABLE_STATE_ITER);
+    retval = __Pyx_Coroutine_Send((PyObject *)gen, arg);
+    if (o->agt_args) {
+        return __Pyx_async_gen_unwrap_value(o->agt_gen, retval);
+    } else {
+        if (retval) {
+            if (unlikely(__pyx__PyAsyncGenWrappedValue_CheckExact(retval))) {
+                Py_DECREF(retval);
+                goto yield_close;
+            }
+            else {
+                return retval;
+            }
         }
-        module = PyImport_ImportModule("backports_abc");
-        if (module) {
-            module = __Pyx_patch_abc_module(module);
-            Py_XDECREF(module);
+        else {
+            goto check_error;
         }
-        if (!module) {
+    }
+yield_close:
+    o->agt_gen->ag_running_async = 0;
+    o->agt_state = __PYX_AWAITABLE_STATE_CLOSED;
+    PyErr_SetString(
+        PyExc_RuntimeError, __Pyx_ASYNC_GEN_IGNORED_EXIT_MSG);
+    return NULL;
+check_error:
+    o->agt_gen->ag_running_async = 0;
+    o->agt_state = __PYX_AWAITABLE_STATE_CLOSED;
+    exc_type = PyErr_Occurred();
+    if (__Pyx_PyErr_GivenExceptionMatches2(exc_type, __Pyx_PyExc_StopAsyncIteration, PyExc_GeneratorExit)) {
+        if (o->agt_args == NULL) {
             PyErr_Clear();
+            PyErr_SetNone(PyExc_StopIteration);
         }
     }
-#else
-    if ((0)) __Pyx_Coroutine_patch_module(NULL, NULL);
-#endif
-    return 0;
+    return NULL;
 }
-
-/* Generator */
-static PyMethodDef __pyx_Generator_methods[] = {
-    {"send", (PyCFunction) __Pyx_Coroutine_Send, METH_O,
-     (char*) PyDoc_STR("send(arg) -> send 'arg' into generator,\nreturn next yielded value or raise StopIteration.")},
-    {"throw", (PyCFunction) __Pyx_Coroutine_Throw, METH_VARARGS,
-     (char*) PyDoc_STR("throw(typ[,val[,tb]]) -> raise exception in generator,\nreturn next yielded value or raise StopIteration.")},
-    {"close", (PyCFunction) __Pyx_Coroutine_Close_Method, METH_NOARGS,
-     (char*) PyDoc_STR("close() -> raise GeneratorExit inside generator.")},
+static PyObject *
+__Pyx_async_gen_athrow_throw(__pyx_PyAsyncGenAThrow *o, PyObject *args)
+{
+    PyObject *retval;
+    if (unlikely(o->agt_state == __PYX_AWAITABLE_STATE_CLOSED)) {
+        PyErr_SetString(PyExc_RuntimeError, __Pyx_ASYNC_GEN_CANNOT_REUSE_CLOSE_MSG);
+        return NULL;
+    }
+    retval = __Pyx_Coroutine_Throw((PyObject*)o->agt_gen, args);
+    if (o->agt_args) {
+        return __Pyx_async_gen_unwrap_value(o->agt_gen, retval);
+    } else {
+        PyObject *exc_type;
+        if (unlikely(retval && __pyx__PyAsyncGenWrappedValue_CheckExact(retval))) {
+            o->agt_gen->ag_running_async = 0;
+            o->agt_state = __PYX_AWAITABLE_STATE_CLOSED;
+            Py_DECREF(retval);
+            PyErr_SetString(PyExc_RuntimeError, __Pyx_ASYNC_GEN_IGNORED_EXIT_MSG);
+            return NULL;
+        }
+        exc_type = PyErr_Occurred();
+        if (__Pyx_PyErr_GivenExceptionMatches2(exc_type, __Pyx_PyExc_StopAsyncIteration, PyExc_GeneratorExit)) {
+            PyErr_Clear();
+            PyErr_SetNone(PyExc_StopIteration);
+        }
+        return retval;
+    }
+}
+static PyObject *
+__Pyx_async_gen_athrow_iternext(__pyx_PyAsyncGenAThrow *o)
+{
+    return __Pyx_async_gen_athrow_send(o, Py_None);
+}
+static PyObject *
+__Pyx_async_gen_athrow_close(PyObject *g, PyObject *args)
+{
+    __pyx_PyAsyncGenAThrow *o = (__pyx_PyAsyncGenAThrow*) g;
+    CYTHON_UNUSED_VAR(args);
+    o->agt_state = __PYX_AWAITABLE_STATE_CLOSED;
+    Py_RETURN_NONE;
+}
+static PyMethodDef __Pyx_async_gen_athrow_methods[] = {
+    {"send", (PyCFunction)__Pyx_async_gen_athrow_send, METH_O, __Pyx_async_gen_send_doc},
+    {"throw", (PyCFunction)__Pyx_async_gen_athrow_throw, METH_VARARGS, __Pyx_async_gen_throw_doc},
+    {"close", (PyCFunction)__Pyx_async_gen_athrow_close, METH_NOARGS, __Pyx_async_gen_close_doc},
+    {"__await__", (PyCFunction)__Pyx_async_gen_self_method, METH_NOARGS, __Pyx_async_gen_await_doc},
     {0, 0, 0, 0}
 };
-static PyMemberDef __pyx_Generator_memberlist[] = {
-    {(char *) "gi_running", T_BOOL, offsetof(__pyx_CoroutineObject, is_running), READONLY, NULL},
-    {(char*) "gi_yieldfrom", T_OBJECT, offsetof(__pyx_CoroutineObject, yieldfrom), READONLY,
-     (char*) PyDoc_STR("object being iterated by 'yield from', or None")},
-    {(char*) "gi_code", T_OBJECT, offsetof(__pyx_CoroutineObject, gi_code), READONLY, NULL},
-    {(char *) "__module__", T_OBJECT, offsetof(__pyx_CoroutineObject, gi_modulename), 0, 0},
-#if CYTHON_USE_TYPE_SPECS
-    {(char *) "__weaklistoffset__", T_PYSSIZET, offsetof(__pyx_CoroutineObject, gi_weakreflist), READONLY, 0},
-#endif
-    {0, 0, 0, 0, 0}
-};
-static PyGetSetDef __pyx_Generator_getsets[] = {
-    {(char *) "__name__", (getter)__Pyx_Coroutine_get_name, (setter)__Pyx_Coroutine_set_name,
-     (char*) PyDoc_STR("name of the generator"), 0},
-    {(char *) "__qualname__", (getter)__Pyx_Coroutine_get_qualname, (setter)__Pyx_Coroutine_set_qualname,
-     (char*) PyDoc_STR("qualified name of the generator"), 0},
-    {(char *) "gi_frame", (getter)__Pyx_Coroutine_get_frame, NULL,
-     (char*) PyDoc_STR("Frame of the generator"), 0},
-    {0, 0, 0, 0, 0}
-};
 #if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_GeneratorType_slots[] = {
-    {Py_tp_dealloc, (void *)__Pyx_Coroutine_dealloc},
-    {Py_tp_traverse, (void *)__Pyx_Coroutine_traverse},
+static PyType_Slot __pyx__PyAsyncGenAThrowType_slots[] = {
+    {Py_tp_dealloc, (void *)__Pyx_async_gen_athrow_dealloc},
+    {Py_am_await, (void *)PyObject_SelfIter},
+    {Py_tp_traverse, (void *)__Pyx_async_gen_athrow_traverse},
     {Py_tp_iter, (void *)PyObject_SelfIter},
-    {Py_tp_iternext, (void *)__Pyx_Generator_Next},
-    {Py_tp_methods, (void *)__pyx_Generator_methods},
-    {Py_tp_members, (void *)__pyx_Generator_memberlist},
-    {Py_tp_getset, (void *)__pyx_Generator_getsets},
-    {Py_tp_getattro, (void *) __Pyx_PyObject_GenericGetAttrNoDict},
-#if CYTHON_USE_TP_FINALIZE
-    {Py_tp_finalize, (void *)__Pyx_Coroutine_del},
-#endif
+    {Py_tp_iternext, (void *)__Pyx_async_gen_athrow_iternext},
+    {Py_tp_methods, (void *)__Pyx_async_gen_athrow_methods},
+    {Py_tp_getattro, (void *)__Pyx_PyObject_GenericGetAttrNoDict},
     {0, 0},
 };
-static PyType_Spec __pyx_GeneratorType_spec = {
-    __PYX_TYPE_MODULE_PREFIX "generator",
-    sizeof(__pyx_CoroutineObject),
+static PyType_Spec __pyx__PyAsyncGenAThrowType_spec = {
+    __PYX_TYPE_MODULE_PREFIX "async_generator_athrow",
+    sizeof(__pyx_PyAsyncGenAThrow),
     0,
-    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_HAVE_FINALIZE,
-    __pyx_GeneratorType_slots
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
+    __pyx__PyAsyncGenAThrowType_slots
 };
 #else
-static PyTypeObject __pyx_GeneratorType_type = {
+#if CYTHON_USE_ASYNC_SLOTS
+static __Pyx_PyAsyncMethodsStruct __Pyx_async_gen_athrow_as_async = {
+    PyObject_SelfIter,
+    0,
+    0,
+#if PY_VERSION_HEX >= 0x030A00A3
+    0,
+#endif
+};
+#endif
+static PyTypeObject __pyx__PyAsyncGenAThrowType_type = {
     PyVarObject_HEAD_INIT(0, 0)
-    __PYX_TYPE_MODULE_PREFIX "generator",
-    sizeof(__pyx_CoroutineObject),
+    "async_generator_athrow",
+    sizeof(__pyx_PyAsyncGenAThrow),
     0,
-    (destructor) __Pyx_Coroutine_dealloc,
+    (destructor)__Pyx_async_gen_athrow_dealloc,
     0,
     0,
     0,
+#if CYTHON_USE_ASYNC_SLOTS
+    &__Pyx_async_gen_athrow_as_async,
+#else
     0,
+#endif
     0,
     0,
     0,
     0,
     0,
     0,
     0,
     0,
     0,
     0,
-    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_HAVE_FINALIZE,
+    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
     0,
-    (traverseproc) __Pyx_Coroutine_traverse,
+    (traverseproc)__Pyx_async_gen_athrow_traverse,
     0,
+#if CYTHON_USE_ASYNC_SLOTS && CYTHON_COMPILING_IN_CPYTHON && PY_MAJOR_VERSION >= 3 && PY_VERSION_HEX < 0x030500B1
+    __Pyx_Coroutine_compare,
+#else
     0,
-    offsetof(__pyx_CoroutineObject, gi_weakreflist),
+#endif
     0,
-    (iternextfunc) __Pyx_Generator_Next,
-    __pyx_Generator_methods,
-    __pyx_Generator_memberlist,
-    __pyx_Generator_getsets,
+    PyObject_SelfIter,
+    (iternextfunc)__Pyx_async_gen_athrow_iternext,
+    __Pyx_async_gen_athrow_methods,
     0,
     0,
     0,
     0,
     0,
     0,
     0,
@@ -21602,23 +23417,19 @@
     0,
     0,
     0,
     0,
     0,
     0,
     0,
-#if CYTHON_USE_TP_FINALIZE
     0,
-#else
-    __Pyx_Coroutine_del,
-#endif
     0,
-#if CYTHON_USE_TP_FINALIZE
-    __Pyx_Coroutine_del,
-#elif PY_VERSION_HEX >= 0x030400a1
+    0,
+    0,
+#if PY_VERSION_HEX >= 0x030400a1
     0,
 #endif
 #if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
     0,
 #endif
 #if __PYX_NEED_TP_PRINT_SLOT
     0,
@@ -21627,31 +23438,72 @@
     0,
 #endif
 #if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
     0,
 #endif
 };
 #endif
-static int __pyx_Generator_init(PyObject *module) {
+static PyObject *
+__Pyx_async_gen_athrow_new(__pyx_PyAsyncGenObject *gen, PyObject *args)
+{
+    __pyx_PyAsyncGenAThrow *o;
+    o = PyObject_GC_New(__pyx_PyAsyncGenAThrow, __pyx__PyAsyncGenAThrowType);
+    if (unlikely(o == NULL)) {
+        return NULL;
+    }
+    o->agt_gen = gen;
+    o->agt_args = args;
+    o->agt_state = __PYX_AWAITABLE_STATE_INIT;
+    Py_INCREF(gen);
+    Py_XINCREF(args);
+    PyObject_GC_Track((PyObject*)o);
+    return (PyObject*)o;
+}
+static int __pyx_AsyncGen_init(PyObject *module) {
 #if CYTHON_USE_TYPE_SPECS
-    __pyx_GeneratorType = __Pyx_FetchCommonTypeFromSpec(module, &__pyx_GeneratorType_spec, NULL);
+    __pyx_AsyncGenType = __Pyx_FetchCommonTypeFromSpec(module, &__pyx_AsyncGenType_spec, NULL);
 #else
-    CYTHON_UNUSED_VAR(module);
-    __pyx_GeneratorType_type.tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
-    __pyx_GeneratorType_type.tp_iter = PyObject_SelfIter;
-    __pyx_GeneratorType = __Pyx_FetchCommonType(&__pyx_GeneratorType_type);
+    CYTHON_MAYBE_UNUSED_VAR(module);
+    __pyx_AsyncGenType_type.tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+    __pyx_AsyncGenType = __Pyx_FetchCommonType(&__pyx_AsyncGenType_type);
 #endif
-    if (unlikely(!__pyx_GeneratorType)) {
+    if (unlikely(!__pyx_AsyncGenType))
+        return -1;
+#if CYTHON_USE_TYPE_SPECS
+    __pyx__PyAsyncGenAThrowType = __Pyx_FetchCommonTypeFromSpec(module, &__pyx__PyAsyncGenAThrowType_spec, NULL);
+#else
+    __pyx__PyAsyncGenAThrowType_type.tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+    __pyx__PyAsyncGenAThrowType = __Pyx_FetchCommonType(&__pyx__PyAsyncGenAThrowType_type);
+#endif
+    if (unlikely(!__pyx__PyAsyncGenAThrowType))
+        return -1;
+#if CYTHON_USE_TYPE_SPECS
+    __pyx__PyAsyncGenWrappedValueType = __Pyx_FetchCommonTypeFromSpec(module, &__pyx__PyAsyncGenWrappedValueType_spec, NULL);
+#else
+    __pyx__PyAsyncGenWrappedValueType_type.tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+    __pyx__PyAsyncGenWrappedValueType = __Pyx_FetchCommonType(&__pyx__PyAsyncGenWrappedValueType_type);
+#endif
+    if (unlikely(!__pyx__PyAsyncGenWrappedValueType))
+        return -1;
+#if CYTHON_USE_TYPE_SPECS
+    __pyx__PyAsyncGenASendType = __Pyx_FetchCommonTypeFromSpec(module, &__pyx__PyAsyncGenASendType_spec, NULL);
+#else
+    __pyx__PyAsyncGenASendType_type.tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
+    __pyx__PyAsyncGenASendType = __Pyx_FetchCommonType(&__pyx__PyAsyncGenASendType_type);
+#endif
+    if (unlikely(!__pyx__PyAsyncGenASendType))
         return -1;
-    }
     return 0;
 }
 
+/* AsyncGen */
+  
+
 /* CheckBinaryVersion */
-static unsigned long __Pyx_get_runtime_version(void) {
+  static unsigned long __Pyx_get_runtime_version(void) {
 #if __PYX_LIMITED_VERSION_HEX >= 0x030B00A4
     return Py_Version & ~0xFFUL;
 #else
     const char* rt_version = Py_GetVersion();
     unsigned long version = 0;
     unsigned long factor = 0x01000000UL;
     unsigned int digit = 0;
@@ -21690,15 +23542,15 @@
                        (int) (rt_version >> 24), (int) ((rt_version >> 16) & 0xFF)
        );
         return PyErr_WarnEx(NULL, message, 1);
     }
 }
 
 /* InitStrings */
-#if PY_MAJOR_VERSION >= 3
+  #if PY_MAJOR_VERSION >= 3
 static int __Pyx_InitString(__Pyx_StringTabEntry t, PyObject **str) {
     if (t.is_unicode | t.is_str) {
         if (t.intern) {
             *str = PyUnicode_InternFromString(t.s);
         } else if (t.encoding) {
             *str = PyUnicode_Decode(t.s, t.n - 1, t.encoding, NULL);
         } else {
```

### Comparing `cpop-28.4.1/pop/pop.data.pyx` & `cpop-28.5.0/pop/pop.data.pyx`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/ref.py` & `cpop-28.5.0/pop/ref.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/scanner.py` & `cpop-28.5.0/pop/scanner.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pop/verify.py` & `cpop-28.5.0/pop/verify.py`

 * *Files identical despite different names*

### Comparing `cpop-28.4.1/pyproject.toml` & `cpop-28.5.0/pyproject.toml`

 * *Files 3% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 [build-system]
 requires = ["setuptools >= 61.0", "wheel", "Cython"]
 build-backend = "setuptools.build_meta"
 
 [project]
 name = "cpop"
-version = "28.4.1"
+version = "28.5.0"
 description = "The Cython-Optimized Plugin Oriented Programming System"
 readme = "README.rst"
 authors = [
     {name = "Tyler Levy Conde", email = "yonstib@gmail.com"},
     {name = "Thomas Hatch", email = "thatch@saltstack.com"},
 ]
 classifiers = [
@@ -39,14 +39,18 @@
   "auditwheel",
   "Cython",
   "setuptools",
   "wheel",
   "twine",
 ]
 
+[tool.setuptools]
+packages = ["hub", "pop"]
+
+
 [project.scripts]
 hub = "hub.__main__:main"
 
 [tool.black]
 line-length = 88
 target-version = ['py310']
 include = '\.pyi?$'
```

