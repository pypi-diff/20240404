# Comparing `tmp/cashare-0.1.2-py3-none-any.whl.zip` & `tmp/cashare-0.1.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,28 +1,28 @@
-Zip file size: 17200 bytes, number of entries: 26
+Zip file size: 18230 bytes, number of entries: 26
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Mar-25 03:03 cashare/__init__.py
--rw-rw-rw-  2.0 fat     3341 b- defN 23-Oct-02 08:12 cashare/day_data.py
+-rw-rw-rw-  2.0 fat     3367 b- defN 23-Oct-11 13:00 cashare/day_data.py
 -rw-rw-rw-  2.0 fat     2451 b- defN 23-Oct-02 00:30 cashare/econ.py
--rw-rw-rw-  2.0 fat     1150 b- defN 23-Oct-02 00:30 cashare/mc_data.py
+-rw-rw-rw-  2.0 fat     4317 b- defN 24-Apr-04 11:34 cashare/mc_data.py
 -rw-rw-rw-  2.0 fat     4387 b- defN 23-Oct-02 08:34 cashare/minute_data.py
--rw-rw-rw-  2.0 fat      554 b- defN 23-Oct-02 00:30 cashare/stock_list.py
+-rw-rw-rw-  2.0 fat     1257 b- defN 23-Oct-15 08:12 cashare/stock_list.py
 -rw-rw-rw-  2.0 fat      731 b- defN 23-Oct-02 00:33 cashare/stock_now.py
 -rw-rw-rw-  2.0 fat      518 b- defN 23-Oct-02 00:33 cashare/stock_sd.py
 -rw-rw-rw-  2.0 fat     3181 b- defN 23-Oct-02 00:33 cashare/stock_sp.py
 -rw-rw-rw-  2.0 fat     4409 b- defN 23-Oct-02 00:52 cashare/ti_data.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Jun-22 12:34 cashare/common/__init__.py
 -rw-rw-rw-  2.0 fat     1121 b- defN 23-Oct-02 00:30 cashare/common/c_now_get_data.py
--rw-rw-rw-  2.0 fat       63 b- defN 23-Oct-02 00:20 cashare/common/dname.py
+-rw-rw-rw-  2.0 fat       63 b- defN 24-Apr-04 11:22 cashare/common/dname.py
 -rw-rw-rw-  2.0 fat     3264 b- defN 23-Oct-02 00:30 cashare/common/get_com.py
 -rw-rw-rw-  2.0 fat     3374 b- defN 23-Oct-02 00:30 cashare/common/get_data.py
 -rw-rw-rw-  2.0 fat     1718 b- defN 23-Jul-22 07:29 cashare/common/raise_mess.py
 -rw-rw-rw-  2.0 fat      454 b- defN 23-Oct-02 00:20 cashare/common/var_date.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Jun-22 12:23 cashare/stock/__init__.py
--rw-rw-rw-  2.0 fat     1591 b- defN 23-Aug-13 09:44 cashare/stock/c_data.py
--rw-rw-rw-  2.0 fat     2233 b- defN 23-Aug-13 09:44 cashare/stock/c_min.py
+-rw-rw-rw-  2.0 fat     1651 b- defN 23-Oct-16 14:00 cashare/stock/c_data.py
+-rw-rw-rw-  2.0 fat     2536 b- defN 23-Nov-28 07:45 cashare/stock/c_min.py
 -rw-rw-rw-  2.0 fat      309 b- defN 23-Aug-13 09:44 cashare/stock/c_now.py
--rw-rw-rw-  2.0 fat        0 b- defN 23-Oct-02 08:34 cashare-0.1.2.dist-info/LICENSE
--rw-rw-rw-  2.0 fat      261 b- defN 23-Oct-02 08:34 cashare-0.1.2.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Oct-02 08:34 cashare-0.1.2.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        8 b- defN 23-Oct-02 08:34 cashare-0.1.2.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     2030 b- defN 23-Oct-02 08:34 cashare-0.1.2.dist-info/RECORD
-26 files, 37240 bytes uncompressed, 13948 bytes compressed:  62.5%
+-rw-rw-rw-  2.0 fat        0 b- defN 24-Apr-04 11:42 cashare-0.1.3.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat      261 b- defN 24-Apr-04 11:42 cashare-0.1.3.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-Apr-04 11:42 cashare-0.1.3.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        8 b- defN 24-Apr-04 11:42 cashare-0.1.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     2031 b- defN 24-Apr-04 11:42 cashare-0.1.3.dist-info/RECORD
+26 files, 41500 bytes uncompressed, 14978 bytes compressed:  63.9%
```

## zipnote {}

```diff
@@ -57,23 +57,23 @@
 
 Filename: cashare/stock/c_min.py
 Comment: 
 
 Filename: cashare/stock/c_now.py
 Comment: 
 
-Filename: cashare-0.1.2.dist-info/LICENSE
+Filename: cashare-0.1.3.dist-info/LICENSE
 Comment: 
 
-Filename: cashare-0.1.2.dist-info/METADATA
+Filename: cashare-0.1.3.dist-info/METADATA
 Comment: 
 
-Filename: cashare-0.1.2.dist-info/WHEEL
+Filename: cashare-0.1.3.dist-info/WHEEL
 Comment: 
 
-Filename: cashare-0.1.2.dist-info/top_level.txt
+Filename: cashare-0.1.3.dist-info/top_level.txt
 Comment: 
 
-Filename: cashare-0.1.2.dist-info/RECORD
+Filename: cashare-0.1.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## cashare/day_data.py

```diff
@@ -84,15 +84,15 @@
     else:
         df = df.sort_values(by='date')  # 进行升序排序
         df.drop_duplicates(subset='date', keep='first', inplace =True, ignore_index = True)#去重
 
         return df
 
 if __name__ == '__main__':
-    df = daily_data(sk_code="AAPL", token='you_token', start_date='2003-01-08',
+    df = daily_data(sk_code="AAPL", token='g698e4b9b4747bba083e446af58f3307991', start_date='2003-01-08',
                     end_date='2023-09-22')
     print(df)
```

## cashare/mc_data.py

```diff
@@ -1,31 +1,122 @@
 import httpx
 from cashare.common.dname import url1
 import pandas as pd
 import datetime
 import json
+import time
+import dateutil.relativedelta
+from cashare.common.get_data import _retry_get
 #获取单个股票市值
 def mark_c_data(code,token,start_date,end_date=str(datetime.date.today().strftime('%Y-%m-%d'))):
     if start_date > (datetime.date.today().strftime('%Y-%m-%d')):
         return "start_date大于现在时间"
     elif start_date > end_date:
         return "start_date大于end_date"
     elif end_date > (datetime.date.today().strftime('%Y-%m-%d')):
         end_date = datetime.date.today().strftime('%Y-%m-%d')
     else:
         pass
-    url = url1 + '/mc/'+code+'/'+start_date+'/'+end_date+'/'+token
-    r = httpx.get(url,timeout=100)
 
-    df=pd.DataFrame(r.json())
-    start_date = pd.to_datetime(start_date, format='%Y-%m-%d')
-    end_date = pd.to_datetime(end_date, format='%Y-%m-%d')
-    filtered_df = df[(df['date'] >= str(start_date)) & (df['date'] <= str(end_date))]
-    df_reset = filtered_df.reset_index(drop=True)
-    return df_reset
+    return dan(start_date=start_date, end_date=end_date, sk_code=code, token=token, x=1000, y=1000)
+
+    # url = url1 + '/mc/'+code+'/'+start_date+'/'+end_date+'/'+token
+    # r = httpx.get(url,timeout=100)
+
+    # df=pd.DataFrame(r.json())
+    # start_date = pd.to_datetime(start_date, format='%Y-%m-%d')
+    # end_date = pd.to_datetime(end_date, format='%Y-%m-%d')
+    # filtered_df = df[(df['date'] >= str(start_date)) & (df['date'] <= str(end_date))]
+    # df_reset = filtered_df.reset_index(drop=True)
+    # return df_reset
+
+
+def dan(start_date,end_date,sk_code,token,x,y):
+    if ri(start_date, end_date) <= x:
+        li = hg(sk_code=sk_code, token=token, start_date=start_date, end_date=end_date)
+
+        df = _retry_get(li,timeout=100)
+        start_date = pd.to_datetime(start_date, format='%Y-%m-%d')
+        end_date = pd.to_datetime(end_date, format='%Y-%m-%d')
+        filtered_df = df[(df['date'] >= str(start_date)) & (df['date'] <= str(end_date))]
+        df_reset = filtered_df.reset_index(drop=True)
+        return df_reset
+
+    else:
+
+        if ri(start_date, end_date) / y > int(ri(start_date, end_date) / y):
+            n = (int(ri(start_date, end_date) / y) + 1)
+        else:
+            n = int(ri(start_date, end_date) / y)
+
+        list = date_huafen(sk_code=sk_code, start_date=start_date, end_date=end_date, token=token,n=n)
+        return url_get(list)
+
+def hg(sk_code,start_date,end_date,token):
+    # g_url=url1+'/us/stock/ts/'+sk_code+'/'+type+'/'+start_date+'/'+end_date+'/'+token
+
+    g_url = url1 + '/mc/' + sk_code + '/' + start_date + '/' + end_date + '/' + token
+
+    return g_url
+def ri(start_date,end_date):
+    days=(datetime.datetime.strptime(end_date, '%Y-%m-%d') - datetime.datetime.strptime(start_date, '%Y-%m-%d')).days
+    return days
+
+def date_huafen(sk_code,start_date,end_date,token,n):
+    import datetime
+    # initializing dates
+    test_date1 = datetime.datetime.strptime(start_date, '%Y-%m-%d')
+    test_date2 = datetime.datetime.strptime(end_date, '%Y-%m-%d')
+    # initializing N
+    N = n
+    temp = []
+    # getting diff.
+    diff = (test_date2 - test_date1) // N
+    for idx in range(0, N+1):
+        temp.append((test_date1 + idx * diff))
+
+    res = []
+    for sub in temp:
+        res.append(sub.strftime("%Y-%m-%d"))
+    get_list=[]
+    for i in range(len(res)-1):
+        if i ==len(res)-2:
+            li = hg(sk_code, token=token, start_date=res[i], end_date=res[i+1])
+            get_list.append(li)
+        else:
+            end=datetime.datetime.strptime(res[i+1], '%Y-%m-%d')-dateutil.relativedelta.relativedelta(days=1)
+            li=hg(sk_code,token=token,start_date=res[i],end_date=end.strftime("%Y-%m-%d"))
+            get_list.append(li)
+    return get_list
+
+def url_get(url_list):
+    import pandas as pd
+    df = pd.DataFrame(data=None)
+    for item in url_list:
+        r = _retry_get(item,timeout=100)
+        if r.empty:
+           pass
+        else:
+            lsss = r.sort_values(by='date')  # 进行升序排序
+            df = pd.concat([df, lsss], ignore_index=True)
+            # df = df.append(lsss, ignore_index=True)
+            time.sleep(0.2)
+            # print(df)
+    if df.empty:
+        return df
+    else:
+        df = df.sort_values(by='date')  # 进行升序排序
+        df.drop_duplicates(subset='date', keep='first', inplace=True, ignore_index=True)  # 去重
+
+        return df
+
+
+
+
+
 if __name__ == '__main__':
-    df=mark_c_data(code='AAPL',token='you_token',start_date='2022-09-05',end_date='2022-09-09')
+    df=mark_c_data(code='0001.HK',token='you_token',start_date='2000-09-05',end_date='2024-09-09')
     print(df)
     pass
```

## cashare/stock_list.py

```diff
@@ -9,15 +9,30 @@
         # print(url)
         r = httpx.get(url,timeout=100)
         return pd.DataFrame(r.json())
     else:
         return "type输入错误"
 
 if __name__ == '__main__':
-    df = stock_list(type='eu', token='you_token')
+    df = stock_list(type='eu', token='u698e4b9b4747bba083736e06db4b8a6a92')
     print(df)
-    df=stock_list(type='hk',token='you_token')
+    df=stock_list(type='hk',token='u698e4b9b4747bba083736e06db4b8a6a92')
     print(df)
+    df = stock_list(type='us', token='u698e4b9b4747bba083736e06db4b8a6a92')
+    print(df)
+    df = stock_list(type='ca', token='u698e4b9b4747bba083736e06db4b8a6a92')
+    print(df)
+    df = stock_list(type='tsx', token='u698e4b9b4747bba083736e06db4b8a6a92')
+    print(df)
+    df = stock_list(type='cp', token='u698e4b9b4747bba083736e06db4b8a6a92')
+    print(df)
+    df = stock_list(type='index', token='u698e4b9b4747bba083736e06db4b8a6a92')
+    print(df)
+    df = stock_list(type='etf', token='u698e4b9b4747bba083736e06db4b8a6a92')
+    print(df)
+    df = stock_list(type='fx', token='u698e4b9b4747bba083736e06db4b8a6a92')
+    print(df)
+
     pass
```

## cashare/stock/c_data.py

```diff
@@ -15,23 +15,23 @@
 def get_mon_data(sk_code, token, end_date, start_date, timeout=100):
     df = generate_data(sk_code=sk_code, token=token, start_date=start_date,
                        end_date=end_date, mold='mon')
     return df
 
 if __name__ == '__main__':
 
-    df = get_crash_data(sk_code="000001.sz", token='', start_date='1990-04-02',
+    df = get_daily_data(sk_code="000001.sz", token='a698e4b9b4747bba01599a0fcacfc994a74', start_date='1990-04-02',
                             end_date='2024-05-02')
     print(df)
 
-    df = get_daily_data(sk_code="000001.sz", token='', start_date='1990-04-02',
-                        end_date='2024-05-02')
-    print(df)
-    df = get_week_data(sk_code="000001.sz", token='', start_date='1990-04-02',
-                        end_date='2024-05-02')
-    print(df)
-    df = get_mon_data(sk_code="000001.sz", token='', start_date='1990-04-02',
-                        end_date='2024-05-02')
-    print(df)
-
-    pass
+    # df = get_daily_data(sk_code="000001.sz", token='', start_date='1990-04-02',
+    #                     end_date='2024-05-02')
+    # print(df)
+    # df = get_week_data(sk_code="000001.sz", token='', start_date='1990-04-02',
+    #                     end_date='2024-05-02')
+    # print(df)
+    # df = get_mon_data(sk_code="000001.sz", token='', start_date='1990-04-02',
+    #                     end_date='2024-05-02')
+    # print(df)
+    #
+    # pass
```

## cashare/stock/c_min.py

```diff
@@ -1,41 +1,49 @@
 from cashare.common.get_data import generate_data
 import datetime
 import pandas as pd
 
-def get_min_data(sk_code,token,end_date,start_date,type,timeout=100):
+def get_min_data(sk_code,token,start_date,end_date,type,timeout=100):
+    # print(start_date)
     start_date = start_date.replace('-', '')
     end_date = end_date.replace('-', '')
     today = datetime.date.today().strftime('%Y%m%d')
     if end_date is None or end_date > today:
         end_date = today
     start_date = start_date.replace('-', '')
     end_date = end_date.replace('-', '')
     if start_date > today:
         return "start_date大于现在时间"
     if start_date > end_date:
         return "start_date大于end_date"
+    # print(start_date)
 
     list = get_date_list(start_date, end_date, mold=type)
+    # print(list)
     result_df = pd.DataFrame()
     for i,item in enumerate(list):
         current_item = item
         # 获取下一个元素
         if i < len(list) - 1:
             next_item = list[i + 1]
             df = generate_data(sk_code=sk_code, token=token, start_date=current_item,
                                end_date=next_item, mold=type)
             # print(df)
+            df['time'] = pd.to_datetime(df['time'])
+            df['date'] = pd.to_datetime(df['date'])
             result_df = pd.concat([result_df, df], ignore_index=True)
         else:
             next_item = None
 
-    df_unique = result_df.drop_duplicates()
-    df_sorted=df_unique.sort_values(by='trade_time').reset_index(drop=True)
-    return df_sorted
+    if result_df.empty:
+        return result_df
+    else:
+        df_unique = result_df.drop_duplicates()
+        df_sorted=df_unique.sort_values(by='date').reset_index(drop=True)
+        return df_sorted
 def get_n(mold):
     if mold=='1min':
         return 50
     if mold=='5min':
         return 275
     if mold=='15min':
         return 800
@@ -43,22 +51,23 @@
         return 1500
     if mold == '60min':
         return 2500
 def get_date_list(start_date,end_date,mold):
     n=get_n(mold)
     # initializing dates
     test_date1 = datetime.datetime.strptime(start_date, '%Y%m%d')
+    # print(test_date1)
     test_date2 = datetime.datetime.strptime(end_date, '%Y%m%d')
     date_list = []
     while test_date1 <= test_date2:
         date_list.append(test_date1.strftime("%Y%m%d"))
         test_date1 += datetime.timedelta(days=n)
 
     ls2 = test_date2.strftime("%Y%m%d")
     date_list .append(ls2 )
     # print(date_list)
     return date_list
 
 if __name__ == '__main__':
-    df = get_min_data(sk_code="000001.sz", token='', start_date='2023-04-02',
-                        end_date='2024-05-02',type='30min')
+    df = get_min_data(sk_code="000004.sz", token='ice73c837bf196339ef2b7e946d20196057', start_date='2013-04-02',
+                        end_date='2024-05-02',type='60min')
     print(df)
```

## Comparing `cashare-0.1.2.dist-info/RECORD` & `cashare-0.1.3.dist-info/RECORD`

 * *Files 25% similar despite different names*

```diff
@@ -1,26 +1,26 @@
 cashare/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-cashare/day_data.py,sha256=rXjk3PJMkqhC-b_oy86rbNRGfRM9aLf9FjTryg8m-bo,3341
+cashare/day_data.py,sha256=XLPjKTo-D-0iIC-uwMpiO-coZaTlLstkYo-yy1TBZEw,3367
 cashare/econ.py,sha256=YVVrJdbyUO8_QQniUcWBnW-6BBQYlL3Wgvu0NAR28l0,2451
-cashare/mc_data.py,sha256=JjxALUnpjPjkvLx1r6DVGqh9-vd5neKdjSuvFazaxJI,1150
+cashare/mc_data.py,sha256=fXYtdDW_P5BvN3X_XvVXPMTq4Qz3KfPPGQAHE4x5yE0,4317
 cashare/minute_data.py,sha256=QLJIy1Rs4evWP0zoLufUMti8KNzigZGBTeVpkgi0jwg,4387
-cashare/stock_list.py,sha256=35hP7ABvcBMHT9ygDVWFP8Z9BlB4pAT_CSdXyMP_LHs,554
+cashare/stock_list.py,sha256=gAWz8bbSyaAkT5OzLFhbGfxD3OEoYoL6RRgN-nS7nSc,1257
 cashare/stock_now.py,sha256=5fVgPsBeWAAMJdD0bsBqfsHLstAPJxQgxCWmlvIZY3g,731
 cashare/stock_sd.py,sha256=cW4EYJiv6Mj2zcgNYXdI2vIoJaxA8ez4oEhltJMWXs8,518
 cashare/stock_sp.py,sha256=u_KMaRw3CkJi40Cuihf6SWWykRfMRURDRGvec136HLY,3181
 cashare/ti_data.py,sha256=utPtkrXrx81zpHPv1SfSukeO3JAkPXrmDMM4AEvyJUc,4409
 cashare/common/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 cashare/common/c_now_get_data.py,sha256=5sX0nc61LhMTJiIMlwFZbcaSmg-YrkyvgBnWt5ZzVEQ,1121
 cashare/common/dname.py,sha256=NrFUl-Q3t5dGzzJ8osSvsmrMudARER7abWIqxQux4N0,63
 cashare/common/get_com.py,sha256=rBQixvT3IXIY_o4cRJ3uu0mMaju6YZmKrtQTKkfRCGg,3264
 cashare/common/get_data.py,sha256=tMbOLXxT2VO8IysRm6aeSeQ4D11HKbYwIo9fOrqTKuE,3374
 cashare/common/raise_mess.py,sha256=imJJr4Ll_RDKJwH89NCVERuICRk3VNFa75wQGmhftRU,1718
 cashare/common/var_date.py,sha256=MxkKX_CkWlRhy6kd-TRfkQTQjy3JpVGPmibo2jkp3iw,454
 cashare/stock/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-cashare/stock/c_data.py,sha256=QwT9WBmJr93T9xW1Gwo2ivY9gmImyn2Hk0ZD7-GLAbA,1591
-cashare/stock/c_min.py,sha256=GIYxQLWwFMstuo2o-WqPxrOYMCBjiFzb4y3JHJ1pk44,2233
+cashare/stock/c_data.py,sha256=rLUc3dKnrfSQ72Sxw3Ue53rMlZoYD_ekIE9sW0di_Jo,1651
+cashare/stock/c_min.py,sha256=izy5ls5Q-eHyJJCJpRX9VoTWFGQMuA6Hy3v1at4y60A,2536
 cashare/stock/c_now.py,sha256=KB928g-tLRHMKWkySlrlmNU9DBmSiLrVaYq_xs0-eYk,309
-cashare-0.1.2.dist-info/LICENSE,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-cashare-0.1.2.dist-info/METADATA,sha256=WU6pU2wumjQwy3mLrRRT41ZOLYs--Y8opRKnwOdACSU,261
-cashare-0.1.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-cashare-0.1.2.dist-info/top_level.txt,sha256=5LaMVcG3dphPZDIpuhPc7QBQ_cMkP9M2ssGG3igmheQ,8
-cashare-0.1.2.dist-info/RECORD,,
+cashare-0.1.3.dist-info/LICENSE,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
+cashare-0.1.3.dist-info/METADATA,sha256=kIYDwPSDmeNovCQKRIesT47f7wYe8gY_7f4b0jAgy60,261
+cashare-0.1.3.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
+cashare-0.1.3.dist-info/top_level.txt,sha256=5LaMVcG3dphPZDIpuhPc7QBQ_cMkP9M2ssGG3igmheQ,8
+cashare-0.1.3.dist-info/RECORD,,
```

