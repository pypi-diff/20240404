# Comparing `tmp/py_tgcalls-2.0.0rc2-py3-none-any.whl.zip` & `tmp/py_tgcalls-2.0.0rc3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,95 +1,95 @@
-Zip file size: 63521 bytes, number of entries: 93
--rw-r--r--  2.0 unx      248 b- defN 24-Mar-27 23:04 pytgcalls/__init__.py
--rw-r--r--  2.0 unx       25 b- defN 24-Mar-27 23:04 pytgcalls/__version__.py
--rw-r--r--  2.0 unx     1924 b- defN 24-Mar-27 23:04 pytgcalls/environment.py
--rw-r--r--  2.0 unx     3824 b- defN 24-Mar-27 23:04 pytgcalls/exceptions.py
--rw-r--r--  2.0 unx     8520 b- defN 24-Mar-27 23:04 pytgcalls/ffmpeg.py
--rw-r--r--  2.0 unx     4409 b- defN 24-Mar-27 23:04 pytgcalls/filters.py
--rw-r--r--  2.0 unx      630 b- defN 24-Mar-27 23:04 pytgcalls/mtproto_required.py
--rw-r--r--  2.0 unx     1119 b- defN 24-Mar-27 23:04 pytgcalls/mutex.py
--rw-r--r--  2.0 unx     1583 b- defN 24-Mar-27 23:04 pytgcalls/pytgcalls.py
--rw-r--r--  2.0 unx     2719 b- defN 24-Mar-27 23:04 pytgcalls/pytgcalls_session.py
--rw-r--r--  2.0 unx      950 b- defN 24-Mar-27 23:04 pytgcalls/scaffold.py
--rw-r--r--  2.0 unx     3842 b- defN 24-Mar-27 23:04 pytgcalls/statictypes.py
--rw-r--r--  2.0 unx     3396 b- defN 24-Mar-27 23:04 pytgcalls/sync.py
--rw-r--r--  2.0 unx      296 b- defN 24-Mar-27 23:04 pytgcalls/version_manager.py
--rw-r--r--  2.0 unx     1961 b- defN 24-Mar-27 23:04 pytgcalls/ytdlp.py
--rw-r--r--  2.0 unx       60 b- defN 24-Mar-27 23:04 pytgcalls/custom_api/__init__.py
--rw-r--r--  2.0 unx     1890 b- defN 24-Mar-27 23:04 pytgcalls/custom_api/custom_api.py
--rw-r--r--  2.0 unx       75 b- defN 24-Mar-27 23:04 pytgcalls/handlers/__init__.py
--rw-r--r--  2.0 unx     1033 b- defN 24-Mar-27 23:04 pytgcalls/handlers/handlers_holder.py
--rw-r--r--  2.0 unx      183 b- defN 24-Mar-27 23:04 pytgcalls/media_devices/__init__.py
--rw-r--r--  2.0 unx      489 b- defN 24-Mar-27 23:04 pytgcalls/media_devices/device_info.py
--rw-r--r--  2.0 unx     3149 b- defN 24-Mar-27 23:04 pytgcalls/media_devices/media_devices.py
--rw-r--r--  2.0 unx     1107 b- defN 24-Mar-27 23:04 pytgcalls/media_devices/screen_info.py
--rw-r--r--  2.0 unx      217 b- defN 24-Mar-27 23:04 pytgcalls/methods/__init__.py
--rw-r--r--  2.0 unx      214 b- defN 24-Mar-27 23:04 pytgcalls/methods/calls/__init__.py
--rw-r--r--  2.0 unx      719 b- defN 24-Mar-27 23:04 pytgcalls/methods/calls/change_volume_call.py
--rw-r--r--  2.0 unx      568 b- defN 24-Mar-27 23:04 pytgcalls/methods/calls/get_participants.py
--rw-r--r--  2.0 unx     1101 b- defN 24-Mar-27 23:04 pytgcalls/methods/calls/leave_call.py
--rw-r--r--  2.0 unx       78 b- defN 24-Mar-27 23:04 pytgcalls/methods/decorators/__init__.py
--rw-r--r--  2.0 unx      316 b- defN 24-Mar-27 23:04 pytgcalls/methods/decorators/on_update.py
--rw-r--r--  2.0 unx      343 b- defN 24-Mar-27 23:04 pytgcalls/methods/stream/__init__.py
--rw-r--r--  2.0 unx      580 b- defN 24-Mar-27 23:04 pytgcalls/methods/stream/mute_stream.py
--rw-r--r--  2.0 unx      583 b- defN 24-Mar-27 23:04 pytgcalls/methods/stream/pause_stream.py
--rw-r--r--  2.0 unx     7305 b- defN 24-Mar-27 23:04 pytgcalls/methods/stream/play.py
--rw-r--r--  2.0 unx      580 b- defN 24-Mar-27 23:04 pytgcalls/methods/stream/played_time.py
--rw-r--r--  2.0 unx      586 b- defN 24-Mar-27 23:04 pytgcalls/methods/stream/resume_stream.py
--rw-r--r--  2.0 unx      586 b- defN 24-Mar-27 23:04 pytgcalls/methods/stream/unmute_stream.py
--rw-r--r--  2.0 unx      339 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/__init__.py
--rw-r--r--  2.0 unx      140 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/cache_peer.py
--rw-r--r--  2.0 unx      903 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/call_holder.py
--rw-r--r--  2.0 unx      334 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/compose.py
--rw-r--r--  2.0 unx      162 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/cpu_usage.py
--rw-r--r--  2.0 unx      768 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/idle.py
--rw-r--r--  2.0 unx      244 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/ping.py
--rw-r--r--  2.0 unx      382 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/resolve_chat_id.py
--rw-r--r--  2.0 unx      152 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/run.py
--rw-r--r--  2.0 unx     6702 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/start.py
--rw-r--r--  2.0 unx     1519 b- defN 24-Mar-27 23:04 pytgcalls/methods/utilities/stream_params.py
--rw-r--r--  2.0 unx      130 b- defN 24-Mar-27 23:04 pytgcalls/mtproto/__init__.py
--rw-r--r--  2.0 unx     5039 b- defN 24-Mar-27 23:04 pytgcalls/mtproto/bridged_client.py
--rw-r--r--  2.0 unx     5088 b- defN 24-Mar-27 23:04 pytgcalls/mtproto/client_cache.py
--rw-r--r--  2.0 unx    20904 b- defN 24-Mar-27 23:04 pytgcalls/mtproto/hydrogram_client.py
--rw-r--r--  2.0 unx     6928 b- defN 24-Mar-27 23:04 pytgcalls/mtproto/mtproto_client.py
--rw-r--r--  2.0 unx    21182 b- defN 24-Mar-27 23:04 pytgcalls/mtproto/pyrogram_client.py
--rw-r--r--  2.0 unx    19997 b- defN 24-Mar-27 23:04 pytgcalls/mtproto/telethon_client.py
--rw-r--r--  2.0 unx     1071 b- defN 24-Mar-27 23:04 pytgcalls/types/__init__.py
--rw-r--r--  2.0 unx     9545 b- defN 24-Mar-27 23:04 pytgcalls/types/browsers.py
--rw-r--r--  2.0 unx     1059 b- defN 24-Mar-27 23:04 pytgcalls/types/cache.py
--rw-r--r--  2.0 unx       78 b- defN 24-Mar-27 23:04 pytgcalls/types/list.py
--rw-r--r--  2.0 unx      879 b- defN 24-Mar-27 23:04 pytgcalls/types/participant_list.py
--rw-r--r--  2.0 unx      842 b- defN 24-Mar-27 23:04 pytgcalls/types/py_object.py
--rw-r--r--  2.0 unx      157 b- defN 24-Mar-27 23:04 pytgcalls/types/update.py
--rw-r--r--  2.0 unx     1086 b- defN 24-Mar-27 23:04 pytgcalls/types/user_agent.py
--rw-r--r--  2.0 unx      346 b- defN 24-Mar-27 23:04 pytgcalls/types/calls/__init__.py
--rw-r--r--  2.0 unx      761 b- defN 24-Mar-27 23:04 pytgcalls/types/calls/call.py
--rw-r--r--  2.0 unx      120 b- defN 24-Mar-27 23:04 pytgcalls/types/calls/call_config.py
--rw-r--r--  2.0 unx      530 b- defN 24-Mar-27 23:04 pytgcalls/types/calls/call_data.py
--rw-r--r--  2.0 unx      408 b- defN 24-Mar-27 23:04 pytgcalls/types/calls/call_protocol.py
--rw-r--r--  2.0 unx      353 b- defN 24-Mar-27 23:04 pytgcalls/types/calls/group_call_config.py
--rw-r--r--  2.0 unx      795 b- defN 24-Mar-27 23:04 pytgcalls/types/calls/raw_call_update.py
--rw-r--r--  2.0 unx      463 b- defN 24-Mar-27 23:04 pytgcalls/types/groups/__init__.py
--rw-r--r--  2.0 unx      738 b- defN 24-Mar-27 23:04 pytgcalls/types/groups/chat_update.py
--rw-r--r--  2.0 unx      757 b- defN 24-Mar-27 23:04 pytgcalls/types/groups/group_call_participant.py
--rw-r--r--  2.0 unx      291 b- defN 24-Mar-27 23:04 pytgcalls/types/groups/joined_group_call_participant.py
--rw-r--r--  2.0 unx      289 b- defN 24-Mar-27 23:04 pytgcalls/types/groups/left_group_call_participant.py
--rw-r--r--  2.0 unx      292 b- defN 24-Mar-27 23:04 pytgcalls/types/groups/updated_group_call_participant.py
--rw-r--r--  2.0 unx      308 b- defN 24-Mar-27 23:04 pytgcalls/types/raw/__init__.py
--rw-r--r--  2.0 unx      449 b- defN 24-Mar-27 23:04 pytgcalls/types/raw/audio_parameters.py
--rw-r--r--  2.0 unx      476 b- defN 24-Mar-27 23:04 pytgcalls/types/raw/audio_stream.py
--rw-r--r--  2.0 unx      491 b- defN 24-Mar-27 23:04 pytgcalls/types/raw/stream.py
--rw-r--r--  2.0 unx      545 b- defN 24-Mar-27 23:04 pytgcalls/types/raw/video_parameters.py
--rw-r--r--  2.0 unx      433 b- defN 24-Mar-27 23:04 pytgcalls/types/raw/video_stream.py
--rw-r--r--  2.0 unx      338 b- defN 24-Mar-27 23:04 pytgcalls/types/stream/__init__.py
--rw-r--r--  2.0 unx      141 b- defN 24-Mar-27 23:04 pytgcalls/types/stream/audio_quality.py
--rw-r--r--  2.0 unx     8978 b- defN 24-Mar-27 23:04 pytgcalls/types/stream/media_stream.py
--rw-r--r--  2.0 unx      164 b- defN 24-Mar-27 23:04 pytgcalls/types/stream/stream_audio_ended.py
--rw-r--r--  2.0 unx      164 b- defN 24-Mar-27 23:04 pytgcalls/types/stream/stream_video_ended.py
--rw-r--r--  2.0 unx      231 b- defN 24-Mar-27 23:04 pytgcalls/types/stream/video_quality.py
--rw-r--r--  2.0 unx     7652 b- defN 24-Mar-27 23:04 py_tgcalls-2.0.0rc2.dist-info/LICENSE
--rw-r--r--  2.0 unx     4883 b- defN 24-Mar-27 23:04 py_tgcalls-2.0.0rc2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Mar-27 23:04 py_tgcalls-2.0.0rc2.dist-info/WHEEL
--rw-r--r--  2.0 unx       10 b- defN 24-Mar-27 23:04 py_tgcalls-2.0.0rc2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     8401 b- defN 24-Mar-27 23:04 py_tgcalls-2.0.0rc2.dist-info/RECORD
-93 files, 202737 bytes uncompressed, 49993 bytes compressed:  75.3%
+Zip file size: 63547 bytes, number of entries: 93
+-rw-r--r--  2.0 unx      248 b- defN 24-Apr-04 20:41 pytgcalls/__init__.py
+-rw-r--r--  2.0 unx       25 b- defN 24-Apr-04 20:41 pytgcalls/__version__.py
+-rw-r--r--  2.0 unx     1924 b- defN 24-Apr-04 20:41 pytgcalls/environment.py
+-rw-r--r--  2.0 unx     3957 b- defN 24-Apr-04 20:41 pytgcalls/exceptions.py
+-rw-r--r--  2.0 unx     8520 b- defN 24-Apr-04 20:41 pytgcalls/ffmpeg.py
+-rw-r--r--  2.0 unx     4409 b- defN 24-Apr-04 20:41 pytgcalls/filters.py
+-rw-r--r--  2.0 unx      630 b- defN 24-Apr-04 20:41 pytgcalls/mtproto_required.py
+-rw-r--r--  2.0 unx     1119 b- defN 24-Apr-04 20:41 pytgcalls/mutex.py
+-rw-r--r--  2.0 unx     1443 b- defN 24-Apr-04 20:41 pytgcalls/pytgcalls.py
+-rw-r--r--  2.0 unx     2719 b- defN 24-Apr-04 20:41 pytgcalls/pytgcalls_session.py
+-rw-r--r--  2.0 unx      950 b- defN 24-Apr-04 20:41 pytgcalls/scaffold.py
+-rw-r--r--  2.0 unx     3842 b- defN 24-Apr-04 20:41 pytgcalls/statictypes.py
+-rw-r--r--  2.0 unx     3396 b- defN 24-Apr-04 20:41 pytgcalls/sync.py
+-rw-r--r--  2.0 unx      296 b- defN 24-Apr-04 20:41 pytgcalls/version_manager.py
+-rw-r--r--  2.0 unx     1961 b- defN 24-Apr-04 20:41 pytgcalls/ytdlp.py
+-rw-r--r--  2.0 unx       60 b- defN 24-Apr-04 20:41 pytgcalls/custom_api/__init__.py
+-rw-r--r--  2.0 unx     1890 b- defN 24-Apr-04 20:41 pytgcalls/custom_api/custom_api.py
+-rw-r--r--  2.0 unx       75 b- defN 24-Apr-04 20:41 pytgcalls/handlers/__init__.py
+-rw-r--r--  2.0 unx     1033 b- defN 24-Apr-04 20:41 pytgcalls/handlers/handlers_holder.py
+-rw-r--r--  2.0 unx      183 b- defN 24-Apr-04 20:41 pytgcalls/media_devices/__init__.py
+-rw-r--r--  2.0 unx      489 b- defN 24-Apr-04 20:41 pytgcalls/media_devices/device_info.py
+-rw-r--r--  2.0 unx     3149 b- defN 24-Apr-04 20:41 pytgcalls/media_devices/media_devices.py
+-rw-r--r--  2.0 unx     1107 b- defN 24-Apr-04 20:41 pytgcalls/media_devices/screen_info.py
+-rw-r--r--  2.0 unx      217 b- defN 24-Apr-04 20:41 pytgcalls/methods/__init__.py
+-rw-r--r--  2.0 unx      214 b- defN 24-Apr-04 20:41 pytgcalls/methods/calls/__init__.py
+-rw-r--r--  2.0 unx      719 b- defN 24-Apr-04 20:41 pytgcalls/methods/calls/change_volume_call.py
+-rw-r--r--  2.0 unx      568 b- defN 24-Apr-04 20:41 pytgcalls/methods/calls/get_participants.py
+-rw-r--r--  2.0 unx     1091 b- defN 24-Apr-04 20:41 pytgcalls/methods/calls/leave_call.py
+-rw-r--r--  2.0 unx       78 b- defN 24-Apr-04 20:41 pytgcalls/methods/decorators/__init__.py
+-rw-r--r--  2.0 unx      316 b- defN 24-Apr-04 20:41 pytgcalls/methods/decorators/on_update.py
+-rw-r--r--  2.0 unx      343 b- defN 24-Apr-04 20:41 pytgcalls/methods/stream/__init__.py
+-rw-r--r--  2.0 unx      570 b- defN 24-Apr-04 20:41 pytgcalls/methods/stream/mute_stream.py
+-rw-r--r--  2.0 unx      573 b- defN 24-Apr-04 20:41 pytgcalls/methods/stream/pause_stream.py
+-rw-r--r--  2.0 unx     7155 b- defN 24-Apr-04 20:41 pytgcalls/methods/stream/play.py
+-rw-r--r--  2.0 unx      570 b- defN 24-Apr-04 20:41 pytgcalls/methods/stream/played_time.py
+-rw-r--r--  2.0 unx      576 b- defN 24-Apr-04 20:41 pytgcalls/methods/stream/resume_stream.py
+-rw-r--r--  2.0 unx      576 b- defN 24-Apr-04 20:41 pytgcalls/methods/stream/unmute_stream.py
+-rw-r--r--  2.0 unx      339 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/__init__.py
+-rw-r--r--  2.0 unx      140 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/cache_peer.py
+-rw-r--r--  2.0 unx      903 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/call_holder.py
+-rw-r--r--  2.0 unx      334 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/compose.py
+-rw-r--r--  2.0 unx      162 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/cpu_usage.py
+-rw-r--r--  2.0 unx      768 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/idle.py
+-rw-r--r--  2.0 unx      244 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/ping.py
+-rw-r--r--  2.0 unx      382 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/resolve_chat_id.py
+-rw-r--r--  2.0 unx      152 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/run.py
+-rw-r--r--  2.0 unx     7281 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/start.py
+-rw-r--r--  2.0 unx     1519 b- defN 24-Apr-04 20:41 pytgcalls/methods/utilities/stream_params.py
+-rw-r--r--  2.0 unx      130 b- defN 24-Apr-04 20:41 pytgcalls/mtproto/__init__.py
+-rw-r--r--  2.0 unx     4975 b- defN 24-Apr-04 20:41 pytgcalls/mtproto/bridged_client.py
+-rw-r--r--  2.0 unx     5088 b- defN 24-Apr-04 20:41 pytgcalls/mtproto/client_cache.py
+-rw-r--r--  2.0 unx    21014 b- defN 24-Apr-04 20:41 pytgcalls/mtproto/hydrogram_client.py
+-rw-r--r--  2.0 unx     6884 b- defN 24-Apr-04 20:41 pytgcalls/mtproto/mtproto_client.py
+-rw-r--r--  2.0 unx    21203 b- defN 24-Apr-04 20:41 pytgcalls/mtproto/pyrogram_client.py
+-rw-r--r--  2.0 unx    20105 b- defN 24-Apr-04 20:41 pytgcalls/mtproto/telethon_client.py
+-rw-r--r--  2.0 unx     1071 b- defN 24-Apr-04 20:41 pytgcalls/types/__init__.py
+-rw-r--r--  2.0 unx     9545 b- defN 24-Apr-04 20:41 pytgcalls/types/browsers.py
+-rw-r--r--  2.0 unx     1059 b- defN 24-Apr-04 20:41 pytgcalls/types/cache.py
+-rw-r--r--  2.0 unx       78 b- defN 24-Apr-04 20:41 pytgcalls/types/list.py
+-rw-r--r--  2.0 unx      879 b- defN 24-Apr-04 20:41 pytgcalls/types/participant_list.py
+-rw-r--r--  2.0 unx      842 b- defN 24-Apr-04 20:41 pytgcalls/types/py_object.py
+-rw-r--r--  2.0 unx      157 b- defN 24-Apr-04 20:41 pytgcalls/types/update.py
+-rw-r--r--  2.0 unx     1086 b- defN 24-Apr-04 20:41 pytgcalls/types/user_agent.py
+-rw-r--r--  2.0 unx      346 b- defN 24-Apr-04 20:41 pytgcalls/types/calls/__init__.py
+-rw-r--r--  2.0 unx      761 b- defN 24-Apr-04 20:41 pytgcalls/types/calls/call.py
+-rw-r--r--  2.0 unx      120 b- defN 24-Apr-04 20:41 pytgcalls/types/calls/call_config.py
+-rw-r--r--  2.0 unx      530 b- defN 24-Apr-04 20:41 pytgcalls/types/calls/call_data.py
+-rw-r--r--  2.0 unx      408 b- defN 24-Apr-04 20:41 pytgcalls/types/calls/call_protocol.py
+-rw-r--r--  2.0 unx      353 b- defN 24-Apr-04 20:41 pytgcalls/types/calls/group_call_config.py
+-rw-r--r--  2.0 unx      795 b- defN 24-Apr-04 20:41 pytgcalls/types/calls/raw_call_update.py
+-rw-r--r--  2.0 unx      463 b- defN 24-Apr-04 20:41 pytgcalls/types/groups/__init__.py
+-rw-r--r--  2.0 unx      738 b- defN 24-Apr-04 20:41 pytgcalls/types/groups/chat_update.py
+-rw-r--r--  2.0 unx      757 b- defN 24-Apr-04 20:41 pytgcalls/types/groups/group_call_participant.py
+-rw-r--r--  2.0 unx      291 b- defN 24-Apr-04 20:41 pytgcalls/types/groups/joined_group_call_participant.py
+-rw-r--r--  2.0 unx      289 b- defN 24-Apr-04 20:41 pytgcalls/types/groups/left_group_call_participant.py
+-rw-r--r--  2.0 unx      292 b- defN 24-Apr-04 20:41 pytgcalls/types/groups/updated_group_call_participant.py
+-rw-r--r--  2.0 unx      308 b- defN 24-Apr-04 20:41 pytgcalls/types/raw/__init__.py
+-rw-r--r--  2.0 unx      449 b- defN 24-Apr-04 20:41 pytgcalls/types/raw/audio_parameters.py
+-rw-r--r--  2.0 unx      476 b- defN 24-Apr-04 20:41 pytgcalls/types/raw/audio_stream.py
+-rw-r--r--  2.0 unx      491 b- defN 24-Apr-04 20:41 pytgcalls/types/raw/stream.py
+-rw-r--r--  2.0 unx      545 b- defN 24-Apr-04 20:41 pytgcalls/types/raw/video_parameters.py
+-rw-r--r--  2.0 unx      433 b- defN 24-Apr-04 20:41 pytgcalls/types/raw/video_stream.py
+-rw-r--r--  2.0 unx      338 b- defN 24-Apr-04 20:41 pytgcalls/types/stream/__init__.py
+-rw-r--r--  2.0 unx      141 b- defN 24-Apr-04 20:41 pytgcalls/types/stream/audio_quality.py
+-rw-r--r--  2.0 unx     8979 b- defN 24-Apr-04 20:41 pytgcalls/types/stream/media_stream.py
+-rw-r--r--  2.0 unx      164 b- defN 24-Apr-04 20:41 pytgcalls/types/stream/stream_audio_ended.py
+-rw-r--r--  2.0 unx      164 b- defN 24-Apr-04 20:41 pytgcalls/types/stream/stream_video_ended.py
+-rw-r--r--  2.0 unx      231 b- defN 24-Apr-04 20:41 pytgcalls/types/stream/video_quality.py
+-rw-r--r--  2.0 unx     7652 b- defN 24-Apr-04 20:41 py_tgcalls-2.0.0rc3.dist-info/LICENSE
+-rw-r--r--  2.0 unx     4886 b- defN 24-Apr-04 20:41 py_tgcalls-2.0.0rc3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-04 20:41 py_tgcalls-2.0.0rc3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       10 b- defN 24-Apr-04 20:41 py_tgcalls-2.0.0rc3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     8401 b- defN 24-Apr-04 20:41 py_tgcalls-2.0.0rc3.dist-info/RECORD
+93 files, 203234 bytes uncompressed, 50019 bytes compressed:  75.4%
```

## zipnote {}

```diff
@@ -258,23 +258,23 @@
 
 Filename: pytgcalls/types/stream/stream_video_ended.py
 Comment: 
 
 Filename: pytgcalls/types/stream/video_quality.py
 Comment: 
 
-Filename: py_tgcalls-2.0.0rc2.dist-info/LICENSE
+Filename: py_tgcalls-2.0.0rc3.dist-info/LICENSE
 Comment: 
 
-Filename: py_tgcalls-2.0.0rc2.dist-info/METADATA
+Filename: py_tgcalls-2.0.0rc3.dist-info/METADATA
 Comment: 
 
-Filename: py_tgcalls-2.0.0rc2.dist-info/WHEEL
+Filename: py_tgcalls-2.0.0rc3.dist-info/WHEEL
 Comment: 
 
-Filename: py_tgcalls-2.0.0rc2.dist-info/top_level.txt
+Filename: py_tgcalls-2.0.0rc3.dist-info/top_level.txt
 Comment: 
 
-Filename: py_tgcalls-2.0.0rc2.dist-info/RECORD
+Filename: py_tgcalls-2.0.0rc3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## pytgcalls/__version__.py

```diff
@@ -1 +1 @@
-__version__ = '2.0.0rc2'
+__version__ = '2.0.0rc3'
```

## pytgcalls/exceptions.py

```diff
@@ -61,18 +61,25 @@
 class TimedOutAnswer(Exception):
     def __init__(self):
         super().__init__(
             'Timed out waiting for an answer',
         )
 
 
-class NotInGroupCallError(Exception):
+class CallDeclined(Exception):
+    def __init__(self, user_id: int):
+        super().__init__(
+            f'Call declined by {user_id}',
+        )
+
+
+class NotInCallError(Exception):
     def __init__(self):
         super().__init__(
-            'The userbot there isn\'t in a group call',
+            'The userbot is not in a call',
         )
 
 
 class AlreadyJoinedError(Exception):
     def __init__(self):
         super().__init__(
             'Already joined into group call',
```

## pytgcalls/pytgcalls.py

```diff
@@ -1,12 +1,11 @@
 import asyncio
 import os
 from concurrent.futures import ThreadPoolExecutor
 from typing import Any
-from typing import Optional
 
 from ntgcalls import NTgCalls
 
 from .environment import Environment
 from .methods import Methods
 from .mtproto import MtProtoClient
 from .scaffold import Scaffold
@@ -20,16 +19,14 @@
 
     @statictypes
     def __init__(
         self,
         app: Any,
         workers: int = WORKERS,
         cache_duration: int = CACHE_DURATION,
-        ntg_logs_path: Optional[str] = None,
-        allow_rtc_logs: bool = False,
     ):
         super().__init__()
         self._mtproto = app
         self._app = MtProtoClient(
             cache_duration,
             self._mtproto,
         )
@@ -37,15 +34,15 @@
         self._env_checker = Environment(
             self._REQUIRED_PYROGRAM_VERSION,
             self._REQUIRED_TELETHON_VERSION,
             self._REQUIRED_HYDROGRAM_VERSION,
             self._app.package_name,
         )
         self._cache_user_peer = Cache()
-        self._binding = NTgCalls(ntg_logs_path, allow_rtc_logs)
+        self._binding = NTgCalls()
         self.loop = asyncio.get_event_loop()
         self.workers = workers
         self.executor = ThreadPoolExecutor(
             self.workers,
             thread_name_prefix='Handler',
         )
```

## pytgcalls/methods/calls/leave_call.py

```diff
@@ -1,13 +1,13 @@
 from typing import Union
 
 from ntgcalls import ConnectionNotFound
 
 from ...exceptions import NoActiveGroupCall
-from ...exceptions import NotInGroupCallError
+from ...exceptions import NotInCallError
 from ...mtproto_required import mtproto_required
 from ...mutex import mutex
 from ...scaffold import Scaffold
 from ...statictypes import statictypes
 
 
 class LeaveCall(Scaffold):
@@ -31,10 +31,10 @@
                 chat_id,
             )
         else:
             await self._app.discard_call(chat_id)
         try:
             await self._binding.stop(chat_id)
         except ConnectionNotFound:
-            raise NotInGroupCallError()
+            raise NotInCallError()
         if chat_id < 0:  # type: ignore
             self._need_unmute.discard(chat_id)
```

## pytgcalls/methods/stream/mute_stream.py

```diff
@@ -1,12 +1,12 @@
 from typing import Union
 
 from ntgcalls import ConnectionNotFound
 
-from ...exceptions import NotInGroupCallError
+from ...exceptions import NotInCallError
 from ...mtproto_required import mtproto_required
 from ...scaffold import Scaffold
 from ...statictypes import statictypes
 
 
 class MuteStream(Scaffold):
     @statictypes
@@ -15,8 +15,8 @@
         self,
         chat_id: Union[int, str],
     ):
         chat_id = await self.resolve_chat_id(chat_id)
         try:
             return await self._binding.mute(chat_id)
         except ConnectionNotFound:
-            raise NotInGroupCallError()
+            raise NotInCallError()
```

## pytgcalls/methods/stream/pause_stream.py

```diff
@@ -1,12 +1,12 @@
 from typing import Union
 
 from ntgcalls import ConnectionNotFound
 
-from ...exceptions import NotInGroupCallError
+from ...exceptions import NotInCallError
 from ...mtproto_required import mtproto_required
 from ...scaffold import Scaffold
 from ...statictypes import statictypes
 
 
 class PauseStream(Scaffold):
     @statictypes
@@ -15,8 +15,8 @@
         self,
         chat_id: Union[int, str],
     ):
         chat_id = await self.resolve_chat_id(chat_id)
         try:
             return await self._binding.pause(chat_id)
         except ConnectionNotFound:
-            raise NotInGroupCallError()
+            raise NotInCallError()
```

## pytgcalls/methods/stream/play.py

```diff
@@ -33,21 +33,18 @@
     async def play(
         self,
         chat_id: Union[int, str],
         stream: Optional[Stream] = None,
         config: Optional[Union[CallConfig, GroupCallConfig]] = None,
     ):
         chat_id = await self.resolve_chat_id(chat_id)
+        is_p2p = chat_id < 0  # type: ignore
         if config is None:
-            config = GroupCallConfig() \
-                if chat_id < 0 else CallConfig()  # type: ignore
-        if (
-            chat_id < 0 and  # type: ignore
-            not isinstance(config, GroupCallConfig)
-        ):
+            config = GroupCallConfig() if is_p2p else CallConfig()
+        if is_p2p and not isinstance(config, GroupCallConfig):
             raise ValueError(
                 'Group call config must be provided for group calls',
             )
         media_description = await StreamParams.get_stream_params(
             stream,
         )
 
@@ -117,25 +114,23 @@
                                 self._binding.get_protocol(),
                             )
                         else:
                             await self._app.request_call(
                                 chat_id,
                                 data.g_a_or_b,
                                 self._binding.get_protocol(),
-                                media_description.video is not None,
                             )
 
                         try:
                             result: RawCallUpdate = await asyncio.wait_for(
                                 data.wait_data,
                                 timeout=config.timeout,
                             )
                             auth_params = await self._binding.exchange_keys(
                                 chat_id,
-                                data.p,
                                 result.g_a_or_b,
                                 result.fingerprint,
                             )
                             if result.status & RawCallUpdate.Type.ACCEPTED:
                                 result.protocol = await self._app.confirm_call(
                                     chat_id,
                                     auth_params.g_a_or_b,
@@ -151,15 +146,15 @@
                         except asyncio.TimeoutError:
                             self._binding.stop(chat_id)
                             raise TimedOutAnswer()
                         finally:
                             self._p2p_configs.pop(chat_id, None)
                     break
                 except TelegramServerError:
-                    if retries == 3:
+                    if retries == 3 or is_p2p:
                         raise
                     (py_logger.warning if retries >= 1 else py_logger.info)(
                         f'Telegram is having some internal server issues. '
                         f'Retrying {retries + 1} of 3',
                     )
                 except Exception:
                     try:
```

## pytgcalls/methods/stream/played_time.py

```diff
@@ -1,12 +1,12 @@
 from typing import Union
 
 from ntgcalls import ConnectionNotFound
 
-from ...exceptions import NotInGroupCallError
+from ...exceptions import NotInCallError
 from ...mtproto_required import mtproto_required
 from ...scaffold import Scaffold
 from ...statictypes import statictypes
 
 
 class PlayedTime(Scaffold):
     @statictypes
@@ -15,8 +15,8 @@
         self,
         chat_id: Union[int, str],
     ):
         chat_id = await self.resolve_chat_id(chat_id)
         try:
             return await self._binding.time(chat_id)
         except ConnectionNotFound:
-            raise NotInGroupCallError()
+            raise NotInCallError()
```

## pytgcalls/methods/stream/resume_stream.py

```diff
@@ -1,12 +1,12 @@
 from typing import Union
 
 from ntgcalls import ConnectionNotFound
 
-from ...exceptions import NotInGroupCallError
+from ...exceptions import NotInCallError
 from ...mtproto_required import mtproto_required
 from ...scaffold import Scaffold
 from ...statictypes import statictypes
 
 
 class ResumeStream(Scaffold):
     @statictypes
@@ -15,8 +15,8 @@
         self,
         chat_id: Union[int, str],
     ):
         chat_id = await self.resolve_chat_id(chat_id)
         try:
             return await self._binding.resume(chat_id)
         except ConnectionNotFound:
-            raise NotInGroupCallError()
+            raise NotInCallError()
```

## pytgcalls/methods/stream/unmute_stream.py

```diff
@@ -1,12 +1,12 @@
 from typing import Union
 
 from ntgcalls import ConnectionNotFound
 
-from ...exceptions import NotInGroupCallError
+from ...exceptions import NotInCallError
 from ...mtproto_required import mtproto_required
 from ...scaffold import Scaffold
 from ...statictypes import statictypes
 
 
 class UnMuteStream(Scaffold):
     @statictypes
@@ -15,8 +15,8 @@
         self,
         chat_id: Union[int, str],
     ):
         chat_id = await self.resolve_chat_id(chat_id)
         try:
             return await self._binding.unmute(chat_id)
         except ConnectionNotFound:
-            raise NotInGroupCallError()
+            raise NotInCallError()
```

## pytgcalls/methods/utilities/call_holder.py

```diff
@@ -5,17 +5,17 @@
 from ...types.list import List
 
 
 class CallHolder(Scaffold):
     def __init__(self):
         super().__init__()
         self._conversions = {
-            StreamStatus.Playing: Call.Status.PLAYING,
-            StreamStatus.Paused: Call.Status.PAUSED,
-            StreamStatus.Idling: Call.Status.IDLE,
+            StreamStatus.PLAYING: Call.Status.PLAYING,
+            StreamStatus.PAUSED: Call.Status.PAUSED,
+            StreamStatus.IDLING: Call.Status.IDLE,
         }
 
     @property
     async def calls(self):
         calls_list: dict = await self._binding.calls()  # type: ignore
         return List([
             Call(x, self._conversions[calls_list[x]]) for x in calls_list
```

## pytgcalls/methods/utilities/start.py

```diff
@@ -1,14 +1,15 @@
 import asyncio
 import logging
 
 from ntgcalls import ConnectionNotFound
 from ntgcalls import MediaState
 from ntgcalls import StreamType
 
+from ...exceptions import CallDeclined
 from ...exceptions import PyTgCallsAlreadyRunning
 from ...mtproto import BridgedClient
 from ...pytgcalls_session import PyTgCallsSession
 from ...scaffold import Scaffold
 from ...types import CallData
 from ...types import ChatUpdate
 from ...types import RawCallUpdate
@@ -22,21 +23,28 @@
 
 class Start(Scaffold):
     async def start(self):
 
         @self._app.on_update()
         async def update_handler(update: Update):
             chat_id = update.chat_id
-            if isinstance(update, RawCallUpdate):
-                if update.chat_id in self._p2p_configs:
-                    if update.status & RawCallUpdate.Type.UPDATED_CALL:
-                        if not self._p2p_configs[chat_id].wait_data.done():
+            if update.chat_id in self._p2p_configs:
+                if not self._p2p_configs[chat_id].wait_data.done():
+                    if isinstance(update, RawCallUpdate):
+                        if update.status & RawCallUpdate.Type.UPDATED_CALL:
                             self._p2p_configs[chat_id].wait_data.set_result(
                                 update,
                             )
+                    if isinstance(update, ChatUpdate):
+                        if update.status & ChatUpdate.Status.DISCARDED_CALL:
+                            self._p2p_configs[chat_id].wait_data.set_exception(
+                                CallDeclined(
+                                    chat_id,
+                                ),
+                            )
             if isinstance(update, RawCallUpdate):
                 if update.status & RawCallUpdate.Type.REQUESTED:
                     self._p2p_configs[chat_id] = CallData(
                         await self._app.get_dhc(),
                         self.loop,
                         update.g_a_or_b,
                     )
@@ -82,15 +90,14 @@
             if not isinstance(update, RawCallUpdate):
                 await self.propagate(
                     update,
                     self,
                 )
 
         async def clear_call(chat_id):
-            self._p2p_configs.pop(chat_id, None)
             try:
                 await self._binding.stop(chat_id)
             except ConnectionNotFound:
                 pass
             await clear_cache(chat_id)
 
         async def update_status(chat_id: int, state: MediaState):
@@ -105,29 +112,35 @@
             except Exception as e:
                 py_logger.debug(f'SetVideoCallStatus: {e}')
 
         async def stream_ended(chat_id: int, stream: StreamType):
             await self.propagate(
                 StreamAudioEnded(
                     chat_id,
-                ) if stream == stream.Audio else
+                ) if stream == StreamType.AUDIO else
                 StreamVideoEnded(
                     chat_id,
                 ),
                 self,
             )
 
         async def emit_sig_data(chat_id: int, data: bytes):
             if chat_id in self._p2p_configs:
                 await self._app.send_signaling(
                     chat_id,
                     data,
                 )
 
+        async def disconnected(chat_id: int):
+            if chat_id > 0:
+                await self._app.discard_call(chat_id)
+            await clear_call(chat_id)
+
         async def clear_cache(chat_id: int):
+            self._p2p_configs.pop(chat_id, None)
             self._cache_user_peer.pop(chat_id)
             self._need_unmute.discard(chat_id)
 
         if not self._is_running:
             self._is_running = True
             self._env_checker.check_environment()
             if not self._app.is_connected:
@@ -157,15 +170,15 @@
                 lambda chat_id, state: asyncio.run_coroutine_threadsafe(
                     update_status(chat_id, state),
                     self.loop,
                 ),
             )
             self._binding.on_disconnect(
                 lambda chat_id: asyncio.run_coroutine_threadsafe(
-                    clear_cache(chat_id),
+                    disconnected(chat_id),
                     self.loop,
                 ),
             )
             self._binding.on_signaling(
                 lambda chat_id, data: asyncio.run_coroutine_threadsafe(
                     emit_sig_data(chat_id, data),
                     self.loop,
```

## pytgcalls/mtproto/bridged_client.py

```diff
@@ -30,15 +30,14 @@
         pass
 
     async def request_call(
         self,
         user_id: int,
         g_a_hash: bytes,
         protocol: Protocol,
-        video: bool,
     ):
         pass
 
     async def accept_call(
         self,
         user_id: int,
         g_b: bytes,
@@ -147,32 +146,27 @@
         )
 
     @staticmethod
     def chat_id(input_peer) -> int:
         class_name = input_peer.__class__.__name__
         if class_name in ['PeerUser', 'InputPeerUser']:
             return input_peer.user_id
-        elif (
-            hasattr(input_peer, 'channel_id') or
-            class_name in ['Channel', 'ChannelForbidden']
-        ):
-            return -1000000000000 - getattr(
-                input_peer,
-                'channel_id',
-                input_peer.id,
-            )
+        elif class_name in ['Channel', 'ChannelForbidden']:
+            return -1000000000000 - input_peer.id
+        elif hasattr(input_peer, 'channel_id'):
+            return -1000000000000 - input_peer.channel_id
         elif class_name == 'Chat':
             return -input_peer.id
         else:
             return -input_peer.chat_id
 
     @staticmethod
     def user_from_call(call) -> Optional[int]:
         class_name = call.__class__.__name__
-        if class_name == 'PhoneCallAccepted':
+        if class_name in ['PhoneCallAccepted', 'PhoneCallWaiting']:
             return call.participant_id
         elif class_name in ['PhoneCallRequested', 'PhoneCall']:
             return call.admin_id
         return None
 
     @staticmethod
     def parse_servers(servers) -> List[RTCServer]:
```

## pytgcalls/mtproto/hydrogram_client.py

```diff
@@ -39,14 +39,15 @@
 from hydrogram.raw.types import PeerChat
 from hydrogram.raw.types import PhoneCall
 from hydrogram.raw.types import PhoneCallAccepted
 from hydrogram.raw.types import PhoneCallDiscarded
 from hydrogram.raw.types import PhoneCallDiscardReasonHangup
 from hydrogram.raw.types import PhoneCallProtocol
 from hydrogram.raw.types import PhoneCallRequested
+from hydrogram.raw.types import PhoneCallWaiting
 from hydrogram.raw.types import UpdateChannel
 from hydrogram.raw.types import UpdateGroupCall
 from hydrogram.raw.types import UpdateGroupCallConnection
 from hydrogram.raw.types import UpdateGroupCallParticipants
 from hydrogram.raw.types import UpdateNewChannelMessage
 from hydrogram.raw.types import UpdateNewMessage
 from hydrogram.raw.types import UpdatePhoneCall
@@ -93,15 +94,15 @@
 
             if isinstance(
                 update,
                 UpdatePhoneCall,
             ):
                 if isinstance(
                     update.phone_call,
-                    (PhoneCallAccepted, PhoneCallRequested),
+                    (PhoneCallAccepted, PhoneCallRequested, PhoneCallWaiting),
                 ):
                     self._cache.set_phone_call(
                         self.user_from_call(update.phone_call),
                         InputPhoneCall(
                             id=update.phone_call.id,
                             access_hash=update.phone_call.access_hash,
                         ),
@@ -402,23 +403,22 @@
         return json.dumps({'transport': None})
 
     async def request_call(
         self,
         user_id: int,
         g_a_hash: bytes,
         protocol: Protocol,
-        video: bool,
     ):
         await self._app.invoke(
             RequestCall(
                 user_id=await self.resolve_peer(user_id),
                 random_id=self.rnd_id(),
                 g_a_hash=g_a_hash,
                 protocol=self.parse_protocol(protocol),
-                video=video,
+                video=False,
             ),
         )
 
     async def accept_call(
         self,
         user_id: int,
         g_b: bytes,
@@ -508,17 +508,20 @@
                 ),
             )
 
     async def discard_call(
         self,
         chat_id: int,
     ):
+        peer = self._cache.get_phone_call(chat_id)
+        if peer is None:
+            return
         await self._app.invoke(
             DiscardCall(
-                peer=self._cache.get_phone_call(chat_id),
+                peer=peer,
                 duration=0,
                 reason=PhoneCallDiscardReasonHangup(),
                 connection_id=0,
                 video=False,
             ),
         )
         self._cache.drop_phone_call(chat_id)
```

## pytgcalls/mtproto/mtproto_client.py

```diff
@@ -70,22 +70,20 @@
             raise InvalidMTProtoClient()
 
     async def request_call(
         self,
         user_id: int,
         g_a_hash: bytes,
         protocol: Protocol,
-        video: bool,
     ):
         if self._bind_client is not None:
             return await self._bind_client.request_call(
                 user_id,
                 g_a_hash,
                 protocol,
-                video,
             )
         else:
             raise InvalidMTProtoClient()
 
     async def accept_call(
         self,
         user_id: int,
```

## pytgcalls/mtproto/pyrogram_client.py

```diff
@@ -41,14 +41,15 @@
 from pyrogram.raw.types import PeerChat
 from pyrogram.raw.types import PhoneCall
 from pyrogram.raw.types import PhoneCallAccepted
 from pyrogram.raw.types import PhoneCallDiscarded
 from pyrogram.raw.types import PhoneCallDiscardReasonHangup
 from pyrogram.raw.types import PhoneCallProtocol
 from pyrogram.raw.types import PhoneCallRequested
+from pyrogram.raw.types import PhoneCallWaiting
 from pyrogram.raw.types import UpdateChannel
 from pyrogram.raw.types import UpdateGroupCall
 from pyrogram.raw.types import UpdateGroupCallConnection
 from pyrogram.raw.types import UpdateGroupCallParticipants
 from pyrogram.raw.types import UpdateNewChannelMessage
 from pyrogram.raw.types import UpdateNewMessage
 from pyrogram.raw.types import UpdatePhoneCall
@@ -101,15 +102,15 @@
 
             if isinstance(
                 update,
                 UpdatePhoneCall,
             ):
                 if isinstance(
                     update.phone_call,
-                    (PhoneCallAccepted, PhoneCallRequested),
+                    (PhoneCallAccepted, PhoneCallRequested, PhoneCallWaiting),
                 ):
                     self._cache.set_phone_call(
                         self.user_from_call(update.phone_call),
                         InputPhoneCall(
                             id=update.phone_call.id,
                             access_hash=update.phone_call.access_hash,
                         ),
@@ -297,16 +298,16 @@
                                             chat_id,
                                             ChatUpdate.Status.LEFT_GROUP,
                                         ),
                                     )
             raise ContinuePropagation()
 
     async def get_call(
-            self,
-            chat_id: int,
+        self,
+        chat_id: int,
     ) -> Optional[InputGroupCall]:
         chat = await self._app.resolve_peer(chat_id)
         if isinstance(chat, InputPeerChannel):
             input_call = (
                 await self._app.send(
                     GetFullChannel(
                         channel=InputChannel(
@@ -343,24 +344,24 @@
             GetDhConfig(
                 version=0,
                 random_length=256,
             ),
         )
 
     async def get_group_call_participants(
-            self,
-            chat_id: int,
+        self,
+        chat_id: int,
     ):
         return await self._cache.get_participant_list(
             chat_id,
         )
 
     async def get_participants(
-            self,
-            input_call: InputGroupCall,
+        self,
+        input_call: InputGroupCall,
     ) -> List[GroupCallParticipant]:
         return [
             self.parse_participant(participant)
             for participant in (
                 await self._app.send(
                     GetGroupParticipants(
                         call=input_call,
@@ -370,20 +371,20 @@
                         limit=500,
                     ),
                 )
             ).participants
         ]
 
     async def join_group_call(
-            self,
-            chat_id: int,
-            json_join: str,
-            invite_hash: str,
-            have_video: bool,
-            join_as: InputPeer,
+        self,
+        chat_id: int,
+        json_join: str,
+        invite_hash: str,
+        have_video: bool,
+        join_as: InputPeer,
     ) -> str:
         chat_call = await self._cache.get_full_chat(chat_id)
         if chat_call is not None:
             result: Updates = await self._app.send(
                 JoinGroupCall(
                     call=chat_call,
                     params=DataJSON(data=json_join),
@@ -410,23 +411,22 @@
         return json.dumps({'transport': None})
 
     async def request_call(
         self,
         user_id: int,
         g_a_hash: bytes,
         protocol: Protocol,
-        video: bool,
     ):
         await self._app.invoke(
             RequestCall(
                 user_id=await self.resolve_peer(user_id),
                 random_id=self.rnd_id(),
                 g_a_hash=g_a_hash,
                 protocol=self.parse_protocol(protocol),
-                video=video,
+                video=False,
             ),
         )
 
     async def accept_call(
         self,
         user_id: int,
         g_b: bytes,
@@ -516,49 +516,52 @@
                 ),
             )
 
     async def discard_call(
         self,
         chat_id: int,
     ):
+        peer = self._cache.get_phone_call(chat_id)
+        if peer is None:
+            return
         await self._app.invoke(
             DiscardCall(
-                peer=self._cache.get_phone_call(chat_id),
+                peer=peer,
                 duration=0,
                 reason=PhoneCallDiscardReasonHangup(),
                 connection_id=0,
                 video=False,
             ),
         )
         self._cache.drop_phone_call(chat_id)
 
     async def change_volume(
-            self,
-            chat_id: int,
-            volume: int,
-            participant: InputPeer,
+        self,
+        chat_id: int,
+        volume: int,
+        participant: InputPeer,
     ):
         chat_call = await self._cache.get_full_chat(chat_id)
         if chat_call is not None:
             await self._app.send(
                 EditGroupCallParticipant(
                     call=chat_call,
                     participant=participant,
                     muted=False,
                     volume=volume * 100,
                 ),
             )
 
     async def set_call_status(
-            self,
-            chat_id: int,
-            muted_status: Optional[bool],
-            paused_status: Optional[bool],
-            stopped_status: Optional[bool],
-            participant: InputPeer,
+        self,
+        chat_id: int,
+        muted_status: Optional[bool],
+        paused_status: Optional[bool],
+        stopped_status: Optional[bool],
+        participant: InputPeer,
     ):
         chat_call = await self._cache.get_full_chat(chat_id)
         if chat_call is not None:
             await self._app.send(
                 EditGroupCallParticipant(
                     call=chat_call,
                     participant=participant,
```

## pytgcalls/mtproto/telethon_client.py

```diff
@@ -35,14 +35,15 @@
 from telethon.tl.types import PeerChat
 from telethon.tl.types import PhoneCall
 from telethon.tl.types import PhoneCallAccepted
 from telethon.tl.types import PhoneCallDiscarded
 from telethon.tl.types import PhoneCallDiscardReasonHangup
 from telethon.tl.types import PhoneCallProtocol
 from telethon.tl.types import PhoneCallRequested
+from telethon.tl.types import PhoneCallWaiting
 from telethon.tl.types import TypeInputChannel
 from telethon.tl.types import TypeInputPeer
 from telethon.tl.types import TypeInputUser
 from telethon.tl.types import UpdateChannel
 from telethon.tl.types import UpdateGroupCall
 from telethon.tl.types import UpdateGroupCallConnection
 from telethon.tl.types import UpdateGroupCallParticipants
@@ -91,15 +92,15 @@
 
             if isinstance(
                 update,
                 UpdatePhoneCall,
             ):
                 if isinstance(
                     update.phone_call,
-                    (PhoneCallAccepted, PhoneCallRequested),
+                    (PhoneCallAccepted, PhoneCallRequested, PhoneCallWaiting),
                 ):
                     self._cache.set_phone_call(
                         self.user_from_call(update.phone_call),
                         InputPhoneCall(
                             id=update.phone_call.id,
                             access_hash=update.phone_call.access_hash,
                         ),
@@ -379,23 +380,22 @@
         return json.dumps({'transport': None})
 
     async def request_call(
         self,
         user_id: int,
         g_a_hash: bytes,
         protocol: Protocol,
-        video: bool,
     ):
         return await self._app(
             RequestCallRequest(
                 user_id=await self.resolve_peer(user_id),
                 random_id=self.rnd_id(),
                 g_a_hash=g_a_hash,
                 protocol=self.parse_protocol(protocol),
-                video=video,
+                video=False,
             ),
         )
 
     async def accept_call(
         self,
         user_id: int,
         g_b: bytes,
@@ -485,17 +485,20 @@
                 ),
             )
 
     async def discard_call(
         self,
         chat_id: int,
     ):
+        peer = self._cache.get_phone_call(chat_id)
+        if peer is None:
+            return
         await self._app(
             DiscardCallRequest(
-                peer=self._cache.get_phone_call(chat_id),
+                peer=peer,
                 duration=0,
                 reason=PhoneCallDiscardReasonHangup(),
                 connection_id=0,
                 video=False,
             ),
         )
         self._cache.drop_phone_call(chat_id)
```

## pytgcalls/types/stream/media_stream.py

```diff
@@ -236,11 +236,11 @@
             [flag for flag in combined_flags if flags & flag],
             key=lambda flag: flag.value,
         )
         return flags & ~combined_flags_value | potential_flag
 
     @staticmethod
     def _flags(flags: Flags) -> InputMode:
-        new_flags = InputMode.Shell
+        new_flags = InputMode.SHELL
         if flags & MediaStream.Flags.NO_LATENCY:
-            new_flags |= InputMode.NoLatency
+            new_flags |= InputMode.NO_LATENCY
         return new_flags
```

## Comparing `py_tgcalls-2.0.0rc2.dist-info/LICENSE` & `py_tgcalls-2.0.0rc3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `py_tgcalls-2.0.0rc2.dist-info/METADATA` & `py_tgcalls-2.0.0rc3.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: py-tgcalls
-Version: 2.0.0rc2
+Version: 2.0.0rc3
 Summary: UNKNOWN
 Home-page: https://github.com/pytgcalls/pytgcalls
 Author: Laky-64
 Author-email: iraci.matteo@gmail.com
 License: LGPL-3.0
 Platform: UNKNOWN
 Classifier: License :: OSI Approved :: GNU Lesser General Public License v3 (LGPLv3)
@@ -18,15 +18,15 @@
 Classifier: Programming Language :: Python :: 3.12
 Classifier: Programming Language :: Python :: Implementation :: CPython
 Requires-Python: >=3.8
 Description-Content-Type: text/markdown
 License-File: LICENSE
 Requires-Dist: aiohttp (>=3.9.3)
 Requires-Dist: deprecation
-Requires-Dist: ntgcalls (>=1.1.3)
+Requires-Dist: ntgcalls (>=1.2.0.b4)
 Requires-Dist: psutil
 Requires-Dist: screeninfo
 Requires-Dist: setuptools
 
 <img src="https://raw.githubusercontent.com/pytgcalls/pytgcalls/master/.github/images/banner.png" alt="pytgcalls logo" />
 <p align="center">
     <b>A simple and elegant client that allows you to make group voice calls quickly and easily.</b>
```

### html2text {}

```diff
@@ -1,20 +1,20 @@
-Metadata-Version: 2.1 Name: py-tgcalls Version: 2.0.0rc2 Summary: UNKNOWN Home-
+Metadata-Version: 2.1 Name: py-tgcalls Version: 2.0.0rc3 Summary: UNKNOWN Home-
 page: https://github.com/pytgcalls/pytgcalls Author: Laky-64 Author-email:
 iraci.matteo@gmail.com License: LGPL-3.0 Platform: UNKNOWN Classifier: License
 :: OSI Approved :: GNU Lesser General Public License v3 (LGPLv3) Classifier:
 Operating System :: OS Independent Classifier: Programming Language :: Python
 :: 3 Classifier: Programming Language :: Python :: 3 :: Only Classifier:
 Programming Language :: Python :: 3.8 Classifier: Programming Language ::
 Python :: 3.9 Classifier: Programming Language :: Python :: 3.10 Classifier:
 Programming Language :: Python :: 3.11 Classifier: Programming Language ::
 Python :: 3.12 Classifier: Programming Language :: Python :: Implementation ::
 CPython Requires-Python: >=3.8 Description-Content-Type: text/markdown License-
 File: LICENSE Requires-Dist: aiohttp (>=3.9.3) Requires-Dist: deprecation
-Requires-Dist: ntgcalls (>=1.1.3) Requires-Dist: psutil Requires-Dist:
+Requires-Dist: ntgcalls (>=1.2.0.b4) Requires-Dist: psutil Requires-Dist:
 screeninfo Requires-Dist: setuptools[pytgcalls logo]
  AA ssiimmppllee aanndd eelleeggaanntt cclliieenntt tthhaatt aalllloowwss yyoouu ttoo mmaakkee ggrroouupp vvooiiccee ccaallllss qquuiicckkllyy
                                  aanndd eeaassiillyy..
            _E_x_a_m_p_l_e_s_  _D_o_c_u_m_e_n_t_a_t_i_o_n_  _P_y_P_i_  _C_h_a_n_n_e_l_  _C_h_a_t
 # PyTgCalls [![PyPI](https://img.shields.io/pypi/v/py-
 tgcalls.svg?logo=python&logoColor=%23959DA5&label=pypi&labelColor=%23282f37)]
 (https://pypi.org/project/py-tgcalls/) [![Downloads](https://pepy.tech/badge/
```

## Comparing `py_tgcalls-2.0.0rc2.dist-info/RECORD` & `py_tgcalls-2.0.0rc3.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 pytgcalls/__init__.py,sha256=TfZGf1enqqs50mBB406vygB6zYgn3vAjBYFUDO4Pviw,248
-pytgcalls/__version__.py,sha256=9mj-rh8xPacGvkhlbfmJuLzTPpmZa4UVQt74z5bJOR4,25
+pytgcalls/__version__.py,sha256=vKxTj9noUY05HBNxeQr2XsQn3xjltT-yAEPqn4h2H9Q,25
 pytgcalls/environment.py,sha256=ctCHACvG6l8SdpPewSBhOvc70kbwpv18maC0TwLvZ08,1924
-pytgcalls/exceptions.py,sha256=-h2WqnZeXbFIojcXSMsvYzsLOZiVZKzp4uZ00d-GTTA,3824
+pytgcalls/exceptions.py,sha256=F4BvlBARLp_Bc2uo6OUlSZvkrNnpBngHE7HZMUgdcvI,3957
 pytgcalls/ffmpeg.py,sha256=1GavkVf562Y_8cT4EZxxj_b7Y0-l8yyGkX0D5eUHeas,8520
 pytgcalls/filters.py,sha256=cmFWhRkgjQMk1WQqnd-hOAvM6x3dufJ1xjQAEL1vKLQ,4409
 pytgcalls/mtproto_required.py,sha256=6B-31p5qH_6oekUgypV4nK3hqPS6Nr-pA8S81wjnbaY,630
 pytgcalls/mutex.py,sha256=fSsAL4NuB7esBG90k4eUX388Knpr1_76Mz5BZlkSC0w,1119
-pytgcalls/pytgcalls.py,sha256=H8B5-16bn5xk5J7N4njJW-xIEMTPeYVxcBAomzn1gbs,1583
+pytgcalls/pytgcalls.py,sha256=VI9aRwPE-Lo1lh18ByOnkFxf1_8tq2ECyz5igPo1r8w,1443
 pytgcalls/pytgcalls_session.py,sha256=_BGJWvf7t3mki2DhlEPjh9cypvYuSFkMSxzTsfepwUk,2719
 pytgcalls/scaffold.py,sha256=CSRLYfc4wGv0RE3JMPkmEV3JgFv5Ivh5REp1YkzPFfY,950
 pytgcalls/statictypes.py,sha256=CdlqgQNhTZ_uTE8-B8m01fJ7TlD2B42EI2QBPxDdAtA,3842
 pytgcalls/sync.py,sha256=IsOH3TD7cxUg_-zdGt12HoS8sBlXvcGayPZAoxxKM48,3396
 pytgcalls/version_manager.py,sha256=egeGgvb66zWlLTMuw2U-b0x8MfnRzMm1xAEVN87HF5c,296
 pytgcalls/ytdlp.py,sha256=4Sl0L2uEmBSeRYfpavtAmxv41AOiQ3LotEjrqRbehc0,1961
 pytgcalls/custom_api/__init__.py,sha256=ZT8d0lc2YrDuw_YSFAXXHHMewoXGFZ-ANOBIAr0vGFQ,60
@@ -21,42 +21,42 @@
 pytgcalls/media_devices/device_info.py,sha256=KueJCRVXXDcxQJzoGfkzcD2kL58pkMUn7Fr3aUwnNtQ,489
 pytgcalls/media_devices/media_devices.py,sha256=0zCst7GzMHg9QyvNwGUyuveFzfvwUGEGfU8RrLnFH_I,3149
 pytgcalls/media_devices/screen_info.py,sha256=ARD5nQoYDUt1rU-kOK8G5O5byGXGeFbZWWdDswdCDHc,1107
 pytgcalls/methods/__init__.py,sha256=hk1blAT5u_Isemdrg0nqInLsdRzTTZnak5NdAfkBPAk,217
 pytgcalls/methods/calls/__init__.py,sha256=xg4DZZClEnxwaj-DAq3e8gSR-g-MiYBdUEBth64lSXA,214
 pytgcalls/methods/calls/change_volume_call.py,sha256=viA3yHVxPJ421yE1dfFTh-kNEFTxMlaVFxVjC-PeX-0,719
 pytgcalls/methods/calls/get_participants.py,sha256=dT725XXn9oiTbWV6mFradIydoQUx_COPButivDhzAxE,568
-pytgcalls/methods/calls/leave_call.py,sha256=VdJeift1afC3REU-yE3M85lToZeQieVlUj_SdPZJMi4,1101
+pytgcalls/methods/calls/leave_call.py,sha256=ZjZbjlQn8KuX3mUjzXfX42EpL9_iU3fsXYdidfqUrUM,1091
 pytgcalls/methods/decorators/__init__.py,sha256=TCGaEVZnHjtOwv-3PNfaCVm0kyFhJApUPUNntt6MwyM,78
 pytgcalls/methods/decorators/on_update.py,sha256=ZTL4YcQk0N4Ru56a5WItUvkSN5SAqr6_RDZvXmZMIHs,316
 pytgcalls/methods/stream/__init__.py,sha256=_4j-CEby4_2Kadva86tFMC4GSSzhBBjKLXfrgTk4gzo,343
-pytgcalls/methods/stream/mute_stream.py,sha256=djw-CeH01kcviBVW9kMrMg_OYbtRjZhunDI953So9J4,580
-pytgcalls/methods/stream/pause_stream.py,sha256=QLGN_vtTC17YSgIlwcYhUCBWaaCZeFPIksQ9pId5V9A,583
-pytgcalls/methods/stream/play.py,sha256=UzwnbA-cPnWDomPkzOK5Lqk7iOV99WyMJD0LQBAFT_Q,7305
-pytgcalls/methods/stream/played_time.py,sha256=7L9nK8AQRQ-jEIIEOYgOcEksa86iql8K4ryh__e3KVk,580
-pytgcalls/methods/stream/resume_stream.py,sha256=IW5LPtkFcJiprm39FsJa1F_UssRmbD-kyx9LYwO4mI4,586
-pytgcalls/methods/stream/unmute_stream.py,sha256=H2ZmdG0p3BTqMpgLabM3U6S_r1K9DNvmJGs6Rjloel4,586
+pytgcalls/methods/stream/mute_stream.py,sha256=auo2aAazfEC90Ab6MzaiPdddiJ1w4fN_9HaORkAeOBY,570
+pytgcalls/methods/stream/pause_stream.py,sha256=z_AIWABrQMHmTwvlah_PrH9EjXbro8gKxZni4Km5ICg,573
+pytgcalls/methods/stream/play.py,sha256=uV-yr1S6I6_x6owfKxfQ3NqwvN9iFU4BAp8YizLqRcs,7155
+pytgcalls/methods/stream/played_time.py,sha256=IkUdyHrqpzpRl9uf0uZhg1COo4zsHnQOPu3nipjVatI,570
+pytgcalls/methods/stream/resume_stream.py,sha256=z_DgP4cDExjEqEeX_ZL--50MXQ9lrATK876SIwE71PQ,576
+pytgcalls/methods/stream/unmute_stream.py,sha256=KUMhfMbhsPmZsmpF4cGWC1FVW7YwXha2MmQnqrBhM8s,576
 pytgcalls/methods/utilities/__init__.py,sha256=JcKwqNo6fFXXfuab94fNEraKF1P9fnSSgr0WQDRjF2w,339
 pytgcalls/methods/utilities/cache_peer.py,sha256=Ylt0wCCJOoNKf1wZEXjfE8aBZKUIIgdRUFOMTGA5DfE,140
-pytgcalls/methods/utilities/call_holder.py,sha256=Ateys37G06hliEyyIGYfP08e9AH6P1R5NNxKjuPqrQk,903
+pytgcalls/methods/utilities/call_holder.py,sha256=RZ9DFhZO66ghtGqxLbYS86hq2UCjTzTiN_xzL5bgD-M,903
 pytgcalls/methods/utilities/compose.py,sha256=Nzdv8orMmka5NIBZ1SW1nsqXRzArZl4m6FdZU7syaR4,334
 pytgcalls/methods/utilities/cpu_usage.py,sha256=Mbga4MFCIwuh7WC8sqBbv1Pa6ALcp5AIDyfYMH_Bix4,162
 pytgcalls/methods/utilities/idle.py,sha256=lkjbYzpU7iz-maE0kS6RVtHJ4h1PsmGqnZmaENGIKeE,768
 pytgcalls/methods/utilities/ping.py,sha256=hhIMSHk2BzMB-IKpwLdZFVrsEvGm2ftJwKLs1k4anh8,244
 pytgcalls/methods/utilities/resolve_chat_id.py,sha256=92x2LHbUlnJMm-kS3fXOYmzYpY2TZbqtQD2rw3eBXDY,382
 pytgcalls/methods/utilities/run.py,sha256=cnYQd2xB5Cr_WS0Q2cXJZPGiN6JOCULzj1r4xXVyrlg,152
-pytgcalls/methods/utilities/start.py,sha256=99ey8496uzFdntiPg4wbveRebY05dYIglXpSnrl5Pec,6702
+pytgcalls/methods/utilities/start.py,sha256=u3quwI6z8zWdR50Tbzz_3LHGWjrNzgaM6g-WBl7cnmw,7281
 pytgcalls/methods/utilities/stream_params.py,sha256=hYcNxx__McmPeHgOUDEuNcN7ThgDjukejQYHrfmWm-A,1519
 pytgcalls/mtproto/__init__.py,sha256=X4zvzFG7km7qHyE0fdvA550WcOVO_xl_p__gvIfDGmw,130
-pytgcalls/mtproto/bridged_client.py,sha256=LBY1bsyOVyUqNT8RtxPj-Lbq-SGvbJ4L28AFgO_Claw,5039
+pytgcalls/mtproto/bridged_client.py,sha256=kK22n-CKjtfmtNE6bXCpuL6kWAUK2_Ul7cGgx_HNuHQ,4975
 pytgcalls/mtproto/client_cache.py,sha256=LYjmvhgaaEyczoJFZ35vGXFlN4ADwXYvt1bhrVS4ipw,5088
-pytgcalls/mtproto/hydrogram_client.py,sha256=SIYdKPw_1Epp1BLExIF4fDh3VCbUcpEAJGVf_GWfyoQ,20904
-pytgcalls/mtproto/mtproto_client.py,sha256=Bk5N2OtKR-zvwHotGtTs6kmr9a2JX0bWxocxYTxgTDo,6928
-pytgcalls/mtproto/pyrogram_client.py,sha256=IpPteY4b-dHBJ-T-FNo2VEkAwnVXiyMznCXsBlof6u4,21182
-pytgcalls/mtproto/telethon_client.py,sha256=mg-2LapOHXWPAp5614LjxnY2T-SOOtOd75J3iWEIOwQ,19997
+pytgcalls/mtproto/hydrogram_client.py,sha256=TgItS6KKPJna1yIXJ7iXflfRWRpPvMXHoRKzo6q09lE,21014
+pytgcalls/mtproto/mtproto_client.py,sha256=rqsUOE7llTXSAru9GfBMhUKufEgWQL65QLHRj4TEfgw,6884
+pytgcalls/mtproto/pyrogram_client.py,sha256=cNaQu00rZTFVTj3CE2V_eL5yT1XcGwkgwcGfb6aa53s,21203
+pytgcalls/mtproto/telethon_client.py,sha256=GFZ0LM8PXRVXwJfYV_gVVZ_qjEmWCJD_nmqiPE8oCCo,20105
 pytgcalls/types/__init__.py,sha256=JTMTa2flwWkBSEjhAAXE0oL4IJFRb12XU0npp9Neypc,1071
 pytgcalls/types/browsers.py,sha256=47Kr5q96n4Q4WvVhA6IUlS2egEcA9GRLlDeFcQYyc9M,9545
 pytgcalls/types/cache.py,sha256=FfsOcmYnsBGPlJoTPIXXYcUSpGE3rhx6cjIH77hyUL0,1059
 pytgcalls/types/list.py,sha256=UjP_XxxMpPkLlu6yEy29JYqOM5VITFwwJcDm0wZni1c,78
 pytgcalls/types/participant_list.py,sha256=-thRoLgnsTW9ujPHNEwrWgOY8GRwsl_k99DslsHLDQ0,879
 pytgcalls/types/py_object.py,sha256=VlazuMP0cFpExKimW8BtWR66LDewnNdQSLC7r_t7JIM,842
 pytgcalls/types/update.py,sha256=wPCzWLhrsScZ3ksRTyt8IuDaaG5YI-ItG_Yw-OqzK2Y,157
@@ -78,16 +78,16 @@
 pytgcalls/types/raw/audio_parameters.py,sha256=1DsBPwdn_Ukd2Tbkb3whP_ILo9xJY_3XNNmbO4_NO9Q,449
 pytgcalls/types/raw/audio_stream.py,sha256=wEMa93hHt0VBUSuS6gPJlFIGZp5GdNU94O2C2u4AXnY,476
 pytgcalls/types/raw/stream.py,sha256=jCvFUSAdHupqMqfG1E36CgKijKoy0o2LUbgcVjj5Mz0,491
 pytgcalls/types/raw/video_parameters.py,sha256=LXBpdaw5vyNayVfgtmF-gRkCY_ATwAnunRDs75FQJTw,545
 pytgcalls/types/raw/video_stream.py,sha256=2Chrk7NFWF1H9V7hH71RZ5rF3iBhT53syFkHKw4-5gc,433
 pytgcalls/types/stream/__init__.py,sha256=xfF-9ZulOLk3E6G1nw1Ky0ZRWXlFuER0Uj8HQn3650w,338
 pytgcalls/types/stream/audio_quality.py,sha256=4X94ErmTeLP4TVcE3eLtPPdtluSPxgxbgTosuNJOVhc,141
-pytgcalls/types/stream/media_stream.py,sha256=68ji9bDw6edXFcnB5391kdsJrLTDUdjRPNlG0pZBiHA,8978
+pytgcalls/types/stream/media_stream.py,sha256=vH32FrwdMSA9-S54bvessVHewh_l-5WXqupQE8pe-x4,8979
 pytgcalls/types/stream/stream_audio_ended.py,sha256=2_EFa98F0vWu0d0jBmLtzp4NH_xBkDO_6yP9UtyKuCs,164
 pytgcalls/types/stream/stream_video_ended.py,sha256=9YFTTZPMDpB95eb815rGtgDrzBGfTeazJ5mZwP6Hvks,164
 pytgcalls/types/stream/video_quality.py,sha256=HBfWq005kh-D19MaVE9VzVdnODzrXf4IJUimCfslfiU,231
-py_tgcalls-2.0.0rc2.dist-info/LICENSE,sha256=46mU2C5kSwOnkqkw9XQAJlhBL2JAf1_uCD8lVcXyMRg,7652
-py_tgcalls-2.0.0rc2.dist-info/METADATA,sha256=knBJQ-o80woqWPY4hnlesmREiP9Vvq3y5KRKfM8jXa0,4883
-py_tgcalls-2.0.0rc2.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-py_tgcalls-2.0.0rc2.dist-info/top_level.txt,sha256=IUDUwn0KkcbUYZbCe9R5AUb2Ob-lmllNUGQqyeXXd8A,10
-py_tgcalls-2.0.0rc2.dist-info/RECORD,,
+py_tgcalls-2.0.0rc3.dist-info/LICENSE,sha256=46mU2C5kSwOnkqkw9XQAJlhBL2JAf1_uCD8lVcXyMRg,7652
+py_tgcalls-2.0.0rc3.dist-info/METADATA,sha256=HrXKhzCJfXyyzAdgc3hO_AVbvh591gXfm-MVQmL8u1c,4886
+py_tgcalls-2.0.0rc3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+py_tgcalls-2.0.0rc3.dist-info/top_level.txt,sha256=IUDUwn0KkcbUYZbCe9R5AUb2Ob-lmllNUGQqyeXXd8A,10
+py_tgcalls-2.0.0rc3.dist-info/RECORD,,
```

